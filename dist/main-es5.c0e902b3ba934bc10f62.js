!function(){function e(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function t(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],i=!0,r=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(i=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);i=!0);}catch(l){r=!0,a=l}finally{try{i||null==s.return||s.return()}finally{if(r)throw a}}return n}(e,t)||r(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=r(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,a=function(){};return{s:a,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,l=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return s=e.done,e},e:function(e){l=!0,o=e},f:function(){try{s||null==n.return||n.return()}finally{if(l)throw o}}}}function i(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||r(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(e,t){if(e){if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function o(e,t,n){return(o=v()?Reflect.construct:function(e,t,n){var i=[null];i.push.apply(i,t);var r=new(Function.bind.apply(e,i));return n&&c(r,n.prototype),r}).apply(null,arguments)}function s(e,t,n){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=f(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){var t=v();return function(){var n,i=f(e);if(t){var r=f(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return d(this,n)}}function d(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?h(e):t}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function m(e,t,n){return t&&g(e.prototype,t),n&&g(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{0:function(e,t,n){e.exports=n("zUnb")},KtZj:function(e,t,n){"use strict";var i,r;"undefined"!=typeof window&&window,void 0===(r="function"==typeof(i=function(){if("undefined"==typeof window)return null;var e="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")(),t=e.requestAnimationFrame||e.mozRequestAnimationFrame||e.webkitRequestAnimationFrame||function(t){return e.setTimeout(t,20)},n=e.cancelAnimationFrame||e.mozCancelAnimationFrame||e.webkitCancelAnimationFrame||function(t){e.clearTimeout(t)};function i(e,t){var n=Object.prototype.toString.call(e),i="[object Array]"===n||"[object NodeList]"===n||"[object HTMLCollection]"===n||"[object Object]"===n||"undefined"!=typeof jQuery&&e instanceof jQuery||"undefined"!=typeof Elements&&e instanceof Elements,r=0,a=e.length;if(i)for(;r<a;r++)t(e[r]);else t(e)}function r(e){if(!e.getBoundingClientRect)return{width:e.offsetWidth,height:e.offsetHeight};var t=e.getBoundingClientRect();return{width:Math.round(t.width),height:Math.round(t.height)}}function a(e,t){Object.keys(t).forEach((function(n){e.style[n]=t[n]}))}var o=function e(o,s){var l=0;function c(){var e,t,n=[];this.add=function(e){n.push(e)},this.call=function(i){for(e=0,t=n.length;e<t;e++)n[e].call(this,i)},this.remove=function(i){var r=[];for(e=0,t=n.length;e<t;e++)n[e]!==i&&r.push(n[e]);n=r},this.length=function(){return n.length}}i(o,(function(e){!function(e,n){if(e)if(e.resizedAttached)e.resizedAttached.add(n);else{e.resizedAttached=new c,e.resizedAttached.add(n),e.resizeSensor=document.createElement("div"),e.resizeSensor.dir="ltr",e.resizeSensor.className="resize-sensor";var i={pointerEvents:"none",position:"absolute",left:"0px",top:"0px",right:"0px",bottom:"0px",overflow:"hidden",zIndex:"-1",visibility:"hidden",maxWidth:"100%"},o={position:"absolute",left:"0px",top:"0px",transition:"0s"};a(e.resizeSensor,i);var s=document.createElement("div");s.className="resize-sensor-expand",a(s,i);var u=document.createElement("div");a(u,o),s.appendChild(u);var d=document.createElement("div");d.className="resize-sensor-shrink",a(d,i);var h=document.createElement("div");a(h,o),a(h,{width:"200%",height:"200%"}),d.appendChild(h),e.resizeSensor.appendChild(s),e.resizeSensor.appendChild(d),e.appendChild(e.resizeSensor);var v=window.getComputedStyle(e),f=v?v.getPropertyValue("position"):null;"absolute"!==f&&"relative"!==f&&"fixed"!==f&&"sticky"!==f&&(e.style.position="relative");var p=!1,g=0,m=r(e),b=0,y=0,k=!0;l=0;var C=function n(){if(k){if(0===e.offsetWidth&&0===e.offsetHeight)return void(l||(l=t((function(){l=0,n()}))));k=!1}var i,r;r=e.offsetHeight,u.style.width=(i=e.offsetWidth)+10+"px",u.style.height=r+10+"px",s.scrollLeft=i+10,s.scrollTop=r+10,d.scrollLeft=i+10,d.scrollTop=r+10};e.resizeSensor.resetSensor=C;var V=function(){g=0,p&&(b=m.width,y=m.height,e.resizedAttached&&e.resizedAttached.call(m))},w=function(){m=r(e),(p=m.width!==b||m.height!==y)&&!g&&(g=t(V)),C()},A=function(e,t,n){e.attachEvent?e.attachEvent("on"+t,n):e.addEventListener(t,n)};A(s,"scroll",w),A(d,"scroll",w),l=t((function(){l=0,C()}))}}(e,s)})),this.detach=function(t){l||(n(l),l=0),e.detach(o,t)},this.reset=function(){o.resizeSensor.resetSensor()}};if(o.reset=function(e){i(e,(function(e){e.resizeSensor.resetSensor()}))},o.detach=function(e,t){i(e,(function(e){e&&(e.resizedAttached&&"function"==typeof t&&(e.resizedAttached.remove(t),e.resizedAttached.length())||e.resizeSensor&&(e.contains(e.resizeSensor)&&e.removeChild(e.resizeSensor),delete e.resizeSensor,delete e.resizedAttached))}))},"undefined"!=typeof MutationObserver){var s=new MutationObserver((function(e){for(var t in e)if(e.hasOwnProperty(t))for(var n=e[t].addedNodes,i=0;i<n.length;i++)n[i].resizeSensor&&o.reset(n[i])}));document.addEventListener("DOMContentLoaded",(function(e){s.observe(document.body,{childList:!0,subtree:!0})}))}return o})?i.call(t,n,t,e):i)||(e.exports=r)},crnd:function(e,t){function n(e){return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}))}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id="crnd"},h9Sk:function(e,t,n){e.exports={ResizeSensor:n("KtZj"),ElementQueries:n("rnKy")}},rnKy:function(e,t,n){"use strict";var i,r,a;"undefined"!=typeof window&&window,r=[n("KtZj")],void 0===(a="function"==typeof(i=function(e){var t=function(){var t,n={},i=[];function r(e){e||(e=document.documentElement);var t=window.getComputedStyle(e,null).fontSize;return parseFloat(t)||16}function a(e,t){var n=t.split(/\d/),i=n[n.length-1];switch(t=parseFloat(t),i){case"px":return t;case"em":return t*r(e);case"rem":return t*r();case"vw":return t*document.documentElement.clientWidth/100;case"vh":return t*document.documentElement.clientHeight/100;case"vmin":case"vmax":var a=document.documentElement.clientWidth/100,o=document.documentElement.clientHeight/100;return t*(0,Math["vmin"===i?"min":"max"])(a,o);default:return t}}function o(e,t){var i,r,o,s,l,c,u,d;this.element=e;var h=["min-width","min-height","max-width","max-height"];this.call=function(){for(i in o=function(e){if(!e.getBoundingClientRect)return{width:e.offsetWidth,height:e.offsetHeight};var t=e.getBoundingClientRect();return{width:Math.round(t.width),height:Math.round(t.height)}}(this.element),c={},n[t])n[t].hasOwnProperty(i)&&(s=a(this.element,(r=n[t][i]).value),l="width"===r.property?o.width:o.height,u="","min"===r.mode&&l>=s&&(u+=r.value),"max"===r.mode&&l<=s&&(u+=r.value),c[d=r.mode+"-"+r.property]||(c[d]=""),u&&-1===(" "+c[d]+" ").indexOf(" "+u+" ")&&(c[d]+=" "+u));for(var e in h)h.hasOwnProperty(e)&&(c[h[e]]?this.element.setAttribute(h[e],c[h[e]].substr(1)):this.element.removeAttribute(h[e]))}}function s(t,n){t.elementQueriesSetupInformation||(t.elementQueriesSetupInformation=new o(t,n)),t.elementQueriesSensor||(t.elementQueriesSensor=new e(t,(function(){t.elementQueriesSetupInformation.call()})))}function l(e,r,a,o){if(void 0===n[e]){n[e]=[];var s=i.length;t.innerHTML+="\n"+e+" {animation: 0.1s element-queries;}",t.innerHTML+="\n"+e+" > .resize-sensor {min-width: "+s+"px;}",i.push(e)}n[e].push({mode:r,property:a,value:o})}function c(e){var t;if(document.querySelectorAll&&(t=e?e.querySelectorAll.bind(e):document.querySelectorAll.bind(document)),t||"undefined"==typeof $$||(t=$$),t||"undefined"==typeof jQuery||(t=jQuery),!t)throw"No document.querySelectorAll, jQuery or Mootools's $$ found.";return t}function u(t){var n=[],i=[],r=[],a=0,o=-1,s=[];for(var l in t.children)if(t.children.hasOwnProperty(l)&&t.children[l].tagName&&"img"===t.children[l].tagName.toLowerCase()){n.push(t.children[l]);var c=t.children[l].getAttribute("min-width")||t.children[l].getAttribute("data-min-width"),u=t.children[l].getAttribute("data-src")||t.children[l].getAttribute("url");r.push(u),i.push({minWidth:c}),c?t.children[l].style.display="none":(a=n.length-1,t.children[l].style.display="block")}function d(){var e,l=!1;for(e in n)n.hasOwnProperty(e)&&i[e].minWidth&&t.offsetWidth>i[e].minWidth&&(l=e);if(l||(l=a),o!==l)if(s[l])n[o].style.display="none",n[l].style.display="block",o=l;else{var c=new Image;c.onload=function(){n[l].src=r[l],n[o].style.display="none",n[l].style.display="block",s[l]=!0,o=l},c.src=r[l]}else n[l].src=r[l]}o=a,t.resizeSensorInstance=new e(t,d),d()}var d=/,?[\s\t]*([^,\n]*?)((?:\[[\s\t]*?(?:min|max)-(?:width|height)[\s\t]*?[~$\^]?=[\s\t]*?"[^"]*?"[\s\t]*?])+)([^,\n\s\{]*)/gim,h=/\[[\s\t]*?(min|max)-(width|height)[\s\t]*?[~$\^]?=[\s\t]*?"([^"]*?)"[\s\t]*?]/gim;function v(e){var t,n,i,r;for(e=e.replace(/'/g,'"');null!==(t=d.exec(e));)for(n=t[1]+t[3],i=t[2];null!==(r=h.exec(i));)l(n,r[1],r[2],r[3])}function f(e){var t="";if(e)if("string"==typeof e)-1===(e=e.toLowerCase()).indexOf("min-width")&&-1===e.indexOf("max-width")||v(e);else for(var n=0,i=e.length;n<i;n++)1===e[n].type?-1!==(t=e[n].selectorText||e[n].cssText).indexOf("min-height")||-1!==t.indexOf("max-height")?v(t):-1===t.indexOf("min-width")&&-1===t.indexOf("max-width")||v(t):4===e[n].type?f(e[n].cssRules||e[n].rules):3===e[n].type&&e[n].styleSheet.hasOwnProperty("cssRules")&&f(e[n].styleSheet.cssRules)}var p=!1;this.init=function(){var n="animationstart";void 0!==document.documentElement.style.webkitAnimationName?n="webkitAnimationStart":void 0!==document.documentElement.style.MozAnimationName?n="mozanimationstart":void 0!==document.documentElement.style.OAnimationName&&(n="oanimationstart"),document.body.addEventListener(n,(function(t){var n=t.target,r=n&&window.getComputedStyle(n,null),a=r&&r.getPropertyValue("animation-name");if(a&&-1!==a.indexOf("element-queries")){n.elementQueriesSensor=new e(n,(function(){n.elementQueriesSetupInformation&&n.elementQueriesSetupInformation.call()}));var o=window.getComputedStyle(n.resizeSensor,null).getPropertyValue("min-width");o=parseInt(o.replace("px","")),s(t.target,i[o])}})),p||((t=document.createElement("style")).type="text/css",t.innerHTML="[responsive-image] > img, [data-responsive-image] {overflow: hidden; padding: 0; } [responsive-image] > img, [data-responsive-image] > img {width: 100%;}",t.innerHTML+="\n@keyframes element-queries { 0% { visibility: inherit; } }",document.getElementsByTagName("head")[0].appendChild(t),p=!0);for(var r=0,a=document.styleSheets.length;r<a;r++)try{document.styleSheets[r].href&&0===document.styleSheets[r].href.indexOf("file://")&&console.warn("CssElementQueries: unable to parse local css files, "+document.styleSheets[r].href),f(document.styleSheets[r].cssRules||document.styleSheets[r].rules||document.styleSheets[r].cssText)}catch(o){}!function(){for(var e=c()("[data-responsive-image],[responsive-image]"),t=0,n=e.length;t<n;t++)u(e[t])}()},this.findElementQueriesElements=function(e){!function(e){var t=c(e);for(var i in n)if(n.hasOwnProperty(i))for(var r=t(i,e),a=0,o=r.length;a<o;a++)s(r[a],i)}(e)},this.update=function(){this.init()}};return t.update=function(){t.instance.update()},t.detach=function(e){e.elementQueriesSetupInformation?(e.elementQueriesSensor.detach(),delete e.elementQueriesSetupInformation,delete e.elementQueriesSensor):e.resizeSensorInstance&&(e.resizeSensorInstance.detach(),delete e.resizeSensorInstance)},t.init=function(){t.instance||(t.instance=new t),t.instance.init()},t.findElementQueriesElements=function(e){t.instance.findElementQueriesElements(e)},t.listen=function(){!function(e){if(document.addEventListener)document.addEventListener("DOMContentLoaded",e,!1);else if(/KHTML|WebKit|iCab/i.test(navigator.userAgent))var t=setInterval((function(){/loaded|complete/i.test(document.readyState)&&(e(),clearInterval(t))}),10);else window.onload=e}(t.init)},t})?i.apply(t,r):i)||(e.exports=a)},zUnb:function(r,a,c){"use strict";function v(e){return"function"==typeof e}c.r(a);var g=!1,b={Promise:void 0,set useDeprecatedSynchronousErrorHandling(e){if(e){var t=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+t.stack)}else g&&console.log("RxJS: Back to a better error behavior. Thank you. <3");g=e},get useDeprecatedSynchronousErrorHandling(){return g}};function y(e){setTimeout((function(){throw e}),0)}var k={closed:!0,next:function(e){},error:function(e){if(b.useDeprecatedSynchronousErrorHandling)throw e;y(e)},complete:function(){}},C=Array.isArray||function(e){return e&&"number"==typeof e.length};function V(e){return null!==e&&"object"==typeof e}var w,A=function(){function e(e){return Error.call(this),this.message=e?"".concat(e.length," errors occurred during unsubscription:\n").concat(e.map((function(e,t){return"".concat(t+1,") ").concat(e.toString())})).join("\n  ")):"",this.name="UnsubscriptionError",this.errors=e,this}return e.prototype=Object.create(Error.prototype),e}(),P=((w=function(){function e(t){p(this,e),this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._ctorUnsubscribe=!0,this._unsubscribe=t)}return m(e,[{key:"unsubscribe",value:function(){var t;if(!this.closed){var n=this._parentOrParents,i=this._ctorUnsubscribe,r=this._unsubscribe,a=this._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof e)n.remove(this);else if(null!==n)for(var o=0;o<n.length;++o)n[o].remove(this);if(v(r)){i&&(this._unsubscribe=void 0);try{r.call(this)}catch(u){t=u instanceof A?D(u.errors):[u]}}if(C(a))for(var s=-1,l=a.length;++s<l;){var c=a[s];if(V(c))try{c.unsubscribe()}catch(u){t=t||[],u instanceof A?t=t.concat(D(u.errors)):t.push(u)}}if(t)throw new A(t)}}},{key:"add",value:function(t){var n=t;if(!t)return e.EMPTY;switch(typeof t){case"function":n=new e(t);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof e)){var i=n;(n=new e)._subscriptions=[i]}break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.")}var r=n._parentOrParents;if(null===r)n._parentOrParents=this;else if(r instanceof e){if(r===this)return n;n._parentOrParents=[r,this]}else{if(-1!==r.indexOf(this))return n;r.push(this)}var a=this._subscriptions;return null===a?this._subscriptions=[n]:a.push(n),n}},{key:"remove",value:function(e){var t=this._subscriptions;if(t){var n=t.indexOf(e);-1!==n&&t.splice(n,1)}}}]),e}()).EMPTY=function(e){return e.closed=!0,e}(new w),w);function D(e){return e.reduce((function(e,t){return e.concat(t instanceof A?t.errors:t)}),[])}var M="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random(),I=function(e){l(n,e);var t=u(n);function n(e,i,r){var a;switch(p(this,n),(a=t.call(this)).syncErrorValue=null,a.syncErrorThrown=!1,a.syncErrorThrowable=!1,a.isStopped=!1,arguments.length){case 0:a.destination=k;break;case 1:if(!e){a.destination=k;break}if("object"==typeof e){e instanceof n?(a.syncErrorThrowable=e.syncErrorThrowable,a.destination=e,e.add(h(a))):(a.syncErrorThrowable=!0,a.destination=new S(h(a),e));break}default:a.syncErrorThrowable=!0,a.destination=new S(h(a),e,i,r)}return a}return m(n,[{key:M,value:function(){return this}},{key:"next",value:function(e){this.isStopped||this._next(e)}},{key:"error",value:function(e){this.isStopped||(this.isStopped=!0,this._error(e))}},{key:"complete",value:function(){this.isStopped||(this.isStopped=!0,this._complete())}},{key:"unsubscribe",value:function(){this.closed||(this.isStopped=!0,s(f(n.prototype),"unsubscribe",this).call(this))}},{key:"_next",value:function(e){this.destination.next(e)}},{key:"_error",value:function(e){this.destination.error(e),this.unsubscribe()}},{key:"_complete",value:function(){this.destination.complete(),this.unsubscribe()}},{key:"_unsubscribeAndRecycle",value:function(){var e=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=e,this}}],[{key:"create",value:function(e,t,i){var r=new n(e,t,i);return r.syncErrorThrowable=!1,r}}]),n}(P),S=function(e){l(n,e);var t=u(n);function n(e,i,r,a){var o,s;p(this,n),(o=t.call(this))._parentSubscriber=e;var l=h(o);return v(i)?s=i:i&&(s=i.next,r=i.error,a=i.complete,i!==k&&(v((l=Object.create(i)).unsubscribe)&&o.add(l.unsubscribe.bind(l)),l.unsubscribe=o.unsubscribe.bind(h(o)))),o._context=l,o._next=s,o._error=r,o._complete=a,o}return m(n,[{key:"next",value:function(e){if(!this.isStopped&&this._next){var t=this._parentSubscriber;b.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}}},{key:"error",value:function(e){if(!this.isStopped){var t=this._parentSubscriber,n=b.useDeprecatedSynchronousErrorHandling;if(this._error)n&&t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else if(t.syncErrorThrowable)n?(t.syncErrorValue=e,t.syncErrorThrown=!0):y(e),this.unsubscribe();else{if(this.unsubscribe(),n)throw e;y(e)}}}},{key:"complete",value:function(){var e=this;if(!this.isStopped){var t=this._parentSubscriber;if(this._complete){var n=function(){return e._complete.call(e._context)};b.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,n),this.unsubscribe()):(this.__tryOrUnsub(n),this.unsubscribe())}else this.unsubscribe()}}},{key:"__tryOrUnsub",value:function(e,t){try{e.call(this._context,t)}catch(n){if(this.unsubscribe(),b.useDeprecatedSynchronousErrorHandling)throw n;y(n)}}},{key:"__tryOrSetError",value:function(e,t,n){if(!b.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{t.call(this._context,n)}catch(i){return b.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=i,e.syncErrorThrown=!0,!0):(y(i),!0)}return!1}},{key:"_unsubscribe",value:function(){var e=this._parentSubscriber;this._context=null,this._parentSubscriber=null,e.unsubscribe()}}]),n}(I),T="function"==typeof Symbol&&Symbol.observable||"@@observable";function x(e){return e}var _,U=((_=function(){function e(t){p(this,e),this._isScalar=!1,t&&(this._subscribe=t)}return m(e,[{key:"lift",value:function(t){var n=new e;return n.source=this,n.operator=t,n}},{key:"subscribe",value:function(e,t,n){var i=this.operator,r=function(e,t,n){if(e){if(e instanceof I)return e;if(e[M])return e[M]()}return e||t||n?new I(e,t,n):new I(k)}(e,t,n);if(r.add(i?i.call(r,this.source):this.source||b.useDeprecatedSynchronousErrorHandling&&!r.syncErrorThrowable?this._subscribe(r):this._trySubscribe(r)),b.useDeprecatedSynchronousErrorHandling&&r.syncErrorThrowable&&(r.syncErrorThrowable=!1,r.syncErrorThrown))throw r.syncErrorValue;return r}},{key:"_trySubscribe",value:function(e){try{return this._subscribe(e)}catch(t){b.useDeprecatedSynchronousErrorHandling&&(e.syncErrorThrown=!0,e.syncErrorValue=t),function(e){for(;e;){var t=e,n=t.closed,i=t.destination,r=t.isStopped;if(n||r)return!1;e=i&&i instanceof I?i:null}return!0}(e)?e.error(t):console.warn(t)}}},{key:"forEach",value:function(e,t){var n=this;return new(t=O(t))((function(t,i){var r;r=n.subscribe((function(t){try{e(t)}catch(n){i(n),r&&r.unsubscribe()}}),i,t)}))}},{key:"_subscribe",value:function(e){var t=this.source;return t&&t.subscribe(e)}},{key:T,value:function(){return this}},{key:"pipe",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?this:(0===(i=t).length?x:1===i.length?i[0]:function(e){return i.reduce((function(e,t){return t(e)}),e)})(this);var i}},{key:"toPromise",value:function(e){var t=this;return new(e=O(e))((function(e,n){var i;t.subscribe((function(e){return i=e}),(function(e){return n(e)}),(function(){return e(i)}))}))}}]),e}()).create=function(e){return new _(e)},_);function O(e){if(e||(e=b.Promise||Promise),!e)throw new Error("no Promise impl found");return e}var E,L=function(){function e(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return e.prototype=Object.create(Error.prototype),e}(),G=function(e){l(n,e);var t=u(n);function n(e,i){var r;return p(this,n),(r=t.call(this)).subject=e,r.subscriber=i,r.closed=!1,r}return m(n,[{key:"unsubscribe",value:function(){if(!this.closed){this.closed=!0;var e=this.subject,t=e.observers;if(this.subject=null,t&&0!==t.length&&!e.isStopped&&!e.closed){var n=t.indexOf(this.subscriber);-1!==n&&t.splice(n,1)}}}}]),n}(P),R=function(e){l(n,e);var t=u(n);function n(e){var i;return p(this,n),(i=t.call(this,e)).destination=e,i}return n}(I),j=((E=function(e){l(n,e);var t=u(n);function n(){var e;return p(this,n),(e=t.call(this)).observers=[],e.closed=!1,e.isStopped=!1,e.hasError=!1,e.thrownError=null,e}return m(n,[{key:M,value:function(){return new R(this)}},{key:"lift",value:function(e){var t=new N(this,this);return t.operator=e,t}},{key:"next",value:function(e){if(this.closed)throw new L;if(!this.isStopped)for(var t=this.observers,n=t.length,i=t.slice(),r=0;r<n;r++)i[r].next(e)}},{key:"error",value:function(e){if(this.closed)throw new L;this.hasError=!0,this.thrownError=e,this.isStopped=!0;for(var t=this.observers,n=t.length,i=t.slice(),r=0;r<n;r++)i[r].error(e);this.observers.length=0}},{key:"complete",value:function(){if(this.closed)throw new L;this.isStopped=!0;for(var e=this.observers,t=e.length,n=e.slice(),i=0;i<t;i++)n[i].complete();this.observers.length=0}},{key:"unsubscribe",value:function(){this.isStopped=!0,this.closed=!0,this.observers=null}},{key:"_trySubscribe",value:function(e){if(this.closed)throw new L;return s(f(n.prototype),"_trySubscribe",this).call(this,e)}},{key:"_subscribe",value:function(e){if(this.closed)throw new L;return this.hasError?(e.error(this.thrownError),P.EMPTY):this.isStopped?(e.complete(),P.EMPTY):(this.observers.push(e),new G(this,e))}},{key:"asObservable",value:function(){var e=new U;return e.source=this,e}}]),n}(U)).create=function(e,t){return new N(e,t)},E),N=function(e){l(n,e);var t=u(n);function n(e,i){var r;return p(this,n),(r=t.call(this)).destination=e,r.source=i,r}return m(n,[{key:"next",value:function(e){var t=this.destination;t&&t.next&&t.next(e)}},{key:"error",value:function(e){var t=this.destination;t&&t.error&&this.destination.error(e)}},{key:"complete",value:function(){var e=this.destination;e&&e.complete&&this.destination.complete()}},{key:"_subscribe",value:function(e){return this.source?this.source.subscribe(e):P.EMPTY}}]),n}(j);function F(e){return e&&"function"==typeof e.schedule}function B(e,t){return function(n){if("function"!=typeof e)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new H(e,t))}}var H=function(){function e(t,n){p(this,e),this.project=t,this.thisArg=n}return m(e,[{key:"call",value:function(e,t){return t.subscribe(new K(e,this.project,this.thisArg))}}]),e}(),K=function(e){l(n,e);var t=u(n);function n(e,i,r){var a;return p(this,n),(a=t.call(this,e)).project=i,a.count=0,a.thisArg=r||h(a),a}return m(n,[{key:"_next",value:function(e){var t;try{t=this.project.call(this.thisArg,e,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(t)}}]),n}(I),q=function(e){return function(t){for(var n=0,i=e.length;n<i&&!t.closed;n++)t.next(e[n]);t.complete()}};var z="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator",Q=function(e){return e&&"number"==typeof e.length&&"function"!=typeof e};function W(e){return!!e&&"function"!=typeof e.subscribe&&"function"==typeof e.then}var J=function(e){if(e&&"function"==typeof e[T])return i=e,function(e){var t=i[T]();if("function"!=typeof t.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return t.subscribe(e)};if(Q(e))return q(e);if(W(e))return n=e,function(e){return n.then((function(t){e.closed||(e.next(t),e.complete())}),(function(t){return e.error(t)})).then(null,y),e};if(e&&"function"==typeof e[z])return t=e,function(e){for(var n=t[z]();;){var i=void 0;try{i=n.next()}catch(r){return e.error(r),e}if(i.done){e.complete();break}if(e.next(i.value),e.closed)break}return"function"==typeof n.return&&e.add((function(){n.return&&n.return()})),e};var t,n,i,r=V(e)?"an invalid object":"'".concat(e,"'");throw new TypeError("You provided ".concat(r," where a stream was expected. You can provide an Observable, Promise, Array, or Iterable."))};function Y(e,t){return new U((function(n){var i=new P,r=0;return i.add(t.schedule((function(){r!==e.length?(n.next(e[r++]),n.closed||i.add(this.schedule())):n.complete()}))),i}))}function $(e,t){return t?function(e,t){if(null!=e){if(function(e){return e&&"function"==typeof e[T]}(e))return function(e,t){return new U((function(n){var i=new P;return i.add(t.schedule((function(){var r=e[T]();i.add(r.subscribe({next:function(e){i.add(t.schedule((function(){return n.next(e)})))},error:function(e){i.add(t.schedule((function(){return n.error(e)})))},complete:function(){i.add(t.schedule((function(){return n.complete()})))}}))}))),i}))}(e,t);if(W(e))return function(e,t){return new U((function(n){var i=new P;return i.add(t.schedule((function(){return e.then((function(e){i.add(t.schedule((function(){n.next(e),i.add(t.schedule((function(){return n.complete()})))})))}),(function(e){i.add(t.schedule((function(){return n.error(e)})))}))}))),i}))}(e,t);if(Q(e))return Y(e,t);if(function(e){return e&&"function"==typeof e[z]}(e)||"string"==typeof e)return function(e,t){if(!e)throw new Error("Iterable cannot be null");return new U((function(n){var i,r=new P;return r.add((function(){i&&"function"==typeof i.return&&i.return()})),r.add(t.schedule((function(){i=e[z](),r.add(t.schedule((function(){if(!n.closed){var e,t;try{var r=i.next();e=r.value,t=r.done}catch(a){return void n.error(a)}t?n.complete():(n.next(e),this.schedule())}})))}))),r}))}(e,t)}throw new TypeError((null!==e&&typeof e||e)+" is not observable")}(e,t):e instanceof U?e:new U(J(e))}var Z=function(e){l(n,e);var t=u(n);function n(e){var i;return p(this,n),(i=t.call(this)).parent=e,i}return m(n,[{key:"_next",value:function(e){this.parent.notifyNext(e)}},{key:"_error",value:function(e){this.parent.notifyError(e),this.unsubscribe()}},{key:"_complete",value:function(){this.parent.notifyComplete(),this.unsubscribe()}}]),n}(I),X=function(e){l(n,e);var t=u(n);function n(){return p(this,n),t.apply(this,arguments)}return m(n,[{key:"notifyNext",value:function(e){this.destination.next(e)}},{key:"notifyError",value:function(e){this.destination.error(e)}},{key:"notifyComplete",value:function(){this.destination.complete()}}]),n}(I);function ee(e,t){if(!t.closed)return e instanceof U?e.subscribe(t):J(e)(t)}function te(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Number.POSITIVE_INFINITY;return"function"==typeof t?function(i){return i.pipe(te((function(n,i){return $(e(n,i)).pipe(B((function(e,r){return t(n,e,i,r)})))}),n))}:("number"==typeof t&&(n=t),function(t){return t.lift(new ne(e,n))})}var ne=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.POSITIVE_INFINITY;p(this,e),this.project=t,this.concurrent=n}return m(e,[{key:"call",value:function(e,t){return t.subscribe(new ie(e,this.project,this.concurrent))}}]),e}(),ie=function(e){l(n,e);var t=u(n);function n(e,i){var r,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Number.POSITIVE_INFINITY;return p(this,n),(r=t.call(this,e)).project=i,r.concurrent=a,r.hasCompleted=!1,r.buffer=[],r.active=0,r.index=0,r}return m(n,[{key:"_next",value:function(e){this.active<this.concurrent?this._tryNext(e):this.buffer.push(e)}},{key:"_tryNext",value:function(e){var t,n=this.index++;try{t=this.project(e,n)}catch(i){return void this.destination.error(i)}this.active++,this._innerSub(t)}},{key:"_innerSub",value:function(e){var t=new Z(this),n=this.destination;n.add(t);var i=ee(e,t);i!==t&&n.add(i)}},{key:"_complete",value:function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}},{key:"notifyNext",value:function(e){this.destination.next(e)}},{key:"notifyComplete",value:function(){var e=this.buffer;this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}]),n}(X);function re(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Number.POSITIVE_INFINITY;return te(x,e)}function ae(e,t){return t?Y(e,t):new U(q(e))}function oe(){return function(e){return e.lift(new le(e))}}var se,le=function(){function e(t){p(this,e),this.connectable=t}return m(e,[{key:"call",value:function(e,t){var n=this.connectable;n._refCount++;var i=new ce(e,n),r=t.subscribe(i);return i.closed||(i.connection=n.connect()),r}}]),e}(),ce=function(e){l(n,e);var t=u(n);function n(e,i){var r;return p(this,n),(r=t.call(this,e)).connectable=i,r}return m(n,[{key:"_unsubscribe",value:function(){var e=this.connectable;if(e){this.connectable=null;var t=e._refCount;if(t<=0)this.connection=null;else if(e._refCount=t-1,t>1)this.connection=null;else{var n=this.connection,i=e._connection;this.connection=null,!i||n&&i!==n||i.unsubscribe()}}else this.connection=null}}]),n}(I),ue={operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:(se=function(e){l(n,e);var t=u(n);function n(e,i){var r;return p(this,n),(r=t.call(this)).source=e,r.subjectFactory=i,r._refCount=0,r._isComplete=!1,r}return m(n,[{key:"_subscribe",value:function(e){return this.getSubject().subscribe(e)}},{key:"getSubject",value:function(){var e=this._subject;return e&&!e.isStopped||(this._subject=this.subjectFactory()),this._subject}},{key:"connect",value:function(){var e=this._connection;return e||(this._isComplete=!1,(e=this._connection=new P).add(this.source.subscribe(new de(this.getSubject(),this))),e.closed&&(this._connection=null,e=P.EMPTY)),e}},{key:"refCount",value:function(){return oe()(this)}}]),n}(U).prototype)._subscribe},_isComplete:{value:se._isComplete,writable:!0},getSubject:{value:se.getSubject},connect:{value:se.connect},refCount:{value:se.refCount}},de=function(e){l(n,e);var t=u(n);function n(e,i){var r;return p(this,n),(r=t.call(this,e)).connectable=i,r}return m(n,[{key:"_error",value:function(e){this._unsubscribe(),s(f(n.prototype),"_error",this).call(this,e)}},{key:"_complete",value:function(){this.connectable._isComplete=!0,this._unsubscribe(),s(f(n.prototype),"_complete",this).call(this)}},{key:"_unsubscribe",value:function(){var e=this.connectable;if(e){this.connectable=null;var t=e._connection;e._refCount=0,e._subject=null,e._connection=null,t&&t.unsubscribe()}}}]),n}(R);function he(){return new j}function ve(e){return{toString:e}.toString()}function fe(e,t,n){return ve((function(){var i=function(e){return function(){if(e){var t=e.apply(void 0,arguments);for(var n in t)this[n]=t[n]}}}(t);function r(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(this instanceof r)return i.apply(this,t),this;var a=o(r,t);return s.annotation=a,s;function s(e,t,n){for(var i=e.hasOwnProperty("__parameters__")?e.__parameters__:Object.defineProperty(e,"__parameters__",{value:[]}).__parameters__;i.length<=n;)i.push(null);return(i[n]=i[n]||[]).push(a),e}}return n&&(r.prototype=Object.create(n.prototype)),r.prototype.ngMetadataName=e,r.annotationCls=r,r}))}var pe=fe("Inject",(function(e){return{token:e}})),ge=fe("Optional"),me=fe("Self"),be=fe("SkipSelf"),ye=function(e){return e[e.Default=0]="Default",e[e.Host=1]="Host",e[e.Self=2]="Self",e[e.SkipSelf=4]="SkipSelf",e[e.Optional=8]="Optional",e}({});function ke(e){for(var t in e)if(e[t]===ke)return t;throw Error("Could not find renamed property on target object.")}function Ce(e,t){for(var n in t)t.hasOwnProperty(n)&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function Ve(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function we(e){return{factory:e.factory,providers:e.providers||[],imports:e.imports||[]}}function Ae(e){return Pe(e,e[Me])||Pe(e,e[Te])}function Pe(e,t){return t&&t.token===e?t:null}function De(e){return e&&(e.hasOwnProperty(Ie)||e.hasOwnProperty(xe))?e[Ie]:null}var Me=ke({"\u0275prov":ke}),Ie=ke({"\u0275inj":ke}),Se=ke({"\u0275provFallback":ke}),Te=ke({ngInjectableDef:ke}),xe=ke({ngInjectorDef:ke});function _e(e){if("string"==typeof e)return e;if(Array.isArray(e))return"["+e.map(_e).join(", ")+"]";if(null==e)return""+e;if(e.overriddenName)return""+e.overriddenName;if(e.name)return""+e.name;var t=e.toString();if(null==t)return""+t;var n=t.indexOf("\n");return-1===n?t:t.substring(0,n)}function Ue(e,t){return null==e||""===e?null===t?"":t:null==t||""===t?e:e+" "+t}var Oe=ke({__forward_ref__:ke});function Ee(e){return e.__forward_ref__=Ee,e.toString=function(){return _e(this())},e}function Le(e){return Ge(e)?e():e}function Ge(e){return"function"==typeof e&&e.hasOwnProperty(Oe)&&e.__forward_ref__===Ee}var Re,je="undefined"!=typeof globalThis&&globalThis,Ne="undefined"!=typeof window&&window,Fe="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Be="undefined"!=typeof global&&global,He=je||Be||Ne||Fe,Ke=ke({"\u0275cmp":ke}),qe=ke({"\u0275dir":ke}),ze=ke({"\u0275pipe":ke}),Qe=ke({"\u0275mod":ke}),We=ke({"\u0275loc":ke}),Je=ke({"\u0275fac":ke}),Ye=ke({__NG_ELEMENT_ID__:ke}),$e=function(){function e(t,n){p(this,e),this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof n?this.__NG_ELEMENT_ID__=n:void 0!==n&&(this.\u0275prov=Ve({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}return m(e,[{key:"toString",value:function(){return"InjectionToken "+this._desc}}]),e}(),Ze=new $e("INJECTOR",-1),Xe={},et=/\n/gm,tt=ke({provide:String,useValue:ke}),nt=void 0;function it(e){var t=nt;return nt=e,t}function rt(e){var t=Re;return Re=e,t}function at(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ye.Default;if(void 0===nt)throw new Error("inject() must be called from an injection context");return null===nt?st(e,void 0,t):nt.get(e,t&ye.Optional?null:void 0,t)}function ot(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ye.Default;return(Re||at)(Le(e),t)}function st(e,t,n){var i=Ae(e);if(i&&"root"==i.providedIn)return void 0===i.value?i.value=i.factory():i.value;if(n&ye.Optional)return null;if(void 0!==t)return t;throw new Error("Injector: NOT_FOUND [".concat(_e(e),"]"))}function lt(e){for(var t=[],n=0;n<e.length;n++){var i=Le(e[n]);if(Array.isArray(i)){if(0===i.length)throw new Error("Arguments array must have arguments.");for(var r=void 0,a=ye.Default,o=0;o<i.length;o++){var s=i[o];s instanceof ge||"Optional"===s.ngMetadataName||s===ge?a|=ye.Optional:s instanceof be||"SkipSelf"===s.ngMetadataName||s===be?a|=ye.SkipSelf:s instanceof me||"Self"===s.ngMetadataName||s===me?a|=ye.Self:r=s instanceof pe||s===pe?s.token:s}t.push(ot(r,a))}else t.push(ot(i))}return t}var ct=function(){function e(){p(this,e)}return m(e,[{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Xe;if(t===Xe){var n=new Error("NullInjectorError: No provider for ".concat(_e(e),"!"));throw n.name="NullInjectorError",n}return t}}]),e}(),ut=function e(){p(this,e)},dt=function e(){p(this,e)};function ht(e,t){e.forEach((function(e){return Array.isArray(e)?ht(e,t):t(e)}))}function vt(e,t,n){t>=e.length?e.push(n):e.splice(t,0,n)}function ft(e,t){return t>=e.length-1?e.pop():e.splice(t,1)[0]}function pt(e,t){var n=gt(e,t);if(n>=0)return e[1|n]}function gt(e,t){return function(e,t,n){for(var i=0,r=e.length>>1;r!==i;){var a=i+(r-i>>1),o=e[a<<1];if(t===o)return a<<1;o>t?r=a:i=a+1}return~(r<<1)}(e,t)}var mt,bt=function(e){return e[e.OnPush=0]="OnPush",e[e.Default=1]="Default",e}({}),yt=((mt={})[mt.Emulated=0]="Emulated",mt[mt.Native=1]="Native",mt[mt.None=2]="None",mt[mt.ShadowDom=3]="ShadowDom",mt),kt={},Ct=[],Vt=0;function wt(e){return ve((function(){var t={},n={type:e.type,providersResolver:null,decls:e.decls,vars:e.vars,factory:null,template:e.template||null,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:t,inputs:null,outputs:null,exportAs:e.exportAs||null,onPush:e.changeDetection===bt.OnPush,directiveDefs:null,pipeDefs:null,selectors:e.selectors||Ct,viewQuery:e.viewQuery||null,features:e.features||null,data:e.data||{},encapsulation:e.encapsulation||yt.Emulated,id:"c",styles:e.styles||Ct,_:null,setInput:null,schemas:e.schemas||null,tView:null},i=e.directives,r=e.features,a=e.pipes;return n.id+=Vt++,n.inputs=It(e.inputs,t),n.outputs=It(e.outputs),r&&r.forEach((function(e){return e(n)})),n.directiveDefs=i?function(){return("function"==typeof i?i():i).map(At)}:null,n.pipeDefs=a?function(){return("function"==typeof a?a():a).map(Pt)}:null,n}))}function At(e){return xt(e)||function(e){return e[qe]||null}(e)}function Pt(e){return function(e){return e[ze]||null}(e)}var Dt={};function Mt(e){var t={type:e.type,bootstrap:e.bootstrap||Ct,declarations:e.declarations||Ct,imports:e.imports||Ct,exports:e.exports||Ct,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null};return null!=e.id&&ve((function(){Dt[e.id]=e.type})),t}function It(e,t){if(null==e)return kt;var n={};for(var i in e)if(e.hasOwnProperty(i)){var r=e[i],a=r;Array.isArray(r)&&(a=r[1],r=r[0]),n[r]=i,t&&(t[r]=a)}return n}var St=wt;function Tt(e){return{type:e.type,name:e.name,factory:null,pure:!1!==e.pure,onDestroy:e.type.prototype.ngOnDestroy||null}}function xt(e){return e[Ke]||null}function _t(e,t){return e.hasOwnProperty(Je)?e[Je]:null}function Ut(e,t){var n=e[Qe]||null;if(!n&&!0===t)throw new Error("Type ".concat(_e(e)," does not have '\u0275mod' property."));return n}function Ot(e){return Array.isArray(e)&&"object"==typeof e[1]}function Et(e){return Array.isArray(e)&&!0===e[1]}function Lt(e){return 0!=(8&e.flags)}function Gt(e){return 2==(2&e.flags)}function Rt(e){return 1==(1&e.flags)}function jt(e){return null!==e.template}function Nt(e){return 0!=(512&e[2])}function Ft(e){return"string"==typeof e?e:null==e?"":""+e}function Bt(e){return"function"==typeof e?e.name||e.toString():"object"==typeof e&&null!=e&&"function"==typeof e.type?e.type.name||e.type.toString():Ft(e)}var Ht=("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(He);function Kt(e){return e instanceof Function?e():e}function qt(e,t){var n=t?" in "+t:"";throw new Error("No provider for ".concat(Bt(e)," found").concat(n))}var zt=function(){function e(t,n,i){p(this,e),this.previousValue=t,this.currentValue=n,this.firstChange=i}return m(e,[{key:"isFirstChange",value:function(){return this.firstChange}}]),e}();function Qt(){return Wt}function Wt(e){return e.type.prototype.ngOnChanges&&(e.setInput=Yt),Jt}function Jt(){var e=$t(this),t=null==e?void 0:e.current;if(t){var n=e.previous;if(n===kt)e.previous=t;else for(var i in t)n[i]=t[i];e.current=null,this.ngOnChanges(t)}}function Yt(e,t,n,i){var r=$t(e)||function(e,t){return e.__ngSimpleChanges__=t}(e,{previous:kt,current:null}),a=r.current||(r.current={}),o=r.previous,s=this.declaredInputs[n],l=o[s];a[s]=new zt(l&&l.currentValue,t,o===kt),e[i]=t}function $t(e){return e.__ngSimpleChanges__||null}Qt.ngInherit=!0;var Zt=void 0;function Xt(e){return!!e.listen}var en={createRenderer:function(e,t){return void 0!==Zt?Zt:"undefined"!=typeof document?document:void 0}};function tn(e){for(;Array.isArray(e);)e=e[0];return e}function nn(e,t){return tn(t[e+20])}function rn(e,t){return tn(t[e.index])}function an(e,t){return e.data[t+20]}function on(e,t){return e[t+20]}function sn(e,t){var n=t[e];return Ot(n)?n:n[0]}function ln(e){var t=function(e){return e.__ngContext__||null}(e);return t?Array.isArray(t)?t:t.lView:null}function cn(e){return 128==(128&e[2])}function un(e,t){return null===e||null==t?null:e[t]}function dn(e){e[18]=0}function hn(e,t){e[5]+=t;for(var n=e,i=e[3];null!==i&&(1===t&&1===n[5]||-1===t&&0===n[5]);)i[5]+=t,n=i,i=i[3]}var vn={lFrame:On(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function fn(){return vn.bindingsEnabled}function pn(){return vn.lFrame.lView}function gn(){return vn.lFrame.tView}function mn(e){vn.lFrame.contextLView=e}function bn(){return vn.lFrame.currentTNode}function yn(e,t){vn.lFrame.currentTNode=e,vn.lFrame.isParent=t}function kn(){return vn.lFrame.isParent}function Cn(){vn.lFrame.isParent=!1}function Vn(){return vn.isInCheckNoChangesMode}function wn(e){vn.isInCheckNoChangesMode=e}function An(){var e=vn.lFrame,t=e.bindingRootIndex;return-1===t&&(t=e.bindingRootIndex=e.tView.bindingStartIndex),t}function Pn(){return vn.lFrame.bindingIndex}function Dn(){return vn.lFrame.bindingIndex++}function Mn(e){var t=vn.lFrame,n=t.bindingIndex;return t.bindingIndex=t.bindingIndex+e,n}function In(e,t){var n=vn.lFrame;n.bindingIndex=n.bindingRootIndex=e,Sn(t)}function Sn(e){vn.lFrame.currentDirectiveIndex=e}function Tn(e){vn.lFrame.currentQueryIndex=e}function xn(e,t){var n=Un();vn.lFrame=n,n.currentTNode=t,n.lView=e}function _n(e){var t=Un(),n=e[1];vn.lFrame=t,t.currentTNode=n.firstChild,t.lView=e,t.tView=n,t.contextLView=e,t.bindingIndex=n.bindingStartIndex}function Un(){var e=vn.lFrame,t=null===e?null:e.child;return null===t?On(e):t}function On(e){var t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:0,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null};return null!==e&&(e.child=t),t}function En(){var e=vn.lFrame;return vn.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}var Ln=En;function Gn(){var e=En();e.isParent=!0,e.tView=null,e.selectedIndex=0,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function Rn(){return vn.lFrame.selectedIndex}function jn(e){vn.lFrame.selectedIndex=e}function Nn(){var e=vn.lFrame;return an(e.tView,e.selectedIndex)}function Fn(e,t){for(var n=t.directiveStart,i=t.directiveEnd;n<i;n++){var r=e.data[n].type.prototype,a=r.ngAfterContentInit,o=r.ngAfterContentChecked,s=r.ngAfterViewInit,l=r.ngAfterViewChecked,c=r.ngOnDestroy;a&&(e.contentHooks||(e.contentHooks=[])).push(-n,a),o&&((e.contentHooks||(e.contentHooks=[])).push(n,o),(e.contentCheckHooks||(e.contentCheckHooks=[])).push(n,o)),s&&(e.viewHooks||(e.viewHooks=[])).push(-n,s),l&&((e.viewHooks||(e.viewHooks=[])).push(n,l),(e.viewCheckHooks||(e.viewCheckHooks=[])).push(n,l)),null!=c&&(e.destroyHooks||(e.destroyHooks=[])).push(n,c)}}function Bn(e,t,n){qn(e,t,3,n)}function Hn(e,t,n,i){(3&e[2])===n&&qn(e,t,n,i)}function Kn(e,t){var n=e[2];(3&n)===t&&(n&=2047,n+=1,e[2]=n)}function qn(e,t,n,i){for(var r=null!=i?i:-1,a=0,o=void 0!==i?65535&e[18]:0;o<t.length;o++)if("number"==typeof t[o+1]){if(a=t[o],null!=i&&a>=i)break}else t[o]<0&&(e[18]+=65536),(a<r||-1==r)&&(zn(e,n,t,o),e[18]=(4294901760&e[18])+o+2),o++}function zn(e,t,n,i){var r=n[i]<0,a=n[i+1],o=e[r?-n[i]:n[i]];r?e[2]>>11<e[18]>>16&&(3&e[2])===t&&(e[2]+=2048,a.call(o)):a.call(o)}var Qn=function e(t,n,i){p(this,e),this.factory=t,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=i};function Wn(e,t,n){for(var i=Xt(e),r=0;r<n.length;){var a=n[r];if("number"==typeof a){if(0!==a)break;r++;var o=n[r++],s=n[r++],l=n[r++];i?e.setAttribute(t,s,l,o):t.setAttributeNS(o,s,l)}else{var c=a,u=n[++r];Yn(c)?i&&e.setProperty(t,c,u):i?e.setAttribute(t,c,u):t.setAttribute(c,u),r++}}return r}function Jn(e){return 3===e||4===e||6===e}function Yn(e){return 64===e.charCodeAt(0)}function $n(e,t){if(null===t||0===t.length);else if(null===e||0===e.length)e=t.slice();else for(var n=-1,i=0;i<t.length;i++){var r=t[i];"number"==typeof r?n=r:0===n||Zn(e,n,r,null,-1===n||2===n?t[++i]:null)}return e}function Zn(e,t,n,i,r){var a=0,o=e.length;if(-1===t)o=-1;else for(;a<e.length;){var s=e[a++];if("number"==typeof s){if(s===t){o=-1;break}if(s>t){o=a-1;break}}}for(;a<e.length;){var l=e[a];if("number"==typeof l)break;if(l===n){if(null===i)return void(null!==r&&(e[a+1]=r));if(i===e[a+1])return void(e[a+2]=r)}a++,null!==i&&a++,null!==r&&a++}-1!==o&&(e.splice(o,0,t),a=o+1),e.splice(a++,0,n),null!==i&&e.splice(a++,0,i),null!==r&&e.splice(a++,0,r)}function Xn(e){return-1!==e}function ei(e){return 32767&e}function ti(e,t){for(var n=e>>16,i=t;n>0;)i=i[15],n--;return i}var ni=!0;function ii(e){var t=ni;return ni=e,t}var ri=0;function ai(e,t){var n=si(e,t);if(-1!==n)return n;var i=t[1];i.firstCreatePass&&(e.injectorIndex=t.length,oi(i.data,e),oi(t,null),oi(i.blueprint,null));var r=li(e,t),a=e.injectorIndex;if(Xn(r))for(var o=ei(r),s=ti(r,t),l=s[1].data,c=0;c<8;c++)t[a+c]=s[o+c]|l[o+c];return t[a+8]=r,a}function oi(e,t){e.push(0,0,0,0,0,0,0,0,t)}function si(e,t){return-1===e.injectorIndex||e.parent&&e.parent.injectorIndex===e.injectorIndex||null===t[e.injectorIndex+8]?-1:e.injectorIndex}function li(e,t){if(e.parent&&-1!==e.parent.injectorIndex)return e.parent.injectorIndex;for(var n=0,i=null,r=t;null!==r;){var a=r[1],o=a.type;if(null===(i=2===o?a.declTNode:1===o?r[6]:null))return-1;if(n++,r=r[15],-1!==i.injectorIndex)return i.injectorIndex|n<<16}return-1}function ci(e,t,n){!function(e,t,n){var i;"string"==typeof n?i=n.charCodeAt(0)||0:n.hasOwnProperty(Ye)&&(i=n[Ye]),null==i&&(i=n[Ye]=ri++);var r=255&i,a=1<<r,o=64&r,s=32&r,l=t.data;128&r?o?s?l[e+7]|=a:l[e+6]|=a:s?l[e+5]|=a:l[e+4]|=a:o?s?l[e+3]|=a:l[e+2]|=a:s?l[e+1]|=a:l[e]|=a}(e,t,n)}function ui(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:ye.Default,r=arguments.length>4?arguments[4]:void 0;if(null!==e){var a=function(e){if("string"==typeof e)return e.charCodeAt(0)||0;var t=e.hasOwnProperty(Ye)?e[Ye]:void 0;return"number"==typeof t&&t>0?255&t:t}(n);if("function"==typeof a){xn(t,e);try{var o=a();if(null!=o||i&ye.Optional)return o;qt(n)}finally{Ln()}}else if("number"==typeof a){if(-1===a)return new gi(e,t);var s=null,l=si(e,t),c=-1,u=i&ye.Host?t[16][6]:null;for((-1===l||i&ye.SkipSelf)&&(-1!==(c=-1===l?li(e,t):t[l+8])&&pi(i,!1)?(s=t[1],l=ei(c),t=ti(c,t)):l=-1);-1!==l;){var d=t[1];if(fi(a,l,d.data)){var h=hi(l,t,n,s,i,u);if(h!==di)return h}-1!==(c=t[l+8])&&pi(i,t[1].data[l+8]===u)&&fi(a,l,t)?(s=d,l=ei(c),t=ti(c,t)):l=-1}}}if(i&ye.Optional&&void 0===r&&(r=null),0==(i&(ye.Self|ye.Host))){var v=t[9],f=rt(void 0);try{return v?v.get(n,r,i&ye.Optional):st(n,r,i&ye.Optional)}finally{rt(f)}}if(i&ye.Optional)return r;qt(n,"NodeInjector")}var di={};function hi(e,t,n,i,r,a){var o=t[1],s=o.data[e+8],l=function(e,t,n,i,r){for(var a=e.providerIndexes,o=t.data,s=1048575&a,l=e.directiveStart,c=a>>20,u=r?s+c:e.directiveEnd,d=i?s:s+c;d<u;d++){var h=o[d];if(d<l&&n===h||d>=l&&h.type===n)return d}if(r){var v=o[l];if(v&&jt(v)&&v.type===n)return l}return null}(s,o,n,null==i?Gt(s)&&ni:i!=o&&2===s.type,r&ye.Host&&a===s);return null!==l?vi(t,o,l,s):di}function vi(e,t,n,i){var r=e[n],a=t.data;if(r instanceof Qn){var o=r;o.resolving&&function(e,t){throw new Error("Circular dependency in DI detected for "+e)}(Bt(a[n]));var s=ii(o.canSeeViewProviders);o.resolving=!0;var l=o.injectImpl?rt(o.injectImpl):null;xn(e,i);try{r=e[n]=o.factory(void 0,a,e,i),t.firstCreatePass&&n>=i.directiveStart&&function(e,t,n){var i=t.type.prototype,r=i.ngOnChanges,a=i.ngOnInit,o=i.ngDoCheck;if(r){var s=Wt(t);(n.preOrderHooks||(n.preOrderHooks=[])).push(e,s),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(e,s)}a&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-e,a),o&&((n.preOrderHooks||(n.preOrderHooks=[])).push(e,o),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(e,o))}(n,a[n],t)}finally{null!==l&&rt(l),ii(s),o.resolving=!1,Ln()}}return r}function fi(e,t,n){var i=64&e,r=32&e;return!!((128&e?i?r?n[t+7]:n[t+6]:r?n[t+5]:n[t+4]:i?r?n[t+3]:n[t+2]:r?n[t+1]:n[t])&1<<e)}function pi(e,t){return!(e&ye.Self||e&ye.Host&&t)}var gi=function(){function e(t,n){p(this,e),this._tNode=t,this._lView=n}return m(e,[{key:"get",value:function(e,t){return ui(this._tNode,this._lView,e,void 0,t)}}]),e}();function mi(e){var t=e;if(Ge(e))return function(){var e=mi(Le(t));return e?e():null};var n=_t(t);if(null===n){var i=De(t);n=i&&i.factory}return n||null}function bi(e){return ve((function(){for(var t=e.prototype.constructor,n=t[Je]||mi(t),i=Object.prototype,r=Object.getPrototypeOf(e.prototype).constructor;r&&r!==i;){var a=r[Je]||mi(r);if(a&&a!==n)return a;r=Object.getPrototypeOf(r)}return function(e){return new e}}))}function yi(e){return e.ngDebugContext}function ki(e){return e.ngOriginalError}function Ci(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];e.error.apply(e,n)}var Vi=function(){function e(){p(this,e),this._console=console}return m(e,[{key:"handleError",value:function(e){var t=this._findOriginalError(e),n=this._findContext(e),i=function(e){return e.ngErrorLogger||Ci}(e);i(this._console,"ERROR",e),t&&i(this._console,"ORIGINAL ERROR",t),n&&i(this._console,"ERROR CONTEXT",n)}},{key:"_findContext",value:function(e){return e?yi(e)?yi(e):this._findContext(ki(e)):null}},{key:"_findOriginalError",value:function(e){for(var t=ki(e);t&&ki(t);)t=ki(t);return t}}]),e}(),wi=function(){function e(t){p(this,e),this.changingThisBreaksApplicationSecurity=t}return m(e,[{key:"toString",value:function(){return"SafeValue must use [property]=binding: "+this.changingThisBreaksApplicationSecurity+" (see http://g.co/ng/security#xss)"}}]),e}();function Ai(e){return e instanceof wi?e.changingThisBreaksApplicationSecurity:e}function Pi(){return!0,!0}var Di=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Mi=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i,Ii=function(e){return e[e.NONE=0]="NONE",e[e.HTML=1]="HTML",e[e.STYLE=2]="STYLE",e[e.SCRIPT=3]="SCRIPT",e[e.URL=4]="URL",e[e.RESOURCE_URL=5]="RESOURCE_URL",e}({});function Si(e){var t,n,i=(t=pn())&&t[12];return i?i.sanitize(Ii.URL,e)||"":function(e,t){var n=function(e){return e instanceof wi&&e.getTypeName()||null}(e);if(null!=n&&n!==t){if("ResourceURL"===n)return!0;throw new Error("Required a safe ".concat(t,", got a ").concat(n," (see http://g.co/ng/security#xss)"))}return n===t}(e,"URL")?Ai(e):(n=Ft(e),(n=String(n)).match(Di)||n.match(Mi)?n:(Pi()&&console.warn("WARNING: sanitizing unsafe URL value ".concat(n," (see http://g.co/ng/security#xss)")),"unsafe:"+n))}function Ti(e,t){e.__ngContext__=t}function xi(e,t,n){for(var i=e.length;;){var r=e.indexOf(t,n);if(-1===r)return r;if(0===r||e.charCodeAt(r-1)<=32){var a=t.length;if(r+a===i||e.charCodeAt(r+a)<=32)return r}n=r+1}}function _i(e,t,n){for(var i=0;i<e.length;){var r=e[i++];if(n&&"class"===r){if(-1!==xi((r=e[i]).toLowerCase(),t,0))return!0}else if(1===r){for(;i<e.length&&"string"==typeof(r=e[i++]);)if(r.toLowerCase()===t)return!0;return!1}}return!1}function Ui(e){return 0===e.type&&"ng-template"!==e.tagName}function Oi(e,t,n){return t===(0!==e.type||n?e.tagName:"ng-template")}function Ei(e,t,n){for(var i=4,r=e.attrs||[],a=function(e){for(var t=0;t<e.length;t++)if(Jn(e[t]))return t;return e.length}(r),o=!1,s=0;s<t.length;s++){var l=t[s];if("number"!=typeof l){if(!o)if(4&i){if(i=2|1&i,""!==l&&!Oi(e,l,n)||""===l&&1===t.length){if(Li(i))return!1;o=!0}}else{var c=8&i?l:t[++s];if(8&i&&null!==e.attrs){if(!_i(e.attrs,c,n)){if(Li(i))return!1;o=!0}continue}var u=Gi(8&i?"class":l,r,Ui(e),n);if(-1===u){if(Li(i))return!1;o=!0;continue}if(""!==c){var d;d=u>a?"":r[u+1].toLowerCase();var h=8&i?d:null;if(h&&-1!==xi(h,c,0)||2&i&&c!==d){if(Li(i))return!1;o=!0}}}}else{if(!o&&!Li(i)&&!Li(l))return!1;if(o&&Li(l))continue;o=!1,i=l|1&i}}return Li(i)||o}function Li(e){return 0==(1&e)}function Gi(e,t,n,i){if(null===t)return-1;var r=0;if(i||!n){for(var a=!1;r<t.length;){var o=t[r];if(o===e)return r;if(3===o||6===o)a=!0;else{if(1===o||2===o){for(var s=t[++r];"string"==typeof s;)s=t[++r];continue}if(4===o)break;if(0===o){r+=4;continue}}r+=a?1:2}return-1}return function(e,t){var n=e.indexOf(4);if(n>-1)for(n++;n<e.length;){var i=e[n];if("number"==typeof i)return-1;if(i===t)return n;n++}return-1}(t,e)}function Ri(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=0;i<t.length;i++)if(Ei(e,t[i],n))return!0;return!1}function ji(e,t){return e?":not("+t.trim()+")":t}function Ni(e){for(var t=e[0],n=1,i=2,r="",a=!1;n<e.length;){var o=e[n];if("string"==typeof o)if(2&i){var s=e[++n];r+="["+o+(s.length>0?'="'+s+'"':"")+"]"}else 8&i?r+="."+o:4&i&&(r+=" "+o);else""===r||Li(o)||(t+=ji(a,r),r=""),i=o,a=a||!Li(i);n++}return""!==r&&(t+=ji(a,r)),t}var Fi={};function Bi(e){var t=e[3];return Et(t)?t[3]:t}function Hi(e){return qi(e[13])}function Ki(e){return qi(e[4])}function qi(e){for(;null!==e&&!Et(e);)e=e[4];return e}function zi(e){Qi(gn(),pn(),Rn()+e,Vn())}function Qi(e,t,n,i){if(!i)if(3==(3&t[2])){var r=e.preOrderCheckHooks;null!==r&&Bn(t,r,n)}else{var a=e.preOrderHooks;null!==a&&Hn(t,a,0,n)}jn(n)}function Wi(e,t){return e<<17|t<<2}function Ji(e){return e>>17&32767}function Yi(e){return 2|e}function $i(e){return(131068&e)>>2}function Zi(e,t){return-131069&e|t<<2}function Xi(e){return 1|e}function er(e,t){var n=e.contentQueries;if(null!==n)for(var i=0;i<n.length;i+=2){var r=n[i],a=n[i+1];if(-1!==a){var o=e.data[a];Tn(r),o.contentQueries(2,t[a],a)}}}function tr(e,t,n){return Xt(t)?t.createElement(e,n):null===n?t.createElement(e):t.createElementNS(n,e)}function nr(e,t,n,i,r,a,o,s,l,c){var u=t.blueprint.slice();return u[0]=r,u[2]=140|i,dn(u),u[3]=u[15]=e,u[8]=n,u[10]=o||e&&e[10],u[11]=s||e&&e[11],u[12]=l||e&&e[12]||null,u[9]=c||e&&e[9]||null,u[6]=a,u[16]=2==t.type?e[16]:u,u}function ir(e,t,n,i,r){var a=t+20,o=e.data[a]||function(e,t,n,i,r){var a=bn(),o=kn(),s=e.data[t]=function(e,t,n,i,r,a){return{type:n,index:i,injectorIndex:t?t.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,tagName:r,attrs:a,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?a:a&&a.parent,n,t,i,r);return null===e.firstChild&&(e.firstChild=s),null!==a&&(o&&null==a.child&&null!==s.parent?a.child=s:o||(a.next=s)),s}(e,a,n,i,r);return yn(o,!0),o}function rr(e,t,n){_n(t);try{var i=e.viewQuery;null!==i&&Or(1,i,n);var r=e.template;null!==r&&sr(e,t,r,1,n),e.firstCreatePass&&(e.firstCreatePass=!1),e.staticContentQueries&&er(e,t),e.staticViewQueries&&Or(2,e.viewQuery,n);var a=e.components;null!==a&&function(e,t){for(var n=0;n<t.length;n++)Sr(e,t[n])}(t,a)}catch(o){throw e.firstCreatePass&&(e.incompleteFirstPass=!0),o}finally{t[2]&=-5,Gn()}}function ar(e,t,n,i){var r=t[2];if(256!=(256&r)){_n(t);var a=Vn();try{dn(t),vn.lFrame.bindingIndex=e.bindingStartIndex,null!==n&&sr(e,t,n,2,i);var o=3==(3&r);if(!a)if(o){var s=e.preOrderCheckHooks;null!==s&&Bn(t,s,null)}else{var l=e.preOrderHooks;null!==l&&Hn(t,l,0,null),Kn(t,0)}if(function(e){for(var t=Hi(e);null!==t;t=Ki(t))if(t[2])for(var n=t[9],i=0;i<n.length;i++){var r=n[i],a=r[3];0==(1024&r[2])&&hn(a,1),r[2]|=1024}}(t),function(e){for(var t=Hi(e);null!==t;t=Ki(t))for(var n=10;n<t.length;n++){var i=t[n],r=i[1];cn(i)&&ar(r,i,r.template,i[8])}}(t),null!==e.contentQueries&&er(e,t),!a)if(o){var c=e.contentCheckHooks;null!==c&&Bn(t,c)}else{var u=e.contentHooks;null!==u&&Hn(t,u,1),Kn(t,1)}!function(e,t){try{var n=e.expandoInstructions;if(null!==n)for(var i=e.expandoStartIndex,r=-1,a=0;a<n.length;a++){var o=n[a];"number"==typeof o?o<=0?(jn(0-o),r=i+=9+n[++a]):i+=o:(null!==o&&(In(i,r),o(2,t[r])),r++)}}finally{jn(-1)}}(e,t);var d=e.components;null!==d&&function(e,t){for(var n=0;n<t.length;n++)Ir(e,t[n])}(t,d);var h=e.viewQuery;if(null!==h&&Or(2,h,i),!a)if(o){var v=e.viewCheckHooks;null!==v&&Bn(t,v)}else{var f=e.viewHooks;null!==f&&Hn(t,f,2),Kn(t,2)}!0===e.firstUpdatePass&&(e.firstUpdatePass=!1),a||(t[2]&=-73),1024&t[2]&&(t[2]&=-1025,hn(t[3],-1))}finally{Gn()}}}function or(e,t,n,i){var r=t[10],a=!Vn(),o=4==(4&t[2]);try{a&&!o&&r.begin&&r.begin(),o&&rr(e,t,i),ar(e,t,n,i)}finally{a&&!o&&r.end&&r.end()}}function sr(e,t,n,i,r){var a=Rn();try{jn(-1),2&i&&t.length>20&&Qi(e,t,0,Vn()),n(i,r)}finally{jn(a)}}function lr(e,t,n){if(Lt(t))for(var i=t.directiveEnd,r=t.directiveStart;r<i;r++){var a=e.data[r];a.contentQueries&&a.contentQueries(1,n[r],r)}}function cr(e,t,n){fn()&&(function(e,t,n,i){var r=n.directiveStart,a=n.directiveEnd;e.firstCreatePass||ai(n,t),Ti(i,t);for(var o=n.initialInputs,s=r;s<a;s++){var l=e.data[s],c=jt(l);c&&Ar(t,n,l);var u=vi(t,e,s,n);Ti(u,t),null!==o&&Pr(0,s-r,u,l,0,o),c&&(sn(n.index,t)[8]=u)}}(e,t,n,rn(n,t)),128==(128&n.flags)&&function(e,t,n){var i=n.directiveStart,r=n.directiveEnd,a=e.expandoInstructions,o=e.firstCreatePass,s=n.index-20,l=vn.lFrame.currentDirectiveIndex;try{jn(s);for(var c=i;c<r;c++){var u=e.data[c],d=t[c];Sn(c),null!==u.hostBindings||0!==u.hostVars||null!==u.hostAttrs?br(u,d):o&&a.push(null)}}finally{jn(-1),Sn(l)}}(e,t,n))}function ur(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:rn,i=t.localNames;if(null!==i)for(var r=t.index+1,a=0;a<i.length;a+=2){var o=i[a+1],s=-1===o?n(t,e):e[o];e[r++]=s}}function dr(e){var t=e.tView;return null===t||t.incompleteFirstPass?e.tView=hr(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts):t}function hr(e,t,n,i,r,a,o,s,l,c){var u=20+i,d=u+r,h=function(e,t){for(var n=[],i=0;i<t;i++)n.push(i<e?null:Fi);return n}(u,d),v="function"==typeof c?c():c;return h[1]={type:e,blueprint:h,template:n,queries:null,viewQuery:s,declTNode:t,data:h.slice().fill(null,u),bindingStartIndex:u,expandoStartIndex:d,expandoInstructions:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof a?a():a,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:l,consts:v,incompleteFirstPass:!1}}function vr(e,t,n){for(var i in e)if(e.hasOwnProperty(i)){var r=e[i];(n=null===n?{}:n).hasOwnProperty(i)?n[i].push(t,r):n[i]=[t,r]}return n}function fr(e,t,n,i,r,a,o,s){var l,c=rn(t,n),u=t.inputs;!s&&null!=u&&(l=u[i])?(Rr(e,n,l,i,r),Gt(t)&&function(e,t){var n=sn(t,e);16&n[2]||(n[2]|=64)}(n,t.index)):2===t.type&&(i=function(e){return"class"===e?"className":"for"===e?"htmlFor":"formaction"===e?"formAction":"innerHtml"===e?"innerHTML":"readonly"===e?"readOnly":"tabindex"===e?"tabIndex":e}(i),r=null!=o?o(r,t.tagName||"",i):r,Xt(a)?a.setProperty(c,i,r):Yn(i)||(c.setProperty?c.setProperty(i,r):c[i]=r))}function pr(e,t,n,i){var r=!1;if(fn()){var a=function(e,t,n){var i=e.directiveRegistry,r=null;if(i)for(var a=0;a<i.length;a++){var o=i[a];Ri(n,o.selectors,!1)&&(r||(r=[]),ci(ai(n,t),e,o.type),jt(o)?(kr(e,n),r.unshift(o)):r.push(o))}return r}(e,t,n),o=null===i?null:{"":-1};if(null!==a){var s=0;r=!0,Vr(n,e.data.length,a.length);for(var l=0;l<a.length;l++){var c=a[l];c.providersResolver&&c.providersResolver(c)}yr(e,n,a.length);for(var u=!1,d=!1,h=0;h<a.length;h++){var v=a[h];n.mergedAttrs=$n(n.mergedAttrs,v.hostAttrs),wr(e,t,v),Cr(e.data.length-1,v,o),null!==v.contentQueries&&(n.flags|=8),null===v.hostBindings&&null===v.hostAttrs&&0===v.hostVars||(n.flags|=128);var f=v.type.prototype;!u&&(f.ngOnChanges||f.ngOnInit||f.ngDoCheck)&&((e.preOrderHooks||(e.preOrderHooks=[])).push(n.index-20),u=!0),d||!f.ngOnChanges&&!f.ngDoCheck||((e.preOrderCheckHooks||(e.preOrderCheckHooks=[])).push(n.index-20),d=!0),gr(e,v),s+=v.hostVars}!function(e,t){for(var n=t.directiveEnd,i=e.data,r=t.attrs,a=[],o=null,s=null,l=t.directiveStart;l<n;l++){var c=i[l],u=c.inputs,d=null===r||Ui(t)?null:Dr(u,r);a.push(d),o=vr(u,l,o),s=vr(c.outputs,l,s)}null!==o&&(o.hasOwnProperty("class")&&(t.flags|=16),o.hasOwnProperty("style")&&(t.flags|=32)),t.initialInputs=a,t.inputs=o,t.outputs=s}(e,n),mr(e,t,s)}o&&function(e,t,n){if(t)for(var i=e.localNames=[],r=0;r<t.length;r+=2){var a=n[t[r+1]];if(null==a)throw new Error("Export of name '".concat(t[r+1],"' not found!"));i.push(t[r],a)}}(n,i,o)}return n.mergedAttrs=$n(n.mergedAttrs,n.attrs),r}function gr(e,t){var n=e.expandoInstructions;n.push(t.hostBindings),0!==t.hostVars&&n.push(t.hostVars)}function mr(e,t,n){for(var i=0;i<n;i++)t.push(Fi),e.blueprint.push(Fi),e.data.push(null)}function br(e,t){null!==e.hostBindings&&e.hostBindings(1,t)}function yr(e,t,n){var i=20-t.index,r=e.data.length-(1048575&t.providerIndexes);(e.expandoInstructions||(e.expandoInstructions=[])).push(i,r,n)}function kr(e,t){t.flags|=2,(e.components||(e.components=[])).push(t.index)}function Cr(e,t,n){if(n){if(t.exportAs)for(var i=0;i<t.exportAs.length;i++)n[t.exportAs[i]]=e;jt(t)&&(n[""]=e)}}function Vr(e,t,n){e.flags|=1,e.directiveStart=t,e.directiveEnd=t+n,e.providerIndexes=t}function wr(e,t,n){e.data.push(n);var i=n.factory||(n.factory=_t(n.type)),r=new Qn(i,jt(n),null);e.blueprint.push(r),t.push(r)}function Ar(e,t,n){var i=rn(t,e),r=dr(n),a=e[10],o=Tr(e,nr(e,r,null,n.onPush?64:16,i,t,a,a.createRenderer(i,n),null,null));e[t.index]=o}function Pr(e,t,n,i,r,a){var o=a[t];if(null!==o)for(var s=i.setInput,l=0;l<o.length;){var c=o[l++],u=o[l++],d=o[l++];null!==s?i.setInput(n,d,c,u):n[u]=d}}function Dr(e,t){for(var n=null,i=0;i<t.length;){var r=t[i];if(0!==r)if(5!==r){if("number"==typeof r)break;e.hasOwnProperty(r)&&(null===n&&(n=[]),n.push(r,e[r],t[i+1])),i+=2}else i+=2;else i+=4}return n}function Mr(e,t,n,i){return new Array(e,!0,!1,t,null,0,i,n,null,null)}function Ir(e,t){var n=sn(t,e);if(cn(n)){var i=n[1];80&n[2]?ar(i,n,i.template,n[8]):n[5]>0&&function e(t){for(var n=Hi(t);null!==n;n=Ki(n))for(var i=10;i<n.length;i++){var r=n[i];if(1024&r[2]){var a=r[1];ar(a,r,a.template,r[8])}else r[5]>0&&e(r)}var o=t[1].components;if(null!==o)for(var s=0;s<o.length;s++){var l=sn(o[s],t);cn(l)&&l[5]>0&&e(l)}}(n)}}function Sr(e,t){var n=sn(t,e),i=n[1];!function(e,t){for(var n=t.length;n<e.blueprint.length;n++)t.push(e.blueprint[n])}(i,n),rr(i,n,n[8])}function Tr(e,t){return e[13]?e[14][4]=t:e[13]=t,e[14]=t,t}function xr(e){for(;e;){e[2]|=64;var t=Bi(e);if(Nt(e)&&!t)return e;e=t}return null}function _r(e,t,n){var i=t[10];i.begin&&i.begin();try{ar(e,t,e.template,n)}catch(r){throw Gr(t,r),r}finally{i.end&&i.end()}}function Ur(e){!function(e){for(var t=0;t<e.components.length;t++){var n=e.components[t],i=ln(n),r=i[1];or(r,i,r.template,n)}}(e[8])}function Or(e,t,n){Tn(0),t(e,n)}var Er=Promise.resolve(null);function Lr(e){return e[7]||(e[7]=[])}function Gr(e,t){var n=e[9],i=n?n.get(Vi,null):null;i&&i.handleError(t)}function Rr(e,t,n,i,r){for(var a=0;a<n.length;){var o=n[a++],s=n[a++],l=t[o],c=e.data[o];null!==c.setInput?c.setInput(l,r,i,s):l[s]=r}}function jr(e,t,n){var i=nn(t,e),r=e[11];Xt(r)?r.setValue(i,n):i.textContent=n}function Nr(e,t,n,i,r){if(null!=i){var a,o=!1;Et(i)?a=i:Ot(i)&&(o=!0,i=i[0]);var s=tn(i);0===e&&null!==n?null==r?zr(t,n,s):qr(t,n,s,r||null):1===e&&null!==n?qr(t,n,s,r||null):2===e?function(e,t,n){var i=Wr(e,t);i&&function(e,t,n,i){Xt(e)?e.removeChild(t,n,i):t.removeChild(n)}(e,i,t,n)}(t,s,o):3===e&&t.destroyNode(s),null!=a&&function(e,t,n,i,r){var a=n[7];a!==tn(n)&&Nr(t,e,i,a,r);for(var o=10;o<n.length;o++){var s=n[o];$r(s[1],s,e,t,i,a)}}(t,e,a,n,r)}}function Fr(e,t){var n=e[9],i=n.indexOf(t),r=t[3];1024&t[2]&&(t[2]&=-1025,hn(r,-1)),n.splice(i,1)}function Br(e,t){if(!(e.length<=10)){var n,i=10+t,r=e[i];if(r){var a=r[17];null!==a&&a!==e&&Fr(a,r),t>0&&(e[i-1][4]=r[4]);var o=ft(e,10+t);$r(r[1],n=r,n[11],2,null,null),n[0]=null,n[6]=null;var s=o[19];null!==s&&s.detachView(o[1]),r[3]=null,r[4]=null,r[2]&=-129}return r}}function Hr(e,t){if(!(256&t[2])){var n=t[11];Xt(n)&&n.destroyNode&&$r(e,t,n,3,null,null),function(e){var t=e[13];if(!t)return Kr(e[1],e);for(;t;){var n=null;if(Ot(t))n=t[13];else{var i=t[10];i&&(n=i)}if(!n){for(;t&&!t[4]&&t!==e;)Ot(t)&&Kr(t[1],t),t=t[3];null===t&&(t=e),Ot(t)&&Kr(t[1],t),n=t&&t[4]}t=n}}(t)}}function Kr(e,t){if(!(256&t[2])){t[2]&=-129,t[2]|=256,function(e,t){var n;if(null!=e&&null!=(n=e.destroyHooks))for(var i=0;i<n.length;i+=2){var r=t[n[i]];if(!(r instanceof Qn)){var a=n[i+1];if(Array.isArray(a))for(var o=0;o<a.length;o+=2)a[o+1].call(r[a[o]]);else a.call(r)}}}(e,t),function(e,t){var n=e.cleanup;if(null!==n){for(var i=t[7],r=0;r<n.length-1;r+=2)if("string"==typeof n[r]){var a=n[r+1],o="function"==typeof a?a(t):tn(t[a]),s=i[n[r+2]],l=n[r+3];"boolean"==typeof l?o.removeEventListener(n[r],s,l):l>=0?i[l]():i[-l].unsubscribe(),r+=2}else n[r].call(i[n[r+1]]);t[7]=null}}(e,t),1===t[1].type&&Xt(t[11])&&t[11].destroy();var n=t[17];if(null!==n&&Et(t[3])){n!==t[3]&&Fr(n,t);var i=t[19];null!==i&&i.detachView(e)}}}function qr(e,t,n,i){Xt(e)?e.insertBefore(t,n,i):t.insertBefore(n,i,!0)}function zr(e,t,n){Xt(e)?e.appendChild(t,n):t.appendChild(n)}function Qr(e,t,n,i){null!==i?qr(e,t,n,i):zr(e,t,n)}function Wr(e,t){return Xt(e)?e.parentNode(t):t.parentNode}function Jr(e,t,n,i){var r=function(e,t,n){for(var i=t.parent;null!=i&&(3===i.type||4===i.type);)i=(t=i).parent;if(null===i)return n[0];if(t&&4===t.type&&4&t.flags)return rn(t,n).parentNode;if(2&i.flags){var r=e.data,a=r[r[i.index].directiveStart].encapsulation;if(a!==yt.ShadowDom&&a!==yt.Native)return null}return rn(i,n)}(e,i,t);if(null!=r){var a=t[11],o=function(e,t){return 3===e.type||4===e.type?rn(e,t):null}(i.parent||t[6],t);if(Array.isArray(n))for(var s=0;s<n.length;s++)Qr(a,r,n[s],o);else Qr(a,r,n,o)}}function Yr(e,t,n,i,r,a,o){for(;null!=n;){var s=i[n.index],l=n.type;o&&0===t&&(s&&Ti(tn(s),i),n.flags|=4),64!=(64&n.flags)&&(3===l||4===l?(Yr(e,t,n.child,i,r,a,!1),Nr(t,e,r,s,a)):1===l?Zr(e,t,i,n,r,a):Nr(t,e,r,s,a)),n=o?n.projectionNext:n.next}}function $r(e,t,n,i,r,a){Yr(n,i,e.firstChild,t,r,a,!1)}function Zr(e,t,n,i,r,a){var o=n[16],s=o[6].projection[i.projection];if(Array.isArray(s))for(var l=0;l<s.length;l++)Nr(t,e,r,s[l],a);else Yr(e,t,s,o[3],r,a,!0)}function Xr(e,t,n){Xt(e)?e.setAttribute(t,"style",n):t.style.cssText=n}function ea(e,t,n){Xt(e)?""===n?e.removeAttribute(t,"class"):e.setAttribute(t,"class",n):t.className=n}var ta,na,ia,ra=function(){function e(t,n){p(this,e),this._lView=t,this._cdRefInjectingView=n,this._appRef=null,this._viewContainerRef=null}return m(e,[{key:"rootNodes",get:function(){var e=this._lView,t=e[1];return function e(t,n,r,a){for(var o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];null!==r;){var s=n[r.index];if(null!==s&&a.push(tn(s)),Et(s))for(var l=10;l<s.length;l++){var c=s[l],u=c[1].firstChild;null!==u&&e(c[1],c,u,a)}var d=r.type;if(3===d||4===d)e(t,n,r.child,a);else if(1===d){var h=n[16],v=h[6].projection[r.projection];if(Array.isArray(v))a.push.apply(a,i(v));else{var f=Bi(h);e(f[1],f,v,a,!0)}}r=o?r.projectionNext:r.next}return a}(t,e,t.firstChild,[])}},{key:"context",get:function(){return this._lView[8]}},{key:"destroyed",get:function(){return 256==(256&this._lView[2])}},{key:"destroy",value:function(){if(this._appRef)this._appRef.detachView(this);else if(this._viewContainerRef){var e=this._viewContainerRef.indexOf(this);e>-1&&this._viewContainerRef.detach(e),this._viewContainerRef=null}Hr(this._lView[1],this._lView)}},{key:"onDestroy",value:function(e){var t,n,i,r;t=this._lView[1],n=this._lView,i=e,(r=Lr(n)).push(null),t.firstCreatePass&&function(e){return e.cleanup||(e.cleanup=[])}(t).push(i,r.length-1)}},{key:"markForCheck",value:function(){xr(this._cdRefInjectingView||this._lView)}},{key:"detach",value:function(){this._lView[2]&=-129}},{key:"reattach",value:function(){this._lView[2]|=128}},{key:"detectChanges",value:function(){_r(this._lView[1],this._lView,this.context)}},{key:"checkNoChanges",value:function(){!function(e,t,n){wn(!0);try{_r(e,t,n)}finally{wn(!1)}}(this._lView[1],this._lView,this.context)}},{key:"attachToViewContainerRef",value:function(e){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._viewContainerRef=e}},{key:"detachFromAppRef",value:function(){var e;this._appRef=null,$r(this._lView[1],e=this._lView,e[11],2,null,null)}},{key:"attachToAppRef",value:function(e){if(this._viewContainerRef)throw new Error("This view is already attached to a ViewContainer!");this._appRef=e}}]),e}(),aa=function(e){l(n,e);var t=u(n);function n(e){var i;return p(this,n),(i=t.call(this,e))._view=e,i}return m(n,[{key:"detectChanges",value:function(){Ur(this._view)}},{key:"checkNoChanges",value:function(){!function(e){wn(!0);try{Ur(e)}finally{wn(!1)}}(this._view)}},{key:"context",get:function(){return null}}]),n}(ra);function oa(e,t,n){return ta||(ta=function(e){l(n,e);var t=u(n);function n(){return p(this,n),t.apply(this,arguments)}return n}(e)),new ta(rn(t,n))}function sa(e,t,n,i){return na||(na=function(e){l(n,e);var t=u(n);function n(e,i,r){var a;return p(this,n),(a=t.call(this))._declarationView=e,a._declarationTContainer=i,a.elementRef=r,a}return m(n,[{key:"createEmbeddedView",value:function(e){var t=this._declarationTContainer.tViews,n=nr(this._declarationView,t,e,16,null,t.declTNode,null,null,null,null);n[17]=this._declarationView[this._declarationTContainer.index];var i=this._declarationView[19];return null!==i&&(n[19]=i.createEmbeddedView(t)),rr(t,n,e),new ra(n)}}]),n}(e)),0===n.type?new na(i,n,oa(t,n,i)):null}function la(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return function(e,t,n){if(!n&&Gt(e)){var i=sn(e.index,t);return new ra(i,i)}return 2===e.type||0===e.type||3===e.type||4===e.type?new ra(t[16],t):null}(bn(),pn(),e)}var ca=function(){var e=function e(){p(this,e)};return e.__NG_ELEMENT_ID__=function(){return ua()},e}(),ua=la,da=Function,ha=new $e("Set Injector scope."),va={},fa={},pa=[],ga=void 0;function ma(){return void 0===ga&&(ga=new ct),ga}function ba(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3?arguments[3]:void 0;return new ya(e,n,t||ma(),i)}var ya=function(){function e(t,n,i){var r=this,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;p(this,e),this.parent=i,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;var o=[];n&&ht(n,(function(e){return r.processProvider(e,t,n)})),ht([t],(function(e){return r.processInjectorType(e,[],o)})),this.records.set(Ze,Va(void 0,this));var s=this.records.get(ha);this.scope=null!=s?s.value:null,this.source=a||("object"==typeof t?null:_e(t))}return m(e,[{key:"destroyed",get:function(){return this._destroyed}},{key:"destroy",value:function(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach((function(e){return e.ngOnDestroy()}))}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Xe,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ye.Default;this.assertNotDestroyed();var i,r=it(this);try{if(!(n&ye.SkipSelf)){var a=this.records.get(e);if(void 0===a){var o=("function"==typeof(i=e)||"object"==typeof i&&i instanceof $e)&&Ae(e);a=o&&this.injectableDefInScope(o)?Va(ka(e),va):null,this.records.set(e,a)}if(null!=a)return this.hydrate(e,a)}return(n&ye.Self?ma():this.parent).get(e,t=n&ye.Optional&&t===Xe?null:t)}catch(s){if("NullInjectorError"===s.name){if((s.ngTempTokenPath=s.ngTempTokenPath||[]).unshift(_e(e)),r)throw s;return function(e,t,n,i){var r=e.ngTempTokenPath;throw t.__source&&r.unshift(t.__source),e.message=function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;e=e&&"\n"===e.charAt(0)&&"\u0275"==e.charAt(1)?e.substr(2):e;var r=_e(t);if(Array.isArray(t))r=t.map(_e).join(" -> ");else if("object"==typeof t){var a=[];for(var o in t)if(t.hasOwnProperty(o)){var s=t[o];a.push(o+":"+("string"==typeof s?JSON.stringify(s):_e(s)))}r="{".concat(a.join(", "),"}")}return"".concat(n).concat(i?"("+i+")":"","[").concat(r,"]: ").concat(e.replace(et,"\n  "))}("\n"+e.message,r,"R3InjectorError",i),e.ngTokenPath=r,e.ngTempTokenPath=null,e}(s,e,0,this.source)}throw s}finally{it(r)}}},{key:"_resolveInjectorDefTypes",value:function(){var e=this;this.injectorDefTypes.forEach((function(t){return e.get(t)}))}},{key:"toString",value:function(){var e=[];return this.records.forEach((function(t,n){return e.push(_e(n))})),"R3Injector[".concat(e.join(", "),"]")}},{key:"assertNotDestroyed",value:function(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}},{key:"processInjectorType",value:function(e,t,n){var i=this;if(!(e=Le(e)))return!1;var r=De(e),a=null==r&&e.ngModule||void 0,o=void 0===a?e:a,s=-1!==n.indexOf(o);if(void 0!==a&&(r=De(a)),null==r)return!1;if(null!=r.imports&&!s){var l;n.push(o);try{ht(r.imports,(function(e){i.processInjectorType(e,t,n)&&(void 0===l&&(l=[]),l.push(e))}))}finally{}if(void 0!==l)for(var c=function(e){var t=l[e],n=t.ngModule,r=t.providers;ht(r,(function(e){return i.processProvider(e,n,r||pa)}))},u=0;u<l.length;u++)c(u)}this.injectorDefTypes.add(o),this.records.set(o,Va(r.factory,va));var d=r.providers;if(null!=d&&!s){var h=e;ht(d,(function(e){return i.processProvider(e,h,d)}))}return void 0!==a&&void 0!==e.providers}},{key:"processProvider",value:function(e,t,n){var i=Aa(e=Le(e))?e:Le(e&&e.provide),r=function(e,t,n){return wa(e)?Va(void 0,e.useValue):Va(Ca(e),va)}(e);if(Aa(e)||!0!==e.multi)this.records.get(i);else{var a=this.records.get(i);a||((a=Va(void 0,va,!0)).factory=function(){return lt(a.multi)},this.records.set(i,a)),i=e,a.multi.push(e)}this.records.set(i,r)}},{key:"hydrate",value:function(e,t){var n;return t.value===va&&(t.value=fa,t.value=t.factory()),"object"==typeof t.value&&t.value&&null!==(n=t.value)&&"object"==typeof n&&"function"==typeof n.ngOnDestroy&&this.onDestroy.add(t.value),t.value}},{key:"injectableDefInScope",value:function(e){return!!e.providedIn&&("string"==typeof e.providedIn?"any"===e.providedIn||e.providedIn===this.scope:this.injectorDefTypes.has(e.providedIn))}}]),e}();function ka(e){var t=Ae(e),n=null!==t?t.factory:_t(e);if(null!==n)return n;var i=De(e);if(null!==i)return i.factory;if(e instanceof $e)throw new Error("Token ".concat(_e(e)," is missing a \u0275prov definition."));if(e instanceof Function)return function(e){var t=e.length;if(t>0){var n=function(e,t){for(var n=[],i=0;i<e;i++)n.push("?");return n}(t);throw new Error("Can't resolve all parameters for ".concat(_e(e),": (").concat(n.join(", "),")."))}var i=function(e){var t=e&&(e[Me]||e[Te]||e[Se]&&e[Se]());if(t){var n=function(e){if(e.hasOwnProperty("name"))return e.name;var t=(""+e).match(/^function\s*([^\s(]+)/);return null===t?"":t[1]}(e);return console.warn('DEPRECATED: DI is instantiating a token "'.concat(n,'" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "').concat(n,'" class.')),t}return null}(e);return null!==i?function(){return i.factory(e)}:function(){return new e}}(e);throw new Error("unreachable")}function Ca(e,t,n){var r,a=void 0;if(Aa(e)){var s=Le(e);return _t(s)||ka(s)}if(wa(e))a=function(){return Le(e.useValue)};else if((r=e)&&r.useFactory)a=function(){return e.useFactory.apply(e,i(lt(e.deps||[])))};else if(function(e){return!(!e||!e.useExisting)}(e))a=function(){return ot(Le(e.useExisting))};else{var l=Le(e&&(e.useClass||e.provide));if(!function(e){return!!e.deps}(e))return _t(l)||ka(l);a=function(){return o(l,i(lt(e.deps)))}}return a}function Va(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return{factory:e,value:t,multi:n?[]:void 0}}function wa(e){return null!==e&&"object"==typeof e&&tt in e}function Aa(e){return"function"==typeof e}var Pa=function(e,t,n){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3?arguments[3]:void 0,r=ba(e,t,n,i);return r._resolveInjectorDefTypes(),r}({name:n},t,e,n)},Da=function(){var e=function(){function e(){p(this,e)}return m(e,null,[{key:"create",value:function(e,t){return Array.isArray(e)?Pa(e,t,""):Pa(e.providers,e.parent,e.name||"")}}]),e}();return e.THROW_IF_NOT_FOUND=Xe,e.NULL=new ct,e.\u0275prov=Ve({token:e,providedIn:"any",factory:function(){return ot(Ze)}}),e.__NG_ELEMENT_ID__=-1,e}(),Ma=new $e("AnalyzeForEntryComponents");function Ia(e,t,n){var i=n?e.styles:null,r=n?e.classes:null,a=0;if(null!==t)for(var o=0;o<t.length;o++){var s=t[o];"number"==typeof s?a=s:1==a?r=Ue(r,s):2==a&&(i=Ue(i,s+": "+t[++o]+";"))}n?e.styles=i:e.stylesWithoutHost=i,n?e.classes=r:e.classesWithoutHost=r}function Sa(e,t){var n=ln(e)[1],i=n.data.length-1;Fn(n,{directiveStart:i,directiveEnd:i+1})}function Ta(e){for(var t=Object.getPrototypeOf(e.type.prototype).constructor,n=!0,i=[e];t;){var r=void 0;if(jt(e))r=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new Error("Directives cannot inherit Components");r=t.\u0275dir}if(r){if(n){i.push(r);var a=e;a.inputs=xa(e.inputs),a.declaredInputs=xa(e.declaredInputs),a.outputs=xa(e.outputs);var o=r.hostBindings;o&&Oa(e,o);var s=r.viewQuery,l=r.contentQueries;if(s&&_a(e,s),l&&Ua(e,l),Ce(e.inputs,r.inputs),Ce(e.declaredInputs,r.declaredInputs),Ce(e.outputs,r.outputs),jt(r)&&r.data.animation){var c=e.data;c.animation=(c.animation||[]).concat(r.data.animation)}}var u=r.features;if(u)for(var d=0;d<u.length;d++){var h=u[d];h&&h.ngInherit&&h(e),h===Ta&&(n=!1)}}t=Object.getPrototypeOf(t)}!function(e){for(var t=0,n=null,i=e.length-1;i>=0;i--){var r=e[i];r.hostVars=t+=r.hostVars,r.hostAttrs=$n(r.hostAttrs,n=$n(n,r.hostAttrs))}}(i)}function xa(e){return e===kt?{}:e===Ct?[]:e}function _a(e,t){var n=e.viewQuery;e.viewQuery=n?function(e,i){t(e,i),n(e,i)}:t}function Ua(e,t){var n=e.contentQueries;e.contentQueries=n?function(e,i,r){t(e,i,r),n(e,i,r)}:t}function Oa(e,t){var n=e.hostBindings;e.hostBindings=n?function(e,i){t(e,i),n(e,i)}:t}var Ea=null;function La(){if(!Ea){var e=He.Symbol;if(e&&e.iterator)Ea=e.iterator;else for(var t=Object.getOwnPropertyNames(Map.prototype),n=0;n<t.length;++n){var i=t[n];"entries"!==i&&"size"!==i&&Map.prototype[i]===Map.prototype.entries&&(Ea=i)}}return Ea}var Ga=function(){function e(t){p(this,e),this.wrapped=t}return m(e,null,[{key:"wrap",value:function(t){return new e(t)}},{key:"unwrap",value:function(t){return e.isWrapped(t)?t.wrapped:t}},{key:"isWrapped",value:function(t){return t instanceof e}}]),e}();function Ra(e){return!!ja(e)&&(Array.isArray(e)||!(e instanceof Map)&&La()in e)}function ja(e){return null!==e&&("function"==typeof e||"object"==typeof e)}function Na(e,t,n){return e[t]=n}function Fa(e,t){return e[t]}function Ba(e,t,n){return!Object.is(e[t],n)&&(e[t]=n,!0)}function Ha(e,t,n,i){var r=Ba(e,t,n);return Ba(e,t+1,i)||r}function Ka(e,t,n,i,r){var a=Ha(e,t,n,i);return Ba(e,t+2,r)||a}function qa(e,t,n,i,r,a){var o=Ha(e,t,n,i);return Ha(e,t+2,r,a)||o}function za(e,t,n,i){var r=pn();return Ba(r,Dn(),t)&&(gn(),function(e,t,n,i,r,a){var o=rn(e,t),s=t[11];if(null==i)Xt(s)?s.removeAttribute(o,n,a):o.removeAttribute(n);else{var l=null==r?Ft(i):r(i,e.tagName||"",n);Xt(s)?s.setAttribute(o,n,l,a):a?o.setAttributeNS(a,n,l):o.setAttribute(n,l)}}(Nn(),r,e,t,n,i)),za}function Qa(e,t,n,i){return Ba(e,Dn(),n)?t+Ft(n)+i:Fi}function Wa(e,t,n,i,r,a){var o=Ha(e,Pn(),n,r);return Mn(2),o?t+Ft(n)+i+Ft(r)+a:Fi}function Ja(e,t,n,i,r,a,o,s){var l=Ka(e,Pn(),n,r,o);return Mn(3),l?t+Ft(n)+i+Ft(r)+a+Ft(o)+s:Fi}function Ya(e,t,n,i,r,a,o,s){var l=pn(),c=gn(),u=e+20,d=c.firstCreatePass?function(e,t,n,i,r,a,o,s,l){var c=t.consts,u=ir(t,e,0,o||null,un(c,s));pr(t,n,u,un(c,l)),Fn(t,u);var d=u.tViews=hr(2,u,i,r,a,t.directiveRegistry,t.pipeRegistry,null,t.schemas,c);return null!==t.queries&&(t.queries.template(t,u),d.queries=t.queries.embeddedTView(u)),u}(e,c,l,t,n,i,r,a,o):c.data[u];yn(d,!1);var h=l[11].createComment("");Jr(c,l,h,d),Ti(h,l),Tr(l,l[u]=Mr(h,l,h,d)),Rt(d)&&cr(c,l,d),null!=o&&ur(l,d,s)}function $a(e){return on(vn.lFrame.contextLView,e)}function Za(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ye.Default,n=pn();return null===n?ot(e,t):ui(bn(),n,Le(e),t)}function Xa(e,t,n){var i=pn();return Ba(i,Dn(),t)&&fr(gn(),Nn(),i,e,t,i[11],n,!1),Xa}function eo(e,t,n,i,r){var a=r?"class":"style";Rr(e,n,t.inputs[a],a,i)}function to(e,t,n,i){var r=pn(),a=gn(),o=20+e,s=r[11],l=r[o]=tr(t,s,vn.lFrame.currentNamespace),c=a.firstCreatePass?function(e,t,n,i,r,a,o){var s=t.consts,l=ir(t,e,2,r,un(s,a));return pr(t,n,l,un(s,o)),null!==l.attrs&&Ia(l,l.attrs,!1),null!==l.mergedAttrs&&Ia(l,l.mergedAttrs,!0),null!==t.queries&&t.queries.elementStart(t,l),l}(e,a,r,0,t,n,i):a.data[o];yn(c,!0);var u=c.mergedAttrs;null!==u&&Wn(s,l,u);var d=c.classes;null!==d&&ea(s,l,d);var h=c.styles;null!==h&&Xr(s,l,h),Jr(a,r,l,c),0===vn.lFrame.elementDepthCount&&Ti(l,r),vn.lFrame.elementDepthCount++,Rt(c)&&(cr(a,r,c),lr(a,c,r)),null!==i&&ur(r,c)}function no(){var e=bn();kn()?Cn():yn(e=e.parent,!1);var t=e;vn.lFrame.elementDepthCount--;var n=gn();n.firstCreatePass&&(Fn(n,e),Lt(e)&&n.queries.elementEnd(e)),null!=t.classesWithoutHost&&function(e){return 0!=(16&e.flags)}(t)&&eo(n,t,pn(),t.classesWithoutHost,!0),null!=t.stylesWithoutHost&&function(e){return 0!=(32&e.flags)}(t)&&eo(n,t,pn(),t.stylesWithoutHost,!1)}function io(e,t,n,i){to(e,t,n,i),no()}function ro(e,t,n){var i=pn(),r=gn(),a=e+20,o=r.firstCreatePass?function(e,t,n,i,r){var a=t.consts,o=un(a,i),s=ir(t,e,3,"ng-container",o);return null!==o&&Ia(s,o,!0),pr(t,n,s,un(a,r)),null!==t.queries&&t.queries.elementStart(t,s),s}(e,r,i,t,n):r.data[a];yn(o,!0);var s=i[a]=i[11].createComment("");Jr(r,i,s,o),Ti(s,i),Rt(o)&&(cr(r,i,o),lr(r,o,i)),null!=n&&ur(i,o)}function ao(){var e=bn(),t=gn();kn()?Cn():yn(e=e.parent,!1),t.firstCreatePass&&(Fn(t,e),Lt(e)&&t.queries.elementEnd(e))}function oo(e,t,n){ro(e,t,n),ao()}function so(){return pn()}function lo(e){return!!e&&"function"==typeof e.then}function co(e){return!!e&&"function"==typeof e.subscribe}function uo(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3?arguments[3]:void 0,r=pn(),a=gn(),o=bn();return function(e,t,n,i,r,a){var o=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=arguments.length>7?arguments[7]:void 0,l=Rt(i),c=e.firstCreatePass&&(e.cleanup||(e.cleanup=[])),u=Lr(t),d=!0;if(2===i.type){var h=rn(i,t),v=s?s(h):kt,f=v.target||h,p=u.length,g=s?function(e){return s(tn(e[i.index])).target}:i.index;if(Xt(n)){var m=null;if(!s&&l&&(m=function(e,t,n,i){var r=e.cleanup;if(null!=r)for(var a=0;a<r.length-1;a+=2){var o=r[a];if(o===n&&r[a+1]===i){var s=t[7],l=r[a+2];return s.length>l?s[l]:null}"string"==typeof o&&(a+=2)}return null}(e,t,r,i.index)),null!==m)(m.__ngLastListenerFn__||m).__ngNextListenerFn__=a,m.__ngLastListenerFn__=a,d=!1;else{a=vo(i,t,a,!1);var b=n.listen(v.name||f,r,a);u.push(a,b),c&&c.push(r,g,p,p+1)}}else a=vo(i,t,a,!0),f.addEventListener(r,a,o),u.push(a),c&&c.push(r,g,p,o)}var y,k=i.outputs;if(d&&null!==k&&(y=k[r])){var C=y.length;if(C)for(var V=0;V<C;V+=2){var w=t[y[V]][y[V+1]].subscribe(a),A=u.length;u.push(a,w),c&&c.push(r,i.index,A,-(A+1))}}}(a,r,r[11],o,e,t,n,i),uo}function ho(e,t,n){try{return!1!==t(n)}catch(i){return Gr(e,i),!1}}function vo(e,t,n,i){return function r(a){if(a===Function)return n;var o=2&e.flags?sn(e.index,t):t;0==(32&t[2])&&xr(o);for(var s=ho(t,n,a),l=r.__ngNextListenerFn__;l;)s=ho(t,l,a)&&s,l=l.__ngNextListenerFn__;return i&&!1===s&&(a.preventDefault(),a.returnValue=!1),s}}function fo(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return function(e){return(vn.lFrame.contextLView=function(e,t){for(;e>0;)t=t[15],e--;return t}(e,vn.lFrame.contextLView))[8]}(e)}function po(e,t,n){return go(e,"",t,"",n),po}function go(e,t,n,i,r){var a=pn(),o=Qa(a,t,n,i);return o!==Fi&&fr(gn(),Nn(),a,e,o,a[11],r,!1),go}function mo(e,t,n,i,r,a,o){var s=pn(),l=Wa(s,t,n,i,r,a);return l!==Fi&&fr(gn(),Nn(),s,e,l,s[11],o,!1),mo}function bo(e,t,n,i,r,a,o,s,l){var c=pn(),u=Ja(c,t,n,i,r,a,o,s);return u!==Fi&&fr(gn(),Nn(),c,e,u,c[11],l,!1),bo}var yo=[];function ko(e,t,n,i,r){for(var a=e[n+1],o=null===t,s=i?Ji(a):$i(a),l=!1;0!==s&&(!1===l||o);){var c=e[s+1];Co(e[s],t)&&(l=!0,e[s+1]=i?Xi(c):Yi(c)),s=i?Ji(c):$i(c)}l&&(e[n+1]=i?Yi(a):Xi(a))}function Co(e,t){return null===e||null==t||(Array.isArray(e)?e[1]:e)===t||!(!Array.isArray(e)||"string"!=typeof t)&&gt(e,t)>=0}function Vo(e,t,n){return Ao(e,t,n,!1),Vo}function wo(e,t){return Ao(e,t,null,!0),wo}function Ao(e,t,n,i){var r=pn(),a=gn(),o=Mn(2);a.firstUpdatePass&&function(e,t,n,i){var r=e.data;if(null===r[n+1]){var a=r[Rn()+20],o=function(e,t){return t>=e.expandoStartIndex}(e,n);(function(e,t){return 0!=(e.flags&(t?16:32))})(a,i)&&null===t&&!o&&(t=!1),t=function(e,t,n,i){var r=function(e){var t=vn.lFrame.currentDirectiveIndex;return-1===t?null:e[t]}(e),a=i?t.residualClasses:t.residualStyles;if(null===r)0===(i?t.classBindings:t.styleBindings)&&(n=Do(n=Po(null,e,t,n,i),t.attrs,i),a=null);else{var o=t.directiveStylingLast;if(-1===o||e[o]!==r)if(n=Po(r,e,t,n,i),null===a){var s=function(e,t,n){var i=n?t.classBindings:t.styleBindings;if(0!==$i(i))return e[Ji(i)]}(e,t,i);void 0!==s&&Array.isArray(s)&&function(e,t,n,i){e[Ji(n?t.classBindings:t.styleBindings)]=i}(e,t,i,s=Do(s=Po(null,e,t,s[1],i),t.attrs,i))}else a=function(e,t,n){for(var i=void 0,r=t.directiveEnd,a=1+t.directiveStylingLast;a<r;a++)i=Do(i,e[a].hostAttrs,n);return Do(i,t.attrs,n)}(e,t,i)}return void 0!==a&&(i?t.residualClasses=a:t.residualStyles=a),n}(r,a,t,i),function(e,t,n,i,r,a){var o=a?t.classBindings:t.styleBindings,s=Ji(o),l=$i(o);e[i]=n;var c,u=!1;if(Array.isArray(n)){var d=n;(null===(c=d[1])||gt(d,c)>0)&&(u=!0)}else c=n;if(r)if(0!==l){var h=Ji(e[s+1]);e[i+1]=Wi(h,s),0!==h&&(e[h+1]=Zi(e[h+1],i)),e[s+1]=131071&e[s+1]|i<<17}else e[i+1]=Wi(s,0),0!==s&&(e[s+1]=Zi(e[s+1],i)),s=i;else e[i+1]=Wi(l,0),0===s?s=i:e[l+1]=Zi(e[l+1],i),l=i;u&&(e[i+1]=Yi(e[i+1])),ko(e,c,i,!0),ko(e,c,i,!1),function(e,t,n,i,r){var a=r?e.residualClasses:e.residualStyles;null!=a&&"string"==typeof t&&gt(a,t)>=0&&(n[i+1]=Xi(n[i+1]))}(t,c,e,i,a),o=Wi(s,l),a?t.classBindings=o:t.styleBindings=o}(r,a,t,n,o,i)}}(a,e,o,i),t!==Fi&&Ba(r,o,t)&&function(e,t,n,i,r,a,o,s){if(2===t.type){var l=e.data,c=l[s+1];Io(1==(1&c)?Mo(l,t,n,r,$i(c),o):void 0)||(Io(a)||2==(2&c)&&(a=Mo(l,null,n,r,s,o)),function(e,t,n,i,r){var a=Xt(e);if(t)r?a?e.addClass(n,i):n.classList.add(i):a?e.removeClass(n,i):n.classList.remove(i);else{var o=-1==i.indexOf("-")?void 0:2;null==r?a?e.removeStyle(n,i,o):n.style.removeProperty(i):a?e.setStyle(n,i,r,o):n.style.setProperty(i,r)}}(i,o,nn(Rn(),n),r,a))}}(a,a.data[Rn()+20],r,r[11],e,r[o+1]=function(e,t){return null==e||("string"==typeof t?e+=t:"object"==typeof e&&(e=_e(Ai(e)))),e}(t,n),i,o)}function Po(e,t,n,i,r){var a=null,o=n.directiveEnd,s=n.directiveStylingLast;for(-1===s?s=n.directiveStart:s++;s<o&&(i=Do(i,(a=t[s]).hostAttrs,r),a!==e);)s++;return null!==e&&(n.directiveStylingLast=s),i}function Do(e,t,n){var i,r,a,o,s=n?1:2,l=-1;if(null!==t)for(var c=0;c<t.length;c++){var u=t[c];"number"==typeof u?l=u:l===s&&(Array.isArray(e)||(e=void 0===e?[]:["",e]),i=e,r=u,a=!!n||t[++c],o=void 0,(o=gt(i,r))>=0?i[1|o]=a:function(e,t,n,i){var r=e.length;if(r==t)e.push(n,i);else if(1===r)e.push(i,e[0]),e[0]=n;else{for(r--,e.push(e[r-1],e[r]);r>t;)e[r]=e[r-2],r--;e[t]=n,e[t+1]=i}}(i,o=~o,r,a))}return void 0===e?null:e}function Mo(e,t,n,i,r,a){for(var o=null===t,s=void 0;r>0;){var l=e[r],c=Array.isArray(l),u=c?l[1]:l,d=null===u,h=n[r+1];h===Fi&&(h=d?yo:void 0);var v=d?pt(h,i):u===i?h:void 0;if(c&&!Io(v)&&(v=pt(l,i)),Io(v)&&(s=v,o))return s;var f=e[r+1];r=o?Ji(f):$i(f)}if(null!==t){var p=a?t.residualClasses:t.residualStyles;null!=p&&(s=pt(p,i))}return s}function Io(e){return void 0!==e}function So(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=pn(),i=gn(),r=e+20,a=i.firstCreatePass?ir(i,e,2,null,null):i.data[r],o=n[r]=function(e,t){return Xt(t)?t.createText(e):t.createTextNode(e)}(t,n[11]);Jr(i,n,o,a),yn(a,!1)}function To(e){return xo("",e,""),To}function xo(e,t,n){var i=pn(),r=Qa(i,e,t,n);return r!==Fi&&jr(i,Rn(),r),xo}function _o(e,t,n,i,r){var a=pn(),o=Wa(a,e,t,n,i,r);return o!==Fi&&jr(a,Rn(),o),_o}function Uo(e,t,n,i,r,a,o){var s=pn(),l=Ja(s,e,t,n,i,r,a,o);return l!==Fi&&jr(s,Rn(),l),Uo}function Oo(e,t,n,i,r,a,o,s,l){var c=pn(),u=function(e,t,n,i,r,a,o,s,l,c){var u=qa(e,Pn(),n,r,o,l);return Mn(4),u?t+Ft(n)+i+Ft(r)+a+Ft(o)+s+Ft(l)+c:Fi}(c,e,t,n,i,r,a,o,s,l);return u!==Fi&&jr(c,Rn(),u),Oo}function Eo(e,t,n){var i=pn();return Ba(i,Dn(),t)&&fr(gn(),Nn(),i,e,t,i[11],n,!0),Eo}var Lo=void 0,Go=["en",[["a","p"],["AM","PM"],Lo],[["AM","PM"],Lo,Lo],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Lo,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Lo,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Lo,"{1} 'at' {0}",Lo],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(e){var t=Math.floor(Math.abs(e)),n=e.toString().replace(/^[^.]*\.?/,"").length;return 1===t&&0===n?1:5}],Ro={};function jo(e){var t=function(e){return e.toLowerCase().replace(/_/g,"-")}(e),n=No(t);if(n)return n;var i=t.split("-")[0];if(n=No(i))return n;if("en"===i)return Go;throw new Error('Missing locale data for the locale "'.concat(e,'".'))}function No(e){return e in Ro||(Ro[e]=He.ng&&He.ng.common&&He.ng.common.locales&&He.ng.common.locales[e]),Ro[e]}var Fo=function(e){return e[e.LocaleId=0]="LocaleId",e[e.DayPeriodsFormat=1]="DayPeriodsFormat",e[e.DayPeriodsStandalone=2]="DayPeriodsStandalone",e[e.DaysFormat=3]="DaysFormat",e[e.DaysStandalone=4]="DaysStandalone",e[e.MonthsFormat=5]="MonthsFormat",e[e.MonthsStandalone=6]="MonthsStandalone",e[e.Eras=7]="Eras",e[e.FirstDayOfWeek=8]="FirstDayOfWeek",e[e.WeekendRange=9]="WeekendRange",e[e.DateFormat=10]="DateFormat",e[e.TimeFormat=11]="TimeFormat",e[e.DateTimeFormat=12]="DateTimeFormat",e[e.NumberSymbols=13]="NumberSymbols",e[e.NumberFormats=14]="NumberFormats",e[e.CurrencyCode=15]="CurrencyCode",e[e.CurrencySymbol=16]="CurrencySymbol",e[e.CurrencyName=17]="CurrencyName",e[e.Currencies=18]="Currencies",e[e.Directionality=19]="Directionality",e[e.PluralCase=20]="PluralCase",e[e.ExtraData=21]="ExtraData",e}({});function Bo(e){var t;null==(t=e)&&function(e,t,n,i){throw new Error("ASSERTION ERROR: Expected localeId to be defined"+" [Expected=> null != ".concat(t," <=Actual]"))}(0,t),"string"==typeof e&&e.toLowerCase().replace(/_/g,"-")}function Ho(e,t,n,i,r){if(e=Le(e),Array.isArray(e))for(var a=0;a<e.length;a++)Ho(e[a],t,n,i,r);else{var o=gn(),s=pn(),l=Aa(e)?e:Le(e.provide),c=Ca(e),u=bn(),d=1048575&u.providerIndexes,h=u.directiveStart,v=u.providerIndexes>>20;if(Aa(e)||!e.multi){var f=new Qn(c,r,Za),p=zo(l,t,r?d:d+v,h);-1===p?(ci(ai(u,s),o,l),Ko(o,e,t.length),t.push(l),u.directiveStart++,u.directiveEnd++,r&&(u.providerIndexes+=1048576),n.push(f),s.push(f)):(n[p]=f,s[p]=f)}else{var g=zo(l,t,d+v,h),m=zo(l,t,d,d+v),b=g>=0&&n[g],y=m>=0&&n[m];if(r&&!y||!r&&!b){ci(ai(u,s),o,l);var k=function(e,t,n,i,r){var a=new Qn(e,n,Za);return a.multi=[],a.index=t,a.componentProviders=0,qo(a,r,i&&!n),a}(r?Wo:Qo,n.length,r,i,c);!r&&y&&(n[m].providerFactory=k),Ko(o,e,t.length,0),t.push(l),u.directiveStart++,u.directiveEnd++,r&&(u.providerIndexes+=1048576),n.push(k),s.push(k)}else Ko(o,e,g>-1?g:m,qo(n[r?m:g],c,!r&&i));!r&&i&&y&&n[m].componentProviders++}}}function Ko(e,t,n,i){var r=Aa(t);if(r||t.useClass){var a=(t.useClass||t).prototype.ngOnDestroy;if(a){var o=e.destroyHooks||(e.destroyHooks=[]);if(!r&&t.multi){var s=o.indexOf(n);-1===s?o.push(n,[i,a]):o[s+1].push(i,a)}else o.push(n,a)}}}function qo(e,t,n){return n&&e.componentProviders++,e.multi.push(t)-1}function zo(e,t,n,i){for(var r=n;r<i;r++)if(t[r]===e)return r;return-1}function Qo(e,t,n,i){return Jo(this.multi,[])}function Wo(e,t,n,i){var r,a=this.multi;if(this.providerFactory){var o=this.providerFactory.componentProviders,s=vi(n,n[1],this.providerFactory.index,i);Jo(a,r=s.slice(0,o));for(var l=o;l<s.length;l++)r.push(s[l])}else Jo(a,r=[]);return r}function Jo(e,t){for(var n=0;n<e.length;n++)t.push((0,e[n])());return t}function Yo(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return function(n){n.providersResolver=function(n,i){return function(e,t,n){var i=gn();if(i.firstCreatePass){var r=jt(e);Ho(n,i.data,i.blueprint,r,!0),Ho(t,i.data,i.blueprint,r,!1)}}(n,i?i(e):e,t)}}}var $o=function e(){p(this,e)},Zo=function(){function e(){p(this,e)}return m(e,[{key:"resolveComponentFactory",value:function(e){throw function(e){var t=Error("No component factory found for ".concat(_e(e),". Did you add it to @NgModule.entryComponents?"));return t.ngComponent=e,t}(e)}}]),e}(),Xo=function(){var e=function e(){p(this,e)};return e.NULL=new Zo,e}(),es=function(){var e=function e(t){p(this,e),this.nativeElement=t};return e.__NG_ELEMENT_ID__=function(){return ts(e)},e}(),ts=function(e){return oa(e,bn(),pn())},ns=function e(){p(this,e)},is=function(e){return e[e.Important=1]="Important",e[e.DashCase=2]="DashCase",e}({}),rs=function(){var e=function e(){p(this,e)};return e.__NG_ELEMENT_ID__=function(){return as()},e}(),as=function(){var e=pn(),t=sn(bn().index,e);return function(e){var t=e[11];if(Xt(t))return t;throw new Error("Cannot inject Renderer2 when the application uses Renderer3!")}(Ot(t)?t:e)},os=function(){var e=function e(){p(this,e)};return e.\u0275prov=Ve({token:e,providedIn:"root",factory:function(){return null}}),e}(),ss=new function e(t){p(this,e),this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}("10.2.4"),ls=function(){function e(){p(this,e)}return m(e,[{key:"supports",value:function(e){return Ra(e)}},{key:"create",value:function(e){return new us(e)}}]),e}(),cs=function(e,t){return t},us=function(){function e(t){p(this,e),this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||cs}return m(e,[{key:"forEachItem",value:function(e){var t;for(t=this._itHead;null!==t;t=t._next)e(t)}},{key:"forEachOperation",value:function(e){for(var t=this._itHead,n=this._removalsHead,i=0,r=null;t||n;){var a=!n||t&&t.currentIndex<fs(n,i,r)?t:n,o=fs(a,i,r),s=a.currentIndex;if(a===n)i--,n=n._nextRemoved;else if(t=t._next,null==a.previousIndex)i++;else{r||(r=[]);var l=o-i,c=s-i;if(l!=c){for(var u=0;u<l;u++){var d=u<r.length?r[u]:r[u]=0,h=d+u;c<=h&&h<l&&(r[u]=d+1)}r[a.previousIndex]=c-l}}o!==s&&e(a,o,s)}}},{key:"forEachPreviousItem",value:function(e){var t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}},{key:"forEachAddedItem",value:function(e){var t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}},{key:"forEachMovedItem",value:function(e){var t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}},{key:"forEachRemovedItem",value:function(e){var t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}},{key:"forEachIdentityChange",value:function(e){var t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}},{key:"diff",value:function(e){if(null==e&&(e=[]),!Ra(e))throw new Error("Error trying to diff '".concat(_e(e),"'. Only arrays and iterables are allowed"));return this.check(e)?this:null}},{key:"onDestroy",value:function(){}},{key:"check",value:function(e){var t=this;this._reset();var n,i,r,a=this._itHead,o=!1;if(Array.isArray(e)){this.length=e.length;for(var s=0;s<this.length;s++)i=e[s],r=this._trackByFn(s,i),null!==a&&Object.is(a.trackById,r)?(o&&(a=this._verifyReinsertion(a,i,r,s)),Object.is(a.item,i)||this._addIdentityChange(a,i)):(a=this._mismatch(a,i,r,s),o=!0),a=a._next}else n=0,function(e,t){if(Array.isArray(e))for(var n=0;n<e.length;n++)t(e[n]);else for(var i,r=e[La()]();!(i=r.next()).done;)t(i.value)}(e,(function(e){r=t._trackByFn(n,e),null!==a&&Object.is(a.trackById,r)?(o&&(a=t._verifyReinsertion(a,e,r,n)),Object.is(a.item,e)||t._addIdentityChange(a,e)):(a=t._mismatch(a,e,r,n),o=!0),a=a._next,n++})),this.length=n;return this._truncate(a),this.collection=e,this.isDirty}},{key:"isDirty",get:function(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}},{key:"_reset",value:function(){if(this.isDirty){var e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}},{key:"_mismatch",value:function(e,t,n,i){var r;return null===e?r=this._itTail:(r=e._prev,this._remove(e)),null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(n,i))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,r,i)):null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,r,i)):e=this._addAfter(new ds(t,n),r,i),e}},{key:"_verifyReinsertion",value:function(e,t,n,i){var r=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==r?e=this._reinsertAfter(r,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}},{key:"_truncate",value:function(e){for(;null!==e;){var t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}},{key:"_reinsertAfter",value:function(e,t,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);var i=e._prevRemoved,r=e._nextRemoved;return null===i?this._removalsHead=r:i._nextRemoved=r,null===r?this._removalsTail=i:r._prevRemoved=i,this._insertAfter(e,t,n),this._addToMoves(e,n),e}},{key:"_moveAfter",value:function(e,t,n){return this._unlink(e),this._insertAfter(e,t,n),this._addToMoves(e,n),e}},{key:"_addAfter",value:function(e,t,n){return this._insertAfter(e,t,n),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}},{key:"_insertAfter",value:function(e,t,n){var i=null===t?this._itHead:t._next;return e._next=i,e._prev=t,null===i?this._itTail=e:i._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new vs),this._linkedRecords.put(e),e.currentIndex=n,e}},{key:"_remove",value:function(e){return this._addToRemovals(this._unlink(e))}},{key:"_unlink",value:function(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);var t=e._prev,n=e._next;return null===t?this._itHead=n:t._next=n,null===n?this._itTail=t:n._prev=t,e}},{key:"_addToMoves",value:function(e,t){return e.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}},{key:"_addToRemovals",value:function(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new vs),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}},{key:"_addIdentityChange",value:function(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}]),e}(),ds=function e(t,n){p(this,e),this.item=t,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null},hs=function(){function e(){p(this,e),this._head=null,this._tail=null}return m(e,[{key:"add",value:function(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}},{key:"get",value:function(e,t){var n;for(n=this._head;null!==n;n=n._nextDup)if((null===t||t<=n.currentIndex)&&Object.is(n.trackById,e))return n;return null}},{key:"remove",value:function(e){var t=e._prevDup,n=e._nextDup;return null===t?this._head=n:t._nextDup=n,null===n?this._tail=t:n._prevDup=t,null===this._head}}]),e}(),vs=function(){function e(){p(this,e),this.map=new Map}return m(e,[{key:"put",value:function(e){var t=e.trackById,n=this.map.get(t);n||(n=new hs,this.map.set(t,n)),n.add(e)}},{key:"get",value:function(e,t){var n=this.map.get(e);return n?n.get(e,t):null}},{key:"remove",value:function(e){var t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}},{key:"isEmpty",get:function(){return 0===this.map.size}},{key:"clear",value:function(){this.map.clear()}}]),e}();function fs(e,t,n){var i=e.previousIndex;if(null===i)return i;var r=0;return n&&i<n.length&&(r=n[i]),i+t+r}var ps=function(){function e(){p(this,e)}return m(e,[{key:"supports",value:function(e){return e instanceof Map||ja(e)}},{key:"create",value:function(){return new gs}}]),e}(),gs=function(){function e(){p(this,e),this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}return m(e,[{key:"isDirty",get:function(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}},{key:"forEachItem",value:function(e){var t;for(t=this._mapHead;null!==t;t=t._next)e(t)}},{key:"forEachPreviousItem",value:function(e){var t;for(t=this._previousMapHead;null!==t;t=t._nextPrevious)e(t)}},{key:"forEachChangedItem",value:function(e){var t;for(t=this._changesHead;null!==t;t=t._nextChanged)e(t)}},{key:"forEachAddedItem",value:function(e){var t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}},{key:"forEachRemovedItem",value:function(e){var t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}},{key:"diff",value:function(e){if(e){if(!(e instanceof Map||ja(e)))throw new Error("Error trying to diff '".concat(_e(e),"'. Only maps and objects are allowed"))}else e=new Map;return this.check(e)?this:null}},{key:"onDestroy",value:function(){}},{key:"check",value:function(e){var t=this;this._reset();var n=this._mapHead;if(this._appendAfter=null,this._forEach(e,(function(e,i){if(n&&n.key===i)t._maybeAddToChanges(n,e),t._appendAfter=n,n=n._next;else{var r=t._getOrCreateRecordForKey(i,e);n=t._insertBeforeOrAppend(n,r)}})),n){n._prev&&(n._prev._next=null),this._removalsHead=n;for(var i=n;null!==i;i=i._nextRemoved)i===this._mapHead&&(this._mapHead=null),this._records.delete(i.key),i._nextRemoved=i._next,i.previousValue=i.currentValue,i.currentValue=null,i._prev=null,i._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}},{key:"_insertBeforeOrAppend",value:function(e,t){if(e){var n=e._prev;return t._next=e,t._prev=n,e._prev=t,n&&(n._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}},{key:"_getOrCreateRecordForKey",value:function(e,t){if(this._records.has(e)){var n=this._records.get(e);this._maybeAddToChanges(n,t);var i=n._prev,r=n._next;return i&&(i._next=r),r&&(r._prev=i),n._next=null,n._prev=null,n}var a=new ms(e);return this._records.set(e,a),a.currentValue=t,this._addToAdditions(a),a}},{key:"_reset",value:function(){if(this.isDirty){var e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}},{key:"_maybeAddToChanges",value:function(e,t){Object.is(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}},{key:"_addToAdditions",value:function(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}},{key:"_addToChanges",value:function(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}},{key:"_forEach",value:function(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach((function(n){return t(e[n],n)}))}}]),e}(),ms=function e(t){p(this,e),this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null},bs=function(){var e=function(){function e(t){p(this,e),this.factories=t}return m(e,[{key:"find",value:function(e){var t,n=this.factories.find((function(t){return t.supports(e)}));if(null!=n)return n;throw new Error("Cannot find a differ supporting object '".concat(e,"' of type '").concat((t=e).name||typeof t,"'"))}}],[{key:"create",value:function(t,n){if(null!=n){var i=n.factories.slice();t=t.concat(i)}return new e(t)}},{key:"extend",value:function(t){return{provide:e,useFactory:function(n){if(!n)throw new Error("Cannot extend IterableDiffers without a parent injector");return e.create(t,n)},deps:[[e,new be,new ge]]}}}]),e}();return e.\u0275prov=Ve({token:e,providedIn:"root",factory:function(){return new e([new ls])}}),e}(),ys=function(){var e=function(){function e(t){p(this,e),this.factories=t}return m(e,[{key:"find",value:function(e){var t=this.factories.find((function(t){return t.supports(e)}));if(t)return t;throw new Error("Cannot find a differ supporting object '".concat(e,"'"))}}],[{key:"create",value:function(t,n){if(n){var i=n.factories.slice();t=t.concat(i)}return new e(t)}},{key:"extend",value:function(t){return{provide:e,useFactory:function(n){if(!n)throw new Error("Cannot extend KeyValueDiffers without a parent injector");return e.create(t,n)},deps:[[e,new be,new ge]]}}}]),e}();return e.\u0275prov=Ve({token:e,providedIn:"root",factory:function(){return new e([new ps])}}),e}(),ks=[new ps],Cs=new bs([new ls]),Vs=new ys(ks),ws=function(){var e=function e(){p(this,e)};return e.__NG_ELEMENT_ID__=function(){return As(e,es)},e}(),As=function(e,t){return sa(e,t,bn(),pn())},Ps=function(){var e=function e(){p(this,e)};return e.__NG_ELEMENT_ID__=function(){return Ds(e,es)},e}(),Ds=function(e,t){return function(e,t,n,i){var r;ia||(ia=function(e){l(i,e);var n=u(i);function i(e,t,r){var a;return p(this,i),(a=n.call(this))._lContainer=e,a._hostTNode=t,a._hostView=r,a}return m(i,[{key:"element",get:function(){return oa(t,this._hostTNode,this._hostView)}},{key:"injector",get:function(){return new gi(this._hostTNode,this._hostView)}},{key:"parentInjector",get:function(){var e=li(this._hostTNode,this._hostView);if(Xn(e)){var t=ti(e,this._hostView),n=ei(e);return new gi(t[1].data[n+8],t)}return new gi(null,this._hostView)}},{key:"clear",value:function(){for(;this.length>0;)this.remove(this.length-1)}},{key:"get",value:function(e){return null!==this._lContainer[8]&&this._lContainer[8][e]||null}},{key:"length",get:function(){return this._lContainer.length-10}},{key:"createEmbeddedView",value:function(e,t,n){var i=e.createEmbeddedView(t||{});return this.insert(i,n),i}},{key:"createComponent",value:function(e,t,n,i,r){var a=n||this.parentInjector;if(!r&&null==e.ngModule&&a){var o=a.get(ut,null);o&&(r=o)}var s=e.create(a,i,void 0,r);return this.insert(s.hostView,t),s}},{key:"insert",value:function(e,t){var n=e._lView,i=n[1];if(e.destroyed)throw new Error("Cannot insert a destroyed View in a ViewContainer!");if(this.allocateContainerIfNeeded(),Et(n[3])){var r=this.indexOf(e);if(-1!==r)this.detach(r);else{var a=n[3],o=new ia(a,a[6],a[3]);o.detach(o.indexOf(e))}}var s=this._adjustIndex(t),l=this._lContainer;!function(e,t,n,i){var r=10+i,a=n.length;i>0&&(n[r-1][4]=t),i<a-10?(t[4]=n[r],vt(n,10+i,t)):(n.push(t),t[4]=null),t[3]=n;var o=t[17];null!==o&&n!==o&&function(e,t){var n=e[9];t[16]!==t[3][3][16]&&(e[2]=!0),null===n?e[9]=[t]:n.push(t)}(o,t);var s=t[19];null!==s&&s.insertView(e),t[2]|=128}(i,n,l,s);var c=function e(t,n){var i=10+t+1;if(i<n.length){var r=n[i],a=r[1].firstChild;if(null!==a)return function t(n,i){if(null!==i){var r=i.type;if(2===r)return rn(i,n);if(0===r)return e(-1,n[i.index]);if(3===r||4===r){var a=i.child;if(null!==a)return t(n,a);var o=n[i.index];return Et(o)?e(-1,o):tn(o)}var s=n[16],l=s[6],c=Bi(s),u=l.projection[i.projection];return null!=u?t(c,u):t(n,i.next)}return null}(r,a)}return n[7]}(s,l),u=n[11],d=Wr(u,l[7]);return null!==d&&function(e,t,n,i,r,a){i[0]=r,i[6]=t,$r(e,i,n,1,r,a)}(i,l[6],u,n,d,c),e.attachToViewContainerRef(this),vt(l[8],s,e),e}},{key:"move",value:function(e,t){if(e.destroyed)throw new Error("Cannot move a destroyed View in a ViewContainer!");return this.insert(e,t)}},{key:"indexOf",value:function(e){var t=this._lContainer[8];return null!==t?t.indexOf(e):-1}},{key:"remove",value:function(e){this.allocateContainerIfNeeded();var t=this._adjustIndex(e,-1),n=Br(this._lContainer,t);n&&(ft(this._lContainer[8],t),Hr(n[1],n))}},{key:"detach",value:function(e){this.allocateContainerIfNeeded();var t=this._adjustIndex(e,-1),n=Br(this._lContainer,t);return n&&null!=ft(this._lContainer[8],t)?new ra(n):null}},{key:"_adjustIndex",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return null==e?this.length+t:e}},{key:"allocateContainerIfNeeded",value:function(){null===this._lContainer[8]&&(this._lContainer[8]=[])}}]),i}(e));var a=i[n.index];if(Et(a))r=a;else{var o;if(3===n.type)o=tn(a);else if(o=i[11].createComment(""),Nt(i)){var s=i[11],c=rn(n,i);qr(s,Wr(s,c),o,function(e,t){return Xt(e)?e.nextSibling(t):t.nextSibling}(s,c))}else Jr(i[1],i,o,n);i[n.index]=r=Mr(a,i,o,n),Tr(i,r)}return new ia(r,n,i)}(e,t,bn(),pn())},Ms={},Is=function(e){l(n,e);var t=u(n);function n(e){var i;return p(this,n),(i=t.call(this)).ngModule=e,i}return m(n,[{key:"resolveComponentFactory",value:function(e){var t=xt(e);return new xs(t,this.ngModule)}}]),n}(Xo);function Ss(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push({propName:e[n],templateName:n});return t}var Ts=new $e("SCHEDULER_TOKEN",{providedIn:"root",factory:function(){return Ht}}),xs=function(e){l(n,e);var t=u(n);function n(e,i){var r;return p(this,n),(r=t.call(this)).componentDef=e,r.ngModule=i,r.componentType=e.type,r.selector=e.selectors.map(Ni).join(","),r.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],r.isBoundToModule=!!i,r}return m(n,[{key:"inputs",get:function(){return Ss(this.componentDef.inputs)}},{key:"outputs",get:function(){return Ss(this.componentDef.outputs)}},{key:"create",value:function(e,t,n,i){var r,a,o=(i=i||this.ngModule)?function(e,t){return{get:function(n,i,r){var a=e.get(n,Ms,r);return a!==Ms||i===Ms?a:t.get(n,i,r)}}}(e,i.injector):e,s=o.get(ns,en),l=o.get(os,null),c=s.createRenderer(null,this.componentDef),u=this.componentDef.selectors[0][0]||"div",d=n?function(e,t,n){if(Xt(e))return e.selectRootElement(t,n===yt.ShadowDom);var i="string"==typeof t?e.querySelector(t):t;return i.textContent="",i}(c,n,this.componentDef.encapsulation):tr(u,s.createRenderer(null,this.componentDef),function(e){var t=e.toLowerCase();return"svg"===t?"http://www.w3.org/2000/svg":"math"===t?"http://www.w3.org/1998/MathML/":null}(u)),h=this.componentDef.onPush?576:528,v={components:[],scheduler:Ht,clean:Er,playerHandler:null,flags:0},f=hr(0,null,null,1,0,null,null,null,null,null),p=nr(null,f,v,h,null,null,s,c,l,o);_n(p);try{var g=function(e,t,n,i,r,a){var o=n[1];n[20]=e;var s=ir(o,0,2,null,null),l=s.mergedAttrs=t.hostAttrs;null!==l&&(Ia(s,l,!0),null!==e&&(Wn(r,e,l),null!==s.classes&&ea(r,e,s.classes),null!==s.styles&&Xr(r,e,s.styles)));var c=i.createRenderer(e,t),u=nr(n,dr(t),null,t.onPush?64:16,n[20],s,i,c,null,null);return o.firstCreatePass&&(ci(ai(s,n),o,t.type),kr(o,s),Vr(s,n.length,1)),Tr(n,u),n[20]=u}(d,this.componentDef,p,s,c);if(d)if(n)Wn(c,d,["ng-version",ss.full]);else{var m=function(e){for(var t=[],n=[],i=1,r=2;i<e.length;){var a=e[i];if("string"==typeof a)2===r?""!==a&&t.push(a,e[++i]):8===r&&n.push(a);else{if(!Li(r))break;r=a}i++}return{attrs:t,classes:n}}(this.componentDef.selectors[0]),b=m.attrs,y=m.classes;b&&Wn(c,d,b),y&&y.length>0&&ea(c,d,y.join(" "))}if(a=an(f,0),void 0!==t)for(var k=a.projection=[],C=0;C<this.ngContentSelectors.length;C++){var V=t[C];k.push(null!=V?Array.from(V):null)}r=function(e,t,n,i,r){var a=n[1],o=function(e,t,n){var i=bn();e.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),yr(e,i,1),wr(e,t,n));var r=vi(t,e,t.length-1,i);Ti(r,t);var a=rn(i,t);return a&&Ti(a,t),r}(a,n,t);i.components.push(o),e[8]=o,r&&r.forEach((function(e){return e(o,t)})),t.contentQueries&&t.contentQueries(1,o,n.length-1);var s=bn();if(a.firstCreatePass&&(null!==t.hostBindings||null!==t.hostAttrs)){jn(s.index-20);var l=n[1];gr(l,t),mr(l,n,t.hostVars),br(t,o)}return o}(g,this.componentDef,p,v,[Sa]),rr(f,p,null)}finally{Gn()}return new _s(this.componentType,r,oa(es,a,p),p,a)}}]),n}($o),_s=function(e){l(n,e);var t=u(n);function n(e,i,r,a,o){var s;return p(this,n),(s=t.call(this)).location=r,s._rootLView=a,s._tNode=o,s.destroyCbs=[],s.instance=i,s.hostView=s.changeDetectorRef=new aa(a),s.componentType=e,s}return m(n,[{key:"injector",get:function(){return new gi(this._tNode,this._rootLView)}},{key:"destroy",value:function(){this.destroyCbs&&(this.destroyCbs.forEach((function(e){return e()})),this.destroyCbs=null,!this.hostView.destroyed&&this.hostView.destroy())}},{key:"onDestroy",value:function(e){this.destroyCbs&&this.destroyCbs.push(e)}}]),n}(function(){return function e(){p(this,e)}}()),Us=new Map,Os=function(e){l(n,e);var t=u(n);function n(e,i){var r;p(this,n),(r=t.call(this))._parent=i,r._bootstrapComponents=[],r.injector=h(r),r.destroyCbs=[],r.componentFactoryResolver=new Is(h(r));var a=Ut(e),o=e[We]||null;return o&&Bo(o),r._bootstrapComponents=Kt(a.bootstrap),r._r3Injector=ba(e,i,[{provide:ut,useValue:h(r)},{provide:Xo,useValue:r.componentFactoryResolver}],_e(e)),r._r3Injector._resolveInjectorDefTypes(),r.instance=r.get(e),r}return m(n,[{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Da.THROW_IF_NOT_FOUND,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ye.Default;return e===Da||e===ut||e===Ze?this:this._r3Injector.get(e,t,n)}},{key:"destroy",value:function(){var e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach((function(e){return e()})),this.destroyCbs=null}},{key:"onDestroy",value:function(e){this.destroyCbs.push(e)}}]),n}(ut),Es=function(e){l(i,e);var t=u(i);function i(e){var r,a,o;return p(this,i),(r=t.call(this)).moduleType=e,null!==Ut(e)&&(a=e,o=new Set,function e(t){var i=Ut(t,!0),r=i.id;null!==r&&(function(e,t,n){if(t&&t!==n)throw new Error("Duplicate module registered for ".concat(e," - ").concat(_e(t)," vs ").concat(_e(t.name)))}(r,Us.get(r),t),Us.set(r,t));var a,s=n(Kt(i.imports));try{for(s.s();!(a=s.n()).done;){var l=a.value;o.has(l)||(o.add(l),e(l))}}catch(c){s.e(c)}finally{s.f()}}(a)),r}return m(i,[{key:"create",value:function(e){return new Os(this.moduleType,e)}}]),i}(dt);function Ls(e,t,n){var i=An()+e,r=pn();return r[i]===Fi?Na(r,i,n?t.call(n):t()):Fa(r,i)}function Gs(e,t,n,i){return Hs(pn(),An(),e,t,n,i)}function Rs(e,t,n,i,r){return Ks(pn(),An(),e,t,n,i,r)}function js(e,t,n,i,r,a){return function(e,t,n,i,r,a,o,s){var l=t+n;return Ka(e,l,r,a,o)?Na(e,l+3,s?i.call(s,r,a,o):i(r,a,o)):Bs(e,l+3)}(pn(),An(),e,t,n,i,r,a)}function Ns(e,t,n,i,r,a,o){return function(e,t,n,i,r,a,o,s,l){var c=t+n;return qa(e,c,r,a,o,s)?Na(e,c+4,l?i.call(l,r,a,o,s):i(r,a,o,s)):Bs(e,c+4)}(pn(),An(),e,t,n,i,r,a,o)}function Fs(e,t,n,i,r,a,o,s,l){var c=An()+e,u=pn(),d=qa(u,c,n,i,r,a);return Ha(u,c+4,o,s)||d?Na(u,c+6,l?t.call(l,n,i,r,a,o,s):t(n,i,r,a,o,s)):Fa(u,c+6)}function Bs(e,t){var n=e[t];return n===Fi?void 0:n}function Hs(e,t,n,i,r,a){var o=t+n;return Ba(e,o,r)?Na(e,o+1,a?i.call(a,r):i(r)):Bs(e,o+1)}function Ks(e,t,n,i,r,a,o){var s=t+n;return Ha(e,s,r,a)?Na(e,s+2,o?i.call(o,r,a):i(r,a)):Bs(e,s+2)}function qs(e,t){var n,i=gn(),r=e+20;i.firstCreatePass?(n=function(e,t){if(t)for(var n=t.length-1;n>=0;n--){var i=t[n];if(e===i.name)return i}throw new Error("The pipe '".concat(e,"' could not be found!"))}(t,i.pipeRegistry),i.data[r]=n,n.onDestroy&&(i.destroyHooks||(i.destroyHooks=[])).push(r,n.onDestroy)):n=i.data[r];var a=n.factory||(n.factory=_t(n.type)),o=rt(Za);try{var s=ii(!1),l=a();return ii(s),function(e,t,n,i){var r=n+20;r>=e.data.length&&(e.data[r]=null,e.blueprint[r]=null),t[r]=i}(i,pn(),e,l),l}finally{rt(o)}}function zs(e,t,n){var i=pn(),r=on(i,e);return Js(i,Ws(i,e)?Hs(i,An(),t,r.transform,n,r):r.transform(n))}function Qs(e,t,n,i){var r=pn(),a=on(r,e);return Js(r,Ws(r,e)?Ks(r,An(),t,a.transform,n,i,a):a.transform(n,i))}function Ws(e,t){return e[1].data[t+20].pure}function Js(e,t){return Ga.isWrapped(t)&&(t=Ga.unwrap(t),e[Pn()]=Fi),t}var Ys=function(e){l(n,e);var t=u(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return p(this,n),(e=t.call(this)).__isAsync=i,e}return m(n,[{key:"emit",value:function(e){s(f(n.prototype),"next",this).call(this,e)}},{key:"subscribe",value:function(e,t,i){var r,a=function(e){return null},o=function(){return null};e&&"object"==typeof e?(r=this.__isAsync?function(t){setTimeout((function(){return e.next(t)}))}:function(t){e.next(t)},e.error&&(a=this.__isAsync?function(t){setTimeout((function(){return e.error(t)}))}:function(t){e.error(t)}),e.complete&&(o=this.__isAsync?function(){setTimeout((function(){return e.complete()}))}:function(){e.complete()})):(r=this.__isAsync?function(t){setTimeout((function(){return e(t)}))}:function(t){e(t)},t&&(a=this.__isAsync?function(e){setTimeout((function(){return t(e)}))}:function(e){t(e)}),i&&(o=this.__isAsync?function(){setTimeout((function(){return i()}))}:function(){i()}));var l=s(f(n.prototype),"subscribe",this).call(this,r,a,o);return e instanceof P&&e.add(l),l}}]),n}(j);function $s(e,t){return sa(ws,es,e,t)}var Zs=new $e("Application Initializer"),Xs=function(){var e=function(){function e(t){var n=this;p(this,e),this.appInits=t,this.initialized=!1,this.done=!1,this.donePromise=new Promise((function(e,t){n.resolve=e,n.reject=t}))}return m(e,[{key:"runInitializers",value:function(){var e=this;if(!this.initialized){var t=[],n=function(){e.done=!0,e.resolve()};if(this.appInits)for(var i=0;i<this.appInits.length;i++){var r=this.appInits[i]();lo(r)&&t.push(r)}Promise.all(t).then((function(){n()})).catch((function(t){e.reject(t)})),0===t.length&&n(),this.initialized=!0}}}]),e}();return e.\u0275fac=function(t){return new(t||e)(ot(Zs,8))},e.\u0275prov=Ve({token:e,factory:e.\u0275fac}),e}(),el=new $e("AppId"),tl={provide:el,useFactory:function(){return"".concat(nl()).concat(nl()).concat(nl())},deps:[]};function nl(){return String.fromCharCode(97+Math.floor(25*Math.random()))}var il=new $e("Platform Initializer"),rl=new $e("Platform ID"),al=new $e("appBootstrapListener"),ol=function(){var e=function(){function e(){p(this,e)}return m(e,[{key:"log",value:function(e){console.log(e)}},{key:"warn",value:function(e){console.warn(e)}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=Ve({token:e,factory:e.\u0275fac}),e}(),sl=new $e("LocaleId"),ll=new $e("DefaultCurrencyCode"),cl=function e(t,n){p(this,e),this.ngModuleFactory=t,this.componentFactories=n},ul=function(e){return new Es(e)},dl=ul,hl=function(e){return Promise.resolve(ul(e))},vl=function(e){var t=ul(e),n=Kt(Ut(e).declarations).reduce((function(e,t){var n=xt(t);return n&&e.push(new xs(n)),e}),[]);return new cl(t,n)},fl=vl,pl=function(e){return Promise.resolve(vl(e))},gl=function(){var e=function(){function e(){p(this,e),this.compileModuleSync=dl,this.compileModuleAsync=hl,this.compileModuleAndAllComponentsSync=fl,this.compileModuleAndAllComponentsAsync=pl}return m(e,[{key:"clearCache",value:function(){}},{key:"clearCacheFor",value:function(e){}},{key:"getModuleId",value:function(e){}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=Ve({token:e,factory:e.\u0275fac}),e}(),ml=Promise.resolve(0);function bl(e){"undefined"==typeof Zone?ml.then((function(){e&&e.apply(null,null)})):Zone.current.scheduleMicroTask("scheduleMicrotask",e)}var yl=function(){function e(t){var n,i,r=t.enableLongStackTrace,a=void 0!==r&&r,o=t.shouldCoalesceEventChangeDetection,s=void 0!==o&&o;if(p(this,e),this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ys(!1),this.onMicrotaskEmpty=new Ys(!1),this.onStable=new Ys(!1),this.onError=new Ys(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched(),this._nesting=0,this._outer=this._inner=Zone.current,Zone.wtfZoneSpec&&(this._inner=this._inner.fork(Zone.wtfZoneSpec)),Zone.TaskTrackingZoneSpec&&(this._inner=this._inner.fork(new Zone.TaskTrackingZoneSpec)),a&&Zone.longStackTraceZoneSpec&&(this._inner=this._inner.fork(Zone.longStackTraceZoneSpec)),this.shouldCoalesceEventChangeDetection=s,this.lastRequestAnimationFrameId=-1,this.nativeRequestAnimationFrame=function(){var e=He.requestAnimationFrame,t=He.cancelAnimationFrame;if("undefined"!=typeof Zone&&e&&t){var n=e[Zone.__symbol__("OriginalDelegate")];n&&(e=n);var i=t[Zone.__symbol__("OriginalDelegate")];i&&(t=i)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,i=!!(n=this).shouldCoalesceEventChangeDetection&&n.nativeRequestAnimationFrame&&function(){!function(e){-1===e.lastRequestAnimationFrameId&&(e.lastRequestAnimationFrameId=e.nativeRequestAnimationFrame.call(He,(function(){e.fakeTopEventTask||(e.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",(function(){e.lastRequestAnimationFrameId=-1,wl(e),Vl(e)}),void 0,(function(){}),(function(){}))),e.fakeTopEventTask.invoke()})),wl(e))}(n)},n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0,maybeDelayChangeDetection:i},onInvokeTask:function(e,t,r,a,o,s){try{return Al(n),e.invokeTask(r,a,o,s)}finally{i&&"eventTask"===a.type&&i(),Pl(n)}},onInvoke:function(e,t,i,r,a,o,s){try{return Al(n),e.invoke(i,r,a,o,s)}finally{Pl(n)}},onHasTask:function(e,t,i,r){e.hasTask(i,r),t===i&&("microTask"==r.change?(n._hasPendingMicrotasks=r.microTask,wl(n),Vl(n)):"macroTask"==r.change&&(n.hasPendingMacrotasks=r.macroTask))},onHandleError:function(e,t,i,r){return e.handleError(i,r),n.runOutsideAngular((function(){return n.onError.emit(r)})),!1}})}return m(e,[{key:"run",value:function(e,t,n){return this._inner.run(e,t,n)}},{key:"runTask",value:function(e,t,n,i){var r=this._inner,a=r.scheduleEventTask("NgZoneEvent: "+i,e,Cl,kl,kl);try{return r.runTask(a,t,n)}finally{r.cancelTask(a)}}},{key:"runGuarded",value:function(e,t,n){return this._inner.runGuarded(e,t,n)}},{key:"runOutsideAngular",value:function(e){return this._outer.run(e)}}],[{key:"isInAngularZone",value:function(){return!0===Zone.current.get("isAngularZone")}},{key:"assertInAngularZone",value:function(){if(!e.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}},{key:"assertNotInAngularZone",value:function(){if(e.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}}]),e}();function kl(){}var Cl={};function Vl(e){if(0==e._nesting&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular((function(){return e.onStable.emit(null)}))}finally{e.isStable=!0}}}function wl(e){e.hasPendingMicrotasks=!!(e._hasPendingMicrotasks||e.shouldCoalesceEventChangeDetection&&-1!==e.lastRequestAnimationFrameId)}function Al(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function Pl(e){e._nesting--,Vl(e)}var Dl,Ml=function(){function e(){p(this,e),this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Ys,this.onMicrotaskEmpty=new Ys,this.onStable=new Ys,this.onError=new Ys}return m(e,[{key:"run",value:function(e,t,n){return e.apply(t,n)}},{key:"runGuarded",value:function(e,t,n){return e.apply(t,n)}},{key:"runOutsideAngular",value:function(e){return e()}},{key:"runTask",value:function(e,t,n,i){return e.apply(t,n)}}]),e}(),Il=function(){var e=function(){function e(t){var n=this;p(this,e),this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),t.run((function(){n.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")}))}return m(e,[{key:"_watchAngularEvents",value:function(){var e=this;this._ngZone.onUnstable.subscribe({next:function(){e._didWork=!0,e._isZoneStable=!1}}),this._ngZone.runOutsideAngular((function(){e._ngZone.onStable.subscribe({next:function(){yl.assertNotInAngularZone(),bl((function(){e._isZoneStable=!0,e._runCallbacksIfReady()}))}})}))}},{key:"increasePendingRequestCount",value:function(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}},{key:"decreasePendingRequestCount",value:function(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}},{key:"isStable",value:function(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}},{key:"_runCallbacksIfReady",value:function(){var e=this;if(this.isStable())bl((function(){for(;0!==e._callbacks.length;){var t=e._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(e._didWork)}e._didWork=!1}));else{var t=this.getPendingTasks();this._callbacks=this._callbacks.filter((function(e){return!e.updateCb||!e.updateCb(t)||(clearTimeout(e.timeoutId),!1)})),this._didWork=!0}}},{key:"getPendingTasks",value:function(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map((function(e){return{source:e.source,creationLocation:e.creationLocation,data:e.data}})):[]}},{key:"addCallback",value:function(e,t,n){var i=this,r=-1;t&&t>0&&(r=setTimeout((function(){i._callbacks=i._callbacks.filter((function(e){return e.timeoutId!==r})),e(i._didWork,i.getPendingTasks())}),t)),this._callbacks.push({doneCb:e,timeoutId:r,updateCb:n})}},{key:"whenStable",value:function(e,t,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/dist/task-tracking.js" loaded?');this.addCallback(e,t,n),this._runCallbacksIfReady()}},{key:"getPendingRequestCount",value:function(){return this._pendingCount}},{key:"findProviders",value:function(e,t,n){return[]}}]),e}();return e.\u0275fac=function(t){return new(t||e)(ot(yl))},e.\u0275prov=Ve({token:e,factory:e.\u0275fac}),e}(),Sl=function(){var e=function(){function e(){p(this,e),this._applications=new Map,Tl.addToWindow(this)}return m(e,[{key:"registerApplication",value:function(e,t){this._applications.set(e,t)}},{key:"unregisterApplication",value:function(e){this._applications.delete(e)}},{key:"unregisterAllApplications",value:function(){this._applications.clear()}},{key:"getTestability",value:function(e){return this._applications.get(e)||null}},{key:"getAllTestabilities",value:function(){return Array.from(this._applications.values())}},{key:"getAllRootElements",value:function(){return Array.from(this._applications.keys())}},{key:"findTestabilityInTree",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return Tl.findTestabilityInTree(this,e,t)}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=Ve({token:e,factory:e.\u0275fac}),e}(),Tl=new(function(){function e(){p(this,e)}return m(e,[{key:"addToWindow",value:function(e){}},{key:"findTestabilityInTree",value:function(e,t,n){return null}}]),e}()),xl=new $e("AllowMultipleToken"),_l=function e(t,n){p(this,e),this.name=t,this.token=n};function Ul(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i="Platform: "+t,r=new $e(i);return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],a=Ol();if(!a||a.injector.get(xl,!1))if(e)e(n.concat(t).concat({provide:r,useValue:!0}));else{var o=n.concat(t).concat({provide:r,useValue:!0},{provide:ha,useValue:"platform"});!function(e){if(Dl&&!Dl.destroyed&&!Dl.injector.get(xl,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");Dl=e.get(El);var t=e.get(il,null);t&&t.forEach((function(e){return e()}))}(Da.create({providers:o,name:i}))}return function(e){var t=Ol();if(!t)throw new Error("No platform exists!");if(!t.injector.get(e,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return t}(r)}}function Ol(){return Dl&&!Dl.destroyed?Dl:null}var El=function(){var e=function(){function e(t){p(this,e),this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}return m(e,[{key:"bootstrapModuleFactory",value:function(e,t){var n,i,r=this,a=(n=t?t.ngZone:void 0,i=t&&t.ngZoneEventCoalescing||!1,"noop"===n?new Ml:("zone.js"===n?void 0:n)||new yl({enableLongStackTrace:Pi(),shouldCoalesceEventChangeDetection:i})),o=[{provide:yl,useValue:a}];return a.run((function(){var t=Da.create({providers:o,parent:r.injector,name:e.moduleType.name}),n=e.create(t),i=n.injector.get(Vi,null);if(!i)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return n.onDestroy((function(){return jl(r._modules,n)})),a.runOutsideAngular((function(){return a.onError.subscribe({next:function(e){i.handleError(e)}})})),function(e,t,i){try{var a=((o=n.injector.get(Xs)).runInitializers(),o.donePromise.then((function(){return Bo(n.injector.get(sl,"en-US")||"en-US"),r._moduleDoBootstrap(n),n})));return lo(a)?a.catch((function(n){throw t.runOutsideAngular((function(){return e.handleError(n)})),n})):a}catch(s){throw t.runOutsideAngular((function(){return e.handleError(s)})),s}var o}(i,a)}))}},{key:"bootstrapModule",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=Ll({},n);return function(e,t,n){var i=new Es(n);return Promise.resolve(i)}(0,0,e).then((function(e){return t.bootstrapModuleFactory(e,i)}))}},{key:"_moduleDoBootstrap",value:function(e){var t=e.injector.get(Rl);if(e._bootstrapComponents.length>0)e._bootstrapComponents.forEach((function(e){return t.bootstrap(e)}));else{if(!e.instance.ngDoBootstrap)throw new Error("The module ".concat(_e(e.instance.constructor),' was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.'));e.instance.ngDoBootstrap(t)}this._modules.push(e)}},{key:"onDestroy",value:function(e){this._destroyListeners.push(e)}},{key:"injector",get:function(){return this._injector}},{key:"destroy",value:function(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach((function(e){return e.destroy()})),this._destroyListeners.forEach((function(e){return e()})),this._destroyed=!0}},{key:"destroyed",get:function(){return this._destroyed}}]),e}();return e.\u0275fac=function(t){return new(t||e)(ot(Da))},e.\u0275prov=Ve({token:e,factory:e.\u0275fac}),e}();function Ll(e,t){return Array.isArray(t)?t.reduce(Ll,e):Object.assign(Object.assign({},e),t)}var Gl,Rl=((Gl=function(){function e(t,n,i,r,a,o){var s=this;p(this,e),this._zone=t,this._console=n,this._injector=i,this._exceptionHandler=r,this._componentFactoryResolver=a,this._initStatus=o,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._enforceNoNewChanges=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._enforceNoNewChanges=Pi(),this._zone.onMicrotaskEmpty.subscribe({next:function(){s._zone.run((function(){s.tick()}))}});var l=new U((function(e){s._stable=s._zone.isStable&&!s._zone.hasPendingMacrotasks&&!s._zone.hasPendingMicrotasks,s._zone.runOutsideAngular((function(){e.next(s._stable),e.complete()}))})),c=new U((function(e){var t;s._zone.runOutsideAngular((function(){t=s._zone.onStable.subscribe((function(){yl.assertNotInAngularZone(),bl((function(){s._stable||s._zone.hasPendingMacrotasks||s._zone.hasPendingMicrotasks||(s._stable=!0,e.next(!0))}))}))}));var n=s._zone.onUnstable.subscribe((function(){yl.assertInAngularZone(),s._stable&&(s._stable=!1,s._zone.runOutsideAngular((function(){e.next(!1)})))}));return function(){t.unsubscribe(),n.unsubscribe()}}));this.isStable=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=Number.POSITIVE_INFINITY,r=null,a=t[t.length-1];return F(a)?(r=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(i=t.pop())):"number"==typeof a&&(i=t.pop()),null===r&&1===t.length&&t[0]instanceof U?t[0]:re(i)(ae(t,r))}(l,c.pipe((function(e){return oe()((t=he,function(e){var n;n="function"==typeof t?t:function(){return t};var i=Object.create(e,ue);return i.source=e,i.subjectFactory=n,i})(e));var t})))}return m(e,[{key:"bootstrap",value:function(e,t){var n,i=this;if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");n=e instanceof $o?e:this._componentFactoryResolver.resolveComponentFactory(e),this.componentTypes.push(n.componentType);var r=n.isBoundToModule?void 0:this._injector.get(ut),a=n.create(Da.NULL,[],t||n.selector,r);a.onDestroy((function(){i._unloadComponent(a)}));var o=a.injector.get(Il,null);return o&&a.injector.get(Sl).registerApplication(a.location.nativeElement,o),this._loadComponent(a),Pi()&&this._console.log("Angular is running in development mode. Call enableProdMode() to enable production mode."),a}},{key:"tick",value:function(){var e=this;if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;var t,i=n(this._views);try{for(i.s();!(t=i.n()).done;)t.value.detectChanges()}catch(o){i.e(o)}finally{i.f()}if(this._enforceNoNewChanges){var r,a=n(this._views);try{for(a.s();!(r=a.n()).done;)r.value.checkNoChanges()}catch(o){a.e(o)}finally{a.f()}}}catch(s){this._zone.runOutsideAngular((function(){return e._exceptionHandler.handleError(s)}))}finally{this._runningTick=!1}}},{key:"attachView",value:function(e){var t=e;this._views.push(t),t.attachToAppRef(this)}},{key:"detachView",value:function(e){var t=e;jl(this._views,t),t.detachFromAppRef()}},{key:"_loadComponent",value:function(e){this.attachView(e.hostView),this.tick(),this.components.push(e),this._injector.get(al,[]).concat(this._bootstrapListeners).forEach((function(t){return t(e)}))}},{key:"_unloadComponent",value:function(e){this.detachView(e.hostView),jl(this.components,e)}},{key:"ngOnDestroy",value:function(){this._views.slice().forEach((function(e){return e.destroy()}))}},{key:"viewCount",get:function(){return this._views.length}}]),e}()).\u0275fac=function(e){return new(e||Gl)(ot(yl),ot(ol),ot(Da),ot(Vi),ot(Xo),ot(Xs))},Gl.\u0275prov=Ve({token:Gl,factory:Gl.\u0275fac}),Gl);function jl(e,t){var n=e.indexOf(t);n>-1&&e.splice(n,1)}var Nl=function e(){p(this,e)},Fl=function e(){p(this,e)},Bl={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"},Hl=function(){var e=function(){function e(t,n){p(this,e),this._compiler=t,this._config=n||Bl}return m(e,[{key:"load",value:function(e){return this.loadAndCompile(e)}},{key:"loadAndCompile",value:function(e){var n=this,i=t(e.split("#"),2),r=i[0],a=i[1];return void 0===a&&(a="default"),c("crnd")(r).then((function(e){return e[a]})).then((function(e){return Kl(e,r,a)})).then((function(e){return n._compiler.compileModuleAsync(e)}))}},{key:"loadFactory",value:function(e){var n=t(e.split("#"),2),i=n[0],r=n[1],a="NgFactory";return void 0===r&&(r="default",a=""),c("crnd")(this._config.factoryPathPrefix+i+this._config.factoryPathSuffix).then((function(e){return e[r+a]})).then((function(e){return Kl(e,i,r)}))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(ot(gl),ot(Fl,8))},e.\u0275prov=Ve({token:e,factory:e.\u0275fac}),e}();function Kl(e,t,n){if(!e)throw new Error("Cannot find '".concat(n,"' in '").concat(t,"'"));return e}var ql=Ul(null,"core",[{provide:rl,useValue:"unknown"},{provide:El,deps:[Da]},{provide:Sl,deps:[]},{provide:ol,deps:[]}]),zl=[{provide:Rl,useClass:Rl,deps:[yl,ol,Da,Vi,Xo,Xs]},{provide:Ts,deps:[yl],useFactory:function(e){var t=[];return e.onStable.subscribe((function(){for(;t.length;)t.pop()()})),function(e){t.push(e)}}},{provide:Xs,useClass:Xs,deps:[[new ge,Zs]]},{provide:gl,useClass:gl,deps:[]},tl,{provide:bs,useFactory:function(){return Cs},deps:[]},{provide:ys,useFactory:function(){return Vs},deps:[]},{provide:sl,useFactory:function(e){return Bo(e=e||"undefined"!=typeof $localize&&$localize.locale||"en-US"),e},deps:[[new pe(sl),new ge,new be]]},{provide:ll,useValue:"USD"}],Ql=function(){var e=function e(t){p(this,e)};return e.\u0275mod=Mt({type:e}),e.\u0275inj=we({factory:function(t){return new(t||e)(ot(Rl))},providers:zl}),e}(),Wl=null;function Jl(){return Wl}var Yl,$l=new $e("DocumentToken"),Zl=((Yl=function e(){p(this,e)}).\u0275fac=function(e){return new(e||Yl)},Yl.\u0275prov=Ve({factory:Xl,token:Yl,providedIn:"platform"}),Yl);function Xl(){return ot(nc)}var ec,tc=new $e("Location Initialized"),nc=((ec=function(e){l(n,e);var t=u(n);function n(e){var i;return p(this,n),(i=t.call(this))._doc=e,i._init(),i}return m(n,[{key:"_init",value:function(){this.location=Jl().getLocation(),this._history=Jl().getHistory()}},{key:"getBaseHrefFromDOM",value:function(){return Jl().getBaseHref(this._doc)}},{key:"onPopState",value:function(e){Jl().getGlobalEventTarget(this._doc,"window").addEventListener("popstate",e,!1)}},{key:"onHashChange",value:function(e){Jl().getGlobalEventTarget(this._doc,"window").addEventListener("hashchange",e,!1)}},{key:"href",get:function(){return this.location.href}},{key:"protocol",get:function(){return this.location.protocol}},{key:"hostname",get:function(){return this.location.hostname}},{key:"port",get:function(){return this.location.port}},{key:"pathname",get:function(){return this.location.pathname},set:function(e){this.location.pathname=e}},{key:"search",get:function(){return this.location.search}},{key:"hash",get:function(){return this.location.hash}},{key:"pushState",value:function(e,t,n){ic()?this._history.pushState(e,t,n):this.location.hash=n}},{key:"replaceState",value:function(e,t,n){ic()?this._history.replaceState(e,t,n):this.location.hash=n}},{key:"forward",value:function(){this._history.forward()}},{key:"back",value:function(){this._history.back()}},{key:"getState",value:function(){return this._history.state}}]),n}(Zl)).\u0275fac=function(e){return new(e||ec)(ot($l))},ec.\u0275prov=Ve({factory:rc,token:ec,providedIn:"platform"}),ec);function ic(){return!!window.history.pushState}function rc(){return new nc(ot($l))}function ac(e,t){if(0==e.length)return t;if(0==t.length)return e;var n=0;return e.endsWith("/")&&n++,t.startsWith("/")&&n++,2==n?e+t.substring(1):1==n?e+t:e+"/"+t}function oc(e){var t=e.match(/#|\?|$/),n=t&&t.index||e.length;return e.slice(0,n-("/"===e[n-1]?1:0))+e.slice(n)}function sc(e){return e&&"?"!==e[0]?"?"+e:e}var lc,cc=((lc=function e(){p(this,e)}).\u0275fac=function(e){return new(e||lc)},lc.\u0275prov=Ve({factory:uc,token:lc,providedIn:"root"}),lc);function uc(e){var t=ot($l).location;return new pc(ot(Zl),t&&t.origin||"")}var dc,hc,vc,fc=new $e("appBaseHref"),pc=((vc=function(e){l(n,e);var t=u(n);function n(e,i){var r;if(p(this,n),(r=t.call(this))._platformLocation=e,null==i&&(i=r._platformLocation.getBaseHrefFromDOM()),null==i)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");return r._baseHref=i,d(r)}return m(n,[{key:"onPopState",value:function(e){this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e)}},{key:"getBaseHref",value:function(){return this._baseHref}},{key:"prepareExternalUrl",value:function(e){return ac(this._baseHref,e)}},{key:"path",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this._platformLocation.pathname+sc(this._platformLocation.search),n=this._platformLocation.hash;return n&&e?"".concat(t).concat(n):t}},{key:"pushState",value:function(e,t,n,i){var r=this.prepareExternalUrl(n+sc(i));this._platformLocation.pushState(e,t,r)}},{key:"replaceState",value:function(e,t,n,i){var r=this.prepareExternalUrl(n+sc(i));this._platformLocation.replaceState(e,t,r)}},{key:"forward",value:function(){this._platformLocation.forward()}},{key:"back",value:function(){this._platformLocation.back()}}]),n}(cc)).\u0275fac=function(e){return new(e||vc)(ot(Zl),ot(fc,8))},vc.\u0275prov=Ve({token:vc,factory:vc.\u0275fac}),vc),gc=((hc=function(e){l(n,e);var t=u(n);function n(e,i){var r;return p(this,n),(r=t.call(this))._platformLocation=e,r._baseHref="",null!=i&&(r._baseHref=i),r}return m(n,[{key:"onPopState",value:function(e){this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e)}},{key:"getBaseHref",value:function(){return this._baseHref}},{key:"path",value:function(){var e=this._platformLocation.hash;return null==e&&(e="#"),e.length>0?e.substring(1):e}},{key:"prepareExternalUrl",value:function(e){var t=ac(this._baseHref,e);return t.length>0?"#"+t:t}},{key:"pushState",value:function(e,t,n,i){var r=this.prepareExternalUrl(n+sc(i));0==r.length&&(r=this._platformLocation.pathname),this._platformLocation.pushState(e,t,r)}},{key:"replaceState",value:function(e,t,n,i){var r=this.prepareExternalUrl(n+sc(i));0==r.length&&(r=this._platformLocation.pathname),this._platformLocation.replaceState(e,t,r)}},{key:"forward",value:function(){this._platformLocation.forward()}},{key:"back",value:function(){this._platformLocation.back()}}]),n}(cc)).\u0275fac=function(e){return new(e||hc)(ot(Zl),ot(fc,8))},hc.\u0275prov=Ve({token:hc,factory:hc.\u0275fac}),hc),mc=((dc=function(){function e(t,n){var i=this;p(this,e),this._subject=new Ys,this._urlChangeListeners=[],this._platformStrategy=t;var r=this._platformStrategy.getBaseHref();this._platformLocation=n,this._baseHref=oc(yc(r)),this._platformStrategy.onPopState((function(e){i._subject.emit({url:i.path(!0),pop:!0,state:e.state,type:e.type})}))}return m(e,[{key:"path",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.normalize(this._platformStrategy.path(e))}},{key:"getState",value:function(){return this._platformLocation.getState()}},{key:"isCurrentPathEqualTo",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return this.path()==this.normalize(e+sc(t))}},{key:"normalize",value:function(t){return e.stripTrailingSlash(function(e,t){return e&&t.startsWith(e)?t.substring(e.length):t}(this._baseHref,yc(t)))}},{key:"prepareExternalUrl",value:function(e){return e&&"/"!==e[0]&&(e="/"+e),this._platformStrategy.prepareExternalUrl(e)}},{key:"go",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this._platformStrategy.pushState(n,"",e,t),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+sc(t)),n)}},{key:"replaceState",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this._platformStrategy.replaceState(n,"",e,t),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+sc(t)),n)}},{key:"forward",value:function(){this._platformStrategy.forward()}},{key:"back",value:function(){this._platformStrategy.back()}},{key:"onUrlChange",value:function(e){var t=this;this._urlChangeListeners.push(e),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe((function(e){t._notifyUrlChangeListeners(e.url,e.state)})))}},{key:"_notifyUrlChangeListeners",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;this._urlChangeListeners.forEach((function(n){return n(e,t)}))}},{key:"subscribe",value:function(e,t,n){return this._subject.subscribe({next:e,error:t,complete:n})}}]),e}()).\u0275fac=function(e){return new(e||dc)(ot(cc),ot(Zl))},dc.normalizeQueryParams=sc,dc.joinWithSlash=ac,dc.stripTrailingSlash=oc,dc.\u0275prov=Ve({factory:bc,token:dc,providedIn:"root"}),dc);function bc(){return new mc(ot(cc),ot(Zl))}function yc(e){return e.replace(/\/index.html$/,"")}var kc=function(e){return e[e.Decimal=0]="Decimal",e[e.Percent=1]="Percent",e[e.Currency=2]="Currency",e[e.Scientific=3]="Scientific",e}({}),Cc=function(e){return e[e.Zero=0]="Zero",e[e.One=1]="One",e[e.Two=2]="Two",e[e.Few=3]="Few",e[e.Many=4]="Many",e[e.Other=5]="Other",e}({}),Vc=function(e){return e[e.Format=0]="Format",e[e.Standalone=1]="Standalone",e}({}),wc=function(e){return e[e.Narrow=0]="Narrow",e[e.Abbreviated=1]="Abbreviated",e[e.Wide=2]="Wide",e[e.Short=3]="Short",e}({}),Ac=function(e){return e[e.Short=0]="Short",e[e.Medium=1]="Medium",e[e.Long=2]="Long",e[e.Full=3]="Full",e}({}),Pc=function(e){return e[e.Decimal=0]="Decimal",e[e.Group=1]="Group",e[e.List=2]="List",e[e.PercentSign=3]="PercentSign",e[e.PlusSign=4]="PlusSign",e[e.MinusSign=5]="MinusSign",e[e.Exponential=6]="Exponential",e[e.SuperscriptingExponent=7]="SuperscriptingExponent",e[e.PerMille=8]="PerMille",e[e[1/0]=9]="Infinity",e[e.NaN=10]="NaN",e[e.TimeSeparator=11]="TimeSeparator",e[e.CurrencyDecimal=12]="CurrencyDecimal",e[e.CurrencyGroup=13]="CurrencyGroup",e}({});function Dc(e,t){return xc(jo(e)[Fo.DateFormat],t)}function Mc(e,t){return xc(jo(e)[Fo.TimeFormat],t)}function Ic(e,t){return xc(jo(e)[Fo.DateTimeFormat],t)}function Sc(e,t){var n=jo(e),i=n[Fo.NumberSymbols][t];if(void 0===i){if(t===Pc.CurrencyDecimal)return n[Fo.NumberSymbols][Pc.Decimal];if(t===Pc.CurrencyGroup)return n[Fo.NumberSymbols][Pc.Group]}return i}function Tc(e){if(!e[Fo.ExtraData])throw new Error('Missing extra locale data for the locale "'.concat(e[Fo.LocaleId],'". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.'))}function xc(e,t){for(var n=t;n>-1;n--)if(void 0!==e[n])return e[n];throw new Error("Locale data API: locale data undefined")}function _c(e){var n=t(e.split(":"),2);return{hours:+n[0],minutes:+n[1]}}var Uc=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Oc={},Ec=/((?:[^GyMLwWdEabBhHmsSzZO']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/,Lc=function(e){return e[e.Short=0]="Short",e[e.ShortGMT=1]="ShortGMT",e[e.Long=2]="Long",e[e.Extended=3]="Extended",e}({}),Gc=function(e){return e[e.FullYear=0]="FullYear",e[e.Month=1]="Month",e[e.Date=2]="Date",e[e.Hours=3]="Hours",e[e.Minutes=4]="Minutes",e[e.Seconds=5]="Seconds",e[e.FractionalSeconds=6]="FractionalSeconds",e[e.Day=7]="Day",e}({}),Rc=function(e){return e[e.DayPeriods=0]="DayPeriods",e[e.Days=1]="Days",e[e.Months=2]="Months",e[e.Eras=3]="Eras",e}({});function jc(e,t){return t&&(e=e.replace(/\{([^}]+)}/g,(function(e,n){return null!=t&&n in t?t[n]:e}))),e}function Nc(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"-",i=arguments.length>3?arguments[3]:void 0,r=arguments.length>4?arguments[4]:void 0,a="";(e<0||r&&e<=0)&&(r?e=1-e:(e=-e,a=n));for(var o=String(e);o.length<t;)o="0"+o;return i&&(o=o.substr(o.length-t)),a+o}function Fc(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return function(a,o){var s,l=function(e,t){switch(e){case Gc.FullYear:return t.getFullYear();case Gc.Month:return t.getMonth();case Gc.Date:return t.getDate();case Gc.Hours:return t.getHours();case Gc.Minutes:return t.getMinutes();case Gc.Seconds:return t.getSeconds();case Gc.FractionalSeconds:return t.getMilliseconds();case Gc.Day:return t.getDay();default:throw new Error('Unknown DateType value "'.concat(e,'".'))}}(e,a);if((n>0||l>-n)&&(l+=n),e===Gc.Hours)0===l&&-12===n&&(l=12);else if(e===Gc.FractionalSeconds)return s=t,Nc(l,3).substr(0,s);var c=Sc(o,Pc.MinusSign);return Nc(l,t,c,i,r)}}function Bc(e,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Vc.Format,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return function(a,o){return function(e,n,i,r,a,o){switch(i){case Rc.Months:return function(e,t,n){var i=jo(e),r=xc([i[Fo.MonthsFormat],i[Fo.MonthsStandalone]],t);return xc(r,n)}(n,a,r)[e.getMonth()];case Rc.Days:return function(e,t,n){var i=jo(e),r=xc([i[Fo.DaysFormat],i[Fo.DaysStandalone]],t);return xc(r,n)}(n,a,r)[e.getDay()];case Rc.DayPeriods:var s=e.getHours(),l=e.getMinutes();if(o){var c=function(e){var t=jo(e);return Tc(t),(t[Fo.ExtraData][2]||[]).map((function(e){return"string"==typeof e?_c(e):[_c(e[0]),_c(e[1])]}))}(n),u=function(e,t,n){var i=jo(e);Tc(i);var r=xc([i[Fo.ExtraData][0],i[Fo.ExtraData][1]],t)||[];return xc(r,n)||[]}(n,a,r),d=c.findIndex((function(e){if(Array.isArray(e)){var n=t(e,2),i=n[0],r=n[1],a=s>=i.hours&&l>=i.minutes,o=s<r.hours||s===r.hours&&l<r.minutes;if(i.hours<r.hours){if(a&&o)return!0}else if(a||o)return!0}else if(e.hours===s&&e.minutes===l)return!0;return!1}));if(-1!==d)return u[d]}return function(e,t,n){var i=jo(e),r=xc([i[Fo.DayPeriodsFormat],i[Fo.DayPeriodsStandalone]],t);return xc(r,n)}(n,a,r)[s<12?0:1];case Rc.Eras:return function(e,t){return xc(jo(e)[Fo.Eras],t)}(n,r)[e.getFullYear()<=0?0:1];default:throw new Error("unexpected translation type "+i)}}(a,o,e,n,i,r)}}function Hc(e){return function(t,n,i){var r=-1*i,a=Sc(n,Pc.MinusSign),o=r>0?Math.floor(r/60):Math.ceil(r/60);switch(e){case Lc.Short:return(r>=0?"+":"")+Nc(o,2,a)+Nc(Math.abs(r%60),2,a);case Lc.ShortGMT:return"GMT"+(r>=0?"+":"")+Nc(o,1,a);case Lc.Long:return"GMT"+(r>=0?"+":"")+Nc(o,2,a)+":"+Nc(Math.abs(r%60),2,a);case Lc.Extended:return 0===i?"Z":(r>=0?"+":"")+Nc(o,2,a)+":"+Nc(Math.abs(r%60),2,a);default:throw new Error('Unknown zone width "'.concat(e,'"'))}}}function Kc(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function(n,i){var r,a,o,s;if(t){var l=new Date(n.getFullYear(),n.getMonth(),1).getDay()-1,c=n.getDate();r=1+Math.floor((c+l)/7)}else{var u=(s=n,new Date(s.getFullYear(),s.getMonth(),s.getDate()+(4-s.getDay()))),d=(a=u.getFullYear(),o=new Date(a,0,1).getDay(),new Date(a,0,1+(o<=4?4:11)-o)),h=u.getTime()-d.getTime();r=1+Math.round(h/6048e5)}return Nc(r,e,Sc(i,Pc.MinusSign))}}var qc={};function zc(e,t){e=e.replace(/:/g,"");var n=Date.parse("Jan 01, 1970 00:00:00 "+e)/6e4;return isNaN(n)?t:n}function Qc(e){return e instanceof Date&&!isNaN(e.valueOf())}var Wc=/^(\d+)?\.((\d+)(-(\d+))?)?$/;function Jc(e){var t=parseInt(e);if(isNaN(t))throw new Error("Invalid integer literal when parsing "+e);return t}var Yc,$c=function e(){p(this,e)},Zc=((Yc=function(e){l(n,e);var t=u(n);function n(e){var i;return p(this,n),(i=t.call(this)).locale=e,i}return m(n,[{key:"getPluralCategory",value:function(e,t){switch(function(e){return jo(e)[Fo.PluralCase]}(t||this.locale)(e)){case Cc.Zero:return"zero";case Cc.One:return"one";case Cc.Two:return"two";case Cc.Few:return"few";case Cc.Many:return"many";default:return"other"}}}]),n}($c)).\u0275fac=function(e){return new(e||Yc)(ot(sl))},Yc.\u0275prov=Ve({token:Yc,factory:Yc.\u0275fac}),Yc);function Xc(e,i){i=encodeURIComponent(i);var r,a=n(e.split(";"));try{for(a.s();!(r=a.n()).done;){var o=r.value,s=o.indexOf("="),l=t(-1==s?[o,""]:[o.slice(0,s),o.slice(s+1)],2),c=l[0],u=l[1];if(c.trim()===i)return decodeURIComponent(u)}}catch(d){a.e(d)}finally{a.f()}return null}var eu,tu,nu,iu=((eu=function(){function e(t,n,i,r){p(this,e),this._iterableDiffers=t,this._keyValueDiffers=n,this._ngEl=i,this._renderer=r,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}return m(e,[{key:"klass",set:function(e){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof e?e.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}},{key:"ngClass",set:function(e){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof e?e.split(/\s+/):e,this._rawClass&&(Ra(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}},{key:"ngDoCheck",value:function(){if(this._iterableDiffer){var e=this._iterableDiffer.diff(this._rawClass);e&&this._applyIterableChanges(e)}else if(this._keyValueDiffer){var t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}},{key:"_applyKeyValueChanges",value:function(e){var t=this;e.forEachAddedItem((function(e){return t._toggleClass(e.key,e.currentValue)})),e.forEachChangedItem((function(e){return t._toggleClass(e.key,e.currentValue)})),e.forEachRemovedItem((function(e){e.previousValue&&t._toggleClass(e.key,!1)}))}},{key:"_applyIterableChanges",value:function(e){var t=this;e.forEachAddedItem((function(e){if("string"!=typeof e.item)throw new Error("NgClass can only toggle CSS classes expressed as strings, got "+_e(e.item));t._toggleClass(e.item,!0)})),e.forEachRemovedItem((function(e){return t._toggleClass(e.item,!1)}))}},{key:"_applyClasses",value:function(e){var t=this;e&&(Array.isArray(e)||e instanceof Set?e.forEach((function(e){return t._toggleClass(e,!0)})):Object.keys(e).forEach((function(n){return t._toggleClass(n,!!e[n])})))}},{key:"_removeClasses",value:function(e){var t=this;e&&(Array.isArray(e)||e instanceof Set?e.forEach((function(e){return t._toggleClass(e,!1)})):Object.keys(e).forEach((function(e){return t._toggleClass(e,!1)})))}},{key:"_toggleClass",value:function(e,t){var n=this;(e=e.trim())&&e.split(/\s+/g).forEach((function(e){t?n._renderer.addClass(n._ngEl.nativeElement,e):n._renderer.removeClass(n._ngEl.nativeElement,e)}))}}]),e}()).\u0275fac=function(e){return new(e||eu)(Za(bs),Za(ys),Za(es),Za(rs))},eu.\u0275dir=St({type:eu,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),eu),ru=function(){function e(t,n,i,r){p(this,e),this.$implicit=t,this.ngForOf=n,this.index=i,this.count=r}return m(e,[{key:"first",get:function(){return 0===this.index}},{key:"last",get:function(){return this.index===this.count-1}},{key:"even",get:function(){return this.index%2==0}},{key:"odd",get:function(){return!this.even}}]),e}(),au=((tu=function(){function e(t,n,i){p(this,e),this._viewContainer=t,this._template=n,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}return m(e,[{key:"ngForOf",set:function(e){this._ngForOf=e,this._ngForOfDirty=!0}},{key:"ngForTrackBy",get:function(){return this._trackByFn},set:function(e){Pi()&&null!=e&&"function"!=typeof e&&console&&console.warn&&console.warn("trackBy must be a function, but received ".concat(JSON.stringify(e),". See https://angular.io/api/common/NgForOf#change-propagation for more information.")),this._trackByFn=e}},{key:"ngForTemplate",set:function(e){e&&(this._template=e)}},{key:"ngDoCheck",value:function(){if(this._ngForOfDirty){this._ngForOfDirty=!1;var e=this._ngForOf;if(!this._differ&&e)try{this._differ=this._differs.find(e).create(this.ngForTrackBy)}catch(i){throw new Error("Cannot find a differ supporting object '".concat(e,"' of type '").concat((t=e).name||typeof t,"'. NgFor only supports binding to Iterables such as Arrays."))}}var t;if(this._differ){var n=this._differ.diff(this._ngForOf);n&&this._applyChanges(n)}}},{key:"_applyChanges",value:function(e){var t=this,n=[];e.forEachOperation((function(e,i,r){if(null==e.previousIndex){var a=t._viewContainer.createEmbeddedView(t._template,new ru(null,t._ngForOf,-1,-1),null===r?void 0:r),o=new ou(e,a);n.push(o)}else if(null==r)t._viewContainer.remove(null===i?void 0:i);else if(null!==i){var s=t._viewContainer.get(i);t._viewContainer.move(s,r);var l=new ou(e,s);n.push(l)}}));for(var i=0;i<n.length;i++)this._perViewChange(n[i].view,n[i].record);for(var r=0,a=this._viewContainer.length;r<a;r++){var o=this._viewContainer.get(r);o.context.index=r,o.context.count=a,o.context.ngForOf=this._ngForOf}e.forEachIdentityChange((function(e){t._viewContainer.get(e.currentIndex).context.$implicit=e.item}))}},{key:"_perViewChange",value:function(e,t){e.context.$implicit=t.item}}],[{key:"ngTemplateContextGuard",value:function(e,t){return!0}}]),e}()).\u0275fac=function(e){return new(e||tu)(Za(Ps),Za(ws),Za(bs))},tu.\u0275dir=St({type:tu,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),tu),ou=function e(t,n){p(this,e),this.record=t,this.view=n},su=((nu=function(){function e(t,n){p(this,e),this._viewContainer=t,this._context=new lu,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=n}return m(e,[{key:"ngIf",set:function(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}},{key:"ngIfThen",set:function(e){cu("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}},{key:"ngIfElse",set:function(e){cu("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}},{key:"_updateView",value:function(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}}],[{key:"ngTemplateContextGuard",value:function(e,t){return!0}}]),e}()).\u0275fac=function(e){return new(e||nu)(Za(Ps),Za(ws))},nu.\u0275dir=St({type:nu,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),nu),lu=function e(){p(this,e),this.$implicit=null,this.ngIf=null};function cu(e,t){if(t&&!t.createEmbeddedView)throw new Error("".concat(e," must be a TemplateRef, but received '").concat(_e(t),"'."))}var uu,du,hu=((du=function(){function e(t,n,i){p(this,e),this._ngEl=t,this._differs=n,this._renderer=i,this._ngStyle=null,this._differ=null}return m(e,[{key:"ngStyle",set:function(e){this._ngStyle=e,!this._differ&&e&&(this._differ=this._differs.find(e).create())}},{key:"ngDoCheck",value:function(){if(this._differ){var e=this._differ.diff(this._ngStyle);e&&this._applyChanges(e)}}},{key:"_setStyle",value:function(e,n){var i=t(e.split("."),2),r=i[0],a=i[1];null!=(n=null!=n&&a?"".concat(n).concat(a):n)?this._renderer.setStyle(this._ngEl.nativeElement,r,n):this._renderer.removeStyle(this._ngEl.nativeElement,r)}},{key:"_applyChanges",value:function(e){var t=this;e.forEachRemovedItem((function(e){return t._setStyle(e.key,null)})),e.forEachAddedItem((function(e){return t._setStyle(e.key,e.currentValue)})),e.forEachChangedItem((function(e){return t._setStyle(e.key,e.currentValue)}))}}]),e}()).\u0275fac=function(e){return new(e||du)(Za(es),Za(ys),Za(rs))},du.\u0275dir=St({type:du,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"}}),du),vu=((uu=function(){function e(t){p(this,e),this._viewContainerRef=t,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null}return m(e,[{key:"ngOnChanges",value:function(e){if(this._shouldRecreateView(e)){var t=this._viewContainerRef;this._viewRef&&t.remove(t.indexOf(this._viewRef)),this._viewRef=this.ngTemplateOutlet?t.createEmbeddedView(this.ngTemplateOutlet,this.ngTemplateOutletContext):null}else this._viewRef&&this.ngTemplateOutletContext&&this._updateExistingContext(this.ngTemplateOutletContext)}},{key:"_shouldRecreateView",value:function(e){var t=e.ngTemplateOutletContext;return!!e.ngTemplateOutlet||t&&this._hasContextShapeChanged(t)}},{key:"_hasContextShapeChanged",value:function(e){var t=Object.keys(e.previousValue||{}),i=Object.keys(e.currentValue||{});if(t.length===i.length){var r,a=n(i);try{for(a.s();!(r=a.n()).done;){var o=r.value;if(-1===t.indexOf(o))return!0}}catch(s){a.e(s)}finally{a.f()}return!1}return!0}},{key:"_updateExistingContext",value:function(e){for(var t=0,n=Object.keys(e);t<n.length;t++){var i=n[t];this._viewRef.context[i]=this.ngTemplateOutletContext[i]}}}]),e}()).\u0275fac=function(e){return new(e||uu)(Za(Ps))},uu.\u0275dir=St({type:uu,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet"},features:[Qt]}),uu);function fu(e,t){return Error("InvalidPipeArgument: '".concat(t,"' for pipe '").concat(_e(e),"'"))}var pu,gu,mu,bu,yu,ku=((yu=function(){function e(){p(this,e)}return m(e,[{key:"transform",value:function(t){if(!t)return t;if("string"!=typeof t)throw fu(e,t);return t.toUpperCase()}}]),e}()).\u0275fac=function(e){return new(e||yu)},yu.\u0275pipe=Tt({name:"uppercase",type:yu,pure:!0}),yu),Cu=((bu=function(){function e(t){p(this,e),this.locale=t}return m(e,[{key:"transform",value:function(n){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"mediumDate",r=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0;if(null==n||""===n||n!=n)return null;try{return function(e,n,i,r){var a=function(e){if(Qc(e))return e;if("number"==typeof e&&!isNaN(e))return new Date(e);if("string"==typeof e){e=e.trim();var n,i=parseFloat(e);if(!isNaN(e-i))return new Date(i);if(/^(\d{4}-\d{1,2}-\d{1,2})$/.test(e)){var r=t(e.split("-").map((function(e){return+e})),3),a=r[0],o=r[1],s=r[2];return new Date(a,o-1,s)}if(n=e.match(Uc))return function(e){var t=new Date(0),n=0,i=0,r=e[8]?t.setUTCFullYear:t.setFullYear,a=e[8]?t.setUTCHours:t.setHours;e[9]&&(n=Number(e[9]+e[10]),i=Number(e[9]+e[11])),r.call(t,Number(e[1]),Number(e[2])-1,Number(e[3]));var o=Number(e[4]||0)-n,s=Number(e[5]||0)-i,l=Number(e[6]||0),c=Math.round(1e3*parseFloat("0."+(e[7]||0)));return a.call(t,o,s,l,c),t}(n)}var l=new Date(e);if(!Qc(l))throw new Error('Unable to convert "'.concat(e,'" into a date'));return l}(e);n=function e(t,n){var i=function(e){return jo(e)[Fo.LocaleId]}(t);if(Oc[i]=Oc[i]||{},Oc[i][n])return Oc[i][n];var r="";switch(n){case"shortDate":r=Dc(t,Ac.Short);break;case"mediumDate":r=Dc(t,Ac.Medium);break;case"longDate":r=Dc(t,Ac.Long);break;case"fullDate":r=Dc(t,Ac.Full);break;case"shortTime":r=Mc(t,Ac.Short);break;case"mediumTime":r=Mc(t,Ac.Medium);break;case"longTime":r=Mc(t,Ac.Long);break;case"fullTime":r=Mc(t,Ac.Full);break;case"short":var a=e(t,"shortTime"),o=e(t,"shortDate");r=jc(Ic(t,Ac.Short),[a,o]);break;case"medium":var s=e(t,"mediumTime"),l=e(t,"mediumDate");r=jc(Ic(t,Ac.Medium),[s,l]);break;case"long":var c=e(t,"longTime"),u=e(t,"longDate");r=jc(Ic(t,Ac.Long),[c,u]);break;case"full":var d=e(t,"fullTime"),h=e(t,"fullDate");r=jc(Ic(t,Ac.Full),[d,h])}return r&&(Oc[i][n]=r),r}(i,n)||n;for(var o,s=[];n;){if(!(o=Ec.exec(n))){s.push(n);break}var l=(s=s.concat(o.slice(1))).pop();if(!l)break;n=l}var c=a.getTimezoneOffset();r&&(c=zc(r,c),a=function(e,t,n){var i=e.getTimezoneOffset();return function(e,t){return(e=new Date(e.getTime())).setMinutes(e.getMinutes()+t),e}(e,-1*(zc(t,i)-i))}(a,r));var u="";return s.forEach((function(e){var t=function(e){if(qc[e])return qc[e];var t;switch(e){case"G":case"GG":case"GGG":t=Bc(Rc.Eras,wc.Abbreviated);break;case"GGGG":t=Bc(Rc.Eras,wc.Wide);break;case"GGGGG":t=Bc(Rc.Eras,wc.Narrow);break;case"y":t=Fc(Gc.FullYear,1,0,!1,!0);break;case"yy":t=Fc(Gc.FullYear,2,0,!0,!0);break;case"yyy":t=Fc(Gc.FullYear,3,0,!1,!0);break;case"yyyy":t=Fc(Gc.FullYear,4,0,!1,!0);break;case"M":case"L":t=Fc(Gc.Month,1,1);break;case"MM":case"LL":t=Fc(Gc.Month,2,1);break;case"MMM":t=Bc(Rc.Months,wc.Abbreviated);break;case"MMMM":t=Bc(Rc.Months,wc.Wide);break;case"MMMMM":t=Bc(Rc.Months,wc.Narrow);break;case"LLL":t=Bc(Rc.Months,wc.Abbreviated,Vc.Standalone);break;case"LLLL":t=Bc(Rc.Months,wc.Wide,Vc.Standalone);break;case"LLLLL":t=Bc(Rc.Months,wc.Narrow,Vc.Standalone);break;case"w":t=Kc(1);break;case"ww":t=Kc(2);break;case"W":t=Kc(1,!0);break;case"d":t=Fc(Gc.Date,1);break;case"dd":t=Fc(Gc.Date,2);break;case"E":case"EE":case"EEE":t=Bc(Rc.Days,wc.Abbreviated);break;case"EEEE":t=Bc(Rc.Days,wc.Wide);break;case"EEEEE":t=Bc(Rc.Days,wc.Narrow);break;case"EEEEEE":t=Bc(Rc.Days,wc.Short);break;case"a":case"aa":case"aaa":t=Bc(Rc.DayPeriods,wc.Abbreviated);break;case"aaaa":t=Bc(Rc.DayPeriods,wc.Wide);break;case"aaaaa":t=Bc(Rc.DayPeriods,wc.Narrow);break;case"b":case"bb":case"bbb":t=Bc(Rc.DayPeriods,wc.Abbreviated,Vc.Standalone,!0);break;case"bbbb":t=Bc(Rc.DayPeriods,wc.Wide,Vc.Standalone,!0);break;case"bbbbb":t=Bc(Rc.DayPeriods,wc.Narrow,Vc.Standalone,!0);break;case"B":case"BB":case"BBB":t=Bc(Rc.DayPeriods,wc.Abbreviated,Vc.Format,!0);break;case"BBBB":t=Bc(Rc.DayPeriods,wc.Wide,Vc.Format,!0);break;case"BBBBB":t=Bc(Rc.DayPeriods,wc.Narrow,Vc.Format,!0);break;case"h":t=Fc(Gc.Hours,1,-12);break;case"hh":t=Fc(Gc.Hours,2,-12);break;case"H":t=Fc(Gc.Hours,1);break;case"HH":t=Fc(Gc.Hours,2);break;case"m":t=Fc(Gc.Minutes,1);break;case"mm":t=Fc(Gc.Minutes,2);break;case"s":t=Fc(Gc.Seconds,1);break;case"ss":t=Fc(Gc.Seconds,2);break;case"S":t=Fc(Gc.FractionalSeconds,1);break;case"SS":t=Fc(Gc.FractionalSeconds,2);break;case"SSS":t=Fc(Gc.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":t=Hc(Lc.Short);break;case"ZZZZZ":t=Hc(Lc.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":t=Hc(Lc.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":t=Hc(Lc.Long);break;default:return null}return qc[e]=t,t}(e);u+=t?t(a,i,c):"''"===e?"'":e.replace(/(^'|'$)/g,"").replace(/''/g,"'")})),u}(n,i,a||this.locale,r)}catch(o){throw fu(e,o.message)}}}]),e}()).\u0275fac=function(e){return new(e||bu)(Za(sl))},bu.\u0275pipe=Tt({name:"date",type:bu,pure:!0}),bu),Vu=((mu=function(){function e(t){p(this,e),this._locale=t}return m(e,[{key:"transform",value:function(t,n,i){if(function(e){return null==e||""===e||e!=e}(t))return null;i=i||this._locale;try{return function(e,t,n){return function(e,t,n,i,r,a){var o=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s="",l=!1;if(isFinite(e)){var c=function(e){var t,n,i,r,a,o=Math.abs(e)+"",s=0;for((n=o.indexOf("."))>-1&&(o=o.replace(".","")),(i=o.search(/e/i))>0?(n<0&&(n=i),n+=+o.slice(i+1),o=o.substring(0,i)):n<0&&(n=o.length),i=0;"0"===o.charAt(i);i++);if(i===(a=o.length))t=[0],n=1;else{for(a--;"0"===o.charAt(a);)a--;for(n-=i,t=[],r=0;i<=a;i++,r++)t[r]=Number(o.charAt(i))}return n>22&&(t=t.splice(0,21),s=n-1,n=1),{digits:t,exponent:s,integerLen:n}}(e);o&&(c=function(e){if(0===e.digits[0])return e;var t=e.digits.length-e.integerLen;return e.exponent?e.exponent+=2:(0===t?e.digits.push(0,0):1===t&&e.digits.push(0),e.integerLen+=2),e}(c));var u=t.minInt,d=t.minFrac,h=t.maxFrac;if(a){var v=a.match(Wc);if(null===v)throw new Error(a+" is not a valid digit info");var f=v[1],p=v[3],g=v[5];null!=f&&(u=Jc(f)),null!=p&&(d=Jc(p)),null!=g?h=Jc(g):null!=p&&d>h&&(h=d)}!function(e,t,n){if(t>n)throw new Error("The minimum number of digits after fraction (".concat(t,") is higher than the maximum (").concat(n,")."));var i=e.digits,r=i.length-e.integerLen,a=Math.min(Math.max(t,r),n),o=a+e.integerLen,s=i[o];if(o>0){i.splice(Math.max(e.integerLen,o));for(var l=o;l<i.length;l++)i[l]=0}else{r=Math.max(0,r),e.integerLen=1,i.length=Math.max(1,o=a+1),i[0]=0;for(var c=1;c<o;c++)i[c]=0}if(s>=5)if(o-1<0){for(var u=0;u>o;u--)i.unshift(0),e.integerLen++;i.unshift(1),e.integerLen++}else i[o-1]++;for(;r<Math.max(0,a);r++)i.push(0);var d=0!==a,h=t+e.integerLen,v=i.reduceRight((function(e,t,n,i){return i[n]=(t+=e)<10?t:t-10,d&&(0===i[n]&&n>=h?i.pop():d=!1),t>=10?1:0}),0);v&&(i.unshift(v),e.integerLen++)}(c,d,h);var m=c.digits,b=c.integerLen,y=c.exponent,k=[];for(l=m.every((function(e){return!e}));b<u;b++)m.unshift(0);for(;b<0;b++)m.unshift(0);b>0?k=m.splice(b,m.length):(k=m,m=[0]);var C=[];for(m.length>=t.lgSize&&C.unshift(m.splice(-t.lgSize,m.length).join(""));m.length>t.gSize;)C.unshift(m.splice(-t.gSize,m.length).join(""));m.length&&C.unshift(m.join("")),s=C.join(Sc(n,i)),k.length&&(s+=Sc(n,r)+k.join("")),y&&(s+=Sc(n,Pc.Exponential)+"+"+y)}else s=Sc(n,Pc.Infinity);return s=e<0&&!l?t.negPre+s+t.negSuf:t.posPre+s+t.posSuf}(e,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"-",n={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},i=e.split(";"),r=i[0],a=i[1],o=-1!==r.indexOf(".")?r.split("."):[r.substring(0,r.lastIndexOf("0")+1),r.substring(r.lastIndexOf("0")+1)],s=o[0],l=o[1]||"";n.posPre=s.substr(0,s.indexOf("#"));for(var c=0;c<l.length;c++){var u=l.charAt(c);"0"===u?n.minFrac=n.maxFrac=c+1:"#"===u?n.maxFrac=c+1:n.posSuf+=u}var d=s.split(",");if(n.gSize=d[1]?d[1].length:0,n.lgSize=d[2]||d[1]?(d[2]||d[1]).length:0,a){var h=r.length-n.posPre.length-n.posSuf.length,v=a.indexOf("#");n.negPre=a.substr(0,v).replace(/'/g,""),n.negSuf=a.substr(v+h).replace(/'/g,"")}else n.negPre=t+n.posPre,n.negSuf=n.posSuf;return n}(function(e,t){return jo(e)[Fo.NumberFormats][t]}(t,kc.Decimal),Sc(t,Pc.MinusSign)),t,Pc.Group,Pc.Decimal,n)}(function(e){if("string"==typeof e&&!isNaN(Number(e)-parseFloat(e)))return Number(e);if("number"!=typeof e)throw new Error(e+" is not a number");return e}(t),i,n)}catch(r){throw fu(e,r.message)}}}]),e}()).\u0275fac=function(e){return new(e||mu)(Za(sl))},mu.\u0275pipe=Tt({name:"number",type:mu,pure:!0}),mu),wu=((gu=function e(){p(this,e)}).\u0275mod=Mt({type:gu}),gu.\u0275inj=we({factory:function(e){return new(e||gu)},providers:[{provide:$c,useClass:Zc}]}),gu),Au=((pu=function e(){p(this,e)}).\u0275prov=Ve({token:pu,providedIn:"root",factory:function(){return new Pu(ot($l),window,ot(Vi))}}),pu),Pu=function(){function e(t,n,i){p(this,e),this.document=t,this.window=n,this.errorHandler=i,this.offset=function(){return[0,0]}}return m(e,[{key:"setOffset",value:function(e){this.offset=Array.isArray(e)?function(){return e}:e}},{key:"getScrollPosition",value:function(){return this.supportsScrolling()?[this.window.scrollX,this.window.scrollY]:[0,0]}},{key:"scrollToPosition",value:function(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}},{key:"scrollToAnchor",value:function(e){if(this.supportsScrolling()){var t=this.document.getElementById(e)||this.document.getElementsByName(e)[0];t&&this.scrollToElement(t)}}},{key:"setHistoryScrollRestoration",value:function(e){if(this.supportScrollRestoration()){var t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}},{key:"scrollToElement",value:function(e){var t=e.getBoundingClientRect(),n=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,r=this.offset();this.window.scrollTo(n-r[0],i-r[1])}},{key:"supportScrollRestoration",value:function(){try{if(!this.window||!this.window.scrollTo)return!1;var e=Du(this.window.history)||Du(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(t){return!1}}},{key:"supportsScrolling",value:function(){try{return!!this.window.scrollTo}catch(e){return!1}}}]),e}();function Du(e){return Object.getOwnPropertyDescriptor(e,"scrollRestoration")}var Mu,Iu,Su,Tu,xu=function(e){l(n,e);var t=u(n);function n(){return p(this,n),t.apply(this,arguments)}return m(n,[{key:"getProperty",value:function(e,t){return e[t]}},{key:"log",value:function(e){window.console&&window.console.log&&window.console.log(e)}},{key:"logGroup",value:function(e){window.console&&window.console.group&&window.console.group(e)}},{key:"logGroupEnd",value:function(){window.console&&window.console.groupEnd&&window.console.groupEnd()}},{key:"onAndCancel",value:function(e,t,n){return e.addEventListener(t,n,!1),function(){e.removeEventListener(t,n,!1)}}},{key:"dispatchEvent",value:function(e,t){e.dispatchEvent(t)}},{key:"remove",value:function(e){return e.parentNode&&e.parentNode.removeChild(e),e}},{key:"getValue",value:function(e){return e.value}},{key:"createElement",value:function(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}},{key:"createHtmlDocument",value:function(){return document.implementation.createHTMLDocument("fakeTitle")}},{key:"getDefaultDocument",value:function(){return document}},{key:"isElementNode",value:function(e){return e.nodeType===Node.ELEMENT_NODE}},{key:"isShadowRoot",value:function(e){return e instanceof DocumentFragment}},{key:"getGlobalEventTarget",value:function(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}},{key:"getHistory",value:function(){return window.history}},{key:"getLocation",value:function(){return window.location}},{key:"getBaseHref",value:function(e){var t,n=_u||(_u=document.querySelector("base"))?_u.getAttribute("href"):null;return null==n?null:(t=n,Mu||(Mu=document.createElement("a")),Mu.setAttribute("href",t),"/"===Mu.pathname.charAt(0)?Mu.pathname:"/"+Mu.pathname)}},{key:"resetBaseElement",value:function(){_u=null}},{key:"getUserAgent",value:function(){return window.navigator.userAgent}},{key:"performanceNow",value:function(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()}},{key:"supportsCookies",value:function(){return!0}},{key:"getCookie",value:function(e){return Xc(document.cookie,e)}}],[{key:"makeCurrent",value:function(){var e;e=new n,Wl||(Wl=e)}}]),n}(function(e){l(n,e);var t=u(n);function n(){return p(this,n),t.call(this)}return m(n,[{key:"supportsDOMEvents",value:function(){return!0}}]),n}(function(){return function e(){p(this,e)}}())),_u=null,Uu=new $e("TRANSITION_ID"),Ou=[{provide:Zs,useFactory:function(e,t,n){return function(){n.get(Xs).donePromise.then((function(){var n=Jl();Array.prototype.slice.apply(t.querySelectorAll("style[ng-transition]")).filter((function(t){return t.getAttribute("ng-transition")===e})).forEach((function(e){return n.remove(e)}))}))}},deps:[Uu,$l,Da],multi:!0}],Eu=function(){function e(){p(this,e)}return m(e,[{key:"addToWindow",value:function(e){He.getAngularTestability=function(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=e.findTestabilityInTree(t,n);if(null==i)throw new Error("Could not find testability for element.");return i},He.getAllAngularTestabilities=function(){return e.getAllTestabilities()},He.getAllAngularRootElements=function(){return e.getAllRootElements()},He.frameworkStabilizers||(He.frameworkStabilizers=[]),He.frameworkStabilizers.push((function(e){var t=He.getAllAngularTestabilities(),n=t.length,i=!1,r=function(t){i=i||t,0==--n&&e(i)};t.forEach((function(e){e.whenStable(r)}))}))}},{key:"findTestabilityInTree",value:function(e,t,n){if(null==t)return null;var i=e.getTestability(t);return null!=i?i:n?Jl().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}],[{key:"init",value:function(){var t;t=new e,Tl=t}}]),e}(),Lu=new $e("EventManagerPlugins"),Gu=((Iu=function(){function e(t,n){var i=this;p(this,e),this._zone=n,this._eventNameToPlugin=new Map,t.forEach((function(e){return e.manager=i})),this._plugins=t.slice().reverse()}return m(e,[{key:"addEventListener",value:function(e,t,n){return this._findPluginFor(t).addEventListener(e,t,n)}},{key:"addGlobalEventListener",value:function(e,t,n){return this._findPluginFor(t).addGlobalEventListener(e,t,n)}},{key:"getZone",value:function(){return this._zone}},{key:"_findPluginFor",value:function(e){var t=this._eventNameToPlugin.get(e);if(t)return t;for(var n=this._plugins,i=0;i<n.length;i++){var r=n[i];if(r.supports(e))return this._eventNameToPlugin.set(e,r),r}throw new Error("No event manager plugin found for event "+e)}}]),e}()).\u0275fac=function(e){return new(e||Iu)(ot(Lu),ot(yl))},Iu.\u0275prov=Ve({token:Iu,factory:Iu.\u0275fac}),Iu),Ru=function(){function e(t){p(this,e),this._doc=t}return m(e,[{key:"addGlobalEventListener",value:function(e,t,n){var i=Jl().getGlobalEventTarget(this._doc,e);if(!i)throw new Error("Unsupported event target ".concat(i," for event ").concat(t));return this.addEventListener(i,t,n)}}]),e}(),ju=((Tu=function(){function e(){p(this,e),this._stylesSet=new Set}return m(e,[{key:"addStyles",value:function(e){var t=this,n=new Set;e.forEach((function(e){t._stylesSet.has(e)||(t._stylesSet.add(e),n.add(e))})),this.onStylesAdded(n)}},{key:"onStylesAdded",value:function(e){}},{key:"getAllStyles",value:function(){return Array.from(this._stylesSet)}}]),e}()).\u0275fac=function(e){return new(e||Tu)},Tu.\u0275prov=Ve({token:Tu,factory:Tu.\u0275fac}),Tu),Nu=((Su=function(e){l(n,e);var t=u(n);function n(e){var i;return p(this,n),(i=t.call(this))._doc=e,i._hostNodes=new Set,i._styleNodes=new Set,i._hostNodes.add(e.head),i}return m(n,[{key:"_addStylesToHost",value:function(e,t){var n=this;e.forEach((function(e){var i=n._doc.createElement("style");i.textContent=e,n._styleNodes.add(t.appendChild(i))}))}},{key:"addHost",value:function(e){this._addStylesToHost(this._stylesSet,e),this._hostNodes.add(e)}},{key:"removeHost",value:function(e){this._hostNodes.delete(e)}},{key:"onStylesAdded",value:function(e){var t=this;this._hostNodes.forEach((function(n){return t._addStylesToHost(e,n)}))}},{key:"ngOnDestroy",value:function(){this._styleNodes.forEach((function(e){return Jl().remove(e)}))}}]),n}(ju)).\u0275fac=function(e){return new(e||Su)(ot($l))},Su.\u0275prov=Ve({token:Su,factory:Su.\u0275fac}),Su),Fu={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Bu=/%COMP%/g;function Hu(e,t,n){for(var i=0;i<t.length;i++){var r=t[i];Array.isArray(r)?Hu(e,r,n):(r=r.replace(Bu,e),n.push(r))}return n}function Ku(e){return function(t){if("__ngUnwrap__"===t)return e;!1===e(t)&&(t.preventDefault(),t.returnValue=!1)}}var qu,zu,Qu,Wu,Ju=((qu=function(){function e(t,n,i){p(this,e),this.eventManager=t,this.sharedStylesHost=n,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new Yu(t)}return m(e,[{key:"createRenderer",value:function(e,t){if(!e||!t)return this.defaultRenderer;switch(t.encapsulation){case yt.Emulated:var n=this.rendererByCompId.get(t.id);return n||(n=new $u(this.eventManager,this.sharedStylesHost,t,this.appId),this.rendererByCompId.set(t.id,n)),n.applyToHost(e),n;case yt.Native:case yt.ShadowDom:return new Zu(this.eventManager,this.sharedStylesHost,e,t);default:if(!this.rendererByCompId.has(t.id)){var i=Hu(t.id,t.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(t.id,this.defaultRenderer)}return this.defaultRenderer}}},{key:"begin",value:function(){}},{key:"end",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||qu)(ot(Gu),ot(Nu),ot(el))},qu.\u0275prov=Ve({token:qu,factory:qu.\u0275fac}),qu),Yu=function(){function e(t){p(this,e),this.eventManager=t,this.data=Object.create(null)}return m(e,[{key:"destroy",value:function(){}},{key:"createElement",value:function(e,t){return t?document.createElementNS(Fu[t]||t,e):document.createElement(e)}},{key:"createComment",value:function(e){return document.createComment(e)}},{key:"createText",value:function(e){return document.createTextNode(e)}},{key:"appendChild",value:function(e,t){e.appendChild(t)}},{key:"insertBefore",value:function(e,t,n){e&&e.insertBefore(t,n)}},{key:"removeChild",value:function(e,t){e&&e.removeChild(t)}},{key:"selectRootElement",value:function(e,t){var n="string"==typeof e?document.querySelector(e):e;if(!n)throw new Error('The selector "'.concat(e,'" did not match any elements'));return t||(n.textContent=""),n}},{key:"parentNode",value:function(e){return e.parentNode}},{key:"nextSibling",value:function(e){return e.nextSibling}},{key:"setAttribute",value:function(e,t,n,i){if(i){t=i+":"+t;var r=Fu[i];r?e.setAttributeNS(r,t,n):e.setAttribute(t,n)}else e.setAttribute(t,n)}},{key:"removeAttribute",value:function(e,t,n){if(n){var i=Fu[n];i?e.removeAttributeNS(i,t):e.removeAttribute("".concat(n,":").concat(t))}else e.removeAttribute(t)}},{key:"addClass",value:function(e,t){e.classList.add(t)}},{key:"removeClass",value:function(e,t){e.classList.remove(t)}},{key:"setStyle",value:function(e,t,n,i){i&is.DashCase?e.style.setProperty(t,n,i&is.Important?"important":""):e.style[t]=n}},{key:"removeStyle",value:function(e,t,n){n&is.DashCase?e.style.removeProperty(t):e.style[t]=""}},{key:"setProperty",value:function(e,t,n){e[t]=n}},{key:"setValue",value:function(e,t){e.nodeValue=t}},{key:"listen",value:function(e,t,n){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Ku(n)):this.eventManager.addEventListener(e,t,Ku(n))}}]),e}(),$u=function(e){l(n,e);var t=u(n);function n(e,i,r,a){var o;p(this,n),(o=t.call(this,e)).component=r;var s=Hu(a+"-"+r.id,r.styles,[]);return i.addStyles(s),o.contentAttr="_ngcontent-%COMP%".replace(Bu,a+"-"+r.id),o.hostAttr="_nghost-%COMP%".replace(Bu,a+"-"+r.id),o}return m(n,[{key:"applyToHost",value:function(e){s(f(n.prototype),"setAttribute",this).call(this,e,this.hostAttr,"")}},{key:"createElement",value:function(e,t){var i=s(f(n.prototype),"createElement",this).call(this,e,t);return s(f(n.prototype),"setAttribute",this).call(this,i,this.contentAttr,""),i}}]),n}(Yu),Zu=function(e){l(n,e);var t=u(n);function n(e,i,r,a){var o;p(this,n),(o=t.call(this,e)).sharedStylesHost=i,o.hostEl=r,o.component=a,o.shadowRoot=a.encapsulation===yt.ShadowDom?r.attachShadow({mode:"open"}):r.createShadowRoot(),o.sharedStylesHost.addHost(o.shadowRoot);for(var s=Hu(a.id,a.styles,[]),l=0;l<s.length;l++){var c=document.createElement("style");c.textContent=s[l],o.shadowRoot.appendChild(c)}return o}return m(n,[{key:"nodeOrShadowRoot",value:function(e){return e===this.hostEl?this.shadowRoot:e}},{key:"destroy",value:function(){this.sharedStylesHost.removeHost(this.shadowRoot)}},{key:"appendChild",value:function(e,t){return s(f(n.prototype),"appendChild",this).call(this,this.nodeOrShadowRoot(e),t)}},{key:"insertBefore",value:function(e,t,i){return s(f(n.prototype),"insertBefore",this).call(this,this.nodeOrShadowRoot(e),t,i)}},{key:"removeChild",value:function(e,t){return s(f(n.prototype),"removeChild",this).call(this,this.nodeOrShadowRoot(e),t)}},{key:"parentNode",value:function(e){return this.nodeOrShadowRoot(s(f(n.prototype),"parentNode",this).call(this,this.nodeOrShadowRoot(e)))}}]),n}(Yu),Xu=((zu=function(e){l(n,e);var t=u(n);function n(e){return p(this,n),t.call(this,e)}return m(n,[{key:"supports",value:function(e){return!0}},{key:"addEventListener",value:function(e,t,n){var i=this;return e.addEventListener(t,n,!1),function(){return i.removeEventListener(e,t,n)}}},{key:"removeEventListener",value:function(e,t,n){return e.removeEventListener(t,n)}}]),n}(Ru)).\u0275fac=function(e){return new(e||zu)(ot($l))},zu.\u0275prov=Ve({token:zu,factory:zu.\u0275fac}),zu),ed=["alt","control","meta","shift"],td={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},nd={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},id={alt:function(e){return e.altKey},control:function(e){return e.ctrlKey},meta:function(e){return e.metaKey},shift:function(e){return e.shiftKey}},rd=((Qu=function(e){l(n,e);var t=u(n);function n(e){return p(this,n),t.call(this,e)}return m(n,[{key:"supports",value:function(e){return null!=n.parseEventName(e)}},{key:"addEventListener",value:function(e,t,i){var r=n.parseEventName(t),a=n.eventCallback(r.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular((function(){return Jl().onAndCancel(e,r.domEventName,a)}))}}],[{key:"parseEventName",value:function(e){var t=e.toLowerCase().split("."),i=t.shift();if(0===t.length||"keydown"!==i&&"keyup"!==i)return null;var r=n._normalizeKey(t.pop()),a="";if(ed.forEach((function(e){var n=t.indexOf(e);n>-1&&(t.splice(n,1),a+=e+".")})),a+=r,0!=t.length||0===r.length)return null;var o={};return o.domEventName=i,o.fullKey=a,o}},{key:"getEventFullKey",value:function(e){var t="",n=function(e){var t=e.key;if(null==t){if(null==(t=e.keyIdentifier))return"Unidentified";t.startsWith("U+")&&(t=String.fromCharCode(parseInt(t.substring(2),16)),3===e.location&&nd.hasOwnProperty(t)&&(t=nd[t]))}return td[t]||t}(e);return" "===(n=n.toLowerCase())?n="space":"."===n&&(n="dot"),ed.forEach((function(i){i!=n&&(0,id[i])(e)&&(t+=i+".")})),t+=n}},{key:"eventCallback",value:function(e,t,i){return function(r){n.getEventFullKey(r)===e&&i.runGuarded((function(){return t(r)}))}}},{key:"_normalizeKey",value:function(e){switch(e){case"esc":return"escape";default:return e}}}]),n}(Ru)).\u0275fac=function(e){return new(e||Qu)(ot($l))},Qu.\u0275prov=Ve({token:Qu,factory:Qu.\u0275fac}),Qu),ad=Ul(ql,"browser",[{provide:rl,useValue:"browser"},{provide:il,useValue:function(){xu.makeCurrent(),Eu.init()},multi:!0},{provide:$l,useFactory:function(){return function(e){Zt=e}(document),document},deps:[]}]),od=[[],{provide:ha,useValue:"root"},{provide:Vi,useFactory:function(){return new Vi},deps:[]},{provide:Lu,useClass:Xu,multi:!0,deps:[$l,yl,rl]},{provide:Lu,useClass:rd,multi:!0,deps:[$l]},[],{provide:Ju,useClass:Ju,deps:[Gu,Nu,el]},{provide:ns,useExisting:Ju},{provide:ju,useExisting:Nu},{provide:Nu,useClass:Nu,deps:[$l]},{provide:Il,useClass:Il,deps:[yl]},{provide:Gu,useClass:Gu,deps:[Lu,yl]},[]],sd=((Wu=function(){function e(t){if(p(this,e),t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}return m(e,null,[{key:"withServerTransition",value:function(t){return{ngModule:e,providers:[{provide:el,useValue:t.appId},{provide:Uu,useExisting:el},Ou]}}}]),e}()).\u0275mod=Mt({type:Wu}),Wu.\u0275inj=we({factory:function(e){return new(e||Wu)(ot(Wu,12))},providers:od,imports:[wu,Ql]}),Wu);function ld(){return new ud(ot($l))}var cd,ud=((cd=function(){function e(t){p(this,e),this._doc=t}return m(e,[{key:"getTitle",value:function(){return this._doc.title}},{key:"setTitle",value:function(e){this._doc.title=e||""}}]),e}()).\u0275fac=function(e){return new(e||cd)(ot($l))},cd.\u0275prov=Ve({factory:ld,token:cd,providedIn:"root"}),cd);function dd(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(1===t.length){var r=t[0];if(C(r))return hd(r,null);if(V(r)&&Object.getPrototypeOf(r)===Object.prototype){var a=Object.keys(r);return hd(a.map((function(e){return r[e]})),a)}}if("function"==typeof t[t.length-1]){var o=t.pop();return hd(t=1===t.length&&C(t[0])?t[0]:t,null).pipe(B((function(e){return o.apply(void 0,i(e))})))}return hd(t,null)}function hd(e,t){return new U((function(n){var i=e.length;if(0!==i)for(var r=new Array(i),a=0,o=0,s=function(s){var l=$(e[s]),c=!1;n.add(l.subscribe({next:function(e){c||(c=!0,o++),r[s]=e},error:function(e){return n.error(e)},complete:function(){++a!==i&&c||(o===i&&n.next(t?t.reduce((function(e,t,n){return e[t]=r[n],e}),{}):r),n.complete())}}))},l=0;l<i;l++)s(l);else n.complete()}))}"undefined"!=typeof window&&window;var vd,fd,pd,gd,md,bd,yd=new $e("NgValueAccessor"),kd={provide:yd,useExisting:Ee((function(){return Cd})),multi:!0},Cd=((vd=function(){function e(t,n){p(this,e),this._renderer=t,this._elementRef=n,this.onChange=function(e){},this.onTouched=function(){}}return m(e,[{key:"writeValue",value:function(e){this._renderer.setProperty(this._elementRef.nativeElement,"checked",e)}},{key:"registerOnChange",value:function(e){this.onChange=e}},{key:"registerOnTouched",value:function(e){this.onTouched=e}},{key:"setDisabledState",value:function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)}}]),e}()).\u0275fac=function(e){return new(e||vd)(Za(rs),Za(es))},vd.\u0275dir=St({type:vd,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(e,t){1&e&&uo("change",(function(e){return t.onChange(e.target.checked)}))("blur",(function(){return t.onTouched()}))},features:[Yo([kd])]}),vd),Vd={provide:yd,useExisting:Ee((function(){return Ad})),multi:!0},wd=new $e("CompositionEventMode"),Ad=((gd=function(){function e(t,n,i){var r;p(this,e),this._renderer=t,this._elementRef=n,this._compositionMode=i,this.onChange=function(e){},this.onTouched=function(){},this._composing=!1,null==this._compositionMode&&(this._compositionMode=(r=Jl()?Jl().getUserAgent():"",!/android (\d+)/.test(r.toLowerCase())))}return m(e,[{key:"writeValue",value:function(e){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==e?"":e)}},{key:"registerOnChange",value:function(e){this.onChange=e}},{key:"registerOnTouched",value:function(e){this.onTouched=e}},{key:"setDisabledState",value:function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)}},{key:"_handleInput",value:function(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}},{key:"_compositionStart",value:function(){this._composing=!0}},{key:"_compositionEnd",value:function(e){this._composing=!1,this._compositionMode&&this.onChange(e)}}]),e}()).\u0275fac=function(e){return new(e||gd)(Za(rs),Za(es),Za(wd,8))},gd.\u0275dir=St({type:gd,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(e,t){1&e&&uo("input",(function(e){return t._handleInput(e.target.value)}))("blur",(function(){return t.onTouched()}))("compositionstart",(function(){return t._compositionStart()}))("compositionend",(function(e){return t._compositionEnd(e.target.value)}))},features:[Yo([Vd])]}),gd),Pd=((pd=function(){function e(){p(this,e)}return m(e,[{key:"value",get:function(){return this.control?this.control.value:null}},{key:"valid",get:function(){return this.control?this.control.valid:null}},{key:"invalid",get:function(){return this.control?this.control.invalid:null}},{key:"pending",get:function(){return this.control?this.control.pending:null}},{key:"disabled",get:function(){return this.control?this.control.disabled:null}},{key:"enabled",get:function(){return this.control?this.control.enabled:null}},{key:"errors",get:function(){return this.control?this.control.errors:null}},{key:"pristine",get:function(){return this.control?this.control.pristine:null}},{key:"dirty",get:function(){return this.control?this.control.dirty:null}},{key:"touched",get:function(){return this.control?this.control.touched:null}},{key:"status",get:function(){return this.control?this.control.status:null}},{key:"untouched",get:function(){return this.control?this.control.untouched:null}},{key:"statusChanges",get:function(){return this.control?this.control.statusChanges:null}},{key:"valueChanges",get:function(){return this.control?this.control.valueChanges:null}},{key:"path",get:function(){return null}},{key:"reset",value:function(e){this.control&&this.control.reset(e)}},{key:"hasError",value:function(e,t){return!!this.control&&this.control.hasError(e,t)}},{key:"getError",value:function(e,t){return this.control?this.control.getError(e,t):null}}]),e}()).\u0275fac=function(e){return new(e||pd)},pd.\u0275dir=St({type:pd}),pd),Dd=((fd=function(e){l(n,e);var t=u(n);function n(){return p(this,n),t.apply(this,arguments)}return m(n,[{key:"formDirective",get:function(){return null}},{key:"path",get:function(){return null}}]),n}(Pd)).\u0275fac=function(e){return Md(e||fd)},fd.\u0275dir=St({type:fd,features:[Ta]}),fd),Md=bi(Dd),Id=function(e){l(n,e);var t=u(n);function n(){var e;return p(this,n),(e=t.apply(this,arguments))._parent=null,e.name=null,e.valueAccessor=null,e._rawValidators=[],e._rawAsyncValidators=[],e}return m(n,[{key:"validator",get:function(){}},{key:"asyncValidator",get:function(){}}]),n}(Pd),Sd=function(){function e(t){p(this,e),this._cd=t}return m(e,[{key:"ngClassUntouched",get:function(){return!!this._cd.control&&this._cd.control.untouched}},{key:"ngClassTouched",get:function(){return!!this._cd.control&&this._cd.control.touched}},{key:"ngClassPristine",get:function(){return!!this._cd.control&&this._cd.control.pristine}},{key:"ngClassDirty",get:function(){return!!this._cd.control&&this._cd.control.dirty}},{key:"ngClassValid",get:function(){return!!this._cd.control&&this._cd.control.valid}},{key:"ngClassInvalid",get:function(){return!!this._cd.control&&this._cd.control.invalid}},{key:"ngClassPending",get:function(){return!!this._cd.control&&this._cd.control.pending}}]),e}(),Td=((bd=function(e){l(n,e);var t=u(n);function n(e){return p(this,n),t.call(this,e)}return n}(Sd)).\u0275fac=function(e){return new(e||bd)(Za(Id,2))},bd.\u0275dir=St({type:bd,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(e,t){2&e&&wo("ng-untouched",t.ngClassUntouched)("ng-touched",t.ngClassTouched)("ng-pristine",t.ngClassPristine)("ng-dirty",t.ngClassDirty)("ng-valid",t.ngClassValid)("ng-invalid",t.ngClassInvalid)("ng-pending",t.ngClassPending)},features:[Ta]}),bd),xd=((md=function(e){l(n,e);var t=u(n);function n(e){return p(this,n),t.call(this,e)}return n}(Sd)).\u0275fac=function(e){return new(e||md)(Za(Dd,2))},md.\u0275dir=St({type:md,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:14,hostBindings:function(e,t){2&e&&wo("ng-untouched",t.ngClassUntouched)("ng-touched",t.ngClassTouched)("ng-pristine",t.ngClassPristine)("ng-dirty",t.ngClassDirty)("ng-valid",t.ngClassValid)("ng-invalid",t.ngClassInvalid)("ng-pending",t.ngClassPending)},features:[Ta]}),md);function _d(e){return null==e||0===e.length}function Ud(e){return null!=e&&"number"==typeof e.length}var Od=new $e("NgValidators"),Ed=new $e("NgAsyncValidators"),Ld=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,Gd=function(){function e(){p(this,e)}return m(e,null,[{key:"min",value:function(e){return function(t){if(_d(t.value)||_d(e))return null;var n=parseFloat(t.value);return!isNaN(n)&&n<e?{min:{min:e,actual:t.value}}:null}}},{key:"max",value:function(e){return function(t){if(_d(t.value)||_d(e))return null;var n=parseFloat(t.value);return!isNaN(n)&&n>e?{max:{max:e,actual:t.value}}:null}}},{key:"required",value:function(e){return _d(e.value)?{required:!0}:null}},{key:"requiredTrue",value:function(e){return!0===e.value?null:{required:!0}}},{key:"email",value:function(e){return _d(e.value)||Ld.test(e.value)?null:{email:!0}}},{key:"minLength",value:function(e){return function(t){return _d(t.value)||!Ud(t.value)?null:t.value.length<e?{minlength:{requiredLength:e,actualLength:t.value.length}}:null}}},{key:"maxLength",value:function(e){return function(t){return Ud(t.value)&&t.value.length>e?{maxlength:{requiredLength:e,actualLength:t.value.length}}:null}}},{key:"pattern",value:function(t){return t?("string"==typeof t?(i="","^"!==t.charAt(0)&&(i+="^"),i+=t,"$"!==t.charAt(t.length-1)&&(i+="$"),n=new RegExp(i)):(i=t.toString(),n=t),function(e){if(_d(e.value))return null;var t=e.value;return n.test(t)?null:{pattern:{requiredPattern:i,actualValue:t}}}):e.nullValidator;var n,i}},{key:"nullValidator",value:function(e){return null}},{key:"compose",value:function(e){if(!e)return null;var t=e.filter(Rd);return 0==t.length?null:function(e){return Nd(Fd(e,t))}}},{key:"composeAsync",value:function(e){if(!e)return null;var t=e.filter(Rd);return 0==t.length?null:function(e){return dd(Fd(e,t).map(jd)).pipe(B(Nd))}}}]),e}();function Rd(e){return null!=e}function jd(e){var t=lo(e)?$(e):e;return co(t),t}function Nd(e){var t={};return e.forEach((function(e){t=null!=e?Object.assign(Object.assign({},t),e):t})),0===Object.keys(t).length?null:t}function Fd(e,t){return t.map((function(t){return t(e)}))}function Bd(e){return e.map((function(e){return function(e){return!e.validate}(e)?e:function(t){return e.validate(t)}}))}var Hd,Kd,qd,zd,Qd={provide:yd,useExisting:Ee((function(){return Wd})),multi:!0},Wd=((Hd=function(){function e(t,n){p(this,e),this._renderer=t,this._elementRef=n,this.onChange=function(e){},this.onTouched=function(){}}return m(e,[{key:"writeValue",value:function(e){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==e?"":e)}},{key:"registerOnChange",value:function(e){this.onChange=function(t){e(""==t?null:parseFloat(t))}}},{key:"registerOnTouched",value:function(e){this.onTouched=e}},{key:"setDisabledState",value:function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)}}]),e}()).\u0275fac=function(e){return new(e||Hd)(Za(rs),Za(es))},Hd.\u0275dir=St({type:Hd,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(e,t){1&e&&uo("input",(function(e){return t.onChange(e.target.value)}))("blur",(function(){return t.onTouched()}))},features:[Yo([Qd])]}),Hd),Jd={provide:yd,useExisting:Ee((function(){return $d})),multi:!0},Yd=((qd=function(){function e(){p(this,e),this._accessors=[]}return m(e,[{key:"add",value:function(e,t){this._accessors.push([e,t])}},{key:"remove",value:function(e){for(var t=this._accessors.length-1;t>=0;--t)if(this._accessors[t][1]===e)return void this._accessors.splice(t,1)}},{key:"select",value:function(e){var t=this;this._accessors.forEach((function(n){t._isSameGroup(n,e)&&n[1]!==e&&n[1].fireUncheck(e.value)}))}},{key:"_isSameGroup",value:function(e,t){return!!e[0].control&&e[0]._parent===t._control._parent&&e[1].name===t.name}}]),e}()).\u0275fac=function(e){return new(e||qd)},qd.\u0275prov=Ve({token:qd,factory:qd.\u0275fac}),qd),$d=((Kd=function(){function e(t,n,i,r){p(this,e),this._renderer=t,this._elementRef=n,this._registry=i,this._injector=r,this.onChange=function(){},this.onTouched=function(){}}return m(e,[{key:"ngOnInit",value:function(){this._control=this._injector.get(Id),this._checkName(),this._registry.add(this._control,this)}},{key:"ngOnDestroy",value:function(){this._registry.remove(this)}},{key:"writeValue",value:function(e){this._state=e===this.value,this._renderer.setProperty(this._elementRef.nativeElement,"checked",this._state)}},{key:"registerOnChange",value:function(e){var t=this;this._fn=e,this.onChange=function(){e(t.value),t._registry.select(t)}}},{key:"fireUncheck",value:function(e){this.writeValue(e)}},{key:"registerOnTouched",value:function(e){this.onTouched=e}},{key:"setDisabledState",value:function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)}},{key:"_checkName",value:function(){!this.name&&this.formControlName&&(this.name=this.formControlName)}}]),e}()).\u0275fac=function(e){return new(e||Kd)(Za(rs),Za(es),Za(Yd),Za(Da))},Kd.\u0275dir=St({type:Kd,selectors:[["input","type","radio","formControlName",""],["input","type","radio","formControl",""],["input","type","radio","ngModel",""]],hostBindings:function(e,t){1&e&&uo("change",(function(){return t.onChange()}))("blur",(function(){return t.onTouched()}))},inputs:{name:"name",formControlName:"formControlName",value:"value"},features:[Yo([Jd])]}),Kd),Zd={provide:yd,useExisting:Ee((function(){return Xd})),multi:!0},Xd=((zd=function(){function e(t,n){p(this,e),this._renderer=t,this._elementRef=n,this.onChange=function(e){},this.onTouched=function(){}}return m(e,[{key:"writeValue",value:function(e){this._renderer.setProperty(this._elementRef.nativeElement,"value",parseFloat(e))}},{key:"registerOnChange",value:function(e){this.onChange=function(t){e(""==t?null:parseFloat(t))}}},{key:"registerOnTouched",value:function(e){this.onTouched=e}},{key:"setDisabledState",value:function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)}}]),e}()).\u0275fac=function(e){return new(e||zd)(Za(rs),Za(es))},zd.\u0275dir=St({type:zd,selectors:[["input","type","range","formControlName",""],["input","type","range","formControl",""],["input","type","range","ngModel",""]],hostBindings:function(e,t){1&e&&uo("change",(function(e){return t.onChange(e.target.value)}))("input",(function(e){return t.onChange(e.target.value)}))("blur",(function(){return t.onTouched()}))},features:[Yo([Zd])]}),zd),eh={provide:yd,useExisting:Ee((function(){return rh})),multi:!0};function th(e,t){return null==e?""+t:(t&&"object"==typeof t&&(t="Object"),"".concat(e,": ").concat(t).slice(0,50))}var nh,ih,rh=((ih=function(){function e(t,n){p(this,e),this._renderer=t,this._elementRef=n,this._optionMap=new Map,this._idCounter=0,this.onChange=function(e){},this.onTouched=function(){},this._compareWith=Object.is}return m(e,[{key:"compareWith",set:function(e){this._compareWith=e}},{key:"writeValue",value:function(e){this.value=e;var t=this._getOptionId(e);null==t&&this._renderer.setProperty(this._elementRef.nativeElement,"selectedIndex",-1);var n=th(t,e);this._renderer.setProperty(this._elementRef.nativeElement,"value",n)}},{key:"registerOnChange",value:function(e){var t=this;this.onChange=function(n){t.value=t._getOptionValue(n),e(t.value)}}},{key:"registerOnTouched",value:function(e){this.onTouched=e}},{key:"setDisabledState",value:function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)}},{key:"_registerOption",value:function(){return(this._idCounter++).toString()}},{key:"_getOptionId",value:function(e){for(var t=0,n=Array.from(this._optionMap.keys());t<n.length;t++){var i=n[t];if(this._compareWith(this._optionMap.get(i),e))return i}return null}},{key:"_getOptionValue",value:function(e){var t=function(e){return e.split(":")[0]}(e);return this._optionMap.has(t)?this._optionMap.get(t):e}}]),e}()).\u0275fac=function(e){return new(e||ih)(Za(rs),Za(es))},ih.\u0275dir=St({type:ih,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(e,t){1&e&&uo("change",(function(e){return t.onChange(e.target.value)}))("blur",(function(){return t.onTouched()}))},inputs:{compareWith:"compareWith"},features:[Yo([eh])]}),ih),ah=((nh=function(){function e(t,n,i){p(this,e),this._element=t,this._renderer=n,this._select=i,this._select&&(this.id=this._select._registerOption())}return m(e,[{key:"ngValue",set:function(e){null!=this._select&&(this._select._optionMap.set(this.id,e),this._setElementValue(th(this.id,e)),this._select.writeValue(this._select.value))}},{key:"value",set:function(e){this._setElementValue(e),this._select&&this._select.writeValue(this._select.value)}},{key:"_setElementValue",value:function(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}},{key:"ngOnDestroy",value:function(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}]),e}()).\u0275fac=function(e){return new(e||nh)(Za(es),Za(rs),Za(rh,9))},nh.\u0275dir=St({type:nh,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),nh),oh={provide:yd,useExisting:Ee((function(){return uh})),multi:!0};function sh(e,t){return null==e?""+t:("string"==typeof t&&(t="'".concat(t,"'")),t&&"object"==typeof t&&(t="Object"),"".concat(e,": ").concat(t).slice(0,50))}var lh,ch,uh=((ch=function(){function e(t,n){p(this,e),this._renderer=t,this._elementRef=n,this._optionMap=new Map,this._idCounter=0,this.onChange=function(e){},this.onTouched=function(){},this._compareWith=Object.is}return m(e,[{key:"compareWith",set:function(e){this._compareWith=e}},{key:"writeValue",value:function(e){var t,n=this;if(this.value=e,Array.isArray(e)){var i=e.map((function(e){return n._getOptionId(e)}));t=function(e,t){e._setSelected(i.indexOf(t.toString())>-1)}}else t=function(e,t){e._setSelected(!1)};this._optionMap.forEach(t)}},{key:"registerOnChange",value:function(e){var t=this;this.onChange=function(n){var i=[];if(void 0!==n.selectedOptions)for(var r=n.selectedOptions,a=0;a<r.length;a++){var o=r.item(a),s=t._getOptionValue(o.value);i.push(s)}else for(var l=n.options,c=0;c<l.length;c++){var u=l.item(c);if(u.selected){var d=t._getOptionValue(u.value);i.push(d)}}t.value=i,e(i)}}},{key:"registerOnTouched",value:function(e){this.onTouched=e}},{key:"setDisabledState",value:function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)}},{key:"_registerOption",value:function(e){var t=(this._idCounter++).toString();return this._optionMap.set(t,e),t}},{key:"_getOptionId",value:function(e){for(var t=0,n=Array.from(this._optionMap.keys());t<n.length;t++){var i=n[t];if(this._compareWith(this._optionMap.get(i)._value,e))return i}return null}},{key:"_getOptionValue",value:function(e){var t=function(e){return e.split(":")[0]}(e);return this._optionMap.has(t)?this._optionMap.get(t)._value:e}}]),e}()).\u0275fac=function(e){return new(e||ch)(Za(rs),Za(es))},ch.\u0275dir=St({type:ch,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(e,t){1&e&&uo("change",(function(e){return t.onChange(e.target)}))("blur",(function(){return t.onTouched()}))},inputs:{compareWith:"compareWith"},features:[Yo([oh])]}),ch),dh=((lh=function(){function e(t,n,i){p(this,e),this._element=t,this._renderer=n,this._select=i,this._select&&(this.id=this._select._registerOption(this))}return m(e,[{key:"ngValue",set:function(e){null!=this._select&&(this._value=e,this._setElementValue(sh(this.id,e)),this._select.writeValue(this._select.value))}},{key:"value",set:function(e){this._select?(this._value=e,this._setElementValue(sh(this.id,e)),this._select.writeValue(this._select.value)):this._setElementValue(e)}},{key:"_setElementValue",value:function(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}},{key:"_setSelected",value:function(e){this._renderer.setProperty(this._element.nativeElement,"selected",e)}},{key:"ngOnDestroy",value:function(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}]),e}()).\u0275fac=function(e){return new(e||lh)(Za(es),Za(rs),Za(uh,9))},lh.\u0275dir=St({type:lh,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),lh);function hh(e,t){e.validator=Gd.compose([e.validator,t.validator]),e.asyncValidator=Gd.composeAsync([e.asyncValidator,t.asyncValidator]),t.valueAccessor.writeValue(e.value),function(e,t){t.valueAccessor.registerOnChange((function(n){e._pendingValue=n,e._pendingChange=!0,e._pendingDirty=!0,"change"===e.updateOn&&vh(e,t)}))}(e,t),function(e,t){e.registerOnChange((function(e,n){t.valueAccessor.writeValue(e),n&&t.viewToModelUpdate(e)}))}(e,t),function(e,t){t.valueAccessor.registerOnTouched((function(){e._pendingTouched=!0,"blur"===e.updateOn&&e._pendingChange&&vh(e,t),"submit"!==e.updateOn&&e.markAsTouched()}))}(e,t),t.valueAccessor.setDisabledState&&e.registerOnDisabledChange((function(e){t.valueAccessor.setDisabledState(e)})),t._rawValidators.forEach((function(t){t.registerOnValidatorChange&&t.registerOnValidatorChange((function(){return e.updateValueAndValidity()}))})),t._rawAsyncValidators.forEach((function(t){t.registerOnValidatorChange&&t.registerOnValidatorChange((function(){return e.updateValueAndValidity()}))}))}function vh(e,t){e._pendingDirty&&e.markAsDirty(),e.setValue(e._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1}function fh(e){return null!=e?Gd.compose(Bd(e)):null}function ph(e){return null!=e?Gd.composeAsync(Bd(e)):null}var gh=[Cd,Xd,Wd,rh,uh,$d];function mh(e){return(Ch(e)?e.validators:e)||null}function bh(e){return Array.isArray(e)?fh(e):e||null}function yh(e,t){return(Ch(t)?t.asyncValidators:e)||null}function kh(e){return Array.isArray(e)?ph(e):e||null}function Ch(e){return null!=e&&!Array.isArray(e)&&"object"==typeof e}var Vh,wh,Ah,Ph,Dh,Mh,Ih,Sh,Th,xh=function(){function e(t,n){p(this,e),this._hasOwnPendingAsyncValidator=!1,this._onCollectionChange=function(){},this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=t,this._rawAsyncValidators=n,this._composedValidatorFn=bh(this._rawValidators),this._composedAsyncValidatorFn=kh(this._rawAsyncValidators)}return m(e,[{key:"validator",get:function(){return this._composedValidatorFn},set:function(e){this._rawValidators=this._composedValidatorFn=e}},{key:"asyncValidator",get:function(){return this._composedAsyncValidatorFn},set:function(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}},{key:"parent",get:function(){return this._parent}},{key:"valid",get:function(){return"VALID"===this.status}},{key:"invalid",get:function(){return"INVALID"===this.status}},{key:"pending",get:function(){return"PENDING"==this.status}},{key:"disabled",get:function(){return"DISABLED"===this.status}},{key:"enabled",get:function(){return"DISABLED"!==this.status}},{key:"dirty",get:function(){return!this.pristine}},{key:"untouched",get:function(){return!this.touched}},{key:"updateOn",get:function(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}},{key:"setValidators",value:function(e){this._rawValidators=e,this._composedValidatorFn=bh(e)}},{key:"setAsyncValidators",value:function(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=kh(e)}},{key:"clearValidators",value:function(){this.validator=null}},{key:"clearAsyncValidators",value:function(){this.asyncValidator=null}},{key:"markAsTouched",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}},{key:"markAllAsTouched",value:function(){this.markAsTouched({onlySelf:!0}),this._forEachChild((function(e){return e.markAllAsTouched()}))}},{key:"markAsUntouched",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.touched=!1,this._pendingTouched=!1,this._forEachChild((function(e){e.markAsUntouched({onlySelf:!0})})),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}},{key:"markAsDirty",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}},{key:"markAsPristine",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.pristine=!0,this._pendingDirty=!1,this._forEachChild((function(e){e.markAsPristine({onlySelf:!0})})),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}},{key:"markAsPending",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.status="PENDING",!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}},{key:"disable",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this._parentMarkedDirty(e.onlySelf);this.status="DISABLED",this.errors=null,this._forEachChild((function(t){t.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))})),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach((function(e){return e(!0)}))}},{key:"enable",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this._parentMarkedDirty(e.onlySelf);this.status="VALID",this._forEachChild((function(t){t.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))})),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach((function(e){return e(!1)}))}},{key:"_updateAncestors",value:function(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}},{key:"setParent",value:function(e){this._parent=e}},{key:"updateValueAndValidity",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),"VALID"!==this.status&&"PENDING"!==this.status||this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}},{key:"_updateTreeValidity",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{emitEvent:!0};this._forEachChild((function(t){return t._updateTreeValidity(e)})),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}},{key:"_setInitialStatus",value:function(){this.status=this._allControlsDisabled()?"DISABLED":"VALID"}},{key:"_runValidator",value:function(){return this.validator?this.validator(this):null}},{key:"_runAsyncValidator",value:function(e){var t=this;if(this.asyncValidator){this.status="PENDING",this._hasOwnPendingAsyncValidator=!0;var n=jd(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe((function(n){t._hasOwnPendingAsyncValidator=!1,t.setErrors(n,{emitEvent:e})}))}}},{key:"_cancelExistingSubscription",value:function(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}},{key:"setErrors",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}},{key:"get",value:function(e){return function(e,t,n){if(null==t)return null;if(Array.isArray(t)||(t=t.split(".")),Array.isArray(t)&&0===t.length)return null;var i=e;return t.forEach((function(e){i=i instanceof Uh?i.controls.hasOwnProperty(e)?i.controls[e]:null:i instanceof Oh&&i.at(e)||null})),i}(this,e)}},{key:"getError",value:function(e,t){var n=t?this.get(t):this;return n&&n.errors?n.errors[e]:null}},{key:"hasError",value:function(e,t){return!!this.getError(e,t)}},{key:"root",get:function(){for(var e=this;e._parent;)e=e._parent;return e}},{key:"_updateControlsErrors",value:function(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}},{key:"_initObservables",value:function(){this.valueChanges=new Ys,this.statusChanges=new Ys}},{key:"_calculateStatus",value:function(){return this._allControlsDisabled()?"DISABLED":this.errors?"INVALID":this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus("PENDING")?"PENDING":this._anyControlsHaveStatus("INVALID")?"INVALID":"VALID"}},{key:"_anyControlsHaveStatus",value:function(e){return this._anyControls((function(t){return t.status===e}))}},{key:"_anyControlsDirty",value:function(){return this._anyControls((function(e){return e.dirty}))}},{key:"_anyControlsTouched",value:function(){return this._anyControls((function(e){return e.touched}))}},{key:"_updatePristine",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}},{key:"_updateTouched",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}},{key:"_isBoxedValue",value:function(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}},{key:"_registerOnCollectionChange",value:function(e){this._onCollectionChange=e}},{key:"_setUpdateStrategy",value:function(e){Ch(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}},{key:"_parentMarkedDirty",value:function(e){return!e&&this._parent&&this._parent.dirty&&!this._parent._anyControlsDirty()}}]),e}(),_h=function(e){l(n,e);var t=u(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0;return p(this,n),(e=t.call(this,mh(r),yh(a,r)))._onChange=[],e._applyFormState(i),e._setUpdateStrategy(r),e.updateValueAndValidity({onlySelf:!0,emitEvent:!1}),e._initObservables(),e}return m(n,[{key:"setValue",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.value=this._pendingValue=e,this._onChange.length&&!1!==n.emitModelToViewChange&&this._onChange.forEach((function(e){return e(t.value,!1!==n.emitViewToModelChange)})),this.updateValueAndValidity(n)}},{key:"patchValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.setValue(e,t)}},{key:"reset",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}},{key:"_updateValue",value:function(){}},{key:"_anyControls",value:function(e){return!1}},{key:"_allControlsDisabled",value:function(){return this.disabled}},{key:"registerOnChange",value:function(e){this._onChange.push(e)}},{key:"_clearChangeFns",value:function(){this._onChange=[],this._onDisabledChange=[],this._onCollectionChange=function(){}}},{key:"registerOnDisabledChange",value:function(e){this._onDisabledChange.push(e)}},{key:"_forEachChild",value:function(e){}},{key:"_syncPendingControls",value:function(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}},{key:"_applyFormState",value:function(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}]),n}(xh),Uh=function(e){l(n,e);var t=u(n);function n(e,i,r){var a;return p(this,n),(a=t.call(this,mh(i),yh(r,i))).controls=e,a._initObservables(),a._setUpdateStrategy(i),a._setUpControls(),a.updateValueAndValidity({onlySelf:!0,emitEvent:!1}),a}return m(n,[{key:"registerControl",value:function(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}},{key:"addControl",value:function(e,t){this.registerControl(e,t),this.updateValueAndValidity(),this._onCollectionChange()}},{key:"removeControl",value:function(e){this.controls[e]&&this.controls[e]._registerOnCollectionChange((function(){})),delete this.controls[e],this.updateValueAndValidity(),this._onCollectionChange()}},{key:"setControl",value:function(e,t){this.controls[e]&&this.controls[e]._registerOnCollectionChange((function(){})),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity(),this._onCollectionChange()}},{key:"contains",value:function(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}},{key:"setValue",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._checkAllValuesPresent(e),Object.keys(e).forEach((function(i){t._throwIfControlMissing(i),t.controls[i].setValue(e[i],{onlySelf:!0,emitEvent:n.emitEvent})})),this.updateValueAndValidity(n)}},{key:"patchValue",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object.keys(e).forEach((function(i){t.controls[i]&&t.controls[i].patchValue(e[i],{onlySelf:!0,emitEvent:n.emitEvent})})),this.updateValueAndValidity(n)}},{key:"reset",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._forEachChild((function(n,i){n.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})})),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}},{key:"getRawValue",value:function(){return this._reduceChildren({},(function(e,t,n){return e[n]=t instanceof _h?t.value:t.getRawValue(),e}))}},{key:"_syncPendingControls",value:function(){var e=this._reduceChildren(!1,(function(e,t){return!!t._syncPendingControls()||e}));return e&&this.updateValueAndValidity({onlySelf:!0}),e}},{key:"_throwIfControlMissing",value:function(e){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[e])throw new Error("Cannot find form control with name: ".concat(e,"."))}},{key:"_forEachChild",value:function(e){var t=this;Object.keys(this.controls).forEach((function(n){return e(t.controls[n],n)}))}},{key:"_setUpControls",value:function(){var e=this;this._forEachChild((function(t){t.setParent(e),t._registerOnCollectionChange(e._onCollectionChange)}))}},{key:"_updateValue",value:function(){this.value=this._reduceValue()}},{key:"_anyControls",value:function(e){for(var t=0,n=Object.keys(this.controls);t<n.length;t++){var i=n[t],r=this.controls[i];if(this.contains(i)&&e(r))return!0}return!1}},{key:"_reduceValue",value:function(){var e=this;return this._reduceChildren({},(function(t,n,i){return(n.enabled||e.disabled)&&(t[i]=n.value),t}))}},{key:"_reduceChildren",value:function(e,t){var n=e;return this._forEachChild((function(e,i){n=t(n,e,i)})),n}},{key:"_allControlsDisabled",value:function(){for(var e=0,t=Object.keys(this.controls);e<t.length;e++){var n=t[e];if(this.controls[n].enabled)return!1}return Object.keys(this.controls).length>0||this.disabled}},{key:"_checkAllValuesPresent",value:function(e){this._forEachChild((function(t,n){if(void 0===e[n])throw new Error("Must supply a value for form control with name: '".concat(n,"'."))}))}}]),n}(xh),Oh=function(e){l(i,e);var t=u(i);function i(e,n,r){var a;return p(this,i),(a=t.call(this,mh(n),yh(r,n))).controls=e,a._initObservables(),a._setUpdateStrategy(n),a._setUpControls(),a.updateValueAndValidity({onlySelf:!0,emitEvent:!1}),a}return m(i,[{key:"at",value:function(e){return this.controls[e]}},{key:"push",value:function(e){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity(),this._onCollectionChange()}},{key:"insert",value:function(e,t){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity()}},{key:"removeAt",value:function(e){this.controls[e]&&this.controls[e]._registerOnCollectionChange((function(){})),this.controls.splice(e,1),this.updateValueAndValidity()}},{key:"setControl",value:function(e,t){this.controls[e]&&this.controls[e]._registerOnCollectionChange((function(){})),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity(),this._onCollectionChange()}},{key:"length",get:function(){return this.controls.length}},{key:"setValue",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._checkAllValuesPresent(e),e.forEach((function(e,i){t._throwIfControlMissing(i),t.at(i).setValue(e,{onlySelf:!0,emitEvent:n.emitEvent})})),this.updateValueAndValidity(n)}},{key:"patchValue",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.forEach((function(e,i){t.at(i)&&t.at(i).patchValue(e,{onlySelf:!0,emitEvent:n.emitEvent})})),this.updateValueAndValidity(n)}},{key:"reset",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._forEachChild((function(n,i){n.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})})),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}},{key:"getRawValue",value:function(){return this.controls.map((function(e){return e instanceof _h?e.value:e.getRawValue()}))}},{key:"clear",value:function(){this.controls.length<1||(this._forEachChild((function(e){return e._registerOnCollectionChange((function(){}))})),this.controls.splice(0),this.updateValueAndValidity())}},{key:"_syncPendingControls",value:function(){var e=this.controls.reduce((function(e,t){return!!t._syncPendingControls()||e}),!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}},{key:"_throwIfControlMissing",value:function(e){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(e))throw new Error("Cannot find form control at index "+e)}},{key:"_forEachChild",value:function(e){this.controls.forEach((function(t,n){e(t,n)}))}},{key:"_updateValue",value:function(){var e=this;this.value=this.controls.filter((function(t){return t.enabled||e.disabled})).map((function(e){return e.value}))}},{key:"_anyControls",value:function(e){return this.controls.some((function(t){return t.enabled&&e(t)}))}},{key:"_setUpControls",value:function(){var e=this;this._forEachChild((function(t){return e._registerControl(t)}))}},{key:"_checkAllValuesPresent",value:function(e){this._forEachChild((function(t,n){if(void 0===e[n])throw new Error("Must supply a value for form control at index: ".concat(n,"."))}))}},{key:"_allControlsDisabled",value:function(){var e,t=n(this.controls);try{for(t.s();!(e=t.n()).done;){if(e.value.enabled)return!1}}catch(i){t.e(i)}finally{t.f()}return this.controls.length>0||this.disabled}},{key:"_registerControl",value:function(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}]),i}(xh),Eh={provide:Dd,useExisting:Ee((function(){return Gh}))},Lh=Promise.resolve(null),Gh=((Vh=function(e){l(n,e);var t=u(n);function n(e,i){var r;return p(this,n),(r=t.call(this)).submitted=!1,r._directives=[],r.ngSubmit=new Ys,r.form=new Uh({},fh(e),ph(i)),r}return m(n,[{key:"ngAfterViewInit",value:function(){this._setUpdateStrategy()}},{key:"formDirective",get:function(){return this}},{key:"control",get:function(){return this.form}},{key:"path",get:function(){return[]}},{key:"controls",get:function(){return this.form.controls}},{key:"addControl",value:function(e){var t=this;Lh.then((function(){var n=t._findContainer(e.path);e.control=n.registerControl(e.name,e.control),hh(e.control,e),e.control.updateValueAndValidity({emitEvent:!1}),t._directives.push(e)}))}},{key:"getControl",value:function(e){return this.form.get(e.path)}},{key:"removeControl",value:function(e){var t=this;Lh.then((function(){var n,i,r,a=t._findContainer(e.path);a&&a.removeControl(e.name),n=t._directives,i=e,(r=n.indexOf(i))>-1&&n.splice(r,1)}))}},{key:"addFormGroup",value:function(e){var t=this;Lh.then((function(){var n=t._findContainer(e.path),i=new Uh({});(function(e,t){e.validator=Gd.compose([e.validator,t.validator]),e.asyncValidator=Gd.composeAsync([e.asyncValidator,t.asyncValidator])})(i,e),n.registerControl(e.name,i),i.updateValueAndValidity({emitEvent:!1})}))}},{key:"removeFormGroup",value:function(e){var t=this;Lh.then((function(){var n=t._findContainer(e.path);n&&n.removeControl(e.name)}))}},{key:"getFormGroup",value:function(e){return this.form.get(e.path)}},{key:"updateModel",value:function(e,t){var n=this;Lh.then((function(){n.form.get(e.path).setValue(t)}))}},{key:"setValue",value:function(e){this.control.setValue(e)}},{key:"onSubmit",value:function(e){return this.submitted=!0,t=this._directives,this.form._syncPendingControls(),t.forEach((function(e){var t=e.control;"submit"===t.updateOn&&t._pendingChange&&(e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1)})),this.ngSubmit.emit(e),!1;var t}},{key:"onReset",value:function(){this.resetForm()}},{key:"resetForm",value:function(e){this.form.reset(e),this.submitted=!1}},{key:"_setUpdateStrategy",value:function(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}},{key:"_findContainer",value:function(e){return e.pop(),e.length?this.form.get(e):this.form}}]),n}(Dd)).\u0275fac=function(e){return new(e||Vh)(Za(Od,10),Za(Ed,10))},Vh.\u0275dir=St({type:Vh,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(e,t){1&e&&uo("submit",(function(e){return t.onSubmit(e)}))("reset",(function(){return t.onReset()}))},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Yo([Eh]),Ta]}),Vh),Rh={provide:Id,useExisting:Ee((function(){return Nh}))},jh=Promise.resolve(null),Nh=((Ah=function(e){l(n,e);var t=u(n);function n(e,i,r,a){var o;return p(this,n),(o=t.call(this)).control=new _h,o._registered=!1,o.update=new Ys,o._parent=e,o._rawValidators=i||[],o._rawAsyncValidators=r||[],o.valueAccessor=function(e,t){if(!t)return null;Array.isArray(t);var n=void 0,i=void 0,r=void 0;return t.forEach((function(e){var t;e.constructor===Ad?n=e:(t=e,gh.some((function(e){return t.constructor===e}))?i=e:r=e)})),r||i||n||null}(0,a),o}return m(n,[{key:"ngOnChanges",value:function(e){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in e&&this._updateDisabled(e),function(e,t){if(!e.hasOwnProperty("model"))return!1;var n=e.model;return!!n.isFirstChange()||!Object.is(t,n.currentValue)}(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}},{key:"ngOnDestroy",value:function(){this.formDirective&&this.formDirective.removeControl(this)}},{key:"path",get:function(){return this._parent?function(e,t){return[].concat(i(t.path),[e])}(this.name,this._parent):[this.name]}},{key:"formDirective",get:function(){return this._parent?this._parent.formDirective:null}},{key:"validator",get:function(){return fh(this._rawValidators)}},{key:"asyncValidator",get:function(){return ph(this._rawAsyncValidators)}},{key:"viewToModelUpdate",value:function(e){this.viewModel=e,this.update.emit(e)}},{key:"_setUpControl",value:function(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}},{key:"_setUpdateStrategy",value:function(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}},{key:"_isStandalone",value:function(){return!this._parent||!(!this.options||!this.options.standalone)}},{key:"_setUpStandalone",value:function(){hh(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}},{key:"_checkForErrors",value:function(){this._isStandalone()||this._checkParentType(),this._checkName()}},{key:"_checkParentType",value:function(){}},{key:"_checkName",value:function(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}},{key:"_updateValue",value:function(e){var t=this;jh.then((function(){t.control.setValue(e,{emitViewToModelChange:!1})}))}},{key:"_updateDisabled",value:function(e){var t=this,n=e.isDisabled.currentValue,i=""===n||n&&"false"!==n;jh.then((function(){i&&!t.control.disabled?t.control.disable():!i&&t.control.disabled&&t.control.enable()}))}}]),n}(Id)).\u0275fac=function(e){return new(e||Ah)(Za(Dd,9),Za(Od,10),Za(Ed,10),Za(yd,10))},Ah.\u0275dir=St({type:Ah,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Yo([Rh]),Ta,Qt]}),Ah),Fh=((wh=function e(){p(this,e)}).\u0275fac=function(e){return new(e||wh)},wh.\u0275dir=St({type:wh,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),wh),Bh={provide:Od,useExisting:Ee((function(){return Kh})),multi:!0},Hh={provide:Od,useExisting:Ee((function(){return qh})),multi:!0},Kh=((Dh=function(){function e(){p(this,e),this._required=!1}return m(e,[{key:"required",get:function(){return this._required},set:function(e){this._required=null!=e&&!1!==e&&""+e!="false",this._onChange&&this._onChange()}},{key:"validate",value:function(e){return this.required?Gd.required(e):null}},{key:"registerOnValidatorChange",value:function(e){this._onChange=e}}]),e}()).\u0275fac=function(e){return new(e||Dh)},Dh.\u0275dir=St({type:Dh,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(e,t){2&e&&za("required",t.required?"":null)},inputs:{required:"required"},features:[Yo([Bh])]}),Dh),qh=((Ph=function(e){l(n,e);var t=u(n);function n(){return p(this,n),t.apply(this,arguments)}return m(n,[{key:"validate",value:function(e){return this.required?Gd.requiredTrue(e):null}}]),n}(Kh)).\u0275fac=function(e){return zh(e||Ph)},Ph.\u0275dir=St({type:Ph,selectors:[["input","type","checkbox","required","","formControlName",""],["input","type","checkbox","required","","formControl",""],["input","type","checkbox","required","","ngModel",""]],hostVars:1,hostBindings:function(e,t){2&e&&za("required",t.required?"":null)},features:[Yo([Hh]),Ta]}),Ph),zh=bi(qh),Qh={provide:Od,useExisting:Ee((function(){return Wh})),multi:!0},Wh=((Mh=function(){function e(){p(this,e),this._validator=Gd.nullValidator}return m(e,[{key:"ngOnChanges",value:function(e){"minlength"in e&&(this._createValidator(),this._onChange&&this._onChange())}},{key:"validate",value:function(e){return null==this.minlength?null:this._validator(e)}},{key:"registerOnValidatorChange",value:function(e){this._onChange=e}},{key:"_createValidator",value:function(){this._validator=Gd.minLength("number"==typeof this.minlength?this.minlength:parseInt(this.minlength,10))}}]),e}()).\u0275fac=function(e){return new(e||Mh)},Mh.\u0275dir=St({type:Mh,selectors:[["","minlength","","formControlName",""],["","minlength","","formControl",""],["","minlength","","ngModel",""]],hostVars:1,hostBindings:function(e,t){2&e&&za("minlength",t.minlength?t.minlength:null)},inputs:{minlength:"minlength"},features:[Yo([Qh]),Qt]}),Mh),Jh={provide:Od,useExisting:Ee((function(){return Yh})),multi:!0},Yh=((Th=function(){function e(){p(this,e),this._validator=Gd.nullValidator}return m(e,[{key:"ngOnChanges",value:function(e){"pattern"in e&&(this._createValidator(),this._onChange&&this._onChange())}},{key:"validate",value:function(e){return this._validator(e)}},{key:"registerOnValidatorChange",value:function(e){this._onChange=e}},{key:"_createValidator",value:function(){this._validator=Gd.pattern(this.pattern)}}]),e}()).\u0275fac=function(e){return new(e||Th)},Th.\u0275dir=St({type:Th,selectors:[["","pattern","","formControlName",""],["","pattern","","formControl",""],["","pattern","","ngModel",""]],hostVars:1,hostBindings:function(e,t){2&e&&za("pattern",t.pattern?t.pattern:null)},inputs:{pattern:"pattern"},features:[Yo([Jh]),Qt]}),Th),$h=((Sh=function e(){p(this,e)}).\u0275mod=Mt({type:Sh}),Sh.\u0275inj=we({factory:function(e){return new(e||Sh)}}),Sh),Zh=((Ih=function e(){p(this,e)}).\u0275mod=Mt({type:Ih}),Ih.\u0275inj=we({factory:function(e){return new(e||Ih)},providers:[Yd],imports:[$h]}),Ih);function Xh(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=t[t.length-1];return F(i)?(t.pop(),Y(t,i)):ae(t)}function ev(e,t){return te(e,t,1)}function tv(e,t){return function(n){return n.lift(new nv(e,t))}}var nv=function(){function e(t,n){p(this,e),this.predicate=t,this.thisArg=n}return m(e,[{key:"call",value:function(e,t){return t.subscribe(new iv(e,this.predicate,this.thisArg))}}]),e}(),iv=function(e){l(n,e);var t=u(n);function n(e,i,r){var a;return p(this,n),(a=t.call(this,e)).predicate=i,a.thisArg=r,a.count=0,a}return m(n,[{key:"_next",value:function(e){var t;try{t=this.predicate.call(this.thisArg,e,this.count++)}catch(n){return void this.destination.error(n)}t&&this.destination.next(e)}}]),n}(I),rv=function e(){p(this,e)},av=function e(){p(this,e)},ov=function(){function e(t){var n=this;p(this,e),this.normalizedNames=new Map,this.lazyUpdate=null,t?this.lazyInit="string"==typeof t?function(){n.headers=new Map,t.split("\n").forEach((function(e){var t=e.indexOf(":");if(t>0){var i=e.slice(0,t),r=i.toLowerCase(),a=e.slice(t+1).trim();n.maybeSetNormalizedName(i,r),n.headers.has(r)?n.headers.get(r).push(a):n.headers.set(r,[a])}}))}:function(){n.headers=new Map,Object.keys(t).forEach((function(e){var i=t[e],r=e.toLowerCase();"string"==typeof i&&(i=[i]),i.length>0&&(n.headers.set(r,i),n.maybeSetNormalizedName(e,r))}))}:this.headers=new Map}return m(e,[{key:"has",value:function(e){return this.init(),this.headers.has(e.toLowerCase())}},{key:"get",value:function(e){this.init();var t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}},{key:"keys",value:function(){return this.init(),Array.from(this.normalizedNames.values())}},{key:"getAll",value:function(e){return this.init(),this.headers.get(e.toLowerCase())||null}},{key:"append",value:function(e,t){return this.clone({name:e,value:t,op:"a"})}},{key:"set",value:function(e,t){return this.clone({name:e,value:t,op:"s"})}},{key:"delete",value:function(e,t){return this.clone({name:e,value:t,op:"d"})}},{key:"maybeSetNormalizedName",value:function(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}},{key:"init",value:function(){var t=this;this.lazyInit&&(this.lazyInit instanceof e?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach((function(e){return t.applyUpdate(e)})),this.lazyUpdate=null))}},{key:"copyFrom",value:function(e){var t=this;e.init(),Array.from(e.headers.keys()).forEach((function(n){t.headers.set(n,e.headers.get(n)),t.normalizedNames.set(n,e.normalizedNames.get(n))}))}},{key:"clone",value:function(t){var n=new e;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof e?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([t]),n}},{key:"applyUpdate",value:function(e){var t=e.name.toLowerCase();switch(e.op){case"a":case"s":var n=e.value;if("string"==typeof n&&(n=[n]),0===n.length)return;this.maybeSetNormalizedName(e.name,t);var r=("a"===e.op?this.headers.get(t):void 0)||[];r.push.apply(r,i(n)),this.headers.set(t,r);break;case"d":var a=e.value;if(a){var o=this.headers.get(t);if(!o)return;0===(o=o.filter((function(e){return-1===a.indexOf(e)}))).length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,o)}else this.headers.delete(t),this.normalizedNames.delete(t)}}},{key:"forEach",value:function(e){var t=this;this.init(),Array.from(this.normalizedNames.keys()).forEach((function(n){return e(t.normalizedNames.get(n),t.headers.get(n))}))}}]),e}(),sv=function(){function e(){p(this,e)}return m(e,[{key:"encodeKey",value:function(e){return lv(e)}},{key:"encodeValue",value:function(e){return lv(e)}},{key:"decodeKey",value:function(e){return decodeURIComponent(e)}},{key:"decodeValue",value:function(e){return decodeURIComponent(e)}}]),e}();function lv(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/gi,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%2B/gi,"+").replace(/%3D/gi,"=").replace(/%3F/gi,"?").replace(/%2F/gi,"/")}var cv=function(){function e(){var n=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(p(this,e),this.updates=null,this.cloneFrom=null,this.encoder=i.encoder||new sv,i.fromString){if(i.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function(e,n){var i=new Map;return e.length>0&&e.split("&").forEach((function(e){var r=e.indexOf("="),a=t(-1==r?[n.decodeKey(e),""]:[n.decodeKey(e.slice(0,r)),n.decodeValue(e.slice(r+1))],2),o=a[0],s=a[1],l=i.get(o)||[];l.push(s),i.set(o,l)})),i}(i.fromString,this.encoder)}else i.fromObject?(this.map=new Map,Object.keys(i.fromObject).forEach((function(e){var t=i.fromObject[e];n.map.set(e,Array.isArray(t)?t:[t])}))):this.map=null}return m(e,[{key:"has",value:function(e){return this.init(),this.map.has(e)}},{key:"get",value:function(e){this.init();var t=this.map.get(e);return t?t[0]:null}},{key:"getAll",value:function(e){return this.init(),this.map.get(e)||null}},{key:"keys",value:function(){return this.init(),Array.from(this.map.keys())}},{key:"append",value:function(e,t){return this.clone({param:e,value:t,op:"a"})}},{key:"set",value:function(e,t){return this.clone({param:e,value:t,op:"s"})}},{key:"delete",value:function(e,t){return this.clone({param:e,value:t,op:"d"})}},{key:"toString",value:function(){var e=this;return this.init(),this.keys().map((function(t){var n=e.encoder.encodeKey(t);return e.map.get(t).map((function(t){return n+"="+e.encoder.encodeValue(t)})).join("&")})).filter((function(e){return""!==e})).join("&")}},{key:"clone",value:function(t){var n=new e({encoder:this.encoder});return n.cloneFrom=this.cloneFrom||this,n.updates=(this.updates||[]).concat([t]),n}},{key:"init",value:function(){var e=this;null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach((function(t){return e.map.set(t,e.cloneFrom.map.get(t))})),this.updates.forEach((function(t){switch(t.op){case"a":case"s":var n=("a"===t.op?e.map.get(t.param):void 0)||[];n.push(t.value),e.map.set(t.param,n);break;case"d":if(void 0===t.value){e.map.delete(t.param);break}var i=e.map.get(t.param)||[],r=i.indexOf(t.value);-1!==r&&i.splice(r,1),i.length>0?e.map.set(t.param,i):e.map.delete(t.param)}})),this.cloneFrom=this.updates=null)}}]),e}();function uv(e){return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer}function dv(e){return"undefined"!=typeof Blob&&e instanceof Blob}function hv(e){return"undefined"!=typeof FormData&&e instanceof FormData}var vv=function(){function e(t,n,i,r){var a;if(p(this,e),this.url=n,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase(),function(e){switch(e){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==i?i:null,a=r):a=i,a&&(this.reportProgress=!!a.reportProgress,this.withCredentials=!!a.withCredentials,a.responseType&&(this.responseType=a.responseType),a.headers&&(this.headers=a.headers),a.params&&(this.params=a.params)),this.headers||(this.headers=new ov),this.params){var o=this.params.toString();if(0===o.length)this.urlWithParams=n;else{var s=n.indexOf("?");this.urlWithParams=n+(-1===s?"?":s<n.length-1?"&":"")+o}}else this.params=new cv,this.urlWithParams=n}return m(e,[{key:"serializeBody",value:function(){return null===this.body?null:uv(this.body)||dv(this.body)||hv(this.body)||"string"==typeof this.body?this.body:this.body instanceof cv?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}},{key:"detectContentTypeHeader",value:function(){return null===this.body||hv(this.body)?null:dv(this.body)?this.body.type||null:uv(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof cv?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||Array.isArray(this.body)?"application/json":null}},{key:"clone",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.method||this.method,i=t.url||this.url,r=t.responseType||this.responseType,a=void 0!==t.body?t.body:this.body,o=void 0!==t.withCredentials?t.withCredentials:this.withCredentials,s=void 0!==t.reportProgress?t.reportProgress:this.reportProgress,l=t.headers||this.headers,c=t.params||this.params;return void 0!==t.setHeaders&&(l=Object.keys(t.setHeaders).reduce((function(e,n){return e.set(n,t.setHeaders[n])}),l)),t.setParams&&(c=Object.keys(t.setParams).reduce((function(e,n){return e.set(n,t.setParams[n])}),c)),new e(n,i,a,{params:c,headers:l,reportProgress:s,responseType:r,withCredentials:o})}}]),e}(),fv=function(e){return e[e.Sent=0]="Sent",e[e.UploadProgress=1]="UploadProgress",e[e.ResponseHeader=2]="ResponseHeader",e[e.DownloadProgress=3]="DownloadProgress",e[e.Response=4]="Response",e[e.User=5]="User",e}({}),pv=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:200,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"OK";p(this,e),this.headers=t.headers||new ov,this.status=void 0!==t.status?t.status:n,this.statusText=t.statusText||i,this.url=t.url||null,this.ok=this.status>=200&&this.status<300},gv=function(e){l(n,e);var t=u(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return p(this,n),(e=t.call(this,i)).type=fv.ResponseHeader,e}return m(n,[{key:"clone",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new n({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}]),n}(pv),mv=function(e){l(n,e);var t=u(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return p(this,n),(e=t.call(this,i)).type=fv.Response,e.body=void 0!==i.body?i.body:null,e}return m(n,[{key:"clone",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new n({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}]),n}(pv),bv=function(e){l(n,e);var t=u(n);function n(e){var i;return p(this,n),(i=t.call(this,e,0,"Unknown Error")).name="HttpErrorResponse",i.ok=!1,i.message=i.status>=200&&i.status<300?"Http failure during parsing for "+(e.url||"(unknown url)"):"Http failure response for ".concat(e.url||"(unknown url)",": ").concat(e.status," ").concat(e.statusText),i.error=e.error||null,i}return n}(pv);function yv(e,t){return{body:t,headers:e.headers,observe:e.observe,params:e.params,reportProgress:e.reportProgress,responseType:e.responseType,withCredentials:e.withCredentials}}var kv,Cv,Vv,wv,Av,Pv,Dv,Mv,Iv,Sv=((kv=function(){function e(t){p(this,e),this.handler=t}return m(e,[{key:"request",value:function(e,t){var n,i=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e instanceof vv)n=e;else{var a=void 0;a=r.headers instanceof ov?r.headers:new ov(r.headers);var o=void 0;r.params&&(o=r.params instanceof cv?r.params:new cv({fromObject:r.params})),n=new vv(e,t,void 0!==r.body?r.body:null,{headers:a,params:o,reportProgress:r.reportProgress,responseType:r.responseType||"json",withCredentials:r.withCredentials})}var s=Xh(n).pipe(ev((function(e){return i.handler.handle(e)})));if(e instanceof vv||"events"===r.observe)return s;var l=s.pipe(tv((function(e){return e instanceof mv})));switch(r.observe||"body"){case"body":switch(n.responseType){case"arraybuffer":return l.pipe(B((function(e){if(null!==e.body&&!(e.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return e.body})));case"blob":return l.pipe(B((function(e){if(null!==e.body&&!(e.body instanceof Blob))throw new Error("Response is not a Blob.");return e.body})));case"text":return l.pipe(B((function(e){if(null!==e.body&&"string"!=typeof e.body)throw new Error("Response is not a string.");return e.body})));case"json":default:return l.pipe(B((function(e){return e.body})))}case"response":return l;default:throw new Error("Unreachable: unhandled observe type ".concat(r.observe,"}"))}}},{key:"delete",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.request("DELETE",e,t)}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.request("GET",e,t)}},{key:"head",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.request("HEAD",e,t)}},{key:"jsonp",value:function(e,t){return this.request("JSONP",e,{params:(new cv).append(t,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}},{key:"options",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.request("OPTIONS",e,t)}},{key:"patch",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.request("PATCH",e,yv(n,t))}},{key:"post",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.request("POST",e,yv(n,t))}},{key:"put",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.request("PUT",e,yv(n,t))}}]),e}()).\u0275fac=function(e){return new(e||kv)(ot(rv))},kv.\u0275prov=Ve({token:kv,factory:kv.\u0275fac}),kv),Tv=function(){function e(t,n){p(this,e),this.next=t,this.interceptor=n}return m(e,[{key:"handle",value:function(e){return this.interceptor.intercept(e,this.next)}}]),e}(),xv=new $e("HTTP_INTERCEPTORS"),_v=((Cv=function(){function e(){p(this,e)}return m(e,[{key:"intercept",value:function(e,t){return t.handle(e)}}]),e}()).\u0275fac=function(e){return new(e||Cv)},Cv.\u0275prov=Ve({token:Cv,factory:Cv.\u0275fac}),Cv),Uv=/^\)\]\}',?\n/,Ov=function e(){p(this,e)},Ev=((wv=function(){function e(){p(this,e)}return m(e,[{key:"build",value:function(){return new XMLHttpRequest}}]),e}()).\u0275fac=function(e){return new(e||wv)},wv.\u0275prov=Ve({token:wv,factory:wv.\u0275fac}),wv),Lv=((Vv=function(){function e(t){p(this,e),this.xhrFactory=t}return m(e,[{key:"handle",value:function(e){var t=this;if("JSONP"===e.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new U((function(n){var i=t.xhrFactory.build();if(i.open(e.method,e.urlWithParams),e.withCredentials&&(i.withCredentials=!0),e.headers.forEach((function(e,t){return i.setRequestHeader(e,t.join(","))})),e.headers.has("Accept")||i.setRequestHeader("Accept","application/json, text/plain, */*"),!e.headers.has("Content-Type")){var r=e.detectContentTypeHeader();null!==r&&i.setRequestHeader("Content-Type",r)}if(e.responseType){var a=e.responseType.toLowerCase();i.responseType="json"!==a?a:"text"}var o=e.serializeBody(),s=null,l=function(){if(null!==s)return s;var t=1223===i.status?204:i.status,n=i.statusText||"OK",r=new ov(i.getAllResponseHeaders()),a=function(e){return"responseURL"in e&&e.responseURL?e.responseURL:/^X-Request-URL:/m.test(e.getAllResponseHeaders())?e.getResponseHeader("X-Request-URL"):null}(i)||e.url;return s=new gv({headers:r,status:t,statusText:n,url:a})},c=function(){var t=l(),r=t.headers,a=t.status,o=t.statusText,s=t.url,c=null;204!==a&&(c=void 0===i.response?i.responseText:i.response),0===a&&(a=c?200:0);var u=a>=200&&a<300;if("json"===e.responseType&&"string"==typeof c){var d=c;c=c.replace(Uv,"");try{c=""!==c?JSON.parse(c):null}catch(h){c=d,u&&(u=!1,c={error:h,text:c})}}u?(n.next(new mv({body:c,headers:r,status:a,statusText:o,url:s||void 0})),n.complete()):n.error(new bv({error:c,headers:r,status:a,statusText:o,url:s||void 0}))},u=function(e){var t=l().url,r=new bv({error:e,status:i.status||0,statusText:i.statusText||"Unknown Error",url:t||void 0});n.error(r)},d=!1,h=function(t){d||(n.next(l()),d=!0);var r={type:fv.DownloadProgress,loaded:t.loaded};t.lengthComputable&&(r.total=t.total),"text"===e.responseType&&i.responseText&&(r.partialText=i.responseText),n.next(r)},v=function(e){var t={type:fv.UploadProgress,loaded:e.loaded};e.lengthComputable&&(t.total=e.total),n.next(t)};return i.addEventListener("load",c),i.addEventListener("error",u),e.reportProgress&&(i.addEventListener("progress",h),null!==o&&i.upload&&i.upload.addEventListener("progress",v)),i.send(o),n.next({type:fv.Sent}),function(){i.removeEventListener("error",u),i.removeEventListener("load",c),e.reportProgress&&(i.removeEventListener("progress",h),null!==o&&i.upload&&i.upload.removeEventListener("progress",v)),i.readyState!==i.DONE&&i.abort()}}))}}]),e}()).\u0275fac=function(e){return new(e||Vv)(ot(Ov))},Vv.\u0275prov=Ve({token:Vv,factory:Vv.\u0275fac}),Vv),Gv=new $e("XSRF_COOKIE_NAME"),Rv=new $e("XSRF_HEADER_NAME"),jv=function e(){p(this,e)},Nv=((Iv=function(){function e(t,n,i){p(this,e),this.doc=t,this.platform=n,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}return m(e,[{key:"getToken",value:function(){if("server"===this.platform)return null;var e=this.doc.cookie||"";return e!==this.lastCookieString&&(this.parseCount++,this.lastToken=Xc(e,this.cookieName),this.lastCookieString=e),this.lastToken}}]),e}()).\u0275fac=function(e){return new(e||Iv)(ot($l),ot(rl),ot(Gv))},Iv.\u0275prov=Ve({token:Iv,factory:Iv.\u0275fac}),Iv),Fv=((Mv=function(){function e(t,n){p(this,e),this.tokenService=t,this.headerName=n}return m(e,[{key:"intercept",value:function(e,t){var n=e.url.toLowerCase();if("GET"===e.method||"HEAD"===e.method||n.startsWith("http://")||n.startsWith("https://"))return t.handle(e);var i=this.tokenService.getToken();return null===i||e.headers.has(this.headerName)||(e=e.clone({headers:e.headers.set(this.headerName,i)})),t.handle(e)}}]),e}()).\u0275fac=function(e){return new(e||Mv)(ot(jv),ot(Rv))},Mv.\u0275prov=Ve({token:Mv,factory:Mv.\u0275fac}),Mv),Bv=((Dv=function(){function e(t,n){p(this,e),this.backend=t,this.injector=n,this.chain=null}return m(e,[{key:"handle",value:function(e){if(null===this.chain){var t=this.injector.get(xv,[]);this.chain=t.reduceRight((function(e,t){return new Tv(e,t)}),this.backend)}return this.chain.handle(e)}}]),e}()).\u0275fac=function(e){return new(e||Dv)(ot(av),ot(Da))},Dv.\u0275prov=Ve({token:Dv,factory:Dv.\u0275fac}),Dv),Hv=((Pv=function(){function e(){p(this,e)}return m(e,null,[{key:"disable",value:function(){return{ngModule:e,providers:[{provide:Fv,useClass:_v}]}}},{key:"withOptions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{ngModule:e,providers:[t.cookieName?{provide:Gv,useValue:t.cookieName}:[],t.headerName?{provide:Rv,useValue:t.headerName}:[]]}}}]),e}()).\u0275mod=Mt({type:Pv}),Pv.\u0275inj=we({factory:function(e){return new(e||Pv)},providers:[Fv,{provide:xv,useExisting:Fv,multi:!0},{provide:jv,useClass:Nv},{provide:Gv,useValue:"XSRF-TOKEN"},{provide:Rv,useValue:"X-XSRF-TOKEN"}]}),Pv),Kv=((Av=function e(){p(this,e)}).\u0275mod=Mt({type:Av}),Av.\u0275inj=we({factory:function(e){return new(e||Av)},providers:[Sv,{provide:rv,useClass:Bv},Lv,{provide:av,useExisting:Lv},Ev,{provide:Ov,useExisting:Ev}],imports:[[Hv.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),Av);function qv(e,t){return(e=e||"").localeCompare(t=t||"")}function zv(e,t){var n=0;return void 0===e&&(e=new Date(-864e13)),void 0===t&&(t=new Date(-864e13)),e<t?n=-1:e>t&&(n=1),n}function Qv(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"en";return e.toLocaleDateString(n,"longDate"==t?{year:"numeric",month:"2-digit",day:"2-digit"}:"fullDate"==t?{year:"2-digit",month:"2-digit",day:"2-digit"}:"shortDate"==t?{year:"numeric",month:"short"}:"fullMonthYear"==t?{year:"numeric",month:"long"}:{year:"2-digit",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})}function Wv(e,t){if(t||e){var n=e?new Date(e):new Date;return n?n.toISOString():void 0}}function Jv(e){var t=new Date;return t.setHours(0,0,0,0),!!(e&&e.getTime()>=t.getTime())}function Yv(e,t){if(!e||!t)return!1;var n=new Date(e),i=new Date(t);return n.setHours(0,0,0,0),i.setHours(0,0,0,0),n.toISOString()===i.toISOString()}function $v(e,t,n){return e?e.length<t?e:t<3?"...":n?"...".concat(e.substr(e.length-t)):e.substring(0,t-3).concat("..."):""}function Zv(e){var t="Unknown Error";return e&&(0===e.status?(t=(t="Server not reachable with ").concat(e.url||""),console.log("Rest Server not reachable: ".concat(e.status," ").concat(e.statusText,", Message ").concat(e.message))):(console.log("Rest Error Status: ".concat(e.status," ").concat(e.statusText,", Message ").concat(e.message,", Name: ").concat(e.error.name||"")),e.error&&e.error.message?t=e.error.message:e.message?t=e.message:e.statusText&&(t=e.statusText))),t}function Xv(){return"1"===localStorage.getItem("printPreView")}var ef,tf=((ef=function(){function e(){p(this,e),this.messages=[],this.activateMessages=void 0,this.activateMessageToggle=new Ys(!0)}return m(e,[{key:"initstatus",value:function(){void 0===this.activateMessages&&(this.activateMessages="On"===localStorage.getItem("activateMessages"))}},{key:"toggle",value:function(){return this.initstatus(),this.activateMessages=!this.activateMessages,localStorage.setItem("activateMessages",this.activateMessages?"On":"Off"),this.activateMessageToggle.emit(this.activateMessages),console.log("Messages Toggle to %s",this.activateMessages),this.activateMessages}},{key:"getstatus",value:function(){return this.initstatus(),this.activateMessages}},{key:"add",value:function(e){this.messages.push(e),this.messages.length>20&&this.messages.shift()}},{key:"clear",value:function(){this.messages=[]}}]),e}()).\u0275fac=function(e){return new(e||ef)},ef.\u0275prov=Ve({token:ef,factory:ef.\u0275fac}),ef);function nf(e,t){return new U(t?function(n){return t.schedule(rf,0,{error:e,subscriber:n})}:function(t){return t.error(e)})}function rf(e){var t=e.error;e.subscriber.error(t)}function af(e){return function(t){var n=new of(e),i=t.lift(n);return n.caught=i}}var of=function(){function e(t){p(this,e),this.selector=t}return m(e,[{key:"call",value:function(e,t){return t.subscribe(new sf(e,this.selector,this.caught))}}]),e}(),sf=function(e){l(n,e);var t=u(n);function n(e,i,r){var a;return p(this,n),(a=t.call(this,e)).selector=i,a.caught=r,a}return m(n,[{key:"error",value:function(e){if(!this.isStopped){var t;try{t=this.selector(e,this.caught)}catch(a){return void s(f(n.prototype),"error",this).call(this,a)}this._unsubscribeAndRecycle();var i=new Z(this);this.add(i);var r=ee(t,i);r!==i&&this.add(r)}}}]),n}(X);function lf(){}function cf(e,t,n){return function(i){return i.lift(new uf(e,t,n))}}var uf=function(){function e(t,n,i){p(this,e),this.nextOrObserver=t,this.error=n,this.complete=i}return m(e,[{key:"call",value:function(e,t){return t.subscribe(new df(e,this.nextOrObserver,this.error,this.complete))}}]),e}(),df=function(e){l(n,e);var t=u(n);function n(e,i,r,a){var o;return p(this,n),(o=t.call(this,e))._tapNext=lf,o._tapError=lf,o._tapComplete=lf,o._tapError=r||lf,o._tapComplete=a||lf,v(i)?(o._context=h(o),o._tapNext=i):i&&(o._context=i,o._tapNext=i.next||lf,o._tapError=i.error||lf,o._tapComplete=i.complete||lf),o}return m(n,[{key:"_next",value:function(e){try{this._tapNext.call(this._context,e)}catch(t){return void this.destination.error(t)}this.destination.next(e)}},{key:"_error",value:function(e){try{this._tapError.call(this._context,e)}catch(e){return void this.destination.error(e)}this.destination.error(e)}},{key:"_complete",value:function(){try{this._tapComplete.call(this._context)}catch(e){return void this.destination.error(e)}return this.destination.complete()}}]),n}(I),hf=function e(){p(this,e)},vf=function e(){p(this,e)},ff=function e(){p(this,e)},pf=function e(){p(this,e)},gf=function e(){p(this,e)};function mf(e){this.message=e}(mf.prototype=new Error).name="InvalidCharacterError";var bf="undefined"!=typeof window&&window.atob&&window.atob.bind(window)||function(e){var t=String(e).replace(/=+$/,"");if(t.length%4==1)throw new mf("'atob' failed: The string to be decoded is not correctly encoded.");for(var n,i,r=0,a=0,o="";i=t.charAt(a++);~i&&(n=r%4?64*n+i:i,r++%4)?o+=String.fromCharCode(255&n>>(-2*r&6)):0)i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(i);return o};function yf(e){this.message=e}(yf.prototype=new Error).name="InvalidTokenError";var kf,Cf=function(e,t){if("string"!=typeof e)throw new yf("Invalid token specified");var n=!0===(t=t||{}).header?0:1;try{return JSON.parse(function(e){var t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}try{return function(e){return decodeURIComponent(bf(e).replace(/(.)/g,(function(e,t){var n=t.charCodeAt(0).toString(16).toUpperCase();return n.length<2&&(n="0"+n),"%"+n})))}(t)}catch(e){return bf(t)}}(e.split(".")[n]))}catch(e){throw new yf("Invalid token specified: "+e.message)}},Vf=function e(){p(this,e),this.restUrl="https://dev.visbo.net/api"},wf={headers:new ov({"Content-Type":"application/json"})},Af=((kf=function(){function e(t,n,i){p(this,e),this.http=t,this.messageService=n,this.env=i,this.isLoggedIn=!1,this.authUrl=this.env.restUrl.concat("/token/user")}return m(e,[{key:"logoutCheck",value:function(){if(this.isLoggedIn)return this.logoutTime}},{key:"login",value:function(e,t){var n=this,i=this.authUrl+"/login";this.log("Calling HTTP Request: ".concat(i," for: ").concat(e));var r=new hf;return r.email=e,r.password=t,this.http.post(i,r).pipe(B((function(e){if(e&&e.token){n.log("Login Request Successful:  "+e.user.email),localStorage.setItem("currentUser",JSON.stringify(e.user)),localStorage.setItem("currentToken",JSON.stringify(e.token)),n.isLoggedIn=!0;var t=Cf(e.token);return t&&t.exp&&(n.logoutTime=new Date(1e3*t.exp)),n.log("Login Request logoutTime:  "+n.logoutTime),e.user}return null})),af(this.handleError("LoginError")))}},{key:"loginGoogleUrl",value:function(){return this.authUrl+"/logingoogle"}},{key:"loginGoogle",value:function(){var e=this,t=this.authUrl+"/logingoogle";return this.log("Calling HTTP Request: "+t),this.http.post(t,{}).pipe(B((function(t){if(console.log("google Login :  "+JSON.stringify(t)),t&&t.token){e.log("Login Request Successful:  "+t.user.email),localStorage.setItem("currentUser",JSON.stringify(t.user)),localStorage.setItem("currentToken",JSON.stringify(t.token)),e.isLoggedIn=!0;var n=Cf(t.token);return n&&n.exp&&(e.logoutTime=new Date(1e3*n.exp)),e.log("Login Request logoutTime:  "+e.logoutTime),t.user}return null})),af(this.handleError("LoginError")))}},{key:"oauthconfirm",value:function(e){localStorage.setItem("currentUser",JSON.stringify({profile:{company:"Privat",firstName:"Markus (G)",lastName:"Seyfried"},status:{registeredAt:"2020-11-10T16:20:32.620Z",lastLoginAt:"2020-11-10T18:10:31.694Z",loginRetries:0},_id:"5b60762decb6077f42ba27d2",email:"markus.seyfried@gmail.com",createdAt:"2018-07-31T14:46:05.138Z",updatedAt:"2020-11-10T18:22:39.469Z",__v:3,userAgents:[]})),localStorage.setItem("currentToken",JSON.stringify(e))}},{key:"logout",value:function(){this.isLoggedIn=!1,localStorage.clear()}},{key:"getActiveUser",value:function(){return JSON.parse(localStorage.getItem("currentUser"))}},{key:"pwforgotten",value:function(e){var t=this,n=this.authUrl+"/pwforgotten",i=new gf;return i.email=e.email,this.log("Calling HTTP Request: ".concat(n," for: ").concat(i.email," ")),this.http.post(n,i).pipe(B((function(e){return t.log("PW Forgotten Request executed"),e&&t.log("PW Forgotten Request Successful:  "+JSON.stringify(e)),e})),af(this.handleError("pwforgotten")))}},{key:"pwreset",value:function(e,t){var n=this,i=this.authUrl+"/pwreset",r={token:t,password:e.password};return this.log("Calling HTTP Request: ".concat(i," with: ").concat(t," ")),this.http.post(i,r).pipe(B((function(e){return n.log("PW Reset Request executed"),n.log(e?"PW Reset Request Successful:  "+JSON.stringify(e):"PW Reset Request Unsuccessful:  "+JSON.stringify(e)),e})),af(this.handleError("pwreset")))}},{key:"registerconfirm",value:function(e,t){var n=this,i=this.authUrl+"/confirm",r={_id:e,hash:t};return this.log("Calling HTTP Request: ".concat(i," for: ").concat(e," ")),this.http.post(i,r).pipe(B((function(e){return n.log("e-mail confirm Request executed"),e&&n.log("e-mail confirm Request Successful:  "+JSON.stringify(e)),e})),af(this.handleError("pwreset")))}},{key:"getUser",value:function(e,t){var n=this.authUrl+"/signup",i=new ov({"Content-Type":"application/json"}),r=new cv;return e&&(r=r.append("id",e)),t&&(r=r.append("hash",t)),this.log("Calling HTTP Request: ".concat(n," for: ").concat(e," hash ").concat(t)),this.http.get(n,{headers:i,params:r}).pipe(B((function(e){return e.user})),af(this.handleError("get registerUser")))}},{key:"createUser",value:function(e,t){var n=this,i=this.authUrl+"/signup",r=new ov({"Content-Type":"application/json"}),a=new cv;return t&&(a=a.append("hash",t)),this.log("Calling HTTP Request: ".concat(i," for: ").concat(e.email||e._id," hash ").concat(t," Profile: ").concat(JSON.stringify(e.profile))),this.http.post(i,e,{headers:r,params:a}).pipe(B((function(e){return n.log("Registration Request executed:  "+JSON.stringify(e)),e.user?(n.log("Registration Request Successful:  "+e.user.email),e.user):new gf})),af(this.handleError("registerUser")))}},{key:"restVersion",value:function(){var e=this,t=this.env.restUrl.concat("/status");return this.log("Calling HTTP Request: "+t),this.http.get(t,wf).pipe(B((function(e){return e.status})),cf((function(){return e.log("fetched Status  ")})),af(this.handleError("restVersion")))}},{key:"initPWPolicy",value:function(){var e=this,t=this.env.restUrl.concat("/status/pwpolicy");return this.log("Calling HTTP Request: "+t),this.http.get(t,wf).pipe(B((function(t){var n;return e.pwPolicy=null===(n=t.value)||void 0===n?void 0:n.PWPolicy,t.value})),cf((function(t){return e.log("fetched PW Policy "+JSON.stringify(t))})),af(this.handleError("initPWPolicy")))}},{key:"getSetting",value:function(){var e=this,t=this.env.restUrl.concat("/status/setting");return this.log("Calling HTTP Request: "+t),this.http.get(t,wf).pipe(B((function(e){return e.vcsetting})),cf((function(t){return e.log("fetched Setting "+JSON.stringify(t))})),af(this.handleError("initSetting")))}},{key:"getPWPolicy",value:function(){return this.pwPolicy}},{key:"handleError",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"operation",n=arguments.length>1?arguments[1]:void 0;return function(i){return e.log("".concat(t," failed: ").concat(JSON.stringify(i)," Status: ").concat(i.status,", StatusText: ").concat(i.statusText,", Message: ").concat(i.message,", Result ").concat(JSON.stringify(n)," ")),nf(i)}}},{key:"log",value:function(e){this.messageService.add("AuthenticationService: "+e)}}]),e}()).\u0275fac=function(e){return new(e||kf)(ot(Sv),ot(tf),ot(Vf))},kf.\u0275prov=Ve({token:kf,factory:kf.\u0275fac}),kf),Pf=function(e){l(n,e);var t=u(n);function n(e){var i;return p(this,n),(i=t.call(this))._value=e,i}return m(n,[{key:"value",get:function(){return this.getValue()}},{key:"_subscribe",value:function(e){var t=s(f(n.prototype),"_subscribe",this).call(this,e);return t&&!t.closed&&e.next(this._value),t}},{key:"getValue",value:function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new L;return this._value}},{key:"next",value:function(e){s(f(n.prototype),"next",this).call(this,this._value=e)}}]),n}(j),Df=function(e){l(n,e);var t=u(n);function n(){return p(this,n),t.apply(this,arguments)}return m(n,[{key:"notifyNext",value:function(e,t,n,i,r){this.destination.next(t)}},{key:"notifyError",value:function(e,t){this.destination.error(e)}},{key:"notifyComplete",value:function(e){this.destination.complete()}}]),n}(I),Mf=function(e){l(n,e);var t=u(n);function n(e,i,r){var a;return p(this,n),(a=t.call(this)).parent=e,a.outerValue=i,a.outerIndex=r,a.index=0,a}return m(n,[{key:"_next",value:function(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)}},{key:"_error",value:function(e){this.parent.notifyError(e,this),this.unsubscribe()}},{key:"_complete",value:function(){this.parent.notifyComplete(this),this.unsubscribe()}}]),n}(I);function If(e,t,n,i){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:new Mf(e,n,i);if(!r.closed)return t instanceof U?t.subscribe(r):J(t)(r)}var Sf={},Tf=function(){function e(t){p(this,e),this.resultSelector=t}return m(e,[{key:"call",value:function(e,t){return t.subscribe(new xf(e,this.resultSelector))}}]),e}(),xf=function(e){l(n,e);var t=u(n);function n(e,i){var r;return p(this,n),(r=t.call(this,e)).resultSelector=i,r.active=0,r.values=[],r.observables=[],r}return m(n,[{key:"_next",value:function(e){this.values.push(Sf),this.observables.push(e)}},{key:"_complete",value:function(){var e=this.observables,t=e.length;if(0===t)this.destination.complete();else{this.active=t,this.toRespond=t;for(var n=0;n<t;n++)this.add(If(this,e[n],void 0,n))}}},{key:"notifyComplete",value:function(e){0==(this.active-=1)&&this.destination.complete()}},{key:"notifyNext",value:function(e,t,n){var i=this.values,r=this.toRespond?i[n]===Sf?--this.toRespond:this.toRespond:0;i[n]=t,0===r&&(this.resultSelector?this._tryResultSelector(i):this.destination.next(i.slice()))}},{key:"_tryResultSelector",value:function(e){var t;try{t=this.resultSelector.apply(this,e)}catch(n){return void this.destination.error(n)}this.destination.next(t)}}]),n}(Df),_f=function(){function e(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return e.prototype=Object.create(Error.prototype),e}(),Uf=new U((function(e){return e.complete()}));function Of(e){return e?function(e){return new U((function(t){return e.schedule((function(){return t.complete()}))}))}(e):Uf}function Ef(e){return new U((function(t){var n;try{n=e()}catch(i){return void t.error(i)}return(n?$(n):Of()).subscribe(t)}))}function Lf(){return re(1)}var Gf=function(){function e(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return e.prototype=Object.create(Error.prototype),e}();function Rf(e){return function(t){return 0===e?Of():t.lift(new jf(e))}}var jf=function(){function e(t){if(p(this,e),this.total=t,this.total<0)throw new Gf}return m(e,[{key:"call",value:function(e,t){return t.subscribe(new Nf(e,this.total))}}]),e}(),Nf=function(e){l(n,e);var t=u(n);function n(e,i){var r;return p(this,n),(r=t.call(this,e)).total=i,r.ring=new Array,r.count=0,r}return m(n,[{key:"_next",value:function(e){var t=this.ring,n=this.total,i=this.count++;t.length<n?t.push(e):t[i%n]=e}},{key:"_complete",value:function(){var e=this.destination,t=this.count;if(t>0)for(var n=this.count>=this.total?this.total:this.count,i=this.ring,r=0;r<n;r++){var a=t++%n;e.next(i[a])}e.complete()}}]),n}(I);function Ff(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Kf;return function(t){return t.lift(new Bf(e))}}var Bf=function(){function e(t){p(this,e),this.errorFactory=t}return m(e,[{key:"call",value:function(e,t){return t.subscribe(new Hf(e,this.errorFactory))}}]),e}(),Hf=function(e){l(n,e);var t=u(n);function n(e,i){var r;return p(this,n),(r=t.call(this,e)).errorFactory=i,r.hasValue=!1,r}return m(n,[{key:"_next",value:function(e){this.hasValue=!0,this.destination.next(e)}},{key:"_complete",value:function(){if(this.hasValue)return this.destination.complete();var e;try{e=this.errorFactory()}catch(t){e=t}this.destination.error(e)}}]),n}(I);function Kf(){return new _f}function qf(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return function(t){return t.lift(new zf(e))}}var zf=function(){function e(t){p(this,e),this.defaultValue=t}return m(e,[{key:"call",value:function(e,t){return t.subscribe(new Qf(e,this.defaultValue))}}]),e}(),Qf=function(e){l(n,e);var t=u(n);function n(e,i){var r;return p(this,n),(r=t.call(this,e)).defaultValue=i,r.isEmpty=!0,r}return m(n,[{key:"_next",value:function(e){this.isEmpty=!1,this.destination.next(e)}},{key:"_complete",value:function(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}]),n}(I);function Wf(e,t){return"function"==typeof t?function(n){return n.pipe(Wf((function(n,i){return $(e(n,i)).pipe(B((function(e,r){return t(n,e,i,r)})))})))}:function(t){return t.lift(new Jf(e))}}var Jf=function(){function e(t){p(this,e),this.project=t}return m(e,[{key:"call",value:function(e,t){return t.subscribe(new Yf(e,this.project))}}]),e}(),Yf=function(e){l(n,e);var t=u(n);function n(e,i){var r;return p(this,n),(r=t.call(this,e)).project=i,r.index=0,r}return m(n,[{key:"_next",value:function(e){var t,n=this.index++;try{t=this.project(e,n)}catch(i){return void this.destination.error(i)}this._innerSub(t)}},{key:"_innerSub",value:function(e){var t=this.innerSubscription;t&&t.unsubscribe();var n=new Z(this),i=this.destination;i.add(n),this.innerSubscription=ee(e,n),this.innerSubscription!==n&&i.add(this.innerSubscription)}},{key:"_complete",value:function(){var e=this.innerSubscription;e&&!e.closed||s(f(n.prototype),"_complete",this).call(this),this.unsubscribe()}},{key:"_unsubscribe",value:function(){this.innerSubscription=void 0}},{key:"notifyComplete",value:function(){this.innerSubscription=void 0,this.isStopped&&s(f(n.prototype),"_complete",this).call(this)}},{key:"notifyNext",value:function(e){this.destination.next(e)}}]),n}(X);function $f(e){return function(t){return 0===e?Of():t.lift(new Zf(e))}}var Zf=function(){function e(t){if(p(this,e),this.total=t,this.total<0)throw new Gf}return m(e,[{key:"call",value:function(e,t){return t.subscribe(new Xf(e,this.total))}}]),e}(),Xf=function(e){l(n,e);var t=u(n);function n(e,i){var r;return p(this,n),(r=t.call(this,e)).total=i,r.count=0,r}return m(n,[{key:"_next",value:function(e){var t=this.total,n=++this.count;n<=t&&(this.destination.next(e),n===t&&(this.destination.complete(),this.unsubscribe()))}}]),n}(I);function ep(){return Lf()(Xh.apply(void 0,arguments))}var tp=function(){function e(t,n){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];p(this,e),this.accumulator=t,this.seed=n,this.hasSeed=i}return m(e,[{key:"call",value:function(e,t){return t.subscribe(new np(e,this.accumulator,this.seed,this.hasSeed))}}]),e}(),np=function(e){l(n,e);var t=u(n);function n(e,i,r,a){var o;return p(this,n),(o=t.call(this,e)).accumulator=i,o._seed=r,o.hasSeed=a,o.index=0,o}return m(n,[{key:"seed",get:function(){return this._seed},set:function(e){this.hasSeed=!0,this._seed=e}},{key:"_next",value:function(e){if(this.hasSeed)return this._tryNext(e);this.seed=e,this.destination.next(e)}},{key:"_tryNext",value:function(e){var t,n=this.index++;try{t=this.accumulator(this.seed,e,n)}catch(i){this.destination.error(i)}this.seed=t,this.destination.next(t)}}]),n}(I);function ip(e,t){var n=arguments.length>=2;return function(i){return i.pipe(e?tv((function(t,n){return e(t,n,i)})):x,$f(1),n?qf(t):Ff((function(){return new _f})))}}var rp=function(){function e(t){p(this,e),this.callback=t}return m(e,[{key:"call",value:function(e,t){return t.subscribe(new ap(e,this.callback))}}]),e}(),ap=function(e){l(n,e);var t=u(n);function n(e,i){var r;return p(this,n),(r=t.call(this,e)).add(new P(i)),r}return n}(I),op=function e(t,n){p(this,e),this.id=t,this.url=n},sp=function(e){l(n,e);var t=u(n);function n(e,i){var r,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"imperative",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return p(this,n),(r=t.call(this,e,i)).navigationTrigger=a,r.restoredState=o,r}return m(n,[{key:"toString",value:function(){return"NavigationStart(id: ".concat(this.id,", url: '").concat(this.url,"')")}}]),n}(op),lp=function(e){l(n,e);var t=u(n);function n(e,i,r){var a;return p(this,n),(a=t.call(this,e,i)).urlAfterRedirects=r,a}return m(n,[{key:"toString",value:function(){return"NavigationEnd(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"')")}}]),n}(op),cp=function(e){l(n,e);var t=u(n);function n(e,i,r){var a;return p(this,n),(a=t.call(this,e,i)).reason=r,a}return m(n,[{key:"toString",value:function(){return"NavigationCancel(id: ".concat(this.id,", url: '").concat(this.url,"')")}}]),n}(op),up=function(e){l(n,e);var t=u(n);function n(e,i,r){var a;return p(this,n),(a=t.call(this,e,i)).error=r,a}return m(n,[{key:"toString",value:function(){return"NavigationError(id: ".concat(this.id,", url: '").concat(this.url,"', error: ").concat(this.error,")")}}]),n}(op),dp=function(e){l(n,e);var t=u(n);function n(e,i,r,a){var o;return p(this,n),(o=t.call(this,e,i)).urlAfterRedirects=r,o.state=a,o}return m(n,[{key:"toString",value:function(){return"RoutesRecognized(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,")")}}]),n}(op),hp=function(e){l(n,e);var t=u(n);function n(e,i,r,a){var o;return p(this,n),(o=t.call(this,e,i)).urlAfterRedirects=r,o.state=a,o}return m(n,[{key:"toString",value:function(){return"GuardsCheckStart(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,")")}}]),n}(op),vp=function(e){l(n,e);var t=u(n);function n(e,i,r,a,o){var s;return p(this,n),(s=t.call(this,e,i)).urlAfterRedirects=r,s.state=a,s.shouldActivate=o,s}return m(n,[{key:"toString",value:function(){return"GuardsCheckEnd(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,", shouldActivate: ").concat(this.shouldActivate,")")}}]),n}(op),fp=function(e){l(n,e);var t=u(n);function n(e,i,r,a){var o;return p(this,n),(o=t.call(this,e,i)).urlAfterRedirects=r,o.state=a,o}return m(n,[{key:"toString",value:function(){return"ResolveStart(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,")")}}]),n}(op),pp=function(e){l(n,e);var t=u(n);function n(e,i,r,a){var o;return p(this,n),(o=t.call(this,e,i)).urlAfterRedirects=r,o.state=a,o}return m(n,[{key:"toString",value:function(){return"ResolveEnd(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,")")}}]),n}(op),gp=function(){function e(t){p(this,e),this.route=t}return m(e,[{key:"toString",value:function(){return"RouteConfigLoadStart(path: ".concat(this.route.path,")")}}]),e}(),mp=function(){function e(t){p(this,e),this.route=t}return m(e,[{key:"toString",value:function(){return"RouteConfigLoadEnd(path: ".concat(this.route.path,")")}}]),e}(),bp=function(){function e(t){p(this,e),this.snapshot=t}return m(e,[{key:"toString",value:function(){return"ChildActivationStart(path: '".concat(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"","')")}}]),e}(),yp=function(){function e(t){p(this,e),this.snapshot=t}return m(e,[{key:"toString",value:function(){return"ChildActivationEnd(path: '".concat(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"","')")}}]),e}(),kp=function(){function e(t){p(this,e),this.snapshot=t}return m(e,[{key:"toString",value:function(){return"ActivationStart(path: '".concat(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"","')")}}]),e}(),Cp=function(){function e(t){p(this,e),this.snapshot=t}return m(e,[{key:"toString",value:function(){return"ActivationEnd(path: '".concat(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"","')")}}]),e}(),Vp=function(){function e(t,n,i){p(this,e),this.routerEvent=t,this.position=n,this.anchor=i}return m(e,[{key:"toString",value:function(){return"Scroll(anchor: '".concat(this.anchor,"', position: '").concat(this.position?"".concat(this.position[0],", ").concat(this.position[1]):null,"')")}}]),e}(),wp=function(){function e(t){p(this,e),this.params=t||{}}return m(e,[{key:"has",value:function(e){return Object.prototype.hasOwnProperty.call(this.params,e)}},{key:"get",value:function(e){if(this.has(e)){var t=this.params[e];return Array.isArray(t)?t[0]:t}return null}},{key:"getAll",value:function(e){if(this.has(e)){var t=this.params[e];return Array.isArray(t)?t:[t]}return[]}},{key:"keys",get:function(){return Object.keys(this.params)}}]),e}();function Ap(e){return new wp(e)}function Pp(e){var t=Error("NavigationCancelingError: "+e);return t.ngNavigationCancelingError=!0,t}function Dp(e,t,n){var i=n.path.split("/");if(i.length>e.length)return null;if("full"===n.pathMatch&&(t.hasChildren()||i.length<e.length))return null;for(var r={},a=0;a<i.length;a++){var o=i[a],s=e[a];if(o.startsWith(":"))r[o.substring(1)]=s;else if(o!==s.path)return null}return{consumed:e.slice(0,i.length),posParams:r}}function Mp(e,t){var n,i=Object.keys(e),r=Object.keys(t);if(!i||!r||i.length!=r.length)return!1;for(var a=0;a<i.length;a++)if(!Ip(e[n=i[a]],t[n]))return!1;return!0}function Ip(e,t){if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;var n=i(e).sort(),r=i(t).sort();return n.every((function(e,t){return r[t]===e}))}return e===t}function Sp(e){return Array.prototype.concat.apply([],e)}function Tp(e){return e.length>0?e[e.length-1]:null}function xp(e,t){for(var n in e)e.hasOwnProperty(n)&&t(e[n],n)}function _p(e){return co(e)?e:lo(e)?$(Promise.resolve(e)):Xh(e)}function Up(e,t,n){return n?function(e,t){return Mp(e,t)}(e.queryParams,t.queryParams)&&function e(t,n){if(!Gp(t.segments,n.segments))return!1;if(t.numberOfChildren!==n.numberOfChildren)return!1;for(var i in n.children){if(!t.children[i])return!1;if(!e(t.children[i],n.children[i]))return!1}return!0}(e.root,t.root):function(e,t){return Object.keys(t).length<=Object.keys(e).length&&Object.keys(t).every((function(n){return Ip(e[n],t[n])}))}(e.queryParams,t.queryParams)&&function e(t,n){return function t(n,i,r){if(n.segments.length>r.length)return!!Gp(n.segments.slice(0,r.length),r)&&!i.hasChildren();if(n.segments.length===r.length){if(!Gp(n.segments,r))return!1;for(var a in i.children){if(!n.children[a])return!1;if(!e(n.children[a],i.children[a]))return!1}return!0}var o=r.slice(0,n.segments.length),s=r.slice(n.segments.length);return!!Gp(n.segments,o)&&!!n.children.primary&&t(n.children.primary,i,s)}(t,n,n.segments)}(e.root,t.root)}var Op=function(){function e(t,n,i){p(this,e),this.root=t,this.queryParams=n,this.fragment=i}return m(e,[{key:"queryParamMap",get:function(){return this._queryParamMap||(this._queryParamMap=Ap(this.queryParams)),this._queryParamMap}},{key:"toString",value:function(){return Fp.serialize(this)}}]),e}(),Ep=function(){function e(t,n){var i=this;p(this,e),this.segments=t,this.children=n,this.parent=null,xp(n,(function(e,t){return e.parent=i}))}return m(e,[{key:"hasChildren",value:function(){return this.numberOfChildren>0}},{key:"numberOfChildren",get:function(){return Object.keys(this.children).length}},{key:"toString",value:function(){return Bp(this)}}]),e}(),Lp=function(){function e(t,n){p(this,e),this.path=t,this.parameters=n}return m(e,[{key:"parameterMap",get:function(){return this._parameterMap||(this._parameterMap=Ap(this.parameters)),this._parameterMap}},{key:"toString",value:function(){return Wp(this)}}]),e}();function Gp(e,t){return e.length===t.length&&e.every((function(e,n){return e.path===t[n].path}))}function Rp(e,t){var n=[];return xp(e.children,(function(e,i){"primary"===i&&(n=n.concat(t(e,i)))})),xp(e.children,(function(e,i){"primary"!==i&&(n=n.concat(t(e,i)))})),n}var jp=function e(){p(this,e)},Np=function(){function e(){p(this,e)}return m(e,[{key:"parse",value:function(e){var t=new Xp(e);return new Op(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}},{key:"serialize",value:function(e){return"".concat("/"+function e(t,n){if(!t.hasChildren())return Bp(t);if(n){var i=t.children.primary?e(t.children.primary,!1):"",r=[];return xp(t.children,(function(t,n){"primary"!==n&&r.push("".concat(n,":").concat(e(t,!1)))})),r.length>0?"".concat(i,"(").concat(r.join("//"),")"):i}var a=Rp(t,(function(n,i){return"primary"===i?[e(t.children.primary,!1)]:["".concat(i,":").concat(e(n,!1))]}));return 1===Object.keys(t.children).length&&null!=t.children.primary?"".concat(Bp(t),"/").concat(a[0]):"".concat(Bp(t),"/(").concat(a.join("//"),")")}(e.root,!0)).concat((t=e.queryParams,n=Object.keys(t).map((function(e){var n=t[e];return Array.isArray(n)?n.map((function(t){return"".concat(Kp(e),"=").concat(Kp(t))})).join("&"):"".concat(Kp(e),"=").concat(Kp(n))})),n.length?"?"+n.join("&"):"")).concat("string"==typeof e.fragment?"#"+encodeURI(e.fragment):"");var t,n}}]),e}(),Fp=new Np;function Bp(e){return e.segments.map((function(e){return Wp(e)})).join("/")}function Hp(e){return encodeURIComponent(e).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Kp(e){return Hp(e).replace(/%3B/gi,";")}function qp(e){return Hp(e).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function zp(e){return decodeURIComponent(e)}function Qp(e){return zp(e.replace(/\+/g,"%20"))}function Wp(e){return"".concat(qp(e.path)).concat((t=e.parameters,Object.keys(t).map((function(e){return";".concat(qp(e),"=").concat(qp(t[e]))})).join("")));var t}var Jp=/^[^\/()?;=#]+/;function Yp(e){var t=e.match(Jp);return t?t[0]:""}var $p=/^[^=?&#]+/,Zp=/^[^?&#]+/,Xp=function(){function e(t){p(this,e),this.url=t,this.remaining=t}return m(e,[{key:"parseRootSegment",value:function(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ep([],{}):new Ep([],this.parseChildren())}},{key:"parseQueryParams",value:function(){var e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}},{key:"parseFragment",value:function(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}},{key:"parseChildren",value:function(){if(""===this.remaining)return{};this.consumeOptional("/");var e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());var t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));var n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(n.primary=new Ep(e,t)),n}},{key:"parseSegment",value:function(){var e=Yp(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error("Empty path url segment cannot have parameters: '".concat(this.remaining,"'."));return this.capture(e),new Lp(zp(e),this.parseMatrixParams())}},{key:"parseMatrixParams",value:function(){for(var e={};this.consumeOptional(";");)this.parseParam(e);return e}},{key:"parseParam",value:function(e){var t=Yp(this.remaining);if(t){this.capture(t);var n="";if(this.consumeOptional("=")){var i=Yp(this.remaining);i&&(n=i,this.capture(n))}e[zp(t)]=zp(n)}}},{key:"parseQueryParam",value:function(e){var t=function(e){var t=e.match($p);return t?t[0]:""}(this.remaining);if(t){this.capture(t);var n="";if(this.consumeOptional("=")){var i=function(e){var t=e.match(Zp);return t?t[0]:""}(this.remaining);i&&(n=i,this.capture(n))}var r=Qp(t),a=Qp(n);if(e.hasOwnProperty(r)){var o=e[r];Array.isArray(o)||(o=[o],e[r]=o),o.push(a)}else e[r]=a}}},{key:"parseParens",value:function(e){var t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){var n=Yp(this.remaining),i=this.remaining[n.length];if("/"!==i&&")"!==i&&";"!==i)throw new Error("Cannot parse url '".concat(this.url,"'"));var r=void 0;n.indexOf(":")>-1?(r=n.substr(0,n.indexOf(":")),this.capture(r),this.capture(":")):e&&(r="primary");var a=this.parseChildren();t[r]=1===Object.keys(a).length?a.primary:new Ep([],a),this.consumeOptional("//")}return t}},{key:"peekStartsWith",value:function(e){return this.remaining.startsWith(e)}},{key:"consumeOptional",value:function(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}},{key:"capture",value:function(e){if(!this.consumeOptional(e))throw new Error('Expected "'.concat(e,'".'))}}]),e}(),eg=function(){function e(t){p(this,e),this._root=t}return m(e,[{key:"root",get:function(){return this._root.value}},{key:"parent",value:function(e){var t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}},{key:"children",value:function(e){var t=tg(e,this._root);return t?t.children.map((function(e){return e.value})):[]}},{key:"firstChild",value:function(e){var t=tg(e,this._root);return t&&t.children.length>0?t.children[0].value:null}},{key:"siblings",value:function(e){var t=ng(e,this._root);return t.length<2?[]:t[t.length-2].children.map((function(e){return e.value})).filter((function(t){return t!==e}))}},{key:"pathFromRoot",value:function(e){return ng(e,this._root).map((function(e){return e.value}))}}]),e}();function tg(e,t){if(e===t.value)return t;var i,r=n(t.children);try{for(r.s();!(i=r.n()).done;){var a=tg(e,i.value);if(a)return a}}catch(o){r.e(o)}finally{r.f()}return null}function ng(e,t){if(e===t.value)return[t];var i,r=n(t.children);try{for(r.s();!(i=r.n()).done;){var a=ng(e,i.value);if(a.length)return a.unshift(t),a}}catch(o){r.e(o)}finally{r.f()}return[]}var ig=function(){function e(t,n){p(this,e),this.value=t,this.children=n}return m(e,[{key:"toString",value:function(){return"TreeNode(".concat(this.value,")")}}]),e}();function rg(e){var t={};return e&&e.children.forEach((function(e){return t[e.value.outlet]=e})),t}var ag=function(e){l(n,e);var t=u(n);function n(e,i){var r;return p(this,n),(r=t.call(this,e)).snapshot=i,dg(h(r),e),r}return m(n,[{key:"toString",value:function(){return this.snapshot.toString()}}]),n}(eg);function og(e,t){var n=function(e,t){var n=new cg([],{},{},"",{},"primary",t,null,e.root,-1,{});return new ug("",new ig(n,[]))}(e,t),i=new Pf([new Lp("",{})]),r=new Pf({}),a=new Pf({}),o=new Pf({}),s=new Pf(""),l=new sg(i,r,o,s,a,"primary",t,n.root);return l.snapshot=n.root,new ag(new ig(l,[]),n)}var sg=function(){function e(t,n,i,r,a,o,s,l){p(this,e),this.url=t,this.params=n,this.queryParams=i,this.fragment=r,this.data=a,this.outlet=o,this.component=s,this._futureSnapshot=l}return m(e,[{key:"routeConfig",get:function(){return this._futureSnapshot.routeConfig}},{key:"root",get:function(){return this._routerState.root}},{key:"parent",get:function(){return this._routerState.parent(this)}},{key:"firstChild",get:function(){return this._routerState.firstChild(this)}},{key:"children",get:function(){return this._routerState.children(this)}},{key:"pathFromRoot",get:function(){return this._routerState.pathFromRoot(this)}},{key:"paramMap",get:function(){return this._paramMap||(this._paramMap=this.params.pipe(B((function(e){return Ap(e)})))),this._paramMap}},{key:"queryParamMap",get:function(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(B((function(e){return Ap(e)})))),this._queryParamMap}},{key:"toString",value:function(){return this.snapshot?this.snapshot.toString():"Future(".concat(this._futureSnapshot,")")}}]),e}();function lg(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"emptyOnly",n=e.pathFromRoot,i=0;if("always"!==t)for(i=n.length-1;i>=1;){var r=n[i],a=n[i-1];if(r.routeConfig&&""===r.routeConfig.path)i--;else{if(a.component)break;i--}}return function(e){return e.reduce((function(e,t){return{params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}}),{params:{},data:{},resolve:{}})}(n.slice(i))}var cg=function(){function e(t,n,i,r,a,o,s,l,c,u,d){p(this,e),this.url=t,this.params=n,this.queryParams=i,this.fragment=r,this.data=a,this.outlet=o,this.component=s,this.routeConfig=l,this._urlSegment=c,this._lastPathIndex=u,this._resolve=d}return m(e,[{key:"root",get:function(){return this._routerState.root}},{key:"parent",get:function(){return this._routerState.parent(this)}},{key:"firstChild",get:function(){return this._routerState.firstChild(this)}},{key:"children",get:function(){return this._routerState.children(this)}},{key:"pathFromRoot",get:function(){return this._routerState.pathFromRoot(this)}},{key:"paramMap",get:function(){return this._paramMap||(this._paramMap=Ap(this.params)),this._paramMap}},{key:"queryParamMap",get:function(){return this._queryParamMap||(this._queryParamMap=Ap(this.queryParams)),this._queryParamMap}},{key:"toString",value:function(){return"Route(url:'".concat(this.url.map((function(e){return e.toString()})).join("/"),"', path:'").concat(this.routeConfig?this.routeConfig.path:"","')")}}]),e}(),ug=function(e){l(n,e);var t=u(n);function n(e,i){var r;return p(this,n),(r=t.call(this,i)).url=e,dg(h(r),i),r}return m(n,[{key:"toString",value:function(){return hg(this._root)}}]),n}(eg);function dg(e,t){t.value._routerState=e,t.children.forEach((function(t){return dg(e,t)}))}function hg(e){var t=e.children.length>0?" { ".concat(e.children.map(hg).join(", ")," } "):"";return"".concat(e.value).concat(t)}function vg(e){if(e.snapshot){var t=e.snapshot,n=e._futureSnapshot;e.snapshot=n,Mp(t.queryParams,n.queryParams)||e.queryParams.next(n.queryParams),t.fragment!==n.fragment&&e.fragment.next(n.fragment),Mp(t.params,n.params)||e.params.next(n.params),function(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;++n)if(!Mp(e[n],t[n]))return!1;return!0}(t.url,n.url)||e.url.next(n.url),Mp(t.data,n.data)||e.data.next(n.data)}else e.snapshot=e._futureSnapshot,e.data.next(e._futureSnapshot.data)}function fg(e,t){var n,i;return Mp(e.params,t.params)&&Gp(n=e.url,i=t.url)&&n.every((function(e,t){return Mp(e.parameters,i[t].parameters)}))&&!(!e.parent!=!t.parent)&&(!e.parent||fg(e.parent,t.parent))}function pg(e){return"object"==typeof e&&null!=e&&!e.outlets&&!e.segmentPath}function gg(e){return"object"==typeof e&&null!=e&&e.outlets}function mg(e,t,n,i,r){var a={};return i&&xp(i,(function(e,t){a[t]=Array.isArray(e)?e.map((function(e){return""+e})):""+e})),new Op(n.root===e?t:function e(t,n,i){var r={};return xp(t.children,(function(t,a){r[a]=t===n?i:e(t,n,i)})),new Ep(t.segments,r)}(n.root,e,t),a,r)}var bg=function(){function e(t,n,i){if(p(this,e),this.isAbsolute=t,this.numberOfDoubleDots=n,this.commands=i,t&&i.length>0&&pg(i[0]))throw new Error("Root segment cannot have matrix parameters");var r=i.find(gg);if(r&&r!==Tp(i))throw new Error("{outlets:{}} has to be the last command")}return m(e,[{key:"toRoot",value:function(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}]),e}(),yg=function e(t,n,i){p(this,e),this.segmentGroup=t,this.processChildren=n,this.index=i};function kg(e,t,n){if(e||(e=new Ep([],{})),0===e.segments.length&&e.hasChildren())return Cg(e,t,n);var i=function(e,t,n){for(var i=0,r=t,a={match:!1,pathIndex:0,commandIndex:0};r<e.segments.length;){if(i>=n.length)return a;var o=e.segments[r],s=n[i];if(gg(s))break;var l=""+s,c=i<n.length-1?n[i+1]:null;if(r>0&&void 0===l)break;if(l&&c&&"object"==typeof c&&void 0===c.outlets){if(!Pg(l,c,o))return a;i+=2}else{if(!Pg(l,{},o))return a;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}(e,t,n),r=n.slice(i.commandIndex);if(i.match&&i.pathIndex<e.segments.length){var a=new Ep(e.segments.slice(0,i.pathIndex),{});return a.children.primary=new Ep(e.segments.slice(i.pathIndex),e.children),Cg(a,0,r)}return i.match&&0===r.length?new Ep(e.segments,{}):i.match&&!e.hasChildren()?Vg(e,t,n):i.match?Cg(e,0,r):Vg(e,t,n)}function Cg(e,t,n){if(0===n.length)return new Ep(e.segments,{});var i=function(e){return gg(e[0])?e[0].outlets:{primary:e}}(n),r={};return xp(i,(function(n,i){null!==n&&(r[i]=kg(e.children[i],t,n))})),xp(e.children,(function(e,t){void 0===i[t]&&(r[t]=e)})),new Ep(e.segments,r)}function Vg(e,t,n){for(var i=e.segments.slice(0,t),r=0;r<n.length;){var a=n[r];if(gg(a)){var o=wg(a.outlets);return new Ep(i,o)}if(0===r&&pg(n[0]))i.push(new Lp(e.segments[t].path,n[0])),r++;else{var s=gg(a)?a.outlets.primary:""+a,l=r<n.length-1?n[r+1]:null;s&&l&&pg(l)?(i.push(new Lp(s,Ag(l))),r+=2):(i.push(new Lp(s,{})),r++)}}return new Ep(i,{})}function wg(e){var t={};return xp(e,(function(e,n){null!==e&&(t[n]=Vg(new Ep([],{}),0,e))})),t}function Ag(e){var t={};return xp(e,(function(e,n){return t[n]=""+e})),t}function Pg(e,t,n){return e==n.path&&Mp(t,n.parameters)}var Dg=function(){function e(t,n,i,r){p(this,e),this.routeReuseStrategy=t,this.futureState=n,this.currState=i,this.forwardEvent=r}return m(e,[{key:"activate",value:function(e){var t=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,n,e),vg(this.futureState.root),this.activateChildRoutes(t,n,e)}},{key:"deactivateChildRoutes",value:function(e,t,n){var i=this,r=rg(t);e.children.forEach((function(e){var t=e.value.outlet;i.deactivateRoutes(e,r[t],n),delete r[t]})),xp(r,(function(e,t){i.deactivateRouteAndItsChildren(e,n)}))}},{key:"deactivateRoutes",value:function(e,t,n){var i=e.value,r=t?t.value:null;if(i===r)if(i.component){var a=n.getContext(i.outlet);a&&this.deactivateChildRoutes(e,t,a.children)}else this.deactivateChildRoutes(e,t,n);else r&&this.deactivateRouteAndItsChildren(t,n)}},{key:"deactivateRouteAndItsChildren",value:function(e,t){this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}},{key:"detachAndStoreRouteSubtree",value:function(e,t){var n=t.getContext(e.value.outlet);if(n&&n.outlet){var i=n.outlet.detach(),r=n.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:i,route:e,contexts:r})}}},{key:"deactivateRouteAndOutlet",value:function(e,t){var n=this,i=t.getContext(e.value.outlet);if(i){var r=rg(e),a=e.value.component?i.children:t;xp(r,(function(e,t){return n.deactivateRouteAndItsChildren(e,a)})),i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated())}}},{key:"activateChildRoutes",value:function(e,t,n){var i=this,r=rg(t);e.children.forEach((function(e){i.activateRoutes(e,r[e.value.outlet],n),i.forwardEvent(new Cp(e.value.snapshot))})),e.children.length&&this.forwardEvent(new yp(e.value.snapshot))}},{key:"activateRoutes",value:function(e,t,n){var i=e.value,r=t?t.value:null;if(vg(i),i===r)if(i.component){var a=n.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,a.children)}else this.activateChildRoutes(e,t,n);else if(i.component){var o=n.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){var s=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(s.contexts),o.attachRef=s.componentRef,o.route=s.route.value,o.outlet&&o.outlet.attach(s.componentRef,s.route.value),Mg(s.route)}else{var l=function(e){for(var t=e.parent;t;t=t.parent){var n=t.routeConfig;if(n&&n._loadedConfig)return n._loadedConfig;if(n&&n.component)return null}return null}(i.snapshot),c=l?l.module.componentFactoryResolver:null;o.attachRef=null,o.route=i,o.resolver=c,o.outlet&&o.outlet.activateWith(i,c),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,n)}}]),e}();function Mg(e){vg(e.value),e.children.forEach(Mg)}var Ig=function e(t,n){p(this,e),this.routes=t,this.module=n};function Sg(e){return"function"==typeof e}function Tg(e){return e instanceof Op}var xg=Symbol("INITIAL_VALUE");function _g(){return Wf((function(e){return(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=void 0,r=void 0;return F(t[t.length-1])&&(r=t.pop()),"function"==typeof t[t.length-1]&&(i=t.pop()),1===t.length&&C(t[0])&&(t=t[0]),ae(t,r).lift(new Tf(i))}).apply(void 0,i(e.map((function(e){return e.pipe($f(1),function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=t[t.length-1];return F(i)?(t.pop(),function(e){return ep(t,e,i)}):function(e){return ep(t,e)}}(xg))})))).pipe(function(e,t){var n=!1;return arguments.length>=2&&(n=!0),function(i){return i.lift(new tp(e,t,n))}}((function(e,t){var n=!1;return t.reduce((function(e,i,r){if(e!==xg)return e;if(i===xg&&(n=!0),!n){if(!1===i)return i;if(r===t.length-1||Tg(i))return i}return e}),e)}),xg),tv((function(e){return e!==xg})),B((function(e){return Tg(e)?e:!0===e})),$f(1))}))}var Ug=function e(t){p(this,e),this.segmentGroup=t||null},Og=function e(t){p(this,e),this.urlTree=t};function Eg(e){return new U((function(t){return t.error(new Ug(e))}))}function Lg(e){return new U((function(t){return t.error(new Og(e))}))}function Gg(e){return new U((function(t){return t.error(new Error("Only absolute redirects can have named outlets. redirectTo: '".concat(e,"'")))}))}var Rg=function(){function e(t,n,i,r,a){p(this,e),this.configLoader=n,this.urlSerializer=i,this.urlTree=r,this.config=a,this.allowRedirects=!0,this.ngModule=t.get(ut)}return m(e,[{key:"apply",value:function(){var e=this;return this.expandSegmentGroup(this.ngModule,this.config,this.urlTree.root,"primary").pipe(B((function(t){return e.createUrlTree(t,e.urlTree.queryParams,e.urlTree.fragment)}))).pipe(af((function(t){if(t instanceof Og)return e.allowRedirects=!1,e.match(t.urlTree);if(t instanceof Ug)throw e.noMatchError(t);throw t})))}},{key:"match",value:function(e){var t=this;return this.expandSegmentGroup(this.ngModule,this.config,e.root,"primary").pipe(B((function(n){return t.createUrlTree(n,e.queryParams,e.fragment)}))).pipe(af((function(e){if(e instanceof Ug)throw t.noMatchError(e);throw e})))}},{key:"noMatchError",value:function(e){return new Error("Cannot match any routes. URL Segment: '".concat(e.segmentGroup,"'"))}},{key:"createUrlTree",value:function(e,t,n){var i=e.segments.length>0?new Ep([],{primary:e}):e;return new Op(i,t,n)}},{key:"expandSegmentGroup",value:function(e,t,n,i){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(e,t,n).pipe(B((function(e){return new Ep([],e)}))):this.expandSegment(e,n,t,n.segments,i,!0)}},{key:"expandChildren",value:function(e,t,n){var i=this;return function(n,r){if(0===Object.keys(n).length)return Xh({});var a=[],o=[],s={};return xp(n,(function(n,r){var l,c,u=(l=r,c=n,i.expandSegmentGroup(e,t,c,l)).pipe(B((function(e){return s[r]=e})));"primary"===r?a.push(u):o.push(u)})),Xh.apply(null,a.concat(o)).pipe(Lf(),function(e,t){var n=arguments.length>=2;return function(i){return i.pipe(e?tv((function(t,n){return e(t,n,i)})):x,Rf(1),n?qf(t):Ff((function(){return new _f})))}}(),B((function(){return s})))}(n.children)}},{key:"expandSegment",value:function(e,t,n,r,a,o){var s=this;return Xh.apply(void 0,i(n)).pipe(ev((function(i){return s.expandSegmentAgainstRoute(e,t,n,i,r,a,o).pipe(af((function(e){if(e instanceof Ug)return Xh(null);throw e})))})),ip((function(e){return!!e})),af((function(e,n){if(e instanceof _f||"EmptyError"===e.name){if(s.noLeftoversInUrl(t,r,a))return Xh(new Ep([],{}));throw new Ug(t)}throw e})))}},{key:"noLeftoversInUrl",value:function(e,t,n){return 0===t.length&&!e.children[n]}},{key:"expandSegmentAgainstRoute",value:function(e,t,n,i,r,a,o){return Bg(i)!==a?Eg(t):void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,r):o&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,n,i,r,a):Eg(t)}},{key:"expandSegmentAgainstRouteUsingRedirect",value:function(e,t,n,i,r,a){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,n,i,a):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,n,i,r,a)}},{key:"expandWildCardWithParamsAgainstRouteUsingRedirect",value:function(e,t,n,i){var r=this,a=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?Lg(a):this.lineralizeSegments(n,a).pipe(te((function(n){var a=new Ep(n,{});return r.expandSegment(e,a,t,n,i,!1)})))}},{key:"expandRegularSegmentAgainstRouteUsingRedirect",value:function(e,t,n,i,r,a){var o=this,s=jg(t,i,r),l=s.matched,c=s.consumedSegments,u=s.lastChild,d=s.positionalParamSegments;if(!l)return Eg(t);var h=this.applyRedirectCommands(c,i.redirectTo,d);return i.redirectTo.startsWith("/")?Lg(h):this.lineralizeSegments(i,h).pipe(te((function(i){return o.expandSegment(e,t,n,i.concat(r.slice(u)),a,!1)})))}},{key:"matchSegmentAgainstRoute",value:function(e,t,i,r){var a=this;if("**"===i.path)return i.loadChildren?this.configLoader.load(e.injector,i).pipe(B((function(e){return i._loadedConfig=e,new Ep(r,{})}))):Xh(new Ep(r,{}));var o=jg(t,i,r),s=o.matched,l=o.consumedSegments,c=o.lastChild;if(!s)return Eg(t);var u=r.slice(c);return this.getChildConfig(e,i,r).pipe(te((function(e){var i=e.module,r=e.routes,o=function(e,t,i,r){return i.length>0&&function(e,t,n){return n.some((function(n){return Fg(e,t,n)&&"primary"!==Bg(n)}))}(e,i,r)?{segmentGroup:Ng(new Ep(t,function(e,t){var i={};i.primary=t;var r,a=n(e);try{for(a.s();!(r=a.n()).done;){var o=r.value;""===o.path&&"primary"!==Bg(o)&&(i[Bg(o)]=new Ep([],{}))}}catch(s){a.e(s)}finally{a.f()}return i}(r,new Ep(i,e.children)))),slicedSegments:[]}:0===i.length&&function(e,t,n){return n.some((function(n){return Fg(e,t,n)}))}(e,i,r)?{segmentGroup:Ng(new Ep(e.segments,function(e,t,i,r){var a,o={},s=n(i);try{for(s.s();!(a=s.n()).done;){var l=a.value;Fg(e,t,l)&&!r[Bg(l)]&&(o[Bg(l)]=new Ep([],{}))}}catch(c){s.e(c)}finally{s.f()}return Object.assign(Object.assign({},r),o)}(e,i,r,e.children))),slicedSegments:i}:{segmentGroup:e,slicedSegments:i}}(t,l,u,r),s=o.segmentGroup,c=o.slicedSegments;return 0===c.length&&s.hasChildren()?a.expandChildren(i,r,s).pipe(B((function(e){return new Ep(l,e)}))):0===r.length&&0===c.length?Xh(new Ep(l,{})):a.expandSegment(i,s,r,c,"primary",!0).pipe(B((function(e){return new Ep(l.concat(e.segments),e.children)})))})))}},{key:"getChildConfig",value:function(e,t,n){var i=this;return t.children?Xh(new Ig(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?Xh(t._loadedConfig):this.runCanLoadGuards(e.injector,t,n).pipe(te((function(n){return n?i.configLoader.load(e.injector,t).pipe(B((function(e){return t._loadedConfig=e,e}))):function(e){return new U((function(t){return t.error(Pp("Cannot load children because the guard of the route \"path: '".concat(e.path,"'\" returned false")))}))}(t)}))):Xh(new Ig([],e))}},{key:"runCanLoadGuards",value:function(e,t,n){var i=this,r=t.canLoad;return r&&0!==r.length?Xh(r.map((function(i){var r,a=e.get(i);if(function(e){return e&&Sg(e.canLoad)}(a))r=a.canLoad(t,n);else{if(!Sg(a))throw new Error("Invalid CanLoad guard");r=a(t,n)}return _p(r)}))).pipe(_g(),cf((function(e){if(Tg(e)){var t=Pp('Redirecting to "'.concat(i.urlSerializer.serialize(e),'"'));throw t.url=e,t}})),B((function(e){return!0===e}))):Xh(!0)}},{key:"lineralizeSegments",value:function(e,t){for(var n=[],i=t.root;;){if(n=n.concat(i.segments),0===i.numberOfChildren)return Xh(n);if(i.numberOfChildren>1||!i.children.primary)return Gg(e.redirectTo);i=i.children.primary}}},{key:"applyRedirectCommands",value:function(e,t,n){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,n)}},{key:"applyRedirectCreatreUrlTree",value:function(e,t,n,i){var r=this.createSegmentGroup(e,t.root,n,i);return new Op(r,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}},{key:"createQueryParams",value:function(e,t){var n={};return xp(e,(function(e,i){if("string"==typeof e&&e.startsWith(":")){var r=e.substring(1);n[i]=t[r]}else n[i]=e})),n}},{key:"createSegmentGroup",value:function(e,t,n,i){var r=this,a=this.createSegments(e,t.segments,n,i),o={};return xp(t.children,(function(t,a){o[a]=r.createSegmentGroup(e,t,n,i)})),new Ep(a,o)}},{key:"createSegments",value:function(e,t,n,i){var r=this;return t.map((function(t){return t.path.startsWith(":")?r.findPosParam(e,t,i):r.findOrReturn(t,n)}))}},{key:"findPosParam",value:function(e,t,n){var i=n[t.path.substring(1)];if(!i)throw new Error("Cannot redirect to '".concat(e,"'. Cannot find '").concat(t.path,"'."));return i}},{key:"findOrReturn",value:function(e,t){var i,r=0,a=n(t);try{for(a.s();!(i=a.n()).done;){var o=i.value;if(o.path===e.path)return t.splice(r),o;r++}}catch(s){a.e(s)}finally{a.f()}return e}}]),e}();function jg(e,t,n){if(""===t.path)return"full"===t.pathMatch&&(e.hasChildren()||n.length>0)?{matched:!1,consumedSegments:[],lastChild:0,positionalParamSegments:{}}:{matched:!0,consumedSegments:[],lastChild:0,positionalParamSegments:{}};var i=(t.matcher||Dp)(n,e,t);return i?{matched:!0,consumedSegments:i.consumed,lastChild:i.consumed.length,positionalParamSegments:i.posParams}:{matched:!1,consumedSegments:[],lastChild:0,positionalParamSegments:{}}}function Ng(e){if(1===e.numberOfChildren&&e.children.primary){var t=e.children.primary;return new Ep(e.segments.concat(t.segments),t.children)}return e}function Fg(e,t,n){return(!(e.hasChildren()||t.length>0)||"full"!==n.pathMatch)&&""===n.path&&void 0!==n.redirectTo}function Bg(e){return e.outlet||"primary"}var Hg=function e(t){p(this,e),this.path=t,this.route=this.path[this.path.length-1]},Kg=function e(t,n){p(this,e),this.component=t,this.route=n};function qg(e,t,n){var i=function(e){if(!e)return null;for(var t=e.parent;t;t=t.parent){var n=t.routeConfig;if(n&&n._loadedConfig)return n._loadedConfig}return null}(t);return(i?i.module.injector:n).get(e)}function zg(e,t,n){var i=rg(e),r=e.value;xp(i,(function(e,i){zg(e,r.component?t?t.children.getContext(i):null:t,n)})),n.canDeactivateChecks.push(new Kg(r.component&&t&&t.outlet&&t.outlet.isActivated?t.outlet.component:null,r))}function Qg(e,t){return null!==e&&t&&t(new kp(e)),Xh(!0)}function Wg(e,t){return null!==e&&t&&t(new bp(e)),Xh(!0)}function Jg(e,t,n){var i=t.routeConfig?t.routeConfig.canActivate:null;return i&&0!==i.length?Xh(i.map((function(i){return Ef((function(){var r,a=qg(i,t,n);if(function(e){return e&&Sg(e.canActivate)}(a))r=_p(a.canActivate(t,e));else{if(!Sg(a))throw new Error("Invalid CanActivate guard");r=_p(a(t,e))}return r.pipe(ip())}))}))).pipe(_g()):Xh(!0)}function Yg(e,t,n){var i=t[t.length-1],r=t.slice(0,t.length-1).reverse().map((function(e){return function(e){var t=e.routeConfig?e.routeConfig.canActivateChild:null;return t&&0!==t.length?{node:e,guards:t}:null}(e)})).filter((function(e){return null!==e})).map((function(t){return Ef((function(){return Xh(t.guards.map((function(r){var a,o=qg(r,t.node,n);if(function(e){return e&&Sg(e.canActivateChild)}(o))a=_p(o.canActivateChild(i,e));else{if(!Sg(o))throw new Error("Invalid CanActivateChild guard");a=_p(o(i,e))}return a.pipe(ip())}))).pipe(_g())}))}));return Xh(r).pipe(_g())}var $g=function e(){p(this,e)},Zg=function(){function e(t,n,i,r,a,o){p(this,e),this.rootComponentType=t,this.config=n,this.urlTree=i,this.url=r,this.paramsInheritanceStrategy=a,this.relativeLinkResolution=o}return m(e,[{key:"recognize",value:function(){try{var e=tm(this.urlTree.root,[],[],this.config,this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,"primary"),n=new cg([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},"primary",this.rootComponentType,null,this.urlTree.root,-1,{}),i=new ig(n,t),r=new ug(this.url,i);return this.inheritParamsAndData(r._root),Xh(r)}catch(a){return new U((function(e){return e.error(a)}))}}},{key:"inheritParamsAndData",value:function(e){var t=this,n=e.value,i=lg(n,this.paramsInheritanceStrategy);n.params=Object.freeze(i.params),n.data=Object.freeze(i.data),e.children.forEach((function(e){return t.inheritParamsAndData(e)}))}},{key:"processSegmentGroup",value:function(e,t,n){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,n)}},{key:"processChildren",value:function(e,t){var n,i=this,r=Rp(t,(function(t,n){return i.processSegmentGroup(e,t,n)}));return n={},r.forEach((function(e){var t=n[e.value.outlet];if(t){var i=t.url.map((function(e){return e.toString()})).join("/"),r=e.value.url.map((function(e){return e.toString()})).join("/");throw new Error("Two segments cannot have the same outlet name: '".concat(i,"' and '").concat(r,"'."))}n[e.value.outlet]=e.value})),r.sort((function(e,t){return"primary"===e.value.outlet?-1:"primary"===t.value.outlet?1:e.value.outlet.localeCompare(t.value.outlet)})),r}},{key:"processSegment",value:function(e,t,i,r){var a,o=n(e);try{for(o.s();!(a=o.n()).done;){var s=a.value;try{return this.processSegmentAgainstRoute(s,t,i,r)}catch(l){if(!(l instanceof $g))throw l}}}catch(c){o.e(c)}finally{o.f()}if(this.noLeftoversInUrl(t,i,r))return[];throw new $g}},{key:"noLeftoversInUrl",value:function(e,t,n){return 0===t.length&&!e.children[n]}},{key:"processSegmentAgainstRoute",value:function(e,t,n,i){if(e.redirectTo)throw new $g;if((e.outlet||"primary")!==i)throw new $g;var r,a=[],o=[];if("**"===e.path){var s=n.length>0?Tp(n).parameters:{};r=new cg(n,s,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,rm(e),i,e.component,e,Xg(t),em(t)+n.length,am(e))}else{var l=function(e,t,n){if(""===t.path){if("full"===t.pathMatch&&(e.hasChildren()||n.length>0))throw new $g;return{consumedSegments:[],lastChild:0,parameters:{}}}var i=(t.matcher||Dp)(n,e,t);if(!i)throw new $g;var r={};xp(i.posParams,(function(e,t){r[t]=e.path}));var a=i.consumed.length>0?Object.assign(Object.assign({},r),i.consumed[i.consumed.length-1].parameters):r;return{consumedSegments:i.consumed,lastChild:i.consumed.length,parameters:a}}(t,e,n);a=l.consumedSegments,o=n.slice(l.lastChild),r=new cg(a,l.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,rm(e),i,e.component,e,Xg(t),em(t)+a.length,am(e))}var c=function(e){return e.children?e.children:e.loadChildren?e._loadedConfig.routes:[]}(e),u=tm(t,a,o,c,this.relativeLinkResolution),d=u.segmentGroup,h=u.slicedSegments;if(0===h.length&&d.hasChildren()){var v=this.processChildren(c,d);return[new ig(r,v)]}if(0===c.length&&0===h.length)return[new ig(r,[])];var f=this.processSegment(c,d,h,"primary");return[new ig(r,f)]}}]),e}();function Xg(e){for(var t=e;t._sourceSegment;)t=t._sourceSegment;return t}function em(e){for(var t=e,n=t._segmentIndexShift?t._segmentIndexShift:0;t._sourceSegment;)n+=(t=t._sourceSegment)._segmentIndexShift?t._segmentIndexShift:0;return n-1}function tm(e,t,i,r,a){if(i.length>0&&function(e,t,n){return n.some((function(n){return nm(e,t,n)&&"primary"!==im(n)}))}(e,i,r)){var o=new Ep(t,function(e,t,i,r){var a={};a.primary=r,r._sourceSegment=e,r._segmentIndexShift=t.length;var o,s=n(i);try{for(s.s();!(o=s.n()).done;){var l=o.value;if(""===l.path&&"primary"!==im(l)){var c=new Ep([],{});c._sourceSegment=e,c._segmentIndexShift=t.length,a[im(l)]=c}}}catch(u){s.e(u)}finally{s.f()}return a}(e,t,r,new Ep(i,e.children)));return o._sourceSegment=e,o._segmentIndexShift=t.length,{segmentGroup:o,slicedSegments:[]}}if(0===i.length&&function(e,t,n){return n.some((function(n){return nm(e,t,n)}))}(e,i,r)){var s=new Ep(e.segments,function(e,t,i,r,a,o){var s,l={},c=n(r);try{for(c.s();!(s=c.n()).done;){var u=s.value;if(nm(e,i,u)&&!a[im(u)]){var d=new Ep([],{});d._sourceSegment=e,d._segmentIndexShift="legacy"===o?e.segments.length:t.length,l[im(u)]=d}}}catch(h){c.e(h)}finally{c.f()}return Object.assign(Object.assign({},a),l)}(e,t,i,r,e.children,a));return s._sourceSegment=e,s._segmentIndexShift=t.length,{segmentGroup:s,slicedSegments:i}}var l=new Ep(e.segments,e.children);return l._sourceSegment=e,l._segmentIndexShift=t.length,{segmentGroup:l,slicedSegments:i}}function nm(e,t,n){return(!(e.hasChildren()||t.length>0)||"full"!==n.pathMatch)&&""===n.path&&void 0===n.redirectTo}function im(e){return e.outlet||"primary"}function rm(e){return e.data||{}}function am(e){return e.resolve||{}}function om(e){return function(t){return t.pipe(Wf((function(t){var n=e(t);return n?$(n).pipe(B((function(){return t}))):$([t])})))}}var sm,lm=function(e){l(n,e);var t=u(n);function n(){return p(this,n),t.apply(this,arguments)}return n}(function(){function e(){p(this,e)}return m(e,[{key:"shouldDetach",value:function(e){return!1}},{key:"store",value:function(e,t){}},{key:"shouldAttach",value:function(e){return!1}},{key:"retrieve",value:function(e){return null}},{key:"shouldReuseRoute",value:function(e,t){return e.routeConfig===t.routeConfig}}]),e}()),cm=((sm=function e(){p(this,e)}).\u0275fac=function(e){return new(e||sm)},sm.\u0275cmp=wt({type:sm,selectors:[["ng-component"]],decls:1,vars:0,template:function(e,t){1&e&&io(0,"router-outlet")},directives:function(){return[Tm]},encapsulation:2}),sm);function um(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=0;n<e.length;n++){var i=e[n];dm(i,hm(t,i))}}function dm(e,t){if(!e)throw new Error("\n      Invalid configuration of route '".concat(t,"': Encountered undefined route.\n      The reason might be an extra comma.\n\n      Example:\n      const routes: Routes = [\n        { path: '', redirectTo: '/dashboard', pathMatch: 'full' },\n        { path: 'dashboard',  component: DashboardComponent },, << two commas\n        { path: 'detail/:id', component: HeroDetailComponent }\n      ];\n    "));if(Array.isArray(e))throw new Error("Invalid configuration of route '".concat(t,"': Array cannot be specified"));if(!e.component&&!e.children&&!e.loadChildren&&e.outlet&&"primary"!==e.outlet)throw new Error("Invalid configuration of route '".concat(t,"': a componentless route without children or loadChildren cannot have a named outlet set"));if(e.redirectTo&&e.children)throw new Error("Invalid configuration of route '".concat(t,"': redirectTo and children cannot be used together"));if(e.redirectTo&&e.loadChildren)throw new Error("Invalid configuration of route '".concat(t,"': redirectTo and loadChildren cannot be used together"));if(e.children&&e.loadChildren)throw new Error("Invalid configuration of route '".concat(t,"': children and loadChildren cannot be used together"));if(e.redirectTo&&e.component)throw new Error("Invalid configuration of route '".concat(t,"': redirectTo and component cannot be used together"));if(e.path&&e.matcher)throw new Error("Invalid configuration of route '".concat(t,"': path and matcher cannot be used together"));if(void 0===e.redirectTo&&!e.component&&!e.children&&!e.loadChildren)throw new Error("Invalid configuration of route '".concat(t,"'. One of the following must be provided: component, redirectTo, children or loadChildren"));if(void 0===e.path&&void 0===e.matcher)throw new Error("Invalid configuration of route '".concat(t,"': routes must have either a path or a matcher specified"));if("string"==typeof e.path&&"/"===e.path.charAt(0))throw new Error("Invalid configuration of route '".concat(t,"': path cannot start with a slash"));if(""===e.path&&void 0!==e.redirectTo&&void 0===e.pathMatch)throw new Error("Invalid configuration of route '{path: \"".concat(t,'", redirectTo: "').concat(e.redirectTo,"\"}': please provide 'pathMatch'. The default value of 'pathMatch' is 'prefix', but often the intent is to use 'full'."));if(void 0!==e.pathMatch&&"full"!==e.pathMatch&&"prefix"!==e.pathMatch)throw new Error("Invalid configuration of route '".concat(t,"': pathMatch can only be set to 'prefix' or 'full'"));e.children&&um(e.children,t)}function hm(e,t){return t?e||t.path?e&&!t.path?e+"/":!e&&t.path?t.path:"".concat(e,"/").concat(t.path):"":e}function vm(e){var t=e.children&&e.children.map(vm),n=t?Object.assign(Object.assign({},e),{children:t}):Object.assign({},e);return!n.component&&(t||n.loadChildren)&&n.outlet&&"primary"!==n.outlet&&(n.component=cm),n}var fm=new $e("ROUTES"),pm=function(){function e(t,n,i,r){p(this,e),this.loader=t,this.compiler=n,this.onLoadStartListener=i,this.onLoadEndListener=r}return m(e,[{key:"load",value:function(e,t){var n=this;return this.onLoadStartListener&&this.onLoadStartListener(t),this.loadModuleFactory(t.loadChildren).pipe(B((function(i){n.onLoadEndListener&&n.onLoadEndListener(t);var r=i.create(e);return new Ig(Sp(r.injector.get(fm)).map(vm),r)})))}},{key:"loadModuleFactory",value:function(e){var t=this;return"string"==typeof e?$(this.loader.load(e)):_p(e()).pipe(te((function(e){return e instanceof dt?Xh(e):$(t.compiler.compileModuleAsync(e))})))}}]),e}(),gm=function e(){p(this,e),this.outlet=null,this.route=null,this.resolver=null,this.children=new mm,this.attachRef=null},mm=function(){function e(){p(this,e),this.contexts=new Map}return m(e,[{key:"onChildOutletCreated",value:function(e,t){var n=this.getOrCreateContext(e);n.outlet=t,this.contexts.set(e,n)}},{key:"onChildOutletDestroyed",value:function(e){var t=this.getContext(e);t&&(t.outlet=null)}},{key:"onOutletDeactivated",value:function(){var e=this.contexts;return this.contexts=new Map,e}},{key:"onOutletReAttached",value:function(e){this.contexts=e}},{key:"getOrCreateContext",value:function(e){var t=this.getContext(e);return t||(t=new gm,this.contexts.set(e,t)),t}},{key:"getContext",value:function(e){return this.contexts.get(e)||null}}]),e}(),bm=function(){function e(){p(this,e)}return m(e,[{key:"shouldProcessUrl",value:function(e){return!0}},{key:"extract",value:function(e){return e}},{key:"merge",value:function(e,t){return e}}]),e}();function ym(e){throw e}function km(e,t,n){return t.parse("/")}function Cm(e,t){return Xh(null)}var Vm,wm,Am=((wm=function(){function e(t,n,i,r,a,o,s,l){var c=this;p(this,e),this.rootComponentType=t,this.urlSerializer=n,this.rootContexts=i,this.location=r,this.config=l,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.lastLocationChangeInfo=null,this.navigationId=0,this.isNgZoneEnabled=!1,this.events=new j,this.errorHandler=ym,this.malformedUriErrorHandler=km,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Cm,afterPreactivation:Cm},this.urlHandlingStrategy=new bm,this.routeReuseStrategy=new lm,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="legacy",this.ngModule=a.get(ut),this.console=a.get(ol);var u=a.get(yl);this.isNgZoneEnabled=u instanceof yl,this.resetConfig(l),this.currentUrlTree=new Op(new Ep([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new pm(o,s,(function(e){return c.triggerEvent(new gp(e))}),(function(e){return c.triggerEvent(new mp(e))})),this.routerState=og(this.currentUrlTree,this.rootComponentType),this.transitions=new Pf({id:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}return m(e,[{key:"setupNavigations",value:function(e){var t=this,i=this.events;return e.pipe(tv((function(e){return 0!==e.id})),B((function(e){return Object.assign(Object.assign({},e),{extractedUrl:t.urlHandlingStrategy.extract(e.rawUrl)})})),Wf((function(e){var r,a,o,s,l=!1,c=!1;return Xh(e).pipe(cf((function(e){t.currentNavigation={id:e.id,initialUrl:e.currentRawUrl,extractedUrl:e.extractedUrl,trigger:e.source,extras:e.extras,previousNavigation:t.lastSuccessfulNavigation?Object.assign(Object.assign({},t.lastSuccessfulNavigation),{previousNavigation:null}):null}})),Wf((function(e){var n,r,a,o,s=!t.navigated||e.extractedUrl.toString()!==t.browserUrlTree.toString();if(("reload"===t.onSameUrlNavigation||s)&&t.urlHandlingStrategy.shouldProcessUrl(e.rawUrl))return Xh(e).pipe(Wf((function(e){var n=t.transitions.getValue();return i.next(new sp(e.id,t.serializeUrl(e.extractedUrl),e.source,e.restoredState)),n!==t.transitions.getValue()?Uf:[e]})),Wf((function(e){return Promise.resolve(e)})),(n=t.ngModule.injector,r=t.configLoader,a=t.urlSerializer,o=t.config,function(e){return e.pipe(Wf((function(e){return function(e,t,n,i,r){return new Rg(e,t,n,i,r).apply()}(n,r,a,e.extractedUrl,o).pipe(B((function(t){return Object.assign(Object.assign({},e),{urlAfterRedirects:t})})))})))}),cf((function(e){t.currentNavigation=Object.assign(Object.assign({},t.currentNavigation),{finalUrl:e.urlAfterRedirects})})),function(e,n,i,r,a){return function(i){return i.pipe(te((function(i){return function(e,t,n,i){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"emptyOnly",a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"legacy";return new Zg(e,t,n,i,r,a).recognize()}(e,n,i.urlAfterRedirects,(o=i.urlAfterRedirects,t.serializeUrl(o)),r,a).pipe(B((function(e){return Object.assign(Object.assign({},i),{targetSnapshot:e})})));var o})))}}(t.rootComponentType,t.config,0,t.paramsInheritanceStrategy,t.relativeLinkResolution),cf((function(e){"eager"===t.urlUpdateStrategy&&(e.extras.skipLocationChange||t.setBrowserUrl(e.urlAfterRedirects,!!e.extras.replaceUrl,e.id,e.extras.state),t.browserUrlTree=e.urlAfterRedirects)})),cf((function(e){var n=new dp(e.id,t.serializeUrl(e.extractedUrl),t.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);i.next(n)})));if(s&&t.rawUrlTree&&t.urlHandlingStrategy.shouldProcessUrl(t.rawUrlTree)){var l=e.id,c=e.extractedUrl,u=e.source,d=e.restoredState,h=e.extras,v=new sp(l,t.serializeUrl(c),u,d);i.next(v);var f=og(c,t.rootComponentType).snapshot;return Xh(Object.assign(Object.assign({},e),{targetSnapshot:f,urlAfterRedirects:c,extras:Object.assign(Object.assign({},h),{skipLocationChange:!1,replaceUrl:!1})}))}return t.rawUrlTree=e.rawUrl,t.browserUrlTree=e.urlAfterRedirects,e.resolve(null),Uf})),om((function(e){var n=e.targetSnapshot,i=e.id,r=e.extractedUrl,a=e.rawUrl,o=e.extras,s=o.skipLocationChange,l=o.replaceUrl;return t.hooks.beforePreactivation(n,{navigationId:i,appliedUrlTree:r,rawUrlTree:a,skipLocationChange:!!s,replaceUrl:!!l})})),cf((function(e){var n=new hp(e.id,t.serializeUrl(e.extractedUrl),t.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);t.triggerEvent(n)})),B((function(e){return Object.assign(Object.assign({},e),{guards:(n=e.targetSnapshot,i=e.currentSnapshot,r=t.rootContexts,a=n._root,function e(t,n,i,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{canDeactivateChecks:[],canActivateChecks:[]},o=rg(n);return t.children.forEach((function(t){!function(t,n,i,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{canDeactivateChecks:[],canActivateChecks:[]},o=t.value,s=n?n.value:null,l=i?i.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){var c=function(e,t,n){if("function"==typeof n)return n(e,t);switch(n){case"pathParamsChange":return!Gp(e.url,t.url);case"pathParamsOrQueryParamsChange":return!Gp(e.url,t.url)||!Mp(e.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!fg(e,t)||!Mp(e.queryParams,t.queryParams);case"paramsChange":default:return!fg(e,t)}}(s,o,o.routeConfig.runGuardsAndResolvers);c?a.canActivateChecks.push(new Hg(r)):(o.data=s.data,o._resolvedData=s._resolvedData),e(t,n,o.component?l?l.children:null:i,r,a),c&&l&&l.outlet&&l.outlet.isActivated&&a.canDeactivateChecks.push(new Kg(l.outlet.component,s))}else s&&zg(n,l,a),a.canActivateChecks.push(new Hg(r)),e(t,null,o.component?l?l.children:null:i,r,a)}(t,o[t.value.outlet],i,r.concat([t.value]),a),delete o[t.value.outlet]})),xp(o,(function(e,t){return zg(e,i.getContext(t),a)})),a}(a,i?i._root:null,r,[a.value]))});var n,i,r,a})),function(e,t){return function(n){return n.pipe(te((function(n){var i=n.targetSnapshot,r=n.currentSnapshot,a=n.guards,o=a.canActivateChecks,s=a.canDeactivateChecks;return 0===s.length&&0===o.length?Xh(Object.assign(Object.assign({},n),{guardsResult:!0})):function(e,t,n,i){return $(e).pipe(te((function(e){return function(e,t,n,i,r){var a=t&&t.routeConfig?t.routeConfig.canDeactivate:null;return a&&0!==a.length?Xh(a.map((function(a){var o,s=qg(a,t,r);if(function(e){return e&&Sg(e.canDeactivate)}(s))o=_p(s.canDeactivate(e,t,n,i));else{if(!Sg(s))throw new Error("Invalid CanDeactivate guard");o=_p(s(e,t,n,i))}return o.pipe(ip())}))).pipe(_g()):Xh(!0)}(e.component,e.route,n,t,i)})),ip((function(e){return!0!==e}),!0))}(s,i,r,e).pipe(te((function(n){return n&&"boolean"==typeof n?function(e,t,n,i){return $(t).pipe(ev((function(t){return $([Wg(t.route.parent,i),Qg(t.route,i),Yg(e,t.path,n),Jg(e,t.route,n)]).pipe(Lf(),ip((function(e){return!0!==e}),!0))})),ip((function(e){return!0!==e}),!0))}(i,o,e,t):Xh(n)})),B((function(e){return Object.assign(Object.assign({},n),{guardsResult:e})})))})))}}(t.ngModule.injector,(function(e){return t.triggerEvent(e)})),cf((function(e){if(Tg(e.guardsResult)){var n=Pp('Redirecting to "'.concat(t.serializeUrl(e.guardsResult),'"'));throw n.url=e.guardsResult,n}})),cf((function(e){var n=new vp(e.id,t.serializeUrl(e.extractedUrl),t.serializeUrl(e.urlAfterRedirects),e.targetSnapshot,!!e.guardsResult);t.triggerEvent(n)})),tv((function(e){if(!e.guardsResult){t.resetUrlToCurrentUrlTree();var n=new cp(e.id,t.serializeUrl(e.extractedUrl),"");return i.next(n),e.resolve(!1),!1}return!0})),om((function(e){if(e.guards.canActivateChecks.length)return Xh(e).pipe(cf((function(e){var n=new fp(e.id,t.serializeUrl(e.extractedUrl),t.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);t.triggerEvent(n)})),Wf((function(e){var n,r,a=!1;return Xh(e).pipe((n=t.paramsInheritanceStrategy,r=t.ngModule.injector,function(e){return e.pipe(te((function(e){var t=e.targetSnapshot,i=e.guards.canActivateChecks;if(!i.length)return Xh(e);var a=0;return $(i).pipe(ev((function(e){return function(e,t,n,i){return function(e,t,n,i){var r=Object.keys(e);if(0===r.length)return Xh({});var a={};return $(r).pipe(te((function(r){return function(e,t,n,i){var r=qg(e,t,i);return _p(r.resolve?r.resolve(t,n):r(t,n))}(e[r],t,n,i).pipe(cf((function(e){a[r]=e})))})),Rf(1),te((function(){return Object.keys(a).length===r.length?Xh(a):Uf})))}(e._resolve,e,t,i).pipe(B((function(t){return e._resolvedData=t,e.data=Object.assign(Object.assign({},e.data),lg(e,n).resolve),null})))}(e.route,t,n,r)})),cf((function(){return a++})),Rf(1),te((function(t){return a===i.length?Xh(e):Uf})))})))}),cf({next:function(){return a=!0},complete:function(){if(!a){var n=new cp(e.id,t.serializeUrl(e.extractedUrl),"At least one route resolver didn't emit any value.");i.next(n),e.resolve(!1)}}}))})),cf((function(e){var n=new pp(e.id,t.serializeUrl(e.extractedUrl),t.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);t.triggerEvent(n)})))})),om((function(e){var n=e.targetSnapshot,i=e.id,r=e.extractedUrl,a=e.rawUrl,o=e.extras,s=o.skipLocationChange,l=o.replaceUrl;return t.hooks.afterPreactivation(n,{navigationId:i,appliedUrlTree:r,rawUrlTree:a,skipLocationChange:!!s,replaceUrl:!!l})})),B((function(e){var i=function(e,t,i){var r=function e(t,i,r){if(r&&t.shouldReuseRoute(i.value,r.value.snapshot)){var a=r.value;a._futureSnapshot=i.value;var o=function(t,i,r){return i.children.map((function(i){var a,o=n(r.children);try{for(o.s();!(a=o.n()).done;){var s=a.value;if(t.shouldReuseRoute(s.value.snapshot,i.value))return e(t,i,s)}}catch(l){o.e(l)}finally{o.f()}return e(t,i)}))}(t,i,r);return new ig(a,o)}var s=t.retrieve(i.value);if(s){var l=s.route;return function e(t,n){if(t.value.routeConfig!==n.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(t.children.length!==n.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");n.value._futureSnapshot=t.value;for(var i=0;i<t.children.length;++i)e(t.children[i],n.children[i])}(i,l),l}var c,u=new sg(new Pf((c=i.value).url),new Pf(c.params),new Pf(c.queryParams),new Pf(c.fragment),new Pf(c.data),c.outlet,c.component,c),d=i.children.map((function(n){return e(t,n)}));return new ig(u,d)}(e,t._root,i?i._root:void 0);return new ag(r,t)}(t.routeReuseStrategy,e.targetSnapshot,e.currentRouterState);return Object.assign(Object.assign({},e),{targetRouterState:i})})),cf((function(e){t.currentUrlTree=e.urlAfterRedirects,t.rawUrlTree=t.urlHandlingStrategy.merge(t.currentUrlTree,e.rawUrl),t.routerState=e.targetRouterState,"deferred"===t.urlUpdateStrategy&&(e.extras.skipLocationChange||t.setBrowserUrl(t.rawUrlTree,!!e.extras.replaceUrl,e.id,e.extras.state),t.browserUrlTree=e.urlAfterRedirects)})),(a=t.rootContexts,o=t.routeReuseStrategy,s=function(e){return t.triggerEvent(e)},B((function(e){return new Dg(o,e.targetRouterState,e.currentRouterState,s).activate(a),e}))),cf({next:function(){l=!0},complete:function(){l=!0}}),(r=function(){if(!l&&!c){t.resetUrlToCurrentUrlTree();var n=new cp(e.id,t.serializeUrl(e.extractedUrl),"Navigation ID ".concat(e.id," is not equal to the current navigation id ").concat(t.navigationId));i.next(n),e.resolve(!1)}t.currentNavigation=null},function(e){return e.lift(new rp(r))}),af((function(n){if(c=!0,(s=n)&&s.ngNavigationCancelingError){var r=Tg(n.url);r||(t.navigated=!0,t.resetStateAndUrl(e.currentRouterState,e.currentUrlTree,e.rawUrl));var a=new cp(e.id,t.serializeUrl(e.extractedUrl),n.message);i.next(a),r?setTimeout((function(){var i=t.urlHandlingStrategy.merge(n.url,t.rawUrlTree);return t.scheduleNavigation(i,"imperative",null,{skipLocationChange:e.extras.skipLocationChange,replaceUrl:"eager"===t.urlUpdateStrategy},{resolve:e.resolve,reject:e.reject,promise:e.promise})}),0):e.resolve(!1)}else{t.resetStateAndUrl(e.currentRouterState,e.currentUrlTree,e.rawUrl);var o=new up(e.id,t.serializeUrl(e.extractedUrl),n);i.next(o);try{e.resolve(t.errorHandler(n))}catch(l){e.reject(l)}}var s;return Uf})))})))}},{key:"resetRootComponentType",value:function(e){this.rootComponentType=e,this.routerState.root.component=this.rootComponentType}},{key:"getTransition",value:function(){var e=this.transitions.value;return e.urlAfterRedirects=this.browserUrlTree,e}},{key:"setTransition",value:function(e){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),e))}},{key:"initialNavigation",value:function(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}},{key:"setUpLocationChangeListener",value:function(){var e=this;this.locationSubscription||(this.locationSubscription=this.location.subscribe((function(t){var n=e.extractLocationChangeInfoFromEvent(t);e.shouldScheduleNavigation(e.lastLocationChangeInfo,n)&&setTimeout((function(){var t=n.source,i=n.state,r=n.urlTree,a={replaceUrl:!0};if(i){var o=Object.assign({},i);delete o.navigationId,0!==Object.keys(o).length&&(a.state=o)}e.scheduleNavigation(r,t,i,a)}),0),e.lastLocationChangeInfo=n})))}},{key:"extractLocationChangeInfoFromEvent",value:function(e){var t;return{source:"popstate"===e.type?"popstate":"hashchange",urlTree:this.parseUrl(e.url),state:(null===(t=e.state)||void 0===t?void 0:t.navigationId)?e.state:null,transitionId:this.getTransition().id}}},{key:"shouldScheduleNavigation",value:function(e,t){if(!e)return!0;var n=t.urlTree.toString()===e.urlTree.toString();return!(t.transitionId===e.transitionId&&n&&("hashchange"===t.source&&"popstate"===e.source||"popstate"===t.source&&"hashchange"===e.source))}},{key:"url",get:function(){return this.serializeUrl(this.currentUrlTree)}},{key:"getCurrentNavigation",value:function(){return this.currentNavigation}},{key:"triggerEvent",value:function(e){this.events.next(e)}},{key:"resetConfig",value:function(e){um(e),this.config=e.map(vm),this.navigated=!1,this.lastSuccessfulId=-1}},{key:"ngOnDestroy",value:function(){this.dispose()}},{key:"dispose",value:function(){this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0)}},{key:"createUrlTree",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.relativeTo,r=t.queryParams,a=t.fragment,o=t.preserveQueryParams,s=t.queryParamsHandling,l=t.preserveFragment;Pi()&&o&&console&&console.warn&&console.warn("preserveQueryParams is deprecated, use queryParamsHandling instead.");var c=n||this.routerState.root,u=l?this.currentUrlTree.fragment:a,d=null;if(s)switch(s){case"merge":d=Object.assign(Object.assign({},this.currentUrlTree.queryParams),r);break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=r||null}else d=o?this.currentUrlTree.queryParams:r||null;return null!==d&&(d=this.removeEmptyProps(d)),function(e,t,n,r,a){if(0===n.length)return mg(t.root,t.root,t,r,a);var o=function(e){if("string"==typeof e[0]&&1===e.length&&"/"===e[0])return new bg(!0,0,e);var t=0,n=!1,r=e.reduce((function(e,r,a){if("object"==typeof r&&null!=r){if(r.outlets){var o={};return xp(r.outlets,(function(e,t){o[t]="string"==typeof e?e.split("/"):e})),[].concat(i(e),[{outlets:o}])}if(r.segmentPath)return[].concat(i(e),[r.segmentPath])}return"string"!=typeof r?[].concat(i(e),[r]):0===a?(r.split("/").forEach((function(i,r){0==r&&"."===i||(0==r&&""===i?n=!0:".."===i?t++:""!=i&&e.push(i))})),e):[].concat(i(e),[r])}),[]);return new bg(n,t,r)}(n);if(o.toRoot())return mg(t.root,new Ep([],{}),t,r,a);var s=function(e,t,n){if(e.isAbsolute)return new yg(t.root,!0,0);if(-1===n.snapshot._lastPathIndex){var i=n.snapshot._urlSegment;return new yg(i,i===t.root,0)}var r=pg(e.commands[0])?0:1;return function(e,t,n){for(var i=e,r=t,a=n;a>r;){if(a-=r,!(i=i.parent))throw new Error("Invalid number of '../'");r=i.segments.length}return new yg(i,!1,r-a)}(n.snapshot._urlSegment,n.snapshot._lastPathIndex+r,e.numberOfDoubleDots)}(o,t,e),l=s.processChildren?Cg(s.segmentGroup,s.index,o.commands):kg(s.segmentGroup,s.index,o.commands);return mg(s.segmentGroup,l,t,r,a)}(c,this.currentUrlTree,e,d,u)}},{key:"navigateByUrl",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{skipLocationChange:!1};Pi()&&this.isNgZoneEnabled&&!yl.isInAngularZone()&&this.console.warn("Navigation triggered outside Angular zone, did you forget to call 'ngZone.run()'?");var n=Tg(e)?e:this.parseUrl(e),i=this.urlHandlingStrategy.merge(n,this.rawUrlTree);return this.scheduleNavigation(i,"imperative",null,t)}},{key:"navigate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{skipLocationChange:!1};return function(e){for(var t=0;t<e.length;t++){var n=e[t];if(null==n)throw new Error("The requested path contains ".concat(n," segment at index ").concat(t))}}(e),this.navigateByUrl(this.createUrlTree(e,t),t)}},{key:"serializeUrl",value:function(e){return this.urlSerializer.serialize(e)}},{key:"parseUrl",value:function(e){var t;try{t=this.urlSerializer.parse(e)}catch(n){t=this.malformedUriErrorHandler(n,this.urlSerializer,e)}return t}},{key:"isActive",value:function(e,t){if(Tg(e))return Up(this.currentUrlTree,e,t);var n=this.parseUrl(e);return Up(this.currentUrlTree,n,t)}},{key:"removeEmptyProps",value:function(e){return Object.keys(e).reduce((function(t,n){var i=e[n];return null!=i&&(t[n]=i),t}),{})}},{key:"processNavigations",value:function(){var e=this;this.navigations.subscribe((function(t){e.navigated=!0,e.lastSuccessfulId=t.id,e.events.next(new lp(t.id,e.serializeUrl(t.extractedUrl),e.serializeUrl(e.currentUrlTree))),e.lastSuccessfulNavigation=e.currentNavigation,e.currentNavigation=null,t.resolve(!0)}),(function(t){e.console.warn("Unhandled Navigation Error: ")}))}},{key:"scheduleNavigation",value:function(e,t,n,i,r){var a,o,s,l=this.getTransition(),c="imperative"!==t&&"imperative"===(null==l?void 0:l.source),u=(this.lastSuccessfulId===l.id||this.currentNavigation?l.rawUrl:l.urlAfterRedirects).toString()===e.toString();if(c&&u)return Promise.resolve(!0);r?(a=r.resolve,o=r.reject,s=r.promise):s=new Promise((function(e,t){a=e,o=t}));var d=++this.navigationId;return this.setTransition({id:d,source:t,restoredState:n,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:e,extras:i,resolve:a,reject:o,promise:s,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),s.catch((function(e){return Promise.reject(e)}))}},{key:"setBrowserUrl",value:function(e,t,n,i){var r=this.urlSerializer.serialize(e);i=i||{},this.location.isCurrentPathEqualTo(r)||t?this.location.replaceState(r,"",Object.assign(Object.assign({},i),{navigationId:n})):this.location.go(r,"",Object.assign(Object.assign({},i),{navigationId:n}))}},{key:"resetStateAndUrl",value:function(e,t,n){this.routerState=e,this.currentUrlTree=t,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n),this.resetUrlToCurrentUrlTree()}},{key:"resetUrlToCurrentUrlTree",value:function(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",{navigationId:this.lastSuccessfulId})}}]),e}()).\u0275fac=function(e){return new(e||wm)(ot(da),ot(jp),ot(mm),ot(mc),ot(Da),ot(Nl),ot(gl),ot(void 0))},wm.\u0275prov=Ve({token:wm,factory:wm.\u0275fac}),wm),Pm=((Vm=function(){function e(t,n,i){var r=this;p(this,e),this.router=t,this.route=n,this.locationStrategy=i,this.commands=[],this.onChanges=new j,this.subscription=t.events.subscribe((function(e){e instanceof lp&&r.updateTargetUrlAndHref()}))}return m(e,[{key:"routerLink",set:function(e){this.commands=null!=e?Array.isArray(e)?e:[e]:[]}},{key:"preserveQueryParams",set:function(e){Pi()&&console&&console.warn&&console.warn("preserveQueryParams is deprecated, use queryParamsHandling instead."),this.preserve=e}},{key:"ngOnChanges",value:function(e){this.updateTargetUrlAndHref(),this.onChanges.next(this)}},{key:"ngOnDestroy",value:function(){this.subscription.unsubscribe()}},{key:"onClick",value:function(e,t,n,i,r){if(0!==e||t||n||i||r)return!0;if("string"==typeof this.target&&"_self"!=this.target)return!0;var a={skipLocationChange:Dm(this.skipLocationChange),replaceUrl:Dm(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,a),!1}},{key:"updateTargetUrlAndHref",value:function(){this.href=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree))}},{key:"urlTree",get:function(){return this.router.createUrlTree(this.commands,{relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,preserveQueryParams:Dm(this.preserve),queryParamsHandling:this.queryParamsHandling,preserveFragment:Dm(this.preserveFragment)})}}]),e}()).\u0275fac=function(e){return new(e||Vm)(Za(Am),Za(sg),Za(cc))},Vm.\u0275dir=St({type:Vm,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(e,t){1&e&&uo("click",(function(e){return t.onClick(e.button,e.ctrlKey,e.shiftKey,e.altKey,e.metaKey)})),2&e&&(Eo("href",t.href,Si),za("target",t.target))},inputs:{routerLink:"routerLink",preserveQueryParams:"preserveQueryParams",target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state"},features:[Qt]}),Vm);function Dm(e){return""===e||!!e}var Mm,Im,Sm,Tm=((Mm=function(){function e(t,n,i,r,a){p(this,e),this.parentContexts=t,this.location=n,this.resolver=i,this.changeDetector=a,this.activated=null,this._activatedRoute=null,this.activateEvents=new Ys,this.deactivateEvents=new Ys,this.name=r||"primary",t.onChildOutletCreated(this.name,this)}return m(e,[{key:"ngOnDestroy",value:function(){this.parentContexts.onChildOutletDestroyed(this.name)}},{key:"ngOnInit",value:function(){if(!this.activated){var e=this.parentContexts.getContext(this.name);e&&e.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.resolver||null))}}},{key:"isActivated",get:function(){return!!this.activated}},{key:"component",get:function(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}},{key:"activatedRoute",get:function(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}},{key:"activatedRouteData",get:function(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}},{key:"detach",value:function(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();var e=this.activated;return this.activated=null,this._activatedRoute=null,e}},{key:"attach",value:function(e,t){this.activated=e,this._activatedRoute=t,this.location.insert(e.hostView)}},{key:"deactivate",value:function(){if(this.activated){var e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}},{key:"activateWith",value:function(e,t){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=e;var n=(t=t||this.resolver).resolveComponentFactory(e._futureSnapshot.routeConfig.component),i=this.parentContexts.getOrCreateContext(this.name).children,r=new xm(e,i,this.location.injector);this.activated=this.location.createComponent(n,this.location.length,r),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}]),e}()).\u0275fac=function(e){return new(e||Mm)(Za(mm),Za(Ps),Za(Xo),function(e,t){var n=e.attrs;if(n)for(var i=n.length,r=0;r<i;){var a=n[r];if(Jn(a))break;if(0===a)r+=2;else if("number"==typeof a)for(r++;r<i&&"string"==typeof n[r];)r++;else{if("name"===a)return n[r+1];r+=2}}return null}(bn()),Za(ca))},Mm.\u0275dir=St({type:Mm,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),Mm),xm=function(){function e(t,n,i){p(this,e),this.route=t,this.childContexts=n,this.parent=i}return m(e,[{key:"get",value:function(e,t){return e===sg?this.route:e===mm?this.childContexts:this.parent.get(e,t)}}]),e}(),_m=function e(){p(this,e)},Um=function(){function e(){p(this,e)}return m(e,[{key:"preload",value:function(e,t){return Xh(null)}}]),e}(),Om=((Sm=function(){function e(t,n,i,r,a){p(this,e),this.router=t,this.injector=r,this.preloadingStrategy=a,this.loader=new pm(n,i,(function(e){return t.triggerEvent(new gp(e))}),(function(e){return t.triggerEvent(new mp(e))}))}return m(e,[{key:"setUpPreloading",value:function(){var e=this;this.subscription=this.router.events.pipe(tv((function(e){return e instanceof lp})),ev((function(){return e.preload()}))).subscribe((function(){}))}},{key:"preload",value:function(){var e=this.injector.get(ut);return this.processRoutes(e,this.router.config)}},{key:"ngOnDestroy",value:function(){this.subscription&&this.subscription.unsubscribe()}},{key:"processRoutes",value:function(e,t){var i,r=[],a=n(t);try{for(a.s();!(i=a.n()).done;){var o=i.value;if(o.loadChildren&&!o.canLoad&&o._loadedConfig){var s=o._loadedConfig;r.push(this.processRoutes(s.module,s.routes))}else o.loadChildren&&!o.canLoad?r.push(this.preloadConfig(e,o)):o.children&&r.push(this.processRoutes(e,o.children))}}catch(l){a.e(l)}finally{a.f()}return $(r).pipe(re(),B((function(e){})))}},{key:"preloadConfig",value:function(e,t){var n=this;return this.preloadingStrategy.preload(t,(function(){return n.loader.load(e.injector,t).pipe(te((function(e){return t._loadedConfig=e,n.processRoutes(e.module,e.routes)})))}))}}]),e}()).\u0275fac=function(e){return new(e||Sm)(ot(Am),ot(Nl),ot(gl),ot(Da),ot(_m))},Sm.\u0275prov=Ve({token:Sm,factory:Sm.\u0275fac}),Sm),Em=((Im=function(){function e(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};p(this,e),this.router=t,this.viewportScroller=n,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}return m(e,[{key:"init",value:function(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}},{key:"createScrollEvents",value:function(){var e=this;return this.router.events.subscribe((function(t){t instanceof sp?(e.store[e.lastId]=e.viewportScroller.getScrollPosition(),e.lastSource=t.navigationTrigger,e.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof lp&&(e.lastId=t.id,e.scheduleScrollEvent(t,e.router.parseUrl(t.urlAfterRedirects).fragment))}))}},{key:"consumeScrollEvents",value:function(){var e=this;return this.router.events.subscribe((function(t){t instanceof Vp&&(t.position?"top"===e.options.scrollPositionRestoration?e.viewportScroller.scrollToPosition([0,0]):"enabled"===e.options.scrollPositionRestoration&&e.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===e.options.anchorScrolling?e.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==e.options.scrollPositionRestoration&&e.viewportScroller.scrollToPosition([0,0]))}))}},{key:"scheduleScrollEvent",value:function(e,t){this.router.triggerEvent(new Vp(e,"popstate"===this.lastSource?this.store[this.restoredId]:null,t))}},{key:"ngOnDestroy",value:function(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}]),e}()).\u0275fac=function(e){return new(e||Im)(ot(Am),ot(Au),ot(void 0))},Im.\u0275prov=Ve({token:Im,factory:Im.\u0275fac}),Im),Lm=new $e("ROUTER_CONFIGURATION"),Gm=new $e("ROUTER_FORROOT_GUARD"),Rm=[mc,{provide:jp,useClass:Np},{provide:Am,useFactory:function(e,t,n,i,r,a,o){var s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:{},l=arguments.length>8?arguments[8]:void 0,c=arguments.length>9?arguments[9]:void 0,u=new Am(null,e,t,n,i,r,a,Sp(o));if(l&&(u.urlHandlingStrategy=l),c&&(u.routeReuseStrategy=c),s.errorHandler&&(u.errorHandler=s.errorHandler),s.malformedUriErrorHandler&&(u.malformedUriErrorHandler=s.malformedUriErrorHandler),s.enableTracing){var d=Jl();u.events.subscribe((function(e){d.logGroup("Router Event: "+e.constructor.name),d.log(e.toString()),d.log(e),d.logGroupEnd()}))}return s.onSameUrlNavigation&&(u.onSameUrlNavigation=s.onSameUrlNavigation),s.paramsInheritanceStrategy&&(u.paramsInheritanceStrategy=s.paramsInheritanceStrategy),s.urlUpdateStrategy&&(u.urlUpdateStrategy=s.urlUpdateStrategy),s.relativeLinkResolution&&(u.relativeLinkResolution=s.relativeLinkResolution),u},deps:[jp,mm,mc,Da,Nl,gl,fm,Lm,[function(){return function e(){p(this,e)}}(),new ge],[function(){return function e(){p(this,e)}}(),new ge]]},mm,{provide:sg,useFactory:function(e){return e.routerState.root},deps:[Am]},{provide:Nl,useClass:Hl},Om,Um,function(){function e(){p(this,e)}return m(e,[{key:"preload",value:function(e,t){return t().pipe(af((function(){return Xh(null)})))}}]),e}(),{provide:Lm,useValue:{enableTracing:!1}}];function jm(){return new _l("Router",Am)}var Nm,Fm=((Nm=function(){function e(t,n){p(this,e)}return m(e,null,[{key:"forRoot",value:function(t,n){return{ngModule:e,providers:[Rm,qm(t),{provide:Gm,useFactory:Km,deps:[[Am,new ge,new be]]},{provide:Lm,useValue:n||{}},{provide:cc,useFactory:Hm,deps:[Zl,[new pe(fc),new ge],Lm]},{provide:Em,useFactory:Bm,deps:[Am,Au,Lm]},{provide:_m,useExisting:n&&n.preloadingStrategy?n.preloadingStrategy:Um},{provide:_l,multi:!0,useFactory:jm},[Qm,{provide:Zs,multi:!0,useFactory:Wm,deps:[Qm]},{provide:$m,useFactory:Jm,deps:[Qm]},{provide:al,multi:!0,useExisting:$m}]]}}},{key:"forChild",value:function(t){return{ngModule:e,providers:[qm(t)]}}}]),e}()).\u0275mod=Mt({type:Nm}),Nm.\u0275inj=we({factory:function(e){return new(e||Nm)(ot(Gm,8),ot(Am,8))}}),Nm);function Bm(e,t,n){return n.scrollOffset&&t.setOffset(n.scrollOffset),new Em(e,t,n)}function Hm(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return n.useHash?new gc(e,t):new pc(e,t)}function Km(e){if(e)throw new Error("RouterModule.forRoot() called twice. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function qm(e){return[{provide:Ma,multi:!0,useValue:e},{provide:fm,multi:!0,useValue:e}]}var zm,Qm=((zm=function(){function e(t){p(this,e),this.injector=t,this.initNavigation=!1,this.resultOfPreactivationDone=new j}return m(e,[{key:"appInitializer",value:function(){var e=this;return this.injector.get(tc,Promise.resolve(null)).then((function(){var t=null,n=new Promise((function(e){return t=e})),i=e.injector.get(Am),r=e.injector.get(Lm);if(e.isLegacyDisabled(r)||e.isLegacyEnabled(r))t(!0);else if("disabled"===r.initialNavigation)i.setUpLocationChangeListener(),t(!0);else{if("enabled"!==r.initialNavigation)throw new Error("Invalid initialNavigation options: '".concat(r.initialNavigation,"'"));i.hooks.afterPreactivation=function(){return e.initNavigation?Xh(null):(e.initNavigation=!0,t(!0),e.resultOfPreactivationDone)},i.initialNavigation()}return n}))}},{key:"bootstrapListener",value:function(e){var t=this.injector.get(Lm),n=this.injector.get(Om),i=this.injector.get(Em),r=this.injector.get(Am),a=this.injector.get(Rl);e===a.components[0]&&(this.isLegacyEnabled(t)?r.initialNavigation():this.isLegacyDisabled(t)&&r.setUpLocationChangeListener(),n.setUpPreloading(),i.init(),r.resetRootComponentType(a.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}},{key:"isLegacyEnabled",value:function(e){return"legacy_enabled"===e.initialNavigation||!0===e.initialNavigation||void 0===e.initialNavigation}},{key:"isLegacyDisabled",value:function(e){return"legacy_disabled"===e.initialNavigation||!1===e.initialNavigation}}]),e}()).\u0275fac=function(e){return new(e||zm)(ot(Da))},zm.\u0275prov=Ve({token:zm,factory:zm.\u0275fac}),zm);function Wm(e){return e.appInitializer.bind(e)}function Jm(e){return e.bootstrapListener.bind(e)}var Ym,$m=new $e("Router Initializer"),Zm=((Ym=function(){function e(t){var n=this;p(this,e),this.router=t,this.subject=new j,this.keepAfterNavigationChange=!1,t.events.subscribe((function(e){e instanceof sp&&(n.keepAfterNavigationChange?n.keepAfterNavigationChange=!1:n.subject.next())}))}return m(e,[{key:"clear",value:function(){this.subject.next()}},{key:"success",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.keepAfterNavigationChange=t,this.subject.next({type:"success",text:e})}},{key:"error",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e||(e="Unknown Error reaching the Server"),this.keepAfterNavigationChange=t,this.subject.next({type:"error",text:e})}},{key:"getMessage",value:function(){return this.subject.asObservable()}}]),e}()).\u0275fac=function(e){return new(e||Ym)(ot(Am))},Ym.\u0275prov=Ve({token:Ym,factory:Ym.\u0275fac}),Ym);function Xm(e){return!!e&&(e instanceof U||"function"==typeof e.lift&&"function"==typeof e.subscribe)}var eb,tb=function(e){l(n,e);var t=u(n);function n(e,i){var r;return p(this,n),(r=t.call(this,e,i)).scheduler=e,r.work=i,r.pending=!1,r}return m(n,[{key:"schedule",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(this.closed)return this;this.state=e;var n=this.id,i=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(i,n,t)),this.pending=!0,this.delay=t,this.id=this.id||this.requestAsyncId(i,this.id,t),this}},{key:"requestAsyncId",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return setInterval(e.flush.bind(e,this),n)}},{key:"recycleAsyncId",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(null!==n&&this.delay===n&&!1===this.pending)return t;clearInterval(t)}},{key:"execute",value:function(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var n=this._execute(e,t);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}},{key:"_execute",value:function(e,t){var n=!1,i=void 0;try{this.work(e)}catch(r){n=!0,i=!!r&&r||new Error(r)}if(n)return this.unsubscribe(),i}},{key:"_unsubscribe",value:function(){var e=this.id,t=this.scheduler,n=t.actions,i=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==i&&n.splice(i,1),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null}}]),n}(function(e){l(n,e);var t=u(n);function n(e,i){return p(this,n),t.call(this)}return m(n,[{key:"schedule",value:function(e){return this}}]),n}(P)),nb=function(e){l(n,e);var t=u(n);function n(e,i){var r;return p(this,n),(r=t.call(this,e,i)).scheduler=e,r.work=i,r}return m(n,[{key:"schedule",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t>0?s(f(n.prototype),"schedule",this).call(this,e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}},{key:"execute",value:function(e,t){return t>0||this.closed?s(f(n.prototype),"execute",this).call(this,e,t):this._execute(e,t)}},{key:"requestAsyncId",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return null!==i&&i>0||null===i&&this.delay>0?s(f(n.prototype),"requestAsyncId",this).call(this,e,t,i):e.flush(this)}}]),n}(tb),ib=function(){var e=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.now;p(this,e),this.SchedulerAction=t,this.now=n}return m(e,[{key:"schedule",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0;return new this.SchedulerAction(this,e).schedule(n,t)}}]),e}();return e.now=function(){return Date.now()},e}(),rb=function(e){l(n,e);var t=u(n);function n(e){var i,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ib.now;return p(this,n),(i=t.call(this,e,(function(){return n.delegate&&n.delegate!==h(i)?n.delegate.now():r()}))).actions=[],i.active=!1,i.scheduled=void 0,i}return m(n,[{key:"schedule",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2?arguments[2]:void 0;return n.delegate&&n.delegate!==this?n.delegate.schedule(e,t,i):s(f(n.prototype),"schedule",this).call(this,e,t,i)}},{key:"flush",value:function(e){var t=this.actions;if(this.active)t.push(e);else{var n;this.active=!0;do{if(n=e.execute(e.state,e.delay))break}while(e=t.shift());if(this.active=!1,n){for(;e=t.shift();)e.unsubscribe();throw n}}}}]),n}(ib),ab=new(function(e){l(n,e);var t=u(n);function n(){return p(this,n),t.apply(this,arguments)}return n}(rb))(nb),ob=((eb=function(){function e(t,n,i){p(this,e),this.kind=t,this.value=n,this.error=i,this.hasValue="N"===t}return m(e,[{key:"observe",value:function(e){switch(this.kind){case"N":return e.next&&e.next(this.value);case"E":return e.error&&e.error(this.error);case"C":return e.complete&&e.complete()}}},{key:"do",value:function(e,t,n){switch(this.kind){case"N":return e&&e(this.value);case"E":return t&&t(this.error);case"C":return n&&n()}}},{key:"accept",value:function(e,t,n){return e&&"function"==typeof e.next?this.observe(e):this.do(e,t,n)}},{key:"toObservable",value:function(){switch(this.kind){case"N":return Xh(this.value);case"E":return nf(this.error);case"C":return Of()}throw new Error("unexpected notification kind value")}}],[{key:"createNext",value:function(t){return void 0!==t?new e("N",t):e.undefinedValueNotification}},{key:"createError",value:function(t){return new e("E",void 0,t)}},{key:"createComplete",value:function(){return e.completeNotification}}]),e}()).completeNotification=new eb("C"),eb.undefinedValueNotification=new eb("N",void 0),eb),sb=function(e){l(n,e);var t=u(n);function n(e,i){var r,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return p(this,n),(r=t.call(this,e)).scheduler=i,r.delay=a,r}return m(n,[{key:"scheduleMessage",value:function(e){this.destination.add(this.scheduler.schedule(n.dispatch,this.delay,new lb(e,this.destination)))}},{key:"_next",value:function(e){this.scheduleMessage(ob.createNext(e))}},{key:"_error",value:function(e){this.scheduleMessage(ob.createError(e)),this.unsubscribe()}},{key:"_complete",value:function(){this.scheduleMessage(ob.createComplete()),this.unsubscribe()}}],[{key:"dispatch",value:function(e){var t=e.notification,n=e.destination;t.observe(n),this.unsubscribe()}}]),n}(I),lb=function e(t,n){p(this,e),this.notification=t,this.destination=n},cb=function(e){l(n,e);var t=u(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Number.POSITIVE_INFINITY,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.POSITIVE_INFINITY,a=arguments.length>2?arguments[2]:void 0;return p(this,n),(e=t.call(this)).scheduler=a,e._events=[],e._infiniteTimeWindow=!1,e._bufferSize=i<1?1:i,e._windowTime=r<1?1:r,r===Number.POSITIVE_INFINITY?(e._infiniteTimeWindow=!0,e.next=e.nextInfiniteTimeWindow):e.next=e.nextTimeWindow,e}return m(n,[{key:"nextInfiniteTimeWindow",value:function(e){if(!this.isStopped){var t=this._events;t.push(e),t.length>this._bufferSize&&t.shift()}s(f(n.prototype),"next",this).call(this,e)}},{key:"nextTimeWindow",value:function(e){this.isStopped||(this._events.push(new ub(this._getNow(),e)),this._trimBufferThenGetEvents()),s(f(n.prototype),"next",this).call(this,e)}},{key:"_subscribe",value:function(e){var t,n=this._infiniteTimeWindow,i=n?this._events:this._trimBufferThenGetEvents(),r=this.scheduler,a=i.length;if(this.closed)throw new L;if(this.isStopped||this.hasError?t=P.EMPTY:(this.observers.push(e),t=new G(this,e)),r&&e.add(e=new sb(e,r)),n)for(var o=0;o<a&&!e.closed;o++)e.next(i[o]);else for(var s=0;s<a&&!e.closed;s++)e.next(i[s].value);return this.hasError?e.error(this.thrownError):this.isStopped&&e.complete(),t}},{key:"_getNow",value:function(){return(this.scheduler||ab).now()}},{key:"_trimBufferThenGetEvents",value:function(){for(var e=this._getNow(),t=this._bufferSize,n=this._windowTime,i=this._events,r=i.length,a=0;a<r&&!(e-i[a].time<n);)a++;return r>t&&(a=Math.max(a,r-t)),a>0&&i.splice(0,a),i}}]),n}(j),ub=function e(t,n){p(this,e),this.time=t,this.value=n};function db(e,t,n){var i;return i=e&&"object"==typeof e?e:{bufferSize:e,windowTime:t,refCount:!1,scheduler:n},function(e){return e.lift(function(e){var t,n,i=e.bufferSize,r=void 0===i?Number.POSITIVE_INFINITY:i,a=e.windowTime,o=void 0===a?Number.POSITIVE_INFINITY:a,s=e.refCount,l=e.scheduler,c=0,u=!1,d=!1;return function(e){var i;c++,!t||u?(u=!1,t=new cb(r,o,l),i=t.subscribe(this),n=e.subscribe({next:function(e){t.next(e)},error:function(e){u=!0,t.error(e)},complete:function(){d=!0,n=void 0,t.complete()}}),d&&(n=void 0)):i=t.subscribe(this),this.add((function(){c--,i.unsubscribe(),i=void 0,n&&!d&&s&&0===c&&(n.unsubscribe(),n=void 0,t=void 0)}))}}(i))}}var hb,vb,fb=function e(){p(this,e)},pb=((hb=function(e){l(n,e);var t=u(n);function n(){return p(this,n),t.apply(this,arguments)}return m(n,[{key:"getTranslation",value:function(e){return Xh({})}}]),n}(fb)).\u0275fac=function(e){return gb(e||hb)},hb.\u0275prov=Ve({token:hb,factory:hb.\u0275fac}),hb),gb=bi(pb),mb=function e(){p(this,e)},bb=((vb=function(){function e(){p(this,e)}return m(e,[{key:"handle",value:function(e){return e.key}}]),e}()).\u0275fac=function(e){return new(e||vb)},vb.\u0275prov=Ve({token:vb,factory:vb.\u0275fac}),vb);function yb(e,t){if(e===t)return!0;if(null===e||null===t)return!1;if(e!=e&&t!=t)return!0;var n,i,r,a=typeof e;if(a==typeof t&&"object"==a){if(!Array.isArray(e)){if(Array.isArray(t))return!1;for(i in r=Object.create(null),e){if(!yb(e[i],t[i]))return!1;r[i]=!0}for(i in t)if(!(i in r)&&void 0!==t[i])return!1;return!0}if(!Array.isArray(t))return!1;if((n=e.length)==t.length){for(i=0;i<n;i++)if(!yb(e[i],t[i]))return!1;return!0}}return!1}function kb(e){return null!=e}function Cb(e){return e&&"object"==typeof e&&!Array.isArray(e)}var Vb,wb,Ab,Pb,Db,Mb=function e(){p(this,e)},Ib=((Vb=function(e){l(n,e);var t=u(n);function n(){var e;return p(this,n),(e=t.apply(this,arguments)).templateMatcher=/{{\s?([^{}\s]*)\s?}}/g,e}return m(n,[{key:"interpolate",value:function(e,t){return"string"==typeof e?this.interpolateString(e,t):"function"==typeof e?this.interpolateFunction(e,t):e}},{key:"getValue",value:function(e,t){var n="string"==typeof t?t.split("."):[t];t="";do{t+=n.shift(),!kb(e)||!kb(e[t])||"object"!=typeof e[t]&&n.length?n.length?t+=".":e=void 0:(e=e[t],t="")}while(n.length);return e}},{key:"interpolateFunction",value:function(e,t){return e(t)}},{key:"interpolateString",value:function(e,t){var n=this;return t?e.replace(this.templateMatcher,(function(e,i){var r=n.getValue(t,i);return kb(r)?r:e})):e}}]),n}(Mb)).\u0275fac=function(e){return Sb(e||Vb)},Vb.\u0275prov=Ve({token:Vb,factory:Vb.\u0275fac}),Vb),Sb=bi(Ib),Tb=function e(){p(this,e)},xb=((wb=function(e){l(n,e);var t=u(n);function n(){return p(this,n),t.apply(this,arguments)}return m(n,[{key:"compile",value:function(e,t){return e}},{key:"compileTranslations",value:function(e,t){return e}}]),n}(Tb)).\u0275fac=function(e){return _b(e||wb)},wb.\u0275prov=Ve({token:wb,factory:wb.\u0275fac}),wb),_b=bi(xb),Ub=function e(){p(this,e),this.currentLang=this.defaultLang,this.translations={},this.langs=[],this.onTranslationChange=new Ys,this.onLangChange=new Ys,this.onDefaultLangChange=new Ys},Ob=new $e("USE_STORE"),Eb=new $e("USE_DEFAULT_LANG"),Lb=new $e("DEFAULT_LANGUAGE"),Gb=new $e("USE_EXTEND"),Rb=((Db=function(){function t(e,n,i,r,a){var o=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],s=arguments.length>6&&void 0!==arguments[6]&&arguments[6],l=arguments.length>7&&void 0!==arguments[7]&&arguments[7],c=arguments.length>8?arguments[8]:void 0;p(this,t),this.store=e,this.currentLoader=n,this.compiler=i,this.parser=r,this.missingTranslationHandler=a,this.useDefaultLang=o,this.isolate=s,this.extend=l,this.pending=!1,this._onTranslationChange=new Ys,this._onLangChange=new Ys,this._onDefaultLangChange=new Ys,this._langs=[],this._translations={},this._translationRequests={},c&&this.setDefaultLang(c)}return m(t,[{key:"onTranslationChange",get:function(){return this.isolate?this._onTranslationChange:this.store.onTranslationChange}},{key:"onLangChange",get:function(){return this.isolate?this._onLangChange:this.store.onLangChange}},{key:"onDefaultLangChange",get:function(){return this.isolate?this._onDefaultLangChange:this.store.onDefaultLangChange}},{key:"defaultLang",get:function(){return this.isolate?this._defaultLang:this.store.defaultLang},set:function(e){this.isolate?this._defaultLang=e:this.store.defaultLang=e}},{key:"currentLang",get:function(){return this.isolate?this._currentLang:this.store.currentLang},set:function(e){this.isolate?this._currentLang=e:this.store.currentLang=e}},{key:"langs",get:function(){return this.isolate?this._langs:this.store.langs},set:function(e){this.isolate?this._langs=e:this.store.langs=e}},{key:"translations",get:function(){return this.isolate?this._translations:this.store.translations},set:function(e){this.isolate?this._translations=e:this.store.translations=e}},{key:"setDefaultLang",value:function(e){var t=this;if(e!==this.defaultLang){var n=this.retrieveTranslations(e);void 0!==n?(null==this.defaultLang&&(this.defaultLang=e),n.pipe($f(1)).subscribe((function(n){t.changeDefaultLang(e)}))):this.changeDefaultLang(e)}}},{key:"getDefaultLang",value:function(){return this.defaultLang}},{key:"use",value:function(e){var t=this;if(e===this.currentLang)return Xh(this.translations[e]);var n=this.retrieveTranslations(e);return void 0!==n?(this.currentLang||(this.currentLang=e),n.pipe($f(1)).subscribe((function(n){t.changeLang(e)})),n):(this.changeLang(e),Xh(this.translations[e]))}},{key:"retrieveTranslations",value:function(e){var t;return(void 0===this.translations[e]||this.extend)&&(this._translationRequests[e]=this._translationRequests[e]||this.getTranslation(e),t=this._translationRequests[e]),t}},{key:"getTranslation",value:function(e){var t=this;this.pending=!0;var n=this.currentLoader.getTranslation(e).pipe(db(1),$f(1));return this.loadingTranslations=n.pipe(B((function(n){return t.compiler.compileTranslations(n,e)})),db(1),$f(1)),this.loadingTranslations.subscribe({next:function(n){t.translations[e]=t.extend&&t.translations[e]?Object.assign(Object.assign({},n),t.translations[e]):n,t.updateLangs(),t.pending=!1},error:function(e){t.pending=!1}}),n}},{key:"setTranslation",value:function(t,n){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];n=this.compiler.compileTranslations(n,t),this.translations[t]=(i||this.extend)&&this.translations[t]?function t(n,i){var r=Object.assign({},n);return Cb(n)&&Cb(i)&&Object.keys(i).forEach((function(a){Cb(i[a])&&a in n?r[a]=t(n[a],i[a]):Object.assign(r,e({},a,i[a]))})),r}(this.translations[t],n):n,this.updateLangs(),this.onTranslationChange.emit({lang:t,translations:this.translations[t]})}},{key:"getLangs",value:function(){return this.langs}},{key:"addLangs",value:function(e){var t=this;e.forEach((function(e){-1===t.langs.indexOf(e)&&t.langs.push(e)}))}},{key:"updateLangs",value:function(){this.addLangs(Object.keys(this.translations))}},{key:"getParsedResult",value:function(e,t,i){var r;if(t instanceof Array){var a,o={},s=!1,l=n(t);try{for(l.s();!(a=l.n()).done;){var c=a.value;o[c]=this.getParsedResult(e,c,i),Xm(o[c])&&(s=!0)}}catch(d){l.e(d)}finally{l.f()}return s?dd(t.map((function(e){return Xm(o[e])?o[e]:Xh(o[e])}))).pipe(B((function(e){var n={};return e.forEach((function(e,i){n[t[i]]=e})),n}))):o}if(e&&(r=this.parser.interpolate(this.parser.getValue(e,t),i)),void 0===r&&null!=this.defaultLang&&this.defaultLang!==this.currentLang&&this.useDefaultLang&&(r=this.parser.interpolate(this.parser.getValue(this.translations[this.defaultLang],t),i)),void 0===r){var u={key:t,translateService:this};void 0!==i&&(u.interpolateParams=i),r=this.missingTranslationHandler.handle(u)}return void 0!==r?r:t}},{key:"get",value:function(e,t){var n=this;if(!kb(e)||!e.length)throw new Error('Parameter "key" required');if(this.pending)return this.loadingTranslations.pipe(ev((function(i){return Xm(i=n.getParsedResult(i,e,t))?i:Xh(i)})));var i=this.getParsedResult(this.translations[this.currentLang],e,t);return Xm(i)?i:Xh(i)}},{key:"getStreamOnTranslationChange",value:function(e,t){var n=this;if(!kb(e)||!e.length)throw new Error('Parameter "key" required');return ep(Ef((function(){return n.get(e,t)})),this.onTranslationChange.pipe(Wf((function(i){var r=n.getParsedResult(i.translations,e,t);return"function"==typeof r.subscribe?r:Xh(r)}))))}},{key:"stream",value:function(e,t){var n=this;if(!kb(e)||!e.length)throw new Error('Parameter "key" required');return ep(Ef((function(){return n.get(e,t)})),this.onLangChange.pipe(Wf((function(i){var r=n.getParsedResult(i.translations,e,t);return Xm(r)?r:Xh(r)}))))}},{key:"instant",value:function(e,t){if(!kb(e)||!e.length)throw new Error('Parameter "key" required');var n=this.getParsedResult(this.translations[this.currentLang],e,t);if(Xm(n)){if(e instanceof Array){var i={};return e.forEach((function(t,n){i[e[n]]=e[n]})),i}return e}return n}},{key:"set",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.currentLang;this.translations[n][e]=this.compiler.compile(t,n),this.updateLangs(),this.onTranslationChange.emit({lang:n,translations:this.translations[n]})}},{key:"changeLang",value:function(e){this.currentLang=e,this.onLangChange.emit({lang:e,translations:this.translations[e]}),null==this.defaultLang&&this.changeDefaultLang(e)}},{key:"changeDefaultLang",value:function(e){this.defaultLang=e,this.onDefaultLangChange.emit({lang:e,translations:this.translations[e]})}},{key:"reloadLang",value:function(e){return this.resetLang(e),this.getTranslation(e)}},{key:"resetLang",value:function(e){this._translationRequests[e]=void 0,this.translations[e]=void 0}},{key:"getBrowserLang",value:function(){if("undefined"!=typeof window&&void 0!==window.navigator){var e=window.navigator.languages?window.navigator.languages[0]:null;return void 0!==(e=e||window.navigator.language||window.navigator.browserLanguage||window.navigator.userLanguage)?(-1!==e.indexOf("-")&&(e=e.split("-")[0]),-1!==e.indexOf("_")&&(e=e.split("_")[0]),e):void 0}}},{key:"getBrowserCultureLang",value:function(){if("undefined"!=typeof window&&void 0!==window.navigator){var e=window.navigator.languages?window.navigator.languages[0]:null;return e=e||window.navigator.language||window.navigator.browserLanguage||window.navigator.userLanguage}}}]),t}()).\u0275fac=function(e){return new(e||Db)(ot(Ub),ot(fb),ot(Tb),ot(Mb),ot(mb),ot(Eb),ot(Ob),ot(Gb),ot(Lb))},Db.\u0275prov=Ve({token:Db,factory:Db.\u0275fac}),Db),jb=((Pb=function(){function e(t,n){p(this,e),this.translate=t,this._ref=n,this.value=""}return m(e,[{key:"updateValue",value:function(e,t,n){var i=this,r=function(t){i.value=void 0!==t?t:e,i.lastKey=e,i._ref.markForCheck()};if(n){var a=this.translate.getParsedResult(n,e,t);Xm(a.subscribe)?a.subscribe(r):r(a)}this.translate.get(e,t).subscribe(r)}},{key:"transform",value:function(e){var t,n=this;if(!e||!e.length)return e;for(var i=arguments.length,r=new Array(i>1?i-1:0),a=1;a<i;a++)r[a-1]=arguments[a];if(yb(e,this.lastKey)&&yb(r,this.lastParams))return this.value;if(kb(r[0])&&r.length)if("string"==typeof r[0]&&r[0].length){var o=r[0].replace(/(\')?([a-zA-Z0-9_]+)(\')?(\s)?:/g,'"$2":').replace(/:(\s)?(\')(.*?)(\')/g,':"$3"');try{t=JSON.parse(o)}catch(s){throw new SyntaxError("Wrong parameter in TranslatePipe. Expected a valid Object, received: "+r[0])}}else"object"!=typeof r[0]||Array.isArray(r[0])||(t=r[0]);return this.lastKey=e,this.lastParams=r,this.updateValue(e,t),this._dispose(),this.onTranslationChange||(this.onTranslationChange=this.translate.onTranslationChange.subscribe((function(i){n.lastKey&&i.lang===n.translate.currentLang&&(n.lastKey=null,n.updateValue(e,t,i.translations))}))),this.onLangChange||(this.onLangChange=this.translate.onLangChange.subscribe((function(i){n.lastKey&&(n.lastKey=null,n.updateValue(e,t,i.translations))}))),this.onDefaultLangChange||(this.onDefaultLangChange=this.translate.onDefaultLangChange.subscribe((function(){n.lastKey&&(n.lastKey=null,n.updateValue(e,t))}))),this.value}},{key:"_dispose",value:function(){void 0!==this.onTranslationChange&&(this.onTranslationChange.unsubscribe(),this.onTranslationChange=void 0),void 0!==this.onLangChange&&(this.onLangChange.unsubscribe(),this.onLangChange=void 0),void 0!==this.onDefaultLangChange&&(this.onDefaultLangChange.unsubscribe(),this.onDefaultLangChange=void 0)}},{key:"ngOnDestroy",value:function(){this._dispose()}}]),e}()).\u0275fac=function(e){return new(e||Pb)(Za(Rb),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ye.Default,t=la(!0);if(null!=t||e&ye.Optional)return t;qt("ChangeDetectorRef")}())},Pb.\u0275pipe=Tt({name:"translate",type:Pb,pure:!1}),Pb.\u0275prov=Ve({token:Pb,factory:Pb.\u0275fac}),Pb),Nb=((Ab=function(){function e(){p(this,e)}return m(e,null,[{key:"forRoot",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{ngModule:e,providers:[t.loader||{provide:fb,useClass:pb},t.compiler||{provide:Tb,useClass:xb},t.parser||{provide:Mb,useClass:Ib},t.missingTranslationHandler||{provide:mb,useClass:bb},Ub,{provide:Ob,useValue:t.isolate},{provide:Eb,useValue:t.useDefaultLang},{provide:Gb,useValue:t.extend},{provide:Lb,useValue:t.defaultLanguage},Rb]}}},{key:"forChild",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{ngModule:e,providers:[t.loader||{provide:fb,useClass:pb},t.compiler||{provide:Tb,useClass:xb},t.parser||{provide:Mb,useClass:Ib},t.missingTranslationHandler||{provide:mb,useClass:bb},{provide:Ob,useValue:t.isolate},{provide:Eb,useValue:t.useDefaultLang},{provide:Gb,useValue:t.extend},{provide:Lb,useValue:t.defaultLanguage},Rb]}}}]),e}()).\u0275mod=Mt({type:Ab}),Ab.\u0275inj=we({factory:function(e){return new(e||Ab)}}),Ab),Fb=new rb(tb);function Bb(e){var t=e.subscriber,n=e.counter,i=e.period;t.next(n),this.schedule({subscriber:t,counter:n+1,period:i},i)}function Hb(e,t){1&e&&io(0,"div")}var Kb,qb=((Kb=function(){function e(t,n,i,r,a,o){p(this,e),this.route=t,this.router=n,this.alertService=i,this.authenticationService=r,this.messageService=a,this.translate=o,this.logoutTimer=!0,this.logoutTime=new Date}return m(e,[{key:"ngOnInit",value:function(){this.logoutTime=new Date,this.logoutTime.setSeconds(this.logoutTime.getSeconds()+100),this.log("Logout Time Init ".concat(this.logoutTime.toISOString()," ")),this.checkLogout()}},{key:"checkLogout",value:function(){var e=this;(function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Fb;return(C(e=t)||!(e-parseFloat(e)+1>=0)||t<0)&&(t=0),n&&"function"==typeof n.schedule||(n=Fb),new U((function(e){return e.add(n.schedule(Bb,t,{subscriber:e,counter:0,period:t})),e}))})(1e4).subscribe((function(){var t=new Date,n=e.authenticationService.logoutCheck();n||(n=t);var i=Math.round((n.getTime()-t.getTime())/1e3);if(i>0&&i<=120){var r=e.translate.instant("autologout.msg.sessionExpires",{remaining:i});e.alertService.error(r)}if(i<0){var a=e.translate.instant("autologout.msg.sessionExpired");e.alertService.error(a,!0),e.router.navigate(["login"],{queryParams:{returnUrl:e.router.url}})}}))}},{key:"log",value:function(e){this.messageService.add("logoutTimer: "+e)}}]),e}()).\u0275fac=function(e){return new(e||Kb)(Za(sg),Za(Am),Za(Zm),Za(Af),Za(tf),Za(Rb))},Kb.\u0275cmp=wt({type:Kb,selectors:[["app-logouttimer"]],decls:1,vars:1,consts:[[4,"ngIf"]],template:function(e,t){1&e&&Ya(0,Hb,1,0,"div",0),2&e&&Xa("ngIf",t.logoutTimer)},directives:[su],styles:["h2[_ngcontent-%COMP%]{color:red;font-family:Arial,Helvetica,sans-serif;font-weight:lighter}body[_ngcontent-%COMP%]{margin:2em}body[_ngcontent-%COMP%], button[_ngcontent-%COMP%], input[text][_ngcontent-%COMP%]{color:#dc143c;font-family:Cambria,Georgia}button.clear[_ngcontent-%COMP%]{font-family:Arial;background-color:#eee;border:none;padding:5px 10px;border-radius:4px;cursor:pointer;cursor:hand}button[_ngcontent-%COMP%]:hover{background-color:#cfd8dc}button[_ngcontent-%COMP%]:disabled{background-color:#eee;color:#aaa;cursor:auto}button.clear[_ngcontent-%COMP%]{color:#888;margin-bottom:12px}"]}),Kb);function zb(e,t){if(1&e&&(to(0,"div"),So(1),no()),2&e){var n=t.$implicit;zi(1),xo(" ",n," ")}}function Qb(e,t){if(1&e){var n=so();to(0,"div"),to(1,"h2"),So(2,"Messages"),no(),to(3,"button",1),uo("click",(function(){return mn(n),fo().messageService.clear()})),So(4,"clear"),no(),Ya(5,zb,2,1,"div",2),no()}if(2&e){var i=fo();zi(5),Xa("ngForOf",i.messageService.messages)}}var Wb,Jb=((Wb=function(){function e(t){p(this,e),this.messageService=t}return m(e,[{key:"ngOnInit",value:function(){var e=this;this.activateMessage=this.messageService.getstatus(),this.messageService.activateMessageToggle.subscribe((function(){e.activateMessage=e.messageService.getstatus()}))}}]),e}()).\u0275fac=function(e){return new(e||Wb)(Za(tf))},Wb.\u0275cmp=wt({type:Wb,selectors:[["app-messages"]],decls:1,vars:1,consts:[[4,"ngIf"],[1,"clear",3,"click"],[4,"ngFor","ngForOf"]],template:function(e,t){1&e&&Ya(0,Qb,6,1,"div",0),2&e&&Xa("ngIf",t.activateMessage)},directives:[su,au],styles:["h2[_ngcontent-%COMP%]{color:red;font-family:Arial,Helvetica,sans-serif;font-weight:lighter}body[_ngcontent-%COMP%]{margin:2em}body[_ngcontent-%COMP%], button[_ngcontent-%COMP%], input[text][_ngcontent-%COMP%]{color:#dc143c;font-family:Cambria,Georgia}button.clear[_ngcontent-%COMP%]{font-family:Arial;background-color:#eee;border:none;padding:5px 10px;border-radius:4px;cursor:pointer;cursor:hand}button[_ngcontent-%COMP%]:hover{background-color:#cfd8dc}button[_ngcontent-%COMP%]:disabled{background-color:#eee;color:#aaa;cursor:auto}button.clear[_ngcontent-%COMP%]{color:#888;margin-bottom:12px}"]}),Wb),Yb=function(e,t,n){return{alert:e,"alert-success":t,"alert-danger":n}};function $b(e,t){if(1&e&&(to(0,"div",1),So(1),no()),2&e){var n=fo();Xa("ngClass",js(2,Yb,n.message,"success"===n.message.type,"error"===n.message.type)),zi(1),xo("",n.message.text,"\n")}}var Zb,Xb=((Zb=function(){function e(t){var n=this;p(this,e),this.alertService=t,this.subscription=t.getMessage().subscribe((function(e){n.message=e}))}return m(e,[{key:"ngOnDestroy",value:function(){this.subscription.unsubscribe()}}]),e}()).\u0275fac=function(e){return new(e||Zb)(Za(Zm))},Zb.\u0275cmp=wt({type:Zb,selectors:[["app-alert"]],decls:1,vars:1,consts:[["id","alertMessage",3,"ngClass",4,"ngIf"],["id","alertMessage",3,"ngClass"]],template:function(e,t){1&e&&Ya(0,$b,2,6,"div",0),2&e&&Xa("ngIf",t.message)},directives:[su,iu],encapsulation:2}),Zb);function ey(e,t){1&e&&(to(0,"div",26),io(1,"img",27),no())}function ty(e,t){if(1&e&&(to(0,"div",23),to(1,"div",24),io(2,"app-alert"),Ya(3,ey,2,0,"div",25),io(4,"router-outlet"),no(),no()),2&e){var n=fo();zi(3),Xa("ngIf",!n.getPreView())}}function ny(e,t){if(1&e){var n=so();to(0,"i",28),uo("click",(function(){return mn(n),fo().switchPreView()})),no()}}function iy(e,t){if(1&e){var n=so();to(0,"i",29),uo("click",(function(){return mn(n),fo().switchPreView()})),no()}}function ry(e,t){1&e&&(to(0,"div",30),to(1,"div",31),to(2,"a",32),So(3),qs(4,"translate"),no(),no(),to(5,"div",31),to(6,"a",33),So(7),qs(8,"translate"),no(),no(),to(9,"div",31),to(10,"a",34),So(11),qs(12,"translate"),no(),no(),to(13,"div",31),to(14,"a",35),So(15),qs(16,"translate"),no(),no(),no()),2&e&&(zi(3),To(zs(4,4,"app.support")),zi(4),To(zs(8,6,"app.impressum")),zi(4),To(zs(12,8,"app.terms")),zi(4),To(zs(16,10,"app.dataProtection")))}var ay,oy,sy=((ay=function(){function e(t,n,i,r){p(this,e),this.messageService=t,this.authenticationService=n,this.alertService=i,this.translate=r,this.version="21-02",this.restVersionString=new Date,this.restUIVersionString=new Date,this.localsAvailable=!1}return m(e,[{key:"ngOnInit",value:function(){var e=this,t=this.translate.getBrowserLang();this.log("Browser Language: "+t),this.translate.use(t).subscribe((function(){e.log("Successfully initialized '".concat(t,"' language.'")),e.localsAvailable=!0}),(function(){e.log("Problem with '".concat(t,"' language initialization.'"))})),this.restVersion()}},{key:"restVersion",value:function(){var e=this;this.authenticationService.restVersion().subscribe((function(t){e.log("Version Status check result "+JSON.stringify(t)),t.version&&(e.restVersionString=new Date(t.version)),t.versionUI&&(e.restUIVersionString=new Date(t.versionUI)),e.log("Version check success ".concat(t.version,"/").concat(e.restVersionString," UI ").concat(t.versionUI,"/").concat(e.restUIVersionString))}),(function(t){e.log("Version Status check Failed: ".concat(t.status," ").concat(t.error.message," ")),e.alertService.error(Zv(t))}))}},{key:"pwPolicy",value:function(){var e=this;this.authenticationService.initPWPolicy().subscribe((function(){e.log("Init PW Policy success")}),(function(t){e.log("Init PW Policy Failed: ".concat(t.status," ").concat(t.error.message," ")),e.alertService.error(Zv(t))}))}},{key:"getPreView",value:function(){return Xv()}},{key:"switchPreView",value:function(){return e=!Xv(),localStorage.setItem("printPreView",e?"1":"0"),console.log("Switch PreView",e),e;var e}},{key:"log",value:function(e){this.messageService.add("App: "+e)}}]),e}()).\u0275fac=function(e){return new(e||ay)(Za(tf),Za(Af),Za(Zm),Za(Rb))},ay.\u0275cmp=wt({type:ay,selectors:[["app-root"]],decls:43,vars:27,consts:[["id","visboRoot",1,"jumbotron","pt-0","mt-0",2,"background-color","#ffffff"],["class","wrapper",4,"ngIf"],[1,"bg-light","text-dark","mt-3"],[1,"row"],[1,"col-11"],["href","https://visbo.de/",1,"text-secondary"],["data-toggle","modal","data-target","#versionModal"],[1,"col-1"],["class","fas fa-desktop","style","float: right",3,"click",4,"ngIf"],["class","fas fa-print","style","float: right",3,"click",4,"ngIf"],["class","row d-print-none",4,"ngIf"],["id","versionModal","tabindex","-1","role","dialog","aria-labelledby","versionModalTitle","aria-hidden","true",1,"modal","fade"],["role","document",1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header"],["id","versionModalTitle",1,"modal-title"],["type","button","data-dismiss","modal","aria-label","Close",1,"close"],["aria-hidden","true"],[1,"modal-body"],[1,"form-group","row"],["for","restServer",1,"col-4","col-form-label"],[1,"col-8","form-control-static",3,"title"],["for","restUIServer",1,"col-4","col-form-label"],[1,"wrapper"],[1,"container-fluid"],["class","ml-3 mt-0","style","float: right",4,"ngIf"],[1,"ml-3","mt-0",2,"float","right"],["src","assets/visbologo.svg"],[1,"fas","fa-desktop",2,"float","right",3,"click"],[1,"fas","fa-print",2,"float","right",3,"click"],[1,"row","d-print-none"],[1,"col"],["href","mailto:support@visbo.de"],["href","https://visbo.de/impressum","target","_blank"],["href","https://visbo.de/visbo-terms-conditions","target","_blank"],["href","https://visbo.de/visbo-data-protection/","target","_blank"]],template:function(e,t){1&e&&(to(0,"div",0),Ya(1,ty,5,1,"div",1),to(2,"div",2),to(3,"div",3),to(4,"div",4),So(5," Copyright 2021 \xa9 "),to(6,"a",5),So(7,"VISBO GmbH"),no(),So(8,", "),to(9,"a",6),So(10),qs(11,"translate"),no(),no(),to(12,"div",7),Ya(13,ny,1,0,"i",8),Ya(14,iy,1,0,"i",9),no(),no(),Ya(15,ry,17,12,"div",10),no(),io(16,"app-logouttimer"),io(17,"app-messages"),to(18,"div",11),to(19,"div",12),to(20,"div",13),to(21,"div",14),to(22,"h5",15),So(23),qs(24,"translate"),no(),to(25,"button",16),to(26,"span",17),So(27,"\xd7"),no(),no(),no(),to(28,"div",18),to(29,"div",19),to(30,"label",20),So(31),qs(32,"translate"),no(),to(33,"label",21),So(34),qs(35,"date"),no(),no(),to(36,"div",19),to(37,"label",22),So(38),qs(39,"translate"),no(),to(40,"label",21),So(41),qs(42,"date"),no(),no(),no(),no(),no(),no(),no()),2&e&&(zi(1),Xa("ngIf",t.localsAvailable),zi(9),_o("",zs(11,13,"app.product")," ",t.version,""),zi(3),Xa("ngIf",t.getPreView()),zi(1),Xa("ngIf",!t.getPreView()),zi(1),Xa("ngIf",!t.getPreView()),zi(8),To(zs(24,15,"app.versionInfo")),zi(8),xo("",zs(32,17,"app.serverVersion"),":"),zi(2),po("title",t.restVersionString.toLocaleString()),zi(1),xo("",Qs(35,19,t.restVersionString,"dd.MM.yyyy")," "),zi(4),xo("",zs(39,22,"app.uiVersion"),":"),zi(2),po("title",t.restVersionString.toLocaleString()),zi(1),xo("",Qs(42,24,t.restUIVersionString,"dd.MM.yyyy")," "))},directives:[su,qb,Jb,Xb,Tm],pipes:[jb,Cu],encapsulation:2}),ay),ly=function e(){p(this,e)},cy=function(e){return e[e.View=1]="View",e[e.ViewAudit=2]="ViewAudit",e[e.ViewLog=4]="ViewLog",e[e.Modify=16]="Modify",e[e.ManagePerm=32]="ManagePerm",e[e.CreateVC=256]="CreateVC",e[e.DeleteVC=1024]="DeleteVC",e}({}),uy=function(e){return e[e.View=1]="View",e[e.ViewAudit=2]="ViewAudit",e[e.Modify=16]="Modify",e[e.ManagePerm=32]="ManagePerm",e[e.CreateVP=256]="CreateVP",e}({}),dy=function(e){return e[e.View=1]="View",e[e.ViewAudit=2]="ViewAudit",e[e.Modify=16]="Modify",e[e.ManagePerm=32]="ManagePerm",e[e.CreateVariant=256]="CreateVariant",e[e.ViewRestricted=512]="ViewRestricted",e[e.DeleteVP=1024]="DeleteVP",e}({}),hy=function e(){p(this,e)},vy=function e(){p(this,e)},fy=function e(){p(this,e)},py=function e(){p(this,e)},gy=new ov({"Content-Type":"application/json"}),my=((oy=function(){function e(t,n,i){p(this,e),this.http=t,this.messageService=n,this.env=i,this.vcUrl=this.env.restUrl.concat("/vc")}return m(e,[{key:"getVisboCenters",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=this.vcUrl,r=new cv;return t&&(r=r.append("sysadmin","1")),n&&(r=r.append("deleted","1")),this.log("Calling HTTP Request: ".concat(i," ")),this.http.get(i,{headers:gy,params:r}).pipe(B((function(e){return e.vc})),cf((function(t){return e.log("fetched ".concat(t.length," VisboCenters "))})),af(this.handleError("getVisboCenters")))}},{key:"getSysVisboCenter",value:function(){var e=this,t=this.vcUrl,n=new cv;return n=(n=n.append("systemvc","true")).append("sysadmin","1"),this.log("Calling HTTP Request for SysVC: "+t),this.http.get(t,{headers:gy,params:n}).pipe(B((function(t){return e.log("fetched System VisboCenter "+JSON.stringify(t)),t.vc&&t.vc.length>0&&(t.vc[0].perm=t.perm,e.combinedPerm=t.perm,localStorage.setItem("combinedPerm",JSON.stringify(t.perm)),localStorage.setItem("systemVC",t.vc[0]._id)),t.vc})),cf((function(t){e.log("fetched System VisboCenter user Role is "+(t[0].perm.system||"None"))})),af(this.handleError("getSysVisboCenters")))}},{key:"getSysAdminRole",value:function(){var e;return e=void 0===this.combinedPerm?JSON.parse(localStorage.getItem("combinedPerm")):this.combinedPerm,this.log("SysAdmin Role: "+JSON.stringify(e)),e}},{key:"getSysVCId",value:function(){var e=localStorage.getItem("systemVC");return this.log("Sysem VC ID: "+e),e}},{key:"getVisboCenter",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r="".concat(this.vcUrl,"/").concat(e),a=new cv;return n&&(a=a.append("sysadmin","1")),i&&(a=a.append("deleted","1")),this.log("Calling HTTP Request for a specific entry: "+r),this.http.get(r,{headers:gy,params:a}).pipe(B((function(e){return e.vc[0].perm=e.perm,e.vc[0]})),cf((function(n){return t.log("fetched VC ".concat(n.name," id:").concat(e," perm:").concat(JSON.stringify(n.perm)))})),af(this.handleError("getVisboCenter id:"+e)))}},{key:"getCapacity",value:function(e,t,n){var i=this,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]&&arguments[5],s=arguments.length>6&&void 0!==arguments[6]&&arguments[6],l=arguments.length>7&&void 0!==arguments[7]&&arguments[7],c="".concat(this.vcUrl,"/").concat(e,"/capacity"),u=new cv;return r&&(u=u.append("hierarchy","1")),a&&(u=u.append("pfv","1")),l&&(u=u.append("perProject","1")),o&&(u=u.append("sysadmin","1")),s&&(u=u.append("deleted","1")),n&&(this.log("Calling RoleID: "+n),u=u.append("roleID",n)),this.log("Calling Capacity for a VC: ".concat(c," params  ").concat(JSON.stringify(u))),this.http.get(c,{headers:gy,params:u}).pipe(B((function(e){return e.vc[0].perm=e.perm,e.vc[0]})),cf((function(t){return i.log("fetched Capacity for VC ".concat(t.name," id:").concat(e," perm:").concat(JSON.stringify(t.perm)))})),af(this.handleError("getVisboCenter id:"+e)))}},{key:"addVisboCenter",value:function(e){var t=this,n=this.vcUrl,i=new cv;return i=i.append("sysadmin","1"),this.log("Calling HTTP Request: ".concat(n," ").concat(JSON.stringify(e))),this.http.post(n,e,{headers:gy,params:i}).pipe(B((function(e){return e.vc[0]})),cf((function(e){return t.log("added VisboCenter ".concat(e.name," with id=").concat(e._id))})),af(this.handleError("addVisboCenter")))}},{key:"deleteVisboCenter",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=e._id,a="".concat(this.vcUrl,"/").concat(r),o=new cv;return n&&(o=o.append("sysadmin","1")),i&&(o=o.append("deleted","1")),this.log("Calling HTTP Request: ".concat(a," ")),this.http.delete(a,{headers:gy,params:o}).pipe(cf((function(){return t.log("deleted VisboCenter id="+r)})),af(this.handleError("deleteVisboCenter")))}},{key:"updateVisboCenter",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r="".concat(this.vcUrl,"/").concat(e._id),a=new cv;return n&&(a=a.append("sysadmin","1")),i&&(a=a.append("deleted","1")),this.log("Calling HTTP Request PUT: ".concat(r," ")),this.http.put(r,e,{headers:gy,params:a}).pipe(B((function(e){return e.vc[0]})),cf((function(e){return t.log("updated VisboCenter ".concat(e.name," with id=").concat(e._id))})),af(this.handleError("updateVisboCenter")))}},{key:"getVCUsers",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r="".concat(this.vcUrl,"/").concat(e,"/group?userlist=1"),a=new cv;return n&&(a=a.append("sysadmin","1")),i&&(a=a.append("deleted","1")),this.log("Calling HTTP Request GET Users: ".concat(r," ")),this.http.get(r,{headers:gy,params:a}).pipe(B((function(e){var t=new py;return t.users=e.users,t.groups=e.groups,t.vpusers=e.vpusers,t})),cf((function(){return t.log("fetched Users & Groups Users ")})),af(this.handleError("getVisboCenterUsers")))}},{key:"addVCUser",value:function(e,t,n,i,r){var a=this,o="".concat(this.vcUrl,"/").concat(i,"/group/").concat(t,"/user"),s=new cv;r&&(s=s.append("sysadmin","1"));var l={email:e,message:n||""};return this.log("Calling HTTP Request: ".concat(o," for ").concat(e," ")),this.http.post(o,l,{headers:gy,params:s}).pipe(B((function(e){return e.groups[0]})),cf((function(e){return a.log("added Visbo User to Group with id="+e._id)})),af(this.handleError("addVCUser")))}},{key:"deleteVCUser",value:function(e,t,n){var i=this,r="".concat(this.vcUrl,"/").concat(t,"/group/").concat(e.groupId,"/user/").concat(e.userId),a=new cv;return n&&(a=a.append("sysadmin","1")),this.log("Calling HTTP Request: ".concat(r," for ").concat(e.email," as ").concat(e.groupName," ")),this.http.delete(r,{headers:gy,params:a}).pipe(cf((function(){return i.log("deleted Visbo Center User "+e.email)})),af(this.handleError("deleteVisboCenterUser")))}},{key:"addVCGroup",value:function(e,t){var n=this,i="".concat(this.vcUrl,"/").concat(e.vcid,"/group"),r=new cv;return t&&(r=r.append("sysadmin","1")),this.log("Calling HTTP Request: ".concat(i," for ").concat(e.name," ")),this.http.post(i,e,{headers:gy,params:r}).pipe(B((function(e){return e.groups[0]})),cf((function(e){return n.log("added Visbo Group with id="+e._id)})),af(this.handleError("addVCGroup")))}},{key:"modifyVCGroup",value:function(e,t){var n=this,i="".concat(this.vcUrl,"/").concat(e.vcid,"/group/").concat(e._id),r=new cv;return t&&(r=r.append("sysadmin","1")),this.log("Calling HTTP Request: ".concat(i," for ").concat(e.name," Perm: ").concat(JSON.stringify(e.permission)," ")),this.http.put(i,e,{headers:gy,params:r}).pipe(B((function(e){return e.groups[0]})),cf((function(e){return n.log("modified Visbo Group with id="+JSON.stringify(e))})),af(this.handleError("addVCGroup")))}},{key:"deleteVCGroup",value:function(e,t){var n=this,i="".concat(this.vcUrl,"/").concat(e.vcid,"/group/").concat(e._id),r=new cv;return t&&(r=r.append("sysadmin","1")),this.log("Calling HTTP Request: ".concat(i," for Group ").concat(e.name," ")),this.http.delete(i,{headers:gy,params:r}).pipe(cf((function(){return n.log("deleted Visbo Center Group "+e.name)})),af(this.handleError("deleteVisboCenterGroup")))}},{key:"handleError",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"operation";return this.log("HTTP Request ".concat(t," failed")),function(n){return e.log("HTTP Request ".concat(t," failed: ").concat(n.error.message," status:").concat(n.status)),nf(n)}}},{key:"log",value:function(e){this.messageService.add("VisboCenterService: "+e)}}]),e}()).\u0275fac=function(e){return new(e||oy)(ot(Sv),ot(tf),ot(Vf))},oy.\u0275prov=Ve({token:oy,factory:oy.\u0275fac}),oy);function by(e,t){1&e&&(to(0,"div",23),So(1),qs(2,"translate"),no()),2&e&&(zi(1),To(zs(2,1,"login.msg.emailRequired")))}function yy(e,t){1&e&&(to(0,"div",24),So(1),qs(2,"translate"),no()),2&e&&(zi(1),To(zs(2,1,"login.msg.pwRequired")))}function ky(e,t){1&e&&io(0,"img",25)}function Cy(e,t){1&e&&(to(0,"a",26),So(1),qs(2,"translate"),no()),2&e&&(po("href",fo().loginGoogleUrl(),Si),zi(1),To(zs(2,2,"login.btn.loginGoogle")))}var Vy,wy=function(e){return{"has-error":e}},Ay=((Vy=function(){function e(t,n,i,r,a,o,s,l){p(this,e),this.route=t,this.router=n,this.messageService=i,this.authenticationService=r,this.visbocenterService=a,this.alertService=o,this.translate=s,this.titleService=l,this.loading=!1,this.currentLang="en"}return m(e,[{key:"ngOnInit",value:function(){this.authenticationService.logout(),this.getSetting(),this.log("current Language ".concat(this.translate.currentLang," getLangs() ").concat(JSON.stringify(this.translate.getLangs()))),this.currentLang=this.translate.currentLang,this.titleService.setTitle(this.translate.instant("login.title")),this.route.snapshot.queryParams.email&&(this.email=this.route.snapshot.queryParams.email);var e=(this.route.snapshot.queryParams.returnUrl||"/").split("?");this.returnUrl=e[0],this.returnParams=e[1],this.log("return url ".concat(this.returnUrl," params ").concat(this.returnParams))}},{key:"restVersion",value:function(){var e=this;this.restVersionString||this.authenticationService.restVersion().subscribe((function(t){e.restVersionString=t.version.toISOString(),e.log("Version Status check success "+e.restVersionString)}),(function(t){e.log("Version Status check Failed: ".concat(t.status," ").concat(t.error.message," ")),e.alertService.error(Zv(t))}))}},{key:"login",value:function(){var e=this;this.loading=!0,this.authenticationService.login(this.email,this.userpw).subscribe((function(t){if(t.status&&t.status.expiresAt){var n=new Date(t.status.expiresAt);e.log("Login Success BUT EXPIRATION at: "+n.toLocaleString());var i=e.translate.instant("autologout.msg.pwExpires",{expiresAt:n.toLocaleString()});e.alertService.error(i,!0)}else{var r=new Date(t.status.lastLoginAt),a=e.translate.instant("login.msg.loginSuccess",{lastLogin:r.toLocaleString()});e.alertService.success(a,!0)}e.visbocenterService.getSysVisboCenter().subscribe((function(){e.log("Login Success ".concat(e.returnUrl," Role ").concat(JSON.stringify(e.visbocenterService.getSysAdminRole())," ")),e.router.navigate([e.returnUrl],{replaceUrl:!0,queryParams:e.queryStringToJSON(e.returnParams)})}),(function(t){e.log("No SysVC found:  ".concat(t.status," ").concat(t.error.message)),e.router.navigate(["/"],{replaceUrl:!0})}))}),(function(t){e.log("Login Failed: ".concat(t.status," ").concat(t.error.message," "));var n=Zv(t);403===t.status&&(n=e.translate.instant("login.msg.loginFailure",{user:e.email})),e.alertService.error(n),e.loading=!1}))}},{key:"loginGoogleUrl",value:function(){return this.authenticationService.loginGoogleUrl()}},{key:"loginGoogle",value:function(){var e=this;this.loading=!0,console.log("GoogleLogin Start "),this.authenticationService.loginGoogle().subscribe((function(t){console.log("Google Login Success ".concat(e.returnUrl," Role ").concat(JSON.stringify(t)," ")),e.log("Google Login Success Result "+JSON.stringify(t));var n=new Date(t.status.lastLoginAt),i=e.translate.instant("login.msg.loginSuccess",{lastLogin:n.toLocaleString()});e.alertService.success(i,!0),e.visbocenterService.getSysVisboCenter().subscribe((function(){e.log("Login Success ".concat(e.returnUrl," Role ").concat(JSON.stringify(e.visbocenterService.getSysAdminRole())," ")),e.router.navigate([e.returnUrl],{replaceUrl:!0,queryParams:e.queryStringToJSON(e.returnParams)})}),(function(t){e.log("No SysVC found:  ".concat(t.status," ").concat(t.error.message)),e.router.navigate(["/"],{replaceUrl:!0})}))}),(function(t){e.log("Google Login Failed: ".concat(t.status," ").concat(t.error.message," "));var n=Zv(t);403===t.status&&(n=e.translate.instant("login.msg.loginFailure",{user:e.email})),e.alertService.error(n),e.loading=!1}))}},{key:"pwforgotten",value:function(){var e=(this.email||"").trim();this.log("Forward to password forgotten ".concat(e," ")),this.router.navigate(["pwforgotten"],{queryParams:{email:e}})}},{key:"register",value:function(){this.log("Forward to Register"),this.router.navigate(["register"])}},{key:"relogin",value:function(){this.authenticationService.logout(),this.log("reLogin after error 401 to URL "+this.route.snapshot.queryParams.returnUrl),this.returnUrl=this.route.snapshot.queryParams.returnUrl||"/"}},{key:"useLanguage",value:function(e){this.translate.use(e)}},{key:"queryStringToJSON",value:function(e){var t=(e||"").split("&"),n={};return t.forEach((function(e){var t=e.split("=");t[0]&&(n[t[0]]=t[1]||"")})),n}},{key:"hasSetting",value:function(e){var t=void 0;if(e&&this.setting){var n=this.setting.find((function(t){return t.name==e}));n&&(t=n.value)}return t}},{key:"getSetting",value:function(){var e=this;this.authenticationService.getSetting().subscribe((function(t){e.log("ReST Server Setting success "+JSON.stringify(t)),e.setting=t}),(function(t){e.log("Init Settings Failed: ".concat(t.status," ").concat(t.error.message," ")),e.alertService.error(Zv(t))}))}},{key:"log",value:function(e){this.messageService.add("Login: "+e)}}]),e}()).\u0275fac=function(e){return new(e||Vy)(Za(sg),Za(Am),Za(tf),Za(Af),Za(my),Za(Zm),Za(Rb),Za(ud))},Vy.\u0275cmp=wt({type:Vy,selectors:[["app-login"]],decls:43,vars:38,consts:[[1,"well"],[1,"d-flex","flex-row-reverse"],["name","currentLang",3,"ngModel","ngModelChange","change"],["value","en"],["value","de"],[1,"col-md-6","col-md-offset-3"],["name","form","novalidate","",3,"ngSubmit"],["f","ngForm"],[1,"form-group",3,"ngClass"],["for","username"],["id","loginName","type","text","name","username","required","","pattern","[^@\\s]+@[^@\\s]+\\.[^@\\s]+",1,"form-control",3,"ngModel","ngModelChange"],["username","ngModel"],["id","loginNameError","class","help-block",4,"ngIf"],["for","password"],["id","loginPW","type","password","name","password","required","",1,"form-control",3,"ngModel","ngModelChange"],["password","ngModel"],["id","loginPWError","class","help-block",4,"ngIf"],[1,"form-group"],["id","loginButtonLogin",1,"btn","btn-primary",3,"disabled"],["src","data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA==",4,"ngIf"],["class","btn btn-link","style","float: right",3,"href",4,"ngIf"],["id","loginButtonRegister",1,"btn","btn-link",3,"click"],["id","loginButtonPWForgotten",1,"btn","btn-link",3,"click"],["id","loginNameError",1,"help-block"],["id","loginPWError",1,"help-block"],["src","data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA=="],[1,"btn","btn-link",2,"float","right",3,"href"]],template:function(e,t){if(1&e){var n=so();to(0,"div",0),to(1,"h2"),So(2),qs(3,"translate"),no(),io(4,"br"),to(5,"div",1),to(6,"select",2),uo("ngModelChange",(function(e){return t.currentLang=e}))("change",(function(){return t.useLanguage(t.currentLang)})),to(7,"option",3),So(8),qs(9,"translate"),no(),to(10,"option",4),So(11),qs(12,"translate"),no(),no(),no(),to(13,"div",5),to(14,"form",6,7),uo("ngSubmit",(function(){return mn(n),$a(15).form.valid&&t.login()})),to(16,"div",8),to(17,"label",9),So(18),qs(19,"translate"),no(),to(20,"input",10,11),uo("ngModelChange",(function(e){return t.email=e})),no(),Ya(22,by,3,3,"div",12),no(),to(23,"div",8),to(24,"label",13),So(25),qs(26,"translate"),no(),to(27,"input",14,15),uo("ngModelChange",(function(e){return t.userpw=e})),no(),Ya(29,yy,3,3,"div",16),no(),to(30,"div",17),to(31,"button",18),So(32),qs(33,"translate"),no(),Ya(34,ky,1,0,"img",19),Ya(35,Cy,3,4,"a",20),no(),no(),no(),to(36,"div"),to(37,"button",21),uo("click",(function(){return t.register()})),So(38),qs(39,"translate"),no(),to(40,"button",22),uo("click",(function(){return t.pwforgotten()})),So(41),qs(42,"translate"),no(),no(),no()}if(2&e){var i=$a(15),r=$a(21),a=$a(28);zi(2),To(zs(3,18,"login.title")),zi(4),Xa("ngModel",t.currentLang),zi(2),To(zs(9,20,"language.en")),zi(3),To(zs(12,22,"language.de")),zi(5),Xa("ngClass",Gs(34,wy,i.submitted&&!r.valid)),zi(2),To(zs(19,24,"login.lbl.email")),zi(2),Xa("ngModel",t.email),zi(2),Xa("ngIf",i.submitted&&!r.valid),zi(1),Xa("ngClass",Gs(36,wy,i.submitted&&!a.valid)),zi(2),To(zs(26,26,"login.lbl.password")),zi(2),Xa("ngModel",t.userpw),zi(2),Xa("ngIf",i.submitted&&!a.valid),zi(2),Xa("disabled",t.loading),zi(1),To(zs(33,28,"login.btn.login")),zi(2),Xa("ngIf",t.loading),zi(1),Xa("ngIf",t.hasSetting("OAuthGoogle")),zi(3),To(zs(39,30,"login.btn.register")),zi(3),To(zs(42,32,"login.btn.pwForgotten"))}},directives:[rh,Td,Nh,ah,dh,Fh,xd,Gh,iu,Ad,Kh,Yh,su],pipes:[jb],encapsulation:2}),Vy);function Py(e,t){if(1&e&&(to(0,"div"),to(1,"h4"),So(2),no(),no()),2&e){var n=fo(2);zi(2),xo(" ",n.user.email," ")}}function Dy(e,t){1&e&&(to(0,"div",38),So(1),qs(2,"translate"),no()),2&e&&(zi(1),To(zs(2,1,"register.msg.firstNameRequired")))}function My(e,t){1&e&&(to(0,"div",38),So(1),qs(2,"translate"),no()),2&e&&(zi(1),To(zs(2,1,"register.msg.lastNameRequired")))}function Iy(e,t){1&e&&(to(0,"div",38),So(1),qs(2,"translate"),no()),2&e&&(zi(1),To(zs(2,1,"register.msg.companyRequired")))}function Sy(e,t){1&e&&(to(0,"div",38),So(1),qs(2,"translate"),no()),2&e&&(zi(1),To(zs(2,1,"register.msg.emailRequired")))}var Ty=function(e){return{"has-error":e}};function xy(e,t){if(1&e){var n=so();to(0,"div"),to(1,"div",5),to(2,"label",39),So(3),qs(4,"translate"),no(),to(5,"input",40,41),uo("ngModelChange",(function(e){return mn(n),fo(2).user.email=e})),no(),Ya(7,Sy,3,3,"div",9),no(),no()}if(2&e){var i=$a(6);fo();var r=$a(1),a=fo();zi(1),Xa("ngClass",Gs(6,Ty,r.submitted&&!i.valid)),zi(2),To(zs(4,4,"register.lbl.email")),zi(2),Xa("ngModel",a.user.email),zi(2),Xa("ngIf",r.submitted&&!i.valid)}}function _y(e,t){1&e&&(to(0,"div",38),So(1),qs(2,"translate"),no()),2&e&&(zi(1),To(zs(2,1,"register.msg.followPolicy")))}function Uy(e,t){if(1&e&&(to(0,"div",38),So(1),no()),2&e){var n=fo(2);zi(1),To(n.PWPolicyDescription)}}function Oy(e,t){1&e&&io(0,"img",42)}var Ey=function(){return["/login"]};function Ly(e,t){if(1&e){var n=so();to(0,"form",2,3),uo("ngSubmit",(function(){mn(n);var e=$a(1),t=fo();return e.form.valid&&t.register()})),Ya(2,Py,3,1,"div",4),to(3,"div",5),to(4,"label",6),So(5),qs(6,"translate"),no(),to(7,"input",7,8),uo("ngModelChange",(function(e){return mn(n),fo().user.profile.firstName=e})),no(),Ya(9,Dy,3,3,"div",9),no(),to(10,"div",5),to(11,"label",10),So(12),qs(13,"translate"),no(),to(14,"input",11,12),uo("ngModelChange",(function(e){return mn(n),fo().user.profile.lastName=e})),no(),Ya(16,My,3,3,"div",9),no(),to(17,"div",13),to(18,"label",14),So(19),qs(20,"translate"),no(),to(21,"input",15,16),uo("ngModelChange",(function(e){return mn(n),fo().user.profile.company=e})),no(),Ya(23,Iy,3,3,"div",9),no(),to(24,"div",13),to(25,"label",17),So(26),qs(27,"translate"),no(),to(28,"input",18,19),uo("ngModelChange",(function(e){return mn(n),fo().user.profile.phone=e})),no(),no(),Ya(30,xy,8,8,"div",4),to(31,"div",5),to(32,"label",20),So(33),qs(34,"translate"),no(),to(35,"input",21,22),uo("ngModelChange",(function(e){return mn(n),fo().user.password=e})),no(),Ya(37,_y,3,3,"div",9),Ya(38,Uy,2,1,"div",9),no(),to(39,"form",23,24),to(41,"div"),So(42),qs(43,"translate"),no(),to(44,"div",25),to(45,"input",26,27),uo("ngModelChange",(function(e){return mn(n),fo().check_TOU=e})),no(),io(47,"label",28),to(48,"a",29),So(49),qs(50,"translate"),no(),no(),to(51,"div",30),to(52,"input",31,32),uo("ngModelChange",(function(e){return mn(n),fo().check_DP=e})),no(),io(54,"label",33),to(55,"a",34),So(56),qs(57,"translate"),no(),no(),no(),to(58,"div",13),to(59,"button",35),So(60),qs(61,"translate"),no(),Ya(62,Oy,1,0,"img",36),to(63,"a",37),So(64),qs(65,"translate"),no(),no(),no()}if(2&e){var i=$a(1),r=$a(8),a=$a(15),o=$a(22),s=$a(36),l=fo();zi(2),Xa("ngIf",l.user._id),zi(1),Xa("ngClass",Gs(51,Ty,i.submitted&&!r.valid)),zi(2),To(zs(6,31,"register.lbl.firstName")),zi(2),Xa("ngModel",l.user.profile.firstName),zi(2),Xa("ngIf",i.submitted&&!r.valid),zi(1),Xa("ngClass",Gs(53,Ty,i.submitted&&!a.valid)),zi(2),To(zs(13,33,"register.lbl.lastName")),zi(2),Xa("ngModel",l.user.profile.lastName),zi(2),Xa("ngIf",i.submitted&&!a.valid),zi(3),To(zs(20,35,"register.lbl.company")),zi(2),Xa("ngModel",l.user.profile.company),zi(2),Xa("ngIf",i.submitted&&!o.valid),zi(3),To(zs(27,37,"register.lbl.phone")),zi(2),Xa("ngModel",l.user.profile.phone),zi(2),Xa("ngIf",!l.user._id),zi(1),Xa("ngClass",Gs(55,Ty,i.submitted&&!s.valid)),zi(1),go("title","Password Rule: ",l.PWPolicyDescription,""),zi(1),xo(" ",zs(34,39,"register.lbl.password")," (*) "),zi(2),po("pattern",l.PWPolicy),Xa("ngModel",l.user.password),zi(2),Xa("ngIf",!s.valid),zi(1),Xa("ngIf",!s.valid&&l.PWPolicyDescription),zi(4),To(zs(43,41,"register.titleTC")),zi(3),Xa("ngModel",l.check_TOU),zi(4),To(zs(50,43,"register.lbl.acceptTC")),zi(3),Xa("ngModel",l.check_DP),zi(4),To(zs(57,45,"register.lbl.acceptDP")),zi(4),To(zs(61,47,"register.btn.register")),zi(2),Xa("ngIf",l.loading),zi(1),Xa("routerLink",Ls(57,Ey)),zi(1),To(zs(65,49,"register.btn.cancel"))}}var Gy,Ry,jy,Ny,Fy=((Gy=function(){function e(t,n,i,r,a,o){p(this,e),this.messageService=t,this.route=n,this.router=i,this.authenticationService=r,this.alertService=a,this.translate=o,this.hash=void 0,this.loading=!1}return m(e,[{key:"ngOnInit",value:function(){this.getPWPolicy();var e=this.route.snapshot.paramMap.get("id");if(this.hash=this.route.snapshot.queryParams.hash,e)this.getUser(e,this.hash);else{var t=new gf;t.profile=new vf,t.status=new ff,this.user=t}this.log("Register for User ".concat(e," hash ").concat(this.hash))}},{key:"register",value:function(){var e=this;if(this.check_DP&&this.check_TOU)this.loading=!0,this.log("Call register Service "+JSON.stringify(this.user)),this.authenticationService.createUser(this.user,this.hash).subscribe((function(t){if(e.hash){var n=e.translate.instant("register.msg.registerSuccess",{email:t.email});e.alertService.success(n,!0)}else{var i=e.translate.instant("register.msg.registerSuccessConfirm",{email:t.email});e.alertService.success(i,!0)}e.router.navigate(["login"])}),(function(t){e.log("Error during Create User "+t.error.message),e.alertService.error(Zv(t)),e.loading=!1}));else{var t=this.translate.instant("register.msg.confirmDP_TOU");this.alertService.error(t,!1)}}},{key:"getUser",value:function(e,t){var n=this;this.authenticationService.getUser(e,t).subscribe((function(e){n.log("Init Signup User success "+JSON.stringify(e)),e.profile||(e.profile=new vf),n.user=e}),(function(e){n.log("Init Signup User Failed: ".concat(e.status," ").concat(e.error.message," ")),n.alertService.error(Zv(e))}))}},{key:"getPWPolicy",value:function(){var e=this;this.authenticationService.initPWPolicy().subscribe((function(t){e.log("Init PW Policy success "+JSON.stringify(t)),e.PWPolicy=t.PWPolicy,e.PWPolicyDescription=t.Description}),(function(t){e.log("Init PW Policy Failed: ".concat(t.status," ").concat(t.error.message," ")),e.alertService.error(Zv(t))}))}},{key:"log",value:function(e){this.messageService.add("Register: "+e)}}]),e}()).\u0275fac=function(e){return new(e||Gy)(Za(tf),Za(sg),Za(Am),Za(Af),Za(Zm),Za(Rb))},Gy.\u0275cmp=wt({type:Gy,selectors:[["app-register"]],decls:5,vars:4,consts:[[1,"col-md-6","col-md-offset-3"],["name","form","novalidate","",3,"ngSubmit",4,"ngIf"],["name","form","novalidate","",3,"ngSubmit"],["f","ngForm"],[4,"ngIf"],[1,"form-group",3,"ngClass"],["for","firstName"],["type","text","name","firstName","required","","autocomplete","on",1,"form-control",3,"ngModel","ngModelChange"],["firstName","ngModel"],["class","help-block",4,"ngIf"],["for","lastName"],["type","text","name","lastName","required","","autocomplete","on",1,"form-control",3,"ngModel","ngModelChange"],["lastName","ngModel"],[1,"form-group"],["for","company"],["type","text","name","company","required","","autocomplete","on",1,"form-control",3,"ngModel","ngModelChange"],["company","ngModel"],["for","phone"],["type","text","name","phone",1,"form-control",3,"ngModel","ngModelChange"],["phone","ngModel"],["for","password-new","data-toggle","tooltip","data-placement","top","data-delay","50",3,"title"],["type","password","name","password-new","required","","autocomplete","off",1,"form-control",3,"ngModel","pattern","ngModelChange"],["password","ngModel"],["name","legal","novalidate",""],["fLegal","ngForm"],[1,"custom-control","custom-checkbox"],["type","checkbox","id","IDcheckTOU","name","checkTOU","required","",1,"custom-control-input",3,"ngModel","ngModelChange"],["checkTOU","ngModel"],["for","IDcheckTOU",1,"custom-control-label"],["href","https://visbo.de/visbo-terms-conditions","target","_blank"],[1,"custom-control","custom-checkbox","mb-3"],["type","checkbox","id","IDcheckDP","name","checkDP","required","",1,"custom-control-input",3,"ngModel","ngModelChange"],["checkDP","ngModel"],["for","IDcheckDP",1,"custom-control-label"],["href","https://visbo.de/visbo-data-protection","target","_blank"],["type","submit",1,"btn","btn-primary"],["src","data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA==",4,"ngIf"],[1,"btn","btn-link",3,"routerLink"],[1,"help-block"],["for","username"],["type","email","name","username","required","","pattern","[^@\\s]+@[^@\\s]+\\.[^@\\s]+","required","","autocomplete","on",1,"form-control",3,"ngModel","ngModelChange"],["username","ngModel"],["src","data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA=="]],template:function(e,t){1&e&&(to(0,"div",0),to(1,"h2"),So(2),qs(3,"translate"),no(),Ya(4,Ly,66,58,"form",1),no()),2&e&&(zi(2),To(zs(3,2,"register.title")),zi(2),Xa("ngIf",t.user))},directives:[su,Fh,xd,Gh,iu,Ad,Kh,Td,Nh,Yh,qh,Cd,Pm],pipes:[jb],styles:[""]}),Gy),By=function(){return["/login"]},Hy=((Ry=function(){function e(t,n,i,r,a,o){p(this,e),this.messageService=t,this.router=n,this.route=i,this.authenticationService=r,this.alertService=a,this.translate=o}return m(e,[{key:"ngOnInit",value:function(){var e=this,t=this.route.snapshot.queryParams.hash,n=this.route.snapshot.queryParams.id;this.log("Init Register Confirm userid ".concat(n," Token ").concat(t)),this.authenticationService.registerconfirm(n,t).subscribe((function(){e.log("Register Confirm Success");var t=e.translate.instant("registerConfirm.msg.registerSuccess");e.alertService.success(t,!0),e.router.navigate(["login"])}),(function(t){e.log("Error during Register Confirm "+t.error.message),e.alertService.error(Zv(t)),e.router.navigate(["login"])}))}},{key:"log",value:function(e){this.messageService.add("Register Confirm: "+e)}}]),e}()).\u0275fac=function(e){return new(e||Ry)(Za(tf),Za(Am),Za(sg),Za(Af),Za(Zm),Za(Rb))},Ry.\u0275cmp=wt({type:Ry,selectors:[["app-registerconfirm"]],decls:12,vars:8,consts:[[1,"col-md-6","col-md-offset-3"],["name","form","novalidate",""],["f","ngForm"],[1,"form-group"],[1,"btn","btn-link",3,"routerLink"]],template:function(e,t){1&e&&(to(0,"div",0),to(1,"h2"),So(2),qs(3,"translate"),no(),to(4,"form",1,2),to(6,"p"),So(7),qs(8,"translate"),no(),to(9,"div",3),to(10,"a",4),So(11,"Cancel"),no(),no(),no(),no()),2&e&&(zi(2),To(zs(3,3,"registerConfirm.title")),zi(5),xo(" ",zs(8,5,"registerConfirm.description")," This is an inbetween page without specific content, you should get redirected to login. If not please use the button below. "),zi(3),Xa("routerLink",Ls(7,By)))},directives:[Fh,xd,Gh,Pm],pipes:[jb],styles:[""]}),Ry),Ky=function(){return["/login"]},qy=((Ny=function(){function e(t,n,i,r,a,o){p(this,e),this.messageService=t,this.router=n,this.route=i,this.authenticationService=r,this.alertService=a,this.translate=o}return m(e,[{key:"ngOnInit",value:function(){var e=this.route.snapshot.queryParams.hash;console.log("Init OAuth Confirm Hash "+e),this.authenticationService.oauthconfirm(e),console.log("OAuth Confirm Success");var t=this.translate.instant("oauthconfirm.msg.loginSuccess");this.alertService.success(t,!0),this.router.navigate(["/"])}},{key:"log",value:function(e){this.messageService.add("OAuth Confirm: "+e)}}]),e}()).\u0275fac=function(e){return new(e||Ny)(Za(tf),Za(Am),Za(sg),Za(Af),Za(Zm),Za(Rb))},Ny.\u0275cmp=wt({type:Ny,selectors:[["app-oauthconfirm"]],decls:12,vars:8,consts:[[1,"col-md-6","col-md-offset-3"],["name","form","novalidate",""],["f","ngForm"],[1,"form-group"],[1,"btn","btn-link",3,"routerLink"]],template:function(e,t){1&e&&(to(0,"div",0),to(1,"h2"),So(2),qs(3,"translate"),no(),to(4,"form",1,2),to(6,"p"),So(7),qs(8,"translate"),no(),to(9,"div",3),to(10,"a",4),So(11,"Cancel"),no(),no(),no(),no()),2&e&&(zi(2),To(zs(3,3,"oauthconfirm.title")),zi(5),xo(" ",zs(8,5,"oauthconfirm.description")," This is an inbetween page without specific content, you should get redirected to login. If not please use the button below. "),zi(3),Xa("routerLink",Ls(7,Ky)))},directives:[Fh,xd,Gh,Pm],pipes:[jb],styles:[""]}),Ny),zy=((jy=function(){function e(t){p(this,e),this.router=t}return m(e,[{key:"canActivate",value:function(e,t){return!!localStorage.getItem("currentUser")||(this.router.navigate(["login"],{queryParams:{returnUrl:t.url}}),!1)}}]),e}()).\u0275fac=function(e){return new(e||jy)(ot(Am))},jy.\u0275prov=Ve({token:jy,factory:jy.\u0275fac}),jy);function Qy(e,t){1&e&&(to(0,"div",12),So(1),qs(2,"translate"),no()),2&e&&(zi(1),To(zs(2,1,"pwForgotten.msg.emailRequired")))}function Wy(e,t){1&e&&io(0,"img",13)}var Jy,Yy=function(e){return{"has-error":e}},$y=function(){return["/login"]},Zy=((Jy=function(){function e(t,n,i,r,a,o){p(this,e),this.messageService=t,this.route=n,this.router=i,this.authenticationService=r,this.alertService=a,this.translate=o,this.loading=!1}return m(e,[{key:"ngOnInit",value:function(){this.user=new gf,this.route.snapshot.queryParams.email&&(this.user.email=this.route.snapshot.queryParams.email),this.log("Password Forgotten for User "+this.user.email)}},{key:"pwforgotten",value:function(){var e=this;this.loading=!0,this.authenticationService.pwforgotten(this.user).subscribe((function(){e.alertService.success("Password Forgotten Request successful. Please check your Mail to continue.",!0),e.router.navigate(["login"])}),(function(t){e.log("Error during Password Forgotten "+t.error.message),e.alertService.error(Zv(t),!0),e.loading=!1}))}},{key:"log",value:function(e){this.messageService.add("PW Forgotten: "+e)}}]),e}()).\u0275fac=function(e){return new(e||Jy)(Za(tf),Za(sg),Za(Am),Za(Af),Za(Zm),Za(Rb))},Jy.\u0275cmp=wt({type:Jy,selectors:[["app-pwforgotten"]],decls:21,vars:21,consts:[[1,"col-md-6","col-md-offset-3"],["name","form","novalidate","",3,"ngSubmit"],["f","ngForm"],[1,"form-group",3,"ngClass"],["for","username"],["type","text","name","username","required","",1,"form-control",3,"ngModel","ngModelChange"],["username","ngModel"],["class","help-block",4,"ngIf"],[1,"form-group"],[1,"btn","btn-primary",3,"disabled"],["src","data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA==",4,"ngIf"],[1,"btn","btn-link",3,"routerLink"],[1,"help-block"],["src","data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA=="]],template:function(e,t){if(1&e){var n=so();to(0,"div",0),to(1,"h2"),So(2),qs(3,"translate"),no(),to(4,"form",1,2),uo("ngSubmit",(function(){return mn(n),$a(5).form.valid&&t.pwforgotten()})),to(6,"div",3),to(7,"label",4),So(8),qs(9,"translate"),no(),to(10,"input",5,6),uo("ngModelChange",(function(e){return t.user.email=e})),no(),Ya(12,Qy,3,3,"div",7),no(),to(13,"div",8),to(14,"button",9),So(15),qs(16,"translate"),no(),Ya(17,Wy,1,0,"img",10),to(18,"a",11),So(19),qs(20,"translate"),no(),no(),no(),no()}if(2&e){var i=$a(5),r=$a(11);zi(2),To(zs(3,10,"pwForgotten.title")),zi(4),Xa("ngClass",Gs(18,Yy,i.submitted&&!r.valid)),zi(2),To(zs(9,12,"pwForgotten.lbl.email")),zi(2),Xa("ngModel",t.user.email),zi(2),Xa("ngIf",i.submitted&&!r.valid),zi(2),Xa("disabled",t.loading),zi(1),To(zs(16,14,"pwForgotten.btn.resetPW")),zi(2),Xa("ngIf",t.loading),zi(1),Xa("routerLink",Ls(20,$y)),zi(1),To(zs(20,16,"pwForgotten.btn.cancel"))}},directives:[Fh,xd,Gh,iu,Ad,Kh,Td,Nh,su,Pm],pipes:[jb],styles:[""]}),Jy);function Xy(e,t){1&e&&(to(0,"div",12),So(1),qs(2,"translate"),no()),2&e&&(zi(1),To(zs(2,1,"pwReset.msg.followPolicy")))}function ek(e,t){1&e&&(to(0,"div",12),So(1),qs(2,"translate"),no()),2&e&&(zi(1),To(zs(2,1,"pwReset.msg.followRule")))}function tk(e,t){1&e&&io(0,"img",13)}var nk,ik,rk=function(e){return{"has-error":e}},ak=function(){return["/login"]},ok=((nk=function(){function e(t,n,i,r,a,o){p(this,e),this.messageService=t,this.router=n,this.route=i,this.authenticationService=r,this.alertService=a,this.translate=o,this.loading=!1}return m(e,[{key:"ngOnInit",value:function(){this.getPWPolicy(),this.user=new gf,this.token=this.route.snapshot.queryParams.token,this.log("Init PW Reset Token "+this.token)}},{key:"pwreset",value:function(){var e=this;this.loading=!0,this.authenticationService.pwreset(this.user,this.token).subscribe((function(){var t=e.translate.instant("pwReset.msg.pwResetSuccess");e.alertService.success(t,!0),e.router.navigate(["login"])}),(function(t){e.loading=!1;var n=e.translate.instant("pwReset.msg.pwResetError");e.alertService.error(n,!0),e.log("Error during Reset Password "+t.error.message)}))}},{key:"getPWPolicy",value:function(){var e=this;this.authenticationService.initPWPolicy().subscribe((function(t){e.log("Init PW Policy success "+JSON.stringify(t)),e.PWPolicy=t.PWPolicy,e.PWPolicyDescription=t.Description}),(function(t){e.log("Init PW Policy Failed: ".concat(t.status," ").concat(t.error.message," ")),e.alertService.error(Zv(t))}))}},{key:"log",value:function(e){this.messageService.add("PW Reset: "+e)}}]),e}()).\u0275fac=function(e){return new(e||nk)(Za(tf),Za(Am),Za(sg),Za(Af),Za(Zm),Za(Rb))},nk.\u0275cmp=wt({type:nk,selectors:[["app-pwreset"]],decls:22,vars:23,consts:[[1,"col-md-6","col-md-offset-3"],["name","form","novalidate","",3,"ngSubmit"],["f","ngForm"],[1,"form-group",3,"ngClass"],["for","password","data-toggle","tooltip","data-placement","top","data-delay","50","title","Password Rule: At least one alpha, one capital, one number and one special character and a length of minimum 8."],["type","password","name","password","required","","autocomplete","off",1,"form-control",3,"ngModel","pattern","ngModelChange"],["password","ngModel"],["class","help-block",4,"ngIf"],[1,"form-group"],[1,"btn","btn-primary",3,"disabled"],["src","data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA==",4,"ngIf"],[1,"btn","btn-link",3,"routerLink"],[1,"help-block"],["src","data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA=="]],template:function(e,t){if(1&e){var n=so();to(0,"div",0),to(1,"h2"),So(2),qs(3,"translate"),no(),to(4,"form",1,2),uo("ngSubmit",(function(){return mn(n),$a(5).form.valid&&t.pwreset()})),to(6,"div",3),to(7,"label",4),So(8),qs(9,"translate"),no(),to(10,"input",5,6),uo("ngModelChange",(function(e){return t.user.password=e})),no(),Ya(12,Xy,3,3,"div",7),Ya(13,ek,3,3,"div",7),no(),to(14,"div",8),to(15,"button",9),So(16),qs(17,"translate"),no(),Ya(18,tk,1,0,"img",10),to(19,"a",11),So(20),qs(21,"translate"),no(),no(),no(),no()}if(2&e){var i=$a(5),r=$a(11);zi(2),To(zs(3,12,"pwReset.title")),zi(4),Xa("ngClass",Gs(20,rk,i.submitted&&!r.valid)),zi(2),xo(" ",zs(9,14,"pwReset.lbl.newPassword")," (*) "),zi(2),po("pattern",t.PWPolicy),Xa("ngModel",t.user.password),zi(2),Xa("ngIf",!r.valid),zi(1),Xa("ngIf",!r.valid),zi(2),Xa("disabled",t.loading),zi(1),To(zs(17,16,"pwReset.btn.resetPW")),zi(2),Xa("ngIf",t.loading),zi(1),Xa("routerLink",Ls(22,ak)),zi(1),To(zs(21,18,"pwReset.btn.cancel"))}},directives:[Fh,xd,Gh,iu,Ad,Kh,Td,Nh,Yh,su,Pm],pipes:[jb],styles:[""]}),nk),sk=function(e){return e[e.Project=0]="Project",e[e.Portfolio=1]="Portfolio",e[e.Template=2]="Template",e}({}),lk=function e(){p(this,e)},ck=function e(){p(this,e)},uk={headers:new ov({"Content-Type":"application/json"})},dk=((ik=function(){function e(t,n,i){p(this,e),this.http=t,this.messageService=n,this.env=i,this.vpUrl=this.env.restUrl.concat("/vp")}return m(e,[{key:"getVisboProjects",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=""+this.vpUrl,a=new ov({"Content-Type":"application/json"}),o=new cv;return e&&(o=o.append("vcid",e)),n&&(o=o.append("sysadmin","1")),i&&(o=o.append("deleted","1")),this.log("VP getVisboProjects Sysadmin ".concat(n," Deleted ").concat(i)),this.http.get(r,{headers:a,params:o}).pipe(B((function(e){return e.vp})),cf((function(e){return t.log("fetched ".concat(e.length," VisboProjects "))})),af(this.handleError("getVisboProjects")))}},{key:"getVisboProjectNo404",value:function(e){var t=this,n=""+this.vpUrl;return this.log("Calling HTTP Request: "+this.vpUrl),this.http.get(n).pipe(B((function(e){return e[0]})),cf((function(n){t.log("getVisboProject404 ".concat(n?"fetched":"did not find"," VisboProject id=").concat(e))})),af(this.handleError("getVisboProject id="+e)))}},{key:"getVisboProject",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r="".concat(this.vpUrl,"/").concat(e),a=new ov({"Content-Type":"application/json"}),o=new cv;return n&&(o=o.append("sysadmin","1")),i&&(o=o.append("deleted","1")),this.log("Calling HTTP Request for a specific entry: ".concat(r," params ").concat(o)),this.http.get(r,{headers:a,params:o}).pipe(B((function(e){return e.vp[0].perm=e.perm,e.vp[0]})),cf((function(e){return t.log("fetched vp id=".concat(e._id," ").concat(e.name))})),af(this.handleError("getVisboProject id="+e)))}},{key:"getCapacity",value:function(e,t,n,i){var r=this,a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]&&arguments[5],s=arguments.length>6&&void 0!==arguments[6]&&arguments[6],l=arguments.length>7&&void 0!==arguments[7]&&arguments[7],c=arguments.length>8&&void 0!==arguments[8]&&arguments[8],u="".concat(this.vpUrl,"/").concat(e,"/portfolio/").concat(t,"/capacity"),d=new ov({"Content-Type":"application/json"}),h=new cv;return a&&(h=h.append("hierarchy","1")),o&&(h=h.append("pfv","1")),c&&(h=h.append("perProject","1")),s&&(h=h.append("sysadmin","1")),l&&(h=h.append("deleted","1")),i&&(this.log("Calling RoleID: "+i),h=h.append("roleID",i)),n&&(h=h.append("refDate",n.toISOString())),this.log("Calling HTTP Request for a specific entry: "+u),this.http.get(u,{headers:d,params:h}).pipe(B((function(e){return e.vp[0]})),cf((function(n){return r.log("fetched Capacity for VP/VPF ".concat(e,"/ ").concat(t," Len: ").concat(n.capacity.length))})),af(this.handleError("getVisboPortfolio Capacity id:"+t)))}},{key:"addVisboProject",value:function(e){var t=this;return this.http.post(this.vpUrl,e,uk).pipe(B((function(e){return e.vp[0]})),cf((function(e){return t.log("added VisboProject with id="+e._id)})),af(this.handleError("addVisboProject")))}},{key:"deleteVisboProject",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=e._id,r="".concat(this.vpUrl,"/").concat(i),a=new ov({"Content-Type":"application/json"}),o=new cv;return n&&(o=o.append("deleted","1")),this.log("Calling HTTP Request: ".concat(r," ")),this.http.delete(r,{headers:a,params:o}).pipe(cf((function(){return t.log("deleted VisboProject id="+i)})),af(this.handleError("deleteVisboProject")))}},{key:"updateVisboProject",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i="".concat(this.vpUrl,"/").concat(e._id),r=new ov({"Content-Type":"application/json"}),a=new cv;return n&&(a=a.append("deleted","1")),this.log("Calling HTTP Request PUT: ".concat(i," ")),this.http.put(i,e,{headers:r,params:a}).pipe(B((function(e){return e.vp[0]})),cf((function(){return t.log("updated VisboProject id=".concat(e._id," url=").concat(t.vpUrl))})),af(this.handleError("updateVisboProject")))}},{key:"getVPUsers",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i="".concat(this.vpUrl,"/").concat(e,"/group?userlist=1"),r=new ov({"Content-Type":"application/json"}),a=new cv;return t&&(a=a.append("sysadmin","1")),n&&(a=a.append("deleted","1")),this.log("Calling HTTP Request GET: ".concat(i," ")),this.http.get(i,{headers:r,params:a}).pipe(B((function(e){var t=new py;return t.users=e.users,t.groups=e.groups,t})),af(this.handleError("getVisboProjectUsers")))}},{key:"addVPUser",value:function(e,t,n,i){var r=this,a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o="".concat(this.vpUrl,"/").concat(i,"/group/").concat(t,"/user"),s=new ov({"Content-Type":"application/json"}),l=new cv;a&&(l=l.append("sysadmin","1"));var c={email:e,message:n};return this.log("Calling HTTP Request: ".concat(o," for ").concat(e," ")),this.http.post(o,c,{headers:s,params:l}).pipe(B((function(e){return e.groups[0]})),cf((function(e){return r.log("added Visbo User to Group with id="+e._id)})),af(this.handleError("addVPUser")))}},{key:"deleteVPUser",value:function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r="".concat(this.vpUrl,"/").concat(t,"/group/").concat(e.groupId,"/user/").concat(e.userId),a=new ov({"Content-Type":"application/json"}),o=new cv;return i&&(o=o.append("sysadmin","1")),this.log("Calling HTTP Request: ".concat(r," for ").concat(e.email," as ").concat(e.groupName," ")),this.http.delete(r,{headers:a,params:o}).pipe(B((function(e){return e.groups[0]})),cf((function(){return n.log("deleted Visbo Project User "+e.email)})),af(this.handleError("deleteVisboProjectUser")))}},{key:"addVPGroup",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i="".concat(this.vpUrl,"/").concat(e.vpids[0],"/group"),r=new ov({"Content-Type":"application/json"}),a=new cv;return n&&(a=a.append("sysadmin","1")),this.log("Calling HTTP Request: ".concat(i," for ").concat(e.name," ")),this.http.post(i,e,{headers:r,params:a}).pipe(B((function(e){return e.groups[0]})),cf((function(e){return t.log("added Visbo Group with id="+e._id)})),af(this.handleError("addVPGroup")))}},{key:"modifyVPGroup",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i="".concat(this.vpUrl,"/").concat(e.vpids[0],"/group/").concat(e._id),r=new ov({"Content-Type":"application/json"}),a=new cv;return n&&(a=a.append("sysadmin","1")),this.log("Calling HTTP Request: ".concat(i," for ").concat(e.name," ")),this.http.put(i,e,{headers:r,params:a}).pipe(B((function(e){return e.groups[0]})),cf((function(e){return t.log("modified Visbo Group with id="+JSON.stringify(e))})),af(this.handleError("addVPGroup")))}},{key:"deleteVPGroup",value:function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r="".concat(this.vpUrl,"/").concat(t,"/group/").concat(e._id),a=new ov({"Content-Type":"application/json"}),o=new cv;return i&&(o=o.append("sysadmin","1")),this.log("Calling HTTP Request: ".concat(r," for Group ").concat(e.name," ")),this.http.delete(r,{headers:a,params:o}).pipe(cf((function(){return n.log("deleted Visbo Project Group "+e.name)})),af(this.handleError("deleteVisboProjectGroup")))}},{key:"unlockVP",value:function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r="".concat(this.vpUrl,"/").concat(t,"/lock"),a=new ov({"Content-Type":"application/json"}),o=new cv;return i&&(o=o.append("sysadmin","1")),e&&(o=o.append("variantID",e)),this.log("Calling HTTP Request: ".concat(r," Params ").concat(o," ")),this.http.delete(r,{headers:a,params:o}).pipe(B((function(e){return e.lock})),cf((function(){return n.log("deleted Visbo Project Lock for Variant "+e)})),af(this.handleError("deleteVisboProjectLock")))}},{key:"deleteRestriction",value:function(e,t){var n=this,i="".concat(this.vpUrl,"/").concat(e,"/restrict/").concat(t),r=new ov({"Content-Type":"application/json"}),a=new cv;return this.log("Calling HTTP Request: ".concat(i," Params ").concat(a," ")),this.http.delete(i,{headers:r,params:a}).pipe(B((function(e){return e.vp[0]})),cf((function(e){return n.log("deleted Visbo Project Restriction in VP "+e.name)})),af(this.handleError("deleteVisboProjectRestriction")))}},{key:"addRestriction",value:function(e,t){var n=this,i="".concat(this.vpUrl,"/").concat(e,"/restrict"),r=new ov({"Content-Type":"application/json"}),a=new cv;return this.log("Calling HTTP Request: ".concat(i," Params ").concat(a," ")),this.http.post(i,t,{headers:r,params:a}).pipe(B((function(e){return e.restrict[0]})),cf((function(e){return n.log("added Visbo Project Restriction "+JSON.stringify(e))})),af(this.handleError("addVisboProjectRestriction")))}},{key:"createVariant",value:function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r="".concat(this.vpUrl,"/").concat(t,"/variant"),a=new ov({"Content-Type":"application/json"}),o=new cv;i&&(o=o.append("sysadmin","1"));var s={variantName:e};return this.log("Calling HTTP Request: ".concat(r," for ").concat(e," ")),this.http.post(r,s,{headers:a,params:o}).pipe(B((function(e){return e.variant[0]})),cf((function(e){return n.log("added VP Variant with id="+e._id)})),af(this.handleError("createVariant")))}},{key:"deleteVariant",value:function(e,t){var n=this,i="".concat(this.vpUrl,"/").concat(t,"/variant/").concat(e),r=new ov({"Content-Type":"application/json"}),a=new cv;return this.log("Calling HTTP Request: ".concat(i," Params ").concat(a," ")),this.http.delete(i,{headers:r,params:a}).pipe(B((function(e){return e.vp[0]})),cf((function(e){return n.log("deleted Visbo Project Variant in VP "+e.name)})),af(this.handleError("deleteVisboProjectVariant")))}},{key:"handleError",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"operation";return function(n){return e.log("HTTP Request failed: ".concat(n.error.message," ").concat(n.status)),e.log("".concat(t," failed: ").concat(n.error.message)),nf(n)}}},{key:"log",value:function(e){this.messageService.add("VisboProjectService: "+e)}}]),e}()).\u0275fac=function(e){return new(e||ik)(ot(Sv),ot(tf),ot(Vf))},ik.\u0275prov=Ve({token:ik,factory:ik.\u0275fac}),ik);function hk(e,t){if(1&e){var n=so();to(0,"li",11),to(1,"a",12),So(2),qs(3,"translate"),no(),to(4,"div",13),to(5,"a",14),uo("click",(function(){return mn(n),fo(2).gotoClickedItem("settings")})),So(6),qs(7,"translate"),no(),to(8,"a",14),uo("click",(function(){return mn(n),fo(2).gotoClickedItem("sysadmins")})),So(9),qs(10,"translate"),no(),no(),no()}2&e&&(zi(2),xo(" ",zs(3,3,"navbar.others")," "),zi(4),To(zs(7,5,"navbar.settings")),zi(3),To(zs(10,7,"navbar.appAdmin")))}function vk(e,t){if(1&e){var n=so();to(0,"nav",1),to(1,"a",2),uo("click",(function(){return mn(n),fo().gotoClickedItem("dashboard")})),So(2),qs(3,"translate"),no(),to(4,"button",3),io(5,"i",4),no(),to(6,"div",5),to(7,"ul",6),to(8,"li",7),to(9,"a",8),uo("click",(function(){return mn(n),fo().gotoClickedItem("vc")})),So(10),qs(11,"translate"),no(),no(),to(12,"li",7),to(13,"a",8),uo("click",(function(){return mn(n),fo().gotoClickedItem("vp")})),So(14),qs(15,"translate"),no(),no(),to(16,"li",7),to(17,"a",8),uo("click",(function(){return mn(n),fo().gotoClickedItem("profile")})),So(18),qs(19,"translate"),no(),no(),Ya(20,hk,11,9,"li",9),to(21,"li",7),to(22,"a",10),uo("click",(function(){return mn(n),fo().gotoClickedItem("login")})),So(23),qs(24,"translate"),no(),no(),no(),no(),no()}if(2&e){var i=fo();zi(2),To(zs(3,6,"navbar.visbo")),zi(8),To(zs(11,8,"navbar.vc")),zi(4),To(zs(15,10,"navbar.vp")),zi(4),To(zs(19,12,"navbar.profile")),zi(2),Xa("ngIf",i.hasSystemPerm(i.permSystem.View)),zi(3),To(zs(24,14,"navbar.logout"))}}var fk,pk=((fk=function(){function e(t,n,i,r,a){p(this,e),this.route=t,this.router=n,this.alertService=i,this.messageService=r,this.visbocenterService=a,this.permSystem=cy}return m(e,[{key:"ngOnInit",value:function(){this.combinedPerm=this.visbocenterService.getSysAdminRole(),this.log("Navbar Init Sys Role ".concat(JSON.stringify(this.combinedPerm)," View ").concat(this.permSystem.View))}},{key:"gotoClickedItem",value:function(e){this.router.navigate([e])}},{key:"hasSystemPerm",value:function(e){var t;return((null===(t=this.combinedPerm)||void 0===t?void 0:t.system)&e)>0}},{key:"getPreView",value:function(){return Xv()}},{key:"log",value:function(e){this.messageService.add("NavBar: "+e)}}]),e}()).\u0275fac=function(e){return new(e||fk)(Za(sg),Za(Am),Za(Zm),Za(tf),Za(my))},fk.\u0275cmp=wt({type:fk,selectors:[["app-usernavbar"]],decls:1,vars:1,consts:[["class","navbar navbar-expand-md navbar-white bg-light sticky-top",4,"ngIf"],[1,"navbar","navbar-expand-md","navbar-white","bg-light","sticky-top"],[1,"navbar-brand","bg-light",3,"click"],["type","button","data-toggle","collapse","data-target","#navbarMainNavigation","aria-controls","navbarMainNavigation","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"fas","fa-bars"],["id","navbarMainNavigation",1,"collapse","navbar-collapse"],[1,"navbar-nav","mr-auto"],[1,"nav-item"],[1,"nav-link","bg-light",3,"click"],["class","nav-item dropdown",4,"ngIf"],[1,"nav-link","bg-light","align-right",3,"click"],[1,"nav-item","dropdown"],["href","#","id","navbarDropdown","role","button","data-toggle","dropdown","aria-haspopup","true","aria-expanded","false",1,"nav-link","dropdown-toggle","bg-light"],["aria-labelledby","navbarDropdown",1,"dropdown-menu"],[1,"dropdown-item",3,"click"]],template:function(e,t){1&e&&Ya(0,vk,25,16,"nav",0),2&e&&Xa("ngIf",!t.getPreView())},directives:[su],pipes:[jb],styles:[".navbar[_ngcontent-%COMP%]{padding:0;margin-bottom:1em;margin-top:1em}"]}),fk);function gk(e,t){if(1&e){var n=so();to(0,"div",7),to(1,"div",8),to(2,"div",9),to(3,"h3",10),uo("click",(function(){mn(n);var e=t.$implicit;return fo(2).gotoClickedVc(e)})),to(4,"a"),So(5),no(),no(),to(6,"h6",11),So(7),qs(8,"date"),no(),to(9,"p",12),So(10),no(),to(11,"div",13),to(12,"button",14),uo("click",(function(){mn(n);var e=t.$implicit;return fo(2).gotoClickedVc(e)})),So(13),qs(14,"translate"),no(),to(15,"button",15),uo("click",(function(){mn(n);var e=t.$implicit;return fo(2).gotoClickedVcDetail(e)})),So(16),qs(17,"translate"),no(),no(),no(),no(),no()}if(2&e){var i=t.$implicit;zi(5),To(i.name),zi(2),To(Qs(8,6,i.updatedAt,"dd.MM.yyyy HH:mm")),zi(3),To(i.description),zi(3),_o("",i.vpCount," ",zs(14,9,"dashboard.projects"),""),zi(3),To(zs(17,11,"dashboard.detail"))}}function mk(e,t){if(1&e&&(to(0,"div",2),to(1,"div",3),to(2,"h2"),So(3),qs(4,"translate"),no(),no(),to(5,"div",4),to(6,"div",5),Ya(7,gk,18,13,"div",6),no(),no(),no()),2&e){var n=fo();zi(3),To(zs(4,2,"dashboard.topvc")),zi(4),Xa("ngForOf",n.visbocenters)}}function bk(e,t){if(1&e){var n=so();to(0,"div",7),to(1,"div",8),to(2,"div",9),to(3,"h3",10),uo("click",(function(){mn(n);var e=t.$implicit;return fo(2).gotoClickedVp(e)})),to(4,"a"),So(5),no(),no(),to(6,"h6",16),So(7),no(),to(8,"h6",11),So(9),qs(10,"date"),no(),to(11,"p",12),So(12),no(),to(13,"div",13),to(14,"button",14),uo("click",(function(){mn(n);var e=t.$implicit;return fo(2).gotoClickedVp(e)})),So(15),qs(16,"translate"),no(),to(17,"button",15),uo("click",(function(){mn(n);var e=t.$implicit;return fo(2).gotoClickedVpDetail(e)})),So(18),qs(19,"translate"),no(),no(),no(),no(),no()}if(2&e){var i=t.$implicit;zi(5),To(i.name),zi(2),To(i.vc.name),zi(2),To(Qs(10,7,i.updatedAt,"dd.MM.yyyy HH:mm")),zi(3),To(i.description),zi(3),_o("",i.vpfCount||i.vpvCount," ",zs(16,10,"dashboard.versions"),""),zi(3),To(zs(19,12,"dashboard.detail"))}}function yk(e,t){if(1&e&&(to(0,"div",2),to(1,"div",0),to(2,"div",3),to(3,"h2"),So(4),qs(5,"translate"),no(),no(),no(),to(6,"div",4),to(7,"div",5),Ya(8,bk,20,14,"div",6),no(),no(),no()),2&e){var n=fo();zi(4),To(zs(5,2,"dashboard.topvp")),zi(4),Xa("ngForOf",n.visboprojects)}}function kk(e,t){1&e&&(to(0,"div",2),to(1,"div",3),to(2,"h2"),So(3),qs(4,"translate"),no(),to(5,"div"),So(6),qs(7,"translate"),no(),no(),no()),2&e&&(zi(3),To(zs(4,2,"dashboard.noVC")),zi(3),xo(" ",zs(7,4,"dashboard.msg.noVC")," "))}var Ck,Vk=((Ck=function(){function e(t,n,i,r,a,o,s,l){p(this,e),this.visbocenterService=t,this.visboprojectService=n,this.messageService=i,this.alertService=r,this.route=a,this.router=o,this.translate=s,this.titleService=l,this.visbocenters=[],this.visboprojects=[],this.combinedPerm=void 0,this.permVC=uy,this.permVP=dy}return m(e,[{key:"ngOnInit",value:function(){this.currentLang=this.translate.currentLang,this.titleService.setTitle(this.translate.instant("dashboard.title")),this.getVisboCenters(),this.getVisboProjects()}},{key:"getVisboCenters",value:function(){var e=this;this.visbocenterService.getVisboCenters().subscribe((function(t){e.visbocenters=t.sort((function(e,t){return e.updatedAt>t.updatedAt?-1:1})).slice(0,3)}),(function(t){console.log("get VCs failed: error: %d message: %s",t.status,t.error.message),e.alertService.error(Zv(t))}))}},{key:"getVisboProjects",value:function(){var e=this;this.visboprojectService.getVisboProjects(null).subscribe((function(t){e.visboprojects=t.sort((function(e,t){return e.updatedAt>t.updatedAt?-1:1})).slice(0,3)}),(function(t){console.log("get VPs failed: error: %d message: %s",t.status,t.error.message),e.alertService.error(Zv(t))}))}},{key:"hasVCPerm",value:function(e){return void 0!==this.combinedPerm&&(this.combinedPerm.vc&e)>0}},{key:"gotoClickedVc",value:function(e){this.router.navigate(["vp/"+e._id])}},{key:"gotoClickedVcDetail",value:function(e){this.router.navigate(["vcDetail/"+e._id])}},{key:"gotoClickedVp",value:function(e){this.router.navigate(e.vpType===sk.Portfolio?["vpf/"+e._id]:["vpKeyMetrics/"+e._id])}},{key:"gotoClickedVpVc",value:function(e){this.router.navigate(["vp/"+e.vcid])}},{key:"gotoClickedVpDetail",value:function(e){this.router.navigate(["vpDetail/"+e._id])}}]),e}()).\u0275fac=function(e){return new(e||Ck)(Za(my),Za(dk),Za(tf),Za(Zm),Za(sg),Za(Am),Za(Rb),Za(ud))},Ck.\u0275cmp=wt({type:Ck,selectors:[["app-dashboard"]],decls:5,vars:3,consts:[[1,"well"],["class","container-fluit",4,"ngIf"],[1,"container-fluit"],[1,"panel-heading"],[1,"col-12"],[1,"row"],["class","card-group col-sm-8 col-md-6 col-lg-4 mb-2",4,"ngFor","ngForOf"],[1,"card-group","col-sm-8","col-md-6","col-lg-4","mb-2"],[1,"card",2,"width","18rem"],[1,"card-body","d-flex","flex-column"],[1,"card-title",3,"click"],[1,"card-subtitle","mb-2","text-muted"],[1,"card-text"],[1,"align-self-bottom",2,"margin-top","auto"],["type","button",1,"mx-1","btn","btn-primary",3,"click"],["type","button",1,"mx-1","btn","btn-secondary",3,"click"],[1,"card-subtitle","mb-2","text-black"]],template:function(e,t){1&e&&(to(0,"div",0),io(1,"app-usernavbar"),no(),Ya(2,mk,8,4,"div",1),Ya(3,yk,9,4,"div",1),Ya(4,kk,8,6,"div",1)),2&e&&(zi(2),Xa("ngIf",t.visbocenters&&t.visbocenters.length>0),zi(1),Xa("ngIf",t.visboprojects&&t.visboprojects.length>0),zi(1),Xa("ngIf",t.visbocenters&&0==t.visbocenters.length&&t.visboprojects&&0==t.visboprojects.length))},directives:[pk,su,au],pipes:[jb,Cu],styles:[""]}),Ck);function wk(e,t){if(1&e){var n=so();to(0,"tr",12),uo("click",(function(){mn(n);var e=t.$implicit;return fo(2).gotoClickedRow(e)})),to(1,"td",6),So(2),no(),to(3,"td",13),to(4,"a"),So(5),no(),no(),to(6,"td",14),So(7),qs(8,"date"),no(),to(9,"td",15),So(10),qs(11,"date"),no(),to(12,"td",16),So(13),no(),to(14,"td",17),to(15,"button",18),uo("click",(function(){mn(n);var e=t.$implicit;return fo(2).gotoDetail(e)})),qs(16,"translate"),So(17,"i"),no(),no(),no()}if(2&e){var i=t.$implicit,r=t.index;zi(2),To(r+1),zi(3),To(i.name),zi(2),To(Qs(8,6,i.updatedAt,"dd.MM.yyyy HH:mm")),zi(3),To(Qs(11,9,i.updatedAt,"dd.MM.yy")),zi(3),To(i.vpCount),zi(2),po("title",zs(16,12,"vc.msg.detail"))}}function Ak(e,t){if(1&e){var n=so();to(0,"div",2),to(1,"h2",3),So(2),qs(3,"translate"),no(),to(4,"table",4),to(5,"thead",5),to(6,"tr"),to(7,"th",6),So(8),qs(9,"translate"),no(),to(10,"th",7),uo("click",(function(){return mn(n),fo().sortVCTable(1)})),So(11),qs(12,"translate"),no(),to(13,"th",8),uo("click",(function(){return mn(n),fo().sortVCTable(2)})),So(14),qs(15,"translate"),no(),to(16,"th",9),uo("click",(function(){return mn(n),fo().sortVCTable(3)})),So(17),qs(18,"translate"),no(),to(19,"th"),So(20,"Detail"),no(),no(),no(),to(21,"tbody",10),Ya(22,wk,18,14,"tr",11),no(),no(),no()}if(2&e){var i=fo();zi(2),xo(" ",zs(3,6,"vc.title")," "),zi(6),To(zs(9,8,"vc.lbl.nr")),zi(3),To(zs(12,10,"vc.lbl.name")),zi(3),To(zs(15,12,"vc.lbl.modified")),zi(3),To(zs(18,14,"vc.lbl.projects")),zi(5),Xa("ngForOf",i.visbocenters)}}function Pk(e,t){1&e&&(to(0,"div",2),to(1,"div",3),to(2,"h2"),So(3),qs(4,"translate"),no(),to(5,"div"),So(6),qs(7,"translate"),no(),no(),no()),2&e&&(zi(3),To(zs(4,2,"vc.noVC")),zi(3),xo(" ",zs(7,4,"vc.msg.noVC")," "))}var Dk,Mk,Ik=((Mk=function(){function e(t,n,i,r,a,o,s){p(this,e),this.visbocenterService=t,this.messageService=n,this.alertService=i,this.route=r,this.router=a,this.translate=o,this.titleService=s}return m(e,[{key:"ngOnInit",value:function(){this.titleService.setTitle(this.translate.instant("vc.title")),this.getVisboCenters()}},{key:"getVisboCenters",value:function(){var e=this;this.visbocenterService.getVisboCenters().subscribe((function(t){e.visbocenters=t,e.sortVCTable(1),e.log("get VCs success")}),(function(t){e.log("get VCs failed: error: ".concat(t.status," message: ").concat(t.error.message)),e.alertService.error(Zv(t))}))}},{key:"gotoDetail",value:function(e){this.router.navigate(["vcDetail/"+e._id])}},{key:"gotoClickedRow",value:function(e){this.router.navigate(["vp/"+e._id])}},{key:"sortVCTable",value:function(e){this.visbocenters&&(void 0===e&&void 0!==this.sortColumn||(e!==this.sortColumn&&(this.sortColumn=e,this.sortAscending=void 0),this.sortAscending=void 0===this.sortAscending?1===e:!this.sortAscending),1===this.sortColumn?this.visbocenters.sort((function(e,t){return qv(e.name.toLowerCase(),t.name.toLowerCase())})):2===this.sortColumn?this.visbocenters.sort((function(e,t){return zv(e.updatedAt,t.updatedAt)})):3===this.sortColumn&&this.visbocenters.sort((function(e,t){return e.vpCount-t.vpCount})),this.sortAscending||this.visbocenters.reverse())}},{key:"log",value:function(e){this.messageService.add("VisboCenter: "+e)}}]),e}()).\u0275fac=function(e){return new(e||Mk)(Za(my),Za(tf),Za(Zm),Za(sg),Za(Am),Za(Rb),Za(ud))},Mk.\u0275cmp=wt({type:Mk,selectors:[["app-visbocenters"]],decls:4,vars:2,consts:[[1,"well"],["class","panel-body",4,"ngIf"],[1,"panel-body"],[1,"panel-heading"],[1,"table","table-hover","table-sortable"],["id","VCHead"],[1,"d-none","d-md-table-cell"],["id","SortName",3,"click"],["id","SortDate",1,"d-none","d-sm-table-cell",3,"click"],["id","SortProjects",1,"d-none","d-md-table-cell",3,"click"],["id","VCList"],[3,"click",4,"ngFor","ngForOf"],[3,"click"],["id","ColName"],["id","ColDate",1,"d-none","d-md-table-cell"],["id","ColDate",1,"d-none","d-sm-table-cell","d-md-none"],["id","ColProjects",1,"d-none","d-md-table-cell"],["id","ColDetail"],[1,"Detail",3,"title","click"]],template:function(e,t){1&e&&(io(0,"app-usernavbar"),to(1,"div",0),Ya(2,Ak,23,16,"div",1),Ya(3,Pk,8,6,"div",1),no()),2&e&&(zi(2),Xa("ngIf",t.visbocenters&&t.visbocenters.length>0),zi(1),Xa("ngIf",t.visbocenters&&0==t.visbocenters.length))},directives:[pk,su,au],pipes:[jb,Cu],encapsulation:2}),Mk),Sk=((Dk=function(){function e(t,n,i){p(this,e),this.http=t,this.messageService=n,this.env=i,this.vcUrl=this.env.restUrl.concat("/vc")}return m(e,[{key:"getVCSettings",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i="".concat(this.vcUrl,"/").concat(e,"/setting"),r=new ov({"Content-Type":"application/json"}),a=new cv;return n&&(a=a.append("sysadmin","1")),this.log("Calling HTTP Request: ".concat(i," ")),this.http.get(i,{headers:r,params:a}).pipe(B((function(e){return e.vcsetting})),cf((function(e){return t.log("fetched ".concat(e.length," VCSettings "))})),af(this.handleError("getVCSettings",[])))}},{key:"getVCOrganisations",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2?arguments[2]:void 0,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a="".concat(this.vcUrl,"/").concat(e,"/organisation"),o=new ov({"Content-Type":"application/json"}),s=new cv;return n&&(s=s.append("sysadmin","1")),null!=i&&(s=s.append("refDate",i)),this.log("Calling HTTP Request: ".concat(a," ").concat(r)),this.http.get(a,{headers:o,params:s}).pipe(B((function(e){return e.vcsetting})),cf((function(e){return t.log("fetched ".concat(e.length," VCOrganisations "))})),af(this.handleError("getVCOrganisations",[])))}},{key:"getVCSetting",value:function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r="".concat(this.vcUrl,"/").concat(e,"/setting/").concat(t),a=new ov({"Content-Type":"application/json"}),o=new cv;return i&&(o=o.append("sysadmin","1")),this.log("Calling HTTP Request for a specific entry: "+r),this.http.get(r,{headers:a,params:o}).pipe(B((function(e){return e.vcsetting[0]})),cf((function(e){return n.log("fetched VC Setting ".concat(e.name," id:").concat(t," "))})),af(this.handleError("getVCSetting id:"+t)))}},{key:"getVCSettingByName",value:function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r="".concat(this.vcUrl,"/").concat(e,"/setting?name=").concat(t),a=new ov({"Content-Type":"application/json"}),o=new cv;return i&&(o=o.append("sysadmin","1")),this.log("Calling HTTP Request for a specific entry: "+r),this.http.get(r,{headers:a,params:o}).pipe(B((function(e){return e.vcsetting})),cf((function(e){return n.log("fetched ".concat(e.length," VCSettings "))})),af(this.handleError("getVCSettings by Name",[])))}},{key:"getVCSettingByType",value:function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r="".concat(this.vcUrl,"/").concat(e,"/setting?type=").concat(t),a=new ov({"Content-Type":"application/json"}),o=new cv;return i&&(o=o.append("sysadmin","1")),this.log("Calling HTTP Request for a specific entry: "+r),this.http.get(r,{headers:a,params:o}).pipe(B((function(e){return e.vcsetting})),cf((function(e){return n.log("fetched ".concat(e.length," VCSettings "))})),af(this.handleError("getVCSettings by Type",[])))}},{key:"addVCSetting",value:function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r="".concat(this.vcUrl,"/").concat(e,"/setting"),a=new ov({"Content-Type":"application/json"}),o=new cv;return i&&(o=o.append("sysadmin","1")),this.log("Calling HTTP Request: ".concat(r," ").concat(JSON.stringify(t))),this.http.post(r,t,{headers:a,params:o}).pipe(B((function(e){return e.vcsetting[0]})),cf((function(e){return n.log("added VCSetting ".concat(e.name," with id=").concat(e._id))})),af(this.handleError("addVCSetting")))}},{key:"deleteVCSetting",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=e._id,r="".concat(this.vcUrl,"/").concat(e.vcid,"/setting/").concat(i),a=new ov({"Content-Type":"application/json"}),o=new cv;return n&&(o=o.append("sysadmin","1")),this.log("Calling HTTP Request: ".concat(r," ")),this.http.delete(r,{headers:a,params:o}).pipe(cf((function(){return t.log("deleted VCSetting id="+i)})),af(this.handleError("deleteVCSetting")))}},{key:"updateVCSetting",value:function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r="".concat(this.vcUrl,"/").concat(e,"/setting/").concat(t._id),a=new ov({"Content-Type":"application/json"}),o=new cv;return i&&(o=o.append("sysadmin","1")),this.log("Calling HTTP Request PUT: ".concat(r," ")),this.http.put(r,t,{headers:a,params:o}).pipe(B((function(e){return e.vcsetting[0]})),cf((function(e){return n.log("updated VCSetting ".concat(e.name," with id=").concat(e._id))})),af(this.handleError("updateVCSetting")))}},{key:"handleError",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"operation",n=arguments.length>1?arguments[1]:void 0;return function(i){return e.log("HTTP Request ".concat(t," failed: ").concat(i.error.message," status:").concat(i.status,", Result ").concat(JSON.stringify(n))),nf(i)}}},{key:"log",value:function(e){this.messageService.add("VisboSettingService: "+e)}}]),e}()).\u0275fac=function(e){return new(e||Dk)(ot(Sv),ot(tf),ot(Vf))},Dk.\u0275prov=Ve({token:Dk,factory:Dk.\u0275fac}),Dk);function Tk(e,t){if(1&e){var n=so();to(0,"input",49),uo("ngModelChange",(function(e){return mn(n),fo(2).visbocenter.name=e})),no()}2&e&&Xa("ngModel",fo(2).visbocenter.name)}function xk(e,t){if(1&e&&(to(0,"label",50),So(1),no()),2&e){var n=fo(2);zi(1),xo("",n.visbocenter.name," ")}}function _k(e,t){if(1&e){var n=so();to(0,"textarea",51),uo("ngModelChange",(function(e){return mn(n),fo(2).visbocenter.description=e})),no()}2&e&&Xa("ngModel",fo(2).visbocenter.description)}function Uk(e,t){if(1&e&&(to(0,"label",52),So(1),no()),2&e){var n=fo(2);zi(1),xo("",n.visbocenter.description," ")}}function Ok(e,t){if(1&e){var n=so();to(0,"button",59),uo("click",(function(){mn(n);var e=fo(3);return e.gotoVCAudit(e.visbocenter)})),So(1),qs(2,"translate"),no()}2&e&&(zi(1),To(zs(2,1,"vcDetail.btn.viewAudit")))}function Ek(e,t){if(1&e){var n=so();to(0,"button",60),uo("click",(function(){return mn(n),fo(3).switchView("Groups")})),So(1),qs(2,"translate"),no()}2&e&&(zi(1),To(zs(2,1,"vcDetail.btn.viewGroups")))}function Lk(e,t){if(1&e){var n=so();to(0,"button",61),uo("click",(function(){return mn(n),fo(3).switchView("Users")})),So(1),qs(2,"translate"),no()}2&e&&(zi(1),To(zs(2,1,"vcDetail.btn.viewUsers")))}function Gk(e,t){if(1&e){var n=so();to(0,"button",62),uo("click",(function(){return mn(n),fo(3).switchView("ProjectUsers")})),So(1),qs(2,"translate"),no()}2&e&&(zi(1),To(zs(2,1,"vcDetail.btn.viewProjectUsers")))}function Rk(e,t){if(1&e){var n=so();to(0,"button",63),uo("click",(function(){return mn(n),fo(3).showSetting()})),So(1),qs(2,"translate"),no()}2&e&&(zi(1),To(zs(2,1,"vcDetail.btn.ViewSetting")))}function jk(e,t){if(1&e&&(to(0,"div"),to(1,"div",53),Ya(2,Ok,3,3,"button",54),Ya(3,Ek,3,3,"button",55),Ya(4,Lk,3,3,"button",56),Ya(5,Gk,3,3,"button",57),Ya(6,Rk,3,3,"button",58),no(),no()),2&e){var n=fo(2);zi(2),Xa("ngIf",n.hasVCPerm(n.permVC.ViewAudit)),zi(1),Xa("ngIf","Users"==n.showList),zi(1),Xa("ngIf","Users"!=n.showList),zi(1),Xa("ngIf",n.vgVPUsers&&n.vgVPUsers.length>0),zi(1),Xa("ngIf",n.hasVCPerm(n.permVC.Modify))}}function Nk(e,t){1&e&&(to(0,"div",65),to(1,"button",72),So(2),qs(3,"translate"),no(),no()),2&e&&(zi(2),xo(" ",zs(3,1,"vcDetail.btn.addUser")," "))}function Fk(e,t){1&e&&(to(0,"th"),So(1),qs(2,"translate"),no()),2&e&&(zi(1),To(zs(2,1,"vcDetail.lbl.delete")))}function Bk(e,t){if(1&e){var n=so();to(0,"td"),to(1,"button",75),uo("click",(function(){mn(n);var e=fo().index;return fo(4).helperUserIndex(e)})),qs(2,"translate"),So(3,"\xd7"),no(),no()}2&e&&(zi(1),po("title",zs(2,1,"vcDetail.lbl.deleteUser")))}function Hk(e,t){if(1&e){var n=so();to(0,"tr"),to(1,"td"),So(2),no(),to(3,"td",73),uo("click",(function(){mn(n);var e=t.index;return fo(4).calcCombinedPerm(e)})),to(4,"a"),So(5),no(),no(),to(6,"td",74),uo("click",(function(){return mn(n),fo(4).switchView("Groups")})),to(7,"a"),So(8),no(),no(),Ya(9,Bk,4,3,"td",0),no()}if(2&e){var i=t.$implicit,r=t.index,a=fo(4);zi(2),To(r+1),zi(3),To(i.email),zi(3),To(i.groupName),zi(1),Xa("ngIf",a.hasVCPerm(a.permVC.ManagePerm))}}function Kk(e,t){if(1&e){var n=so();to(0,"div"),to(1,"div",64),to(2,"div",65),to(3,"h4",66),So(4),qs(5,"translate"),no(),no(),Ya(6,Nk,4,3,"div",67),no(),to(7,"div",68),to(8,"table",69),to(9,"thead",70),to(10,"tr"),to(11,"th"),So(12),qs(13,"translate"),no(),to(14,"th",1),uo("click",(function(){return mn(n),fo(3).sortUserTable(1)})),So(15),qs(16,"translate"),no(),to(17,"th",1),uo("click",(function(){return mn(n),fo(3).sortUserTable(2)})),So(18),qs(19,"translate"),no(),Ya(20,Fk,3,3,"th",0),no(),no(),to(21,"tbody",71),Ya(22,Hk,10,4,"tr",34),no(),no(),no(),no()}if(2&e){var i=fo(3);zi(4),xo(" ",zs(5,7,"vcDetail.titleUsers")," "),zi(2),Xa("ngIf",i.hasVCPerm(i.permVC.ManagePerm)),zi(6),To(zs(13,9,"vcDetail.lbl.nr")),zi(3),To(zs(16,11,"vcDetail.lbl.email")),zi(3),To(zs(19,13,"vcDetail.lbl.group")),zi(2),Xa("ngIf",i.hasVCPerm(i.permVC.ManagePerm)),zi(2),Xa("ngForOf",i.vgUsers)}}function qk(e,t){if(1&e){var n=so();to(0,"div",65),to(1,"button",79),uo("click",(function(){return mn(n),fo(4).initGroup(null)})),So(2),qs(3,"translate"),no(),no()}2&e&&(zi(2),xo(" ",zs(3,1,"vcDetail.btn.addGroup")," "))}function zk(e,t){1&e&&(to(0,"th"),So(1),qs(2,"translate"),no()),2&e&&(zi(1),To(zs(2,1,"vcDetail.lbl.delete")))}function Qk(e,t){1&e&&(to(0,"td",84),So(1),qs(2,"translate"),no()),2&e&&(zi(1),To(zs(2,1,"vcDetail.lbl.global")))}function Wk(e,t){1&e&&io(0,"td",84)}function Jk(e,t){if(1&e){var n=so();to(0,"td"),to(1,"button",85),uo("click",(function(){mn(n);var e=fo().index;return fo(4).helperRemoveGroup(e)})),qs(2,"translate"),So(3,"\xd7"),no(),no()}2&e&&(zi(1),po("title",zs(2,1,"vcDetail.msg.removeGroup")))}function Yk(e,t){if(1&e){var n=so();to(0,"tr"),to(1,"td"),So(2),no(),to(3,"td",80),uo("click",(function(){mn(n);var e=t.index,i=t.$implicit,r=fo(4);return r.groupIndex=e,r.initGroup(i)})),to(4,"a"),So(5),no(),no(),to(6,"td",81),uo("click",(function(){return mn(n),fo(4).switchView("Users")})),to(7,"a"),So(8),no(),no(),Ya(9,Qk,3,3,"td",82),Ya(10,Wk,1,0,"td",82),Ya(11,Jk,4,3,"td",0),to(12,"td"),to(13,"button",83),uo("click",(function(){mn(n);var e=t.$implicit;return fo(4).initGroup(e)})),qs(14,"translate"),So(15,"i"),no(),no(),no()}if(2&e){var i=t.$implicit,r=t.index,a=fo(4);zi(2),To(r+1),zi(3),To(i.name),zi(3),To(i.users.length),zi(1),Xa("ngIf",i.global),zi(1),Xa("ngIf",!i.global),zi(1),Xa("ngIf",a.hasVCPerm(a.permVC.ManagePerm)),zi(2),po("title",zs(14,7,"vcDetail.msg.detailGroup"))}}function $k(e,t){if(1&e){var n=so();to(0,"div"),to(1,"div",64),to(2,"div",65),to(3,"h5",76),So(4),qs(5,"translate"),no(),no(),Ya(6,qk,4,3,"div",67),no(),to(7,"div",68),to(8,"table",69),to(9,"thead",77),to(10,"tr"),to(11,"th"),So(12),qs(13,"translate"),no(),to(14,"th",1),uo("click",(function(){return mn(n),fo(3).sortGroupTable(1)})),So(15),qs(16,"translate"),no(),to(17,"th",1),uo("click",(function(){return mn(n),fo(3).sortGroupTable(2)})),So(18),qs(19,"translate"),no(),to(20,"th"),So(21),qs(22,"translate"),no(),Ya(23,zk,3,3,"th",0),to(24,"th"),So(25),qs(26,"translate"),no(),no(),no(),to(27,"tbody",78),Ya(28,Yk,16,9,"tr",34),no(),no(),no(),no()}if(2&e){var i=fo(3);zi(4),xo(" ",zs(5,9,"vcDetail.titleGroups")," "),zi(2),Xa("ngIf",i.hasVCPerm(i.permVC.ManagePerm)),zi(6),To(zs(13,11,"vcDetail.lbl.nr")),zi(3),To(zs(16,13,"vcDetail.lbl.group")),zi(3),To(zs(19,15,"vcDetail.lbl.members")),zi(3),To(zs(22,17,"vcDetail.lbl.type")),zi(2),Xa("ngIf",i.hasVCPerm(i.permVC.ManagePerm)),zi(2),To(zs(26,19,"vcDetail.lbl.info")),zi(3),Xa("ngForOf",i.vgGroups)}}function Zk(e,t){if(1&e){var n=so();to(0,"tr",1),uo("click",(function(){mn(n);var e=t.$implicit;return fo(4).gotoVPDetail(e.vpid)})),to(1,"td"),So(2),no(),to(3,"td"),So(4),no(),to(5,"td"),So(6),no(),to(7,"td"),So(8),no(),no()}if(2&e){var i=t.$implicit,r=t.index;zi(2),To(r+1),zi(2),To(i.users.email),zi(2),To(i.vp.name),zi(2),To(i.groupName)}}function Xk(e,t){if(1&e){var n=so();to(0,"div"),to(1,"div",64),to(2,"div",65),to(3,"h5",86),So(4),qs(5,"translate"),no(),no(),no(),to(6,"div",68),to(7,"table",69),to(8,"thead"),to(9,"tr"),to(10,"th"),So(11),qs(12,"translate"),no(),to(13,"th",1),uo("click",(function(){return mn(n),fo(3).sortVPUserTable(1)})),So(14),qs(15,"translate"),no(),to(16,"th",1),uo("click",(function(){return mn(n),fo(3).sortVPUserTable(2)})),So(17),qs(18,"translate"),no(),to(19,"th"),So(20),qs(21,"translate"),no(),no(),no(),to(22,"tbody"),Ya(23,Zk,9,4,"tr",87),no(),no(),no(),no()}if(2&e){var i=fo(3);zi(4),xo(" ",zs(5,6,"vcDetail.titleProjectUsers")," "),zi(7),To(zs(12,8,"vcDetail.lbl.nr")),zi(3),To(zs(15,10,"vcDetail.lbl.email")),zi(3),To(zs(18,12,"vcDetail.lbl.project")),zi(3),To(zs(21,14,"vcDetail.lbl.group")),zi(3),Xa("ngForOf",i.vgVPUsers)}}function eC(e,t){if(1&e&&(to(0,"div"),Ya(1,Kk,23,15,"div",0),Ya(2,$k,29,21,"div",0),Ya(3,Xk,24,16,"div",0),no()),2&e){var n=fo(2);zi(1),Xa("ngIf","Users"==n.showList),zi(1),Xa("ngIf","Groups"==n.showList),zi(1),Xa("ngIf","ProjectUsers"==n.showList)}}function tC(e,t){1&e&&(to(0,"th"),So(1),qs(2,"translate"),no()),2&e&&(zi(1),To(zs(2,1,"vcDetail.lbl.delete")))}function nC(e,t){if(1&e&&(to(0,"td",93),So(1),qs(2,"date"),no()),2&e){var n=fo().$implicit;zi(1),To(Qs(2,1,n.updatedAt,"HH:mm:ss"))}}function iC(e,t){if(1&e&&(to(0,"td",93),So(1),qs(2,"date"),no()),2&e){var n=fo().$implicit;zi(1),To(Qs(2,1,n.updatedAt,"dd.MM.yy"))}}function rC(e,t){if(1&e){var n=so();to(0,"td"),to(1,"button",94),uo("click",(function(){mn(n);var e=fo().index;return fo(3).initSetting(e)}))("click",(function(){mn(n);var e=fo().index;return fo(3).helperSettingIndex(e)})),qs(2,"translate"),So(3,"\xd7"),no(),no()}2&e&&(zi(1),po("title",zs(2,1,"vcDetail.lbl.deleteSetting")))}function aC(e,t){if(1&e){var n=so();to(0,"tr"),to(1,"td"),So(2),no(),to(3,"td",90),uo("click",(function(){mn(n);var e=t.index;return fo(3).initSetting(e)})),to(4,"a"),So(5),no(),no(),to(6,"td",91),So(7),qs(8,"date"),no(),Ya(9,nC,3,4,"td",92),Ya(10,iC,3,4,"td",92),Ya(11,rC,4,3,"td",0),no()}if(2&e){var i=t.$implicit,r=t.index,a=fo(3);zi(2),To(r+1),zi(3),To(i.name),zi(2),To(Qs(8,6,i.timestamp,"dd.MM.yyyy")),zi(2),Xa("ngIf",a.isToday(i.updatedAt)),zi(1),Xa("ngIf",!a.isToday(i.updatedAt)),zi(1),Xa("ngIf",a.hasVCPerm(a.permVC.Modify))}}function oC(e,t){if(1&e){var n=so();to(0,"div"),to(1,"div"),to(2,"div",64),to(3,"div",65),to(4,"h4",66),So(5),qs(6,"translate"),no(),no(),no(),to(7,"div",68),to(8,"table",69),to(9,"thead",88),to(10,"tr"),to(11,"th"),So(12),qs(13,"translate"),no(),to(14,"th",1),uo("click",(function(){return mn(n),fo(2).sortSettingTable(1)})),So(15),qs(16,"translate"),no(),to(17,"th",1),uo("click",(function(){return mn(n),fo(2).sortSettingTable(2)})),So(18),qs(19,"translate"),no(),to(20,"th",1),uo("click",(function(){return mn(n),fo(2).sortSettingTable(3)})),So(21),qs(22,"translate"),no(),Ya(23,tC,3,3,"th",0),no(),no(),to(24,"tbody",89),Ya(25,aC,12,9,"tr",34),no(),no(),no(),no(),no()}if(2&e){var i=fo(2);zi(5),xo(" ",zs(6,7,"vcDetail.titleSettings")," "),zi(7),To(zs(13,9,"vcDetail.lbl.nr")),zi(3),To(zs(16,11,"vcDetail.lbl.settingName")),zi(3),To(zs(19,13,"vcDetail.lbl.timestamp")),zi(3),To(zs(22,15,"vcDetail.lbl.updatedAt")),zi(2),Xa("ngIf",i.hasVCPerm(i.permVC.ManagePerm)),zi(2),Xa("ngForOf",i.vcSettings)}}function sC(e,t){if(1&e){var n=so();to(0,"button",95),uo("click",(function(){return mn(n),fo(2).save()})),So(1),qs(2,"translate"),no()}2&e&&(zi(1),To(zs(2,1,"vcDetail.btn.save")))}function lC(e,t){1&e&&(to(0,"div",96),So(1),qs(2,"translate"),no()),2&e&&(zi(1),To(zs(2,1,"vcDetail.msg.emailRequired")))}function cC(e,t){if(1&e&&(to(0,"option"),So(1),no()),2&e){var n=t.$implicit;zi(1),To(n.name)}}function uC(e,t){1&e&&(to(0,"div",96),So(1),qs(2,"translate"),no()),2&e&&(zi(1),To(zs(2,1,"vcDetail.msg.groupRequired")))}function dC(e,t){1&e&&(to(0,"div",96),So(1),qs(2,"translate"),no()),2&e&&(zi(1),To(zs(2,1,"vcDetail.msg.invalidMessage")))}function hC(e,t){1&e&&(to(0,"button",97),So(1),qs(2,"translate"),no()),2&e&&(zi(1),To(zs(2,1,"vcDetail.btn.invite")))}function vC(e,t){if(1&e){var n=so();to(0,"button",98),uo("click",(function(){return mn(n),fo(2).addNewVCUser()})),So(1),qs(2,"translate"),no()}2&e&&(zi(1),To(zs(2,1,"vcDetail.btn.invite")))}function fC(e,t){if(1&e){var n=so();to(0,"div",17),to(1,"div",18),to(2,"div",19),to(3,"h5",99),So(4),qs(5,"translate"),no(),to(6,"button",21),to(7,"span",22),So(8,"\xd7"),no(),no(),no(),to(9,"div",23),to(10,"div"),to(11,"label",100),So(12),qs(13,"translate"),no(),no(),to(14,"form"),to(15,"div",101),to(16,"label",102),So(17),qs(18,"translate"),no(),to(19,"label",103),So(20),no(),no(),to(21,"div",101),to(22,"label",104),So(23),qs(24,"translate"),no(),to(25,"label",103),So(26),no(),no(),to(27,"div",101),to(28,"label",104),So(29),qs(30,"translate"),no(),to(31,"label",103),So(32),no(),no(),no(),no(),to(33,"div",38),to(34,"button",105),So(35),qs(36,"translate"),no(),to(37,"button",106),uo("click",(function(){mn(n);var e=fo(2);return e.removeVCUser(e.vgUsers[e.userIndex],e.visbocenter._id)})),So(38),qs(39,"translate"),no(),no(),no(),no()}if(2&e){var i=fo(2);zi(4),To(zs(5,10,"vcDetail.titleRemoveUser")),zi(8),To(zs(13,12,"vcDetail.msg.removeUserConfirm")),zi(5),xo("",zs(18,14,"vcDetail.lbl.vc"),":"),zi(3),xo("",i.visbocenter.name," "),zi(3),xo("",zs(24,16,"vcDetail.lbl.user"),":"),zi(3),To(i.vgUsers[i.userIndex].email),zi(3),xo("",zs(30,18,"vcDetail.lbl.group"),":"),zi(3),To(i.vgUsers[i.userIndex].groupName),zi(3),To(zs(36,20,"vcDetail.btn.back")),zi(3),To(zs(39,22,"vcDetail.btn.delete"))}}function pC(e,t){1&e&&(to(0,"h5",133),So(1),qs(2,"translate"),no()),2&e&&(zi(1),To(zs(2,1,"vcDetail.titleModifyGroup")))}function gC(e,t){1&e&&(to(0,"h5",133),So(1),qs(2,"translate"),no()),2&e&&(zi(1),To(zs(2,1,"vcDetail.titleAddGroup")))}var mC=function(e){return{"has-error":e}};function bC(e,t){if(1&e&&(to(0,"div",26),to(1,"label",134),So(2),qs(3,"translate"),no(),to(4,"label",135),So(5),no(),no()),2&e){fo();var n=$a(10),i=fo(2);Xa("ngClass",Gs(5,mC,n.submitted)),zi(2),xo("",zs(3,3,"vcDetail.lbl.name"),":"),zi(3),To(i.actGroup.name)}}function yC(e,t){1&e&&(to(0,"div",96),So(1),qs(2,"translate"),no()),2&e&&(zi(1),To(zs(2,1,"vcDetail.msg.groupNameRequired")))}function kC(e,t){if(1&e){var n=so();to(0,"div",26),to(1,"label",134),So(2),qs(3,"translate"),no(),to(4,"input",136,137),uo("ngModelChange",(function(e){return mn(n),fo(3).actGroup.name=e})),no(),Ya(6,yC,3,3,"div",30),no()}if(2&e){var i=$a(5);fo();var r=$a(10),a=fo(2);Xa("ngClass",Gs(6,mC,r.submitted)),zi(2),xo("",zs(3,4,"vcDetail.lbl.name"),":"),zi(2),Xa("ngModel",a.actGroup.name),zi(2),Xa("ngIf",i.errors&&(i.dirty||i.touched))}}function CC(e,t){if(1&e){var n=so();to(0,"div",138),to(1,"div"),So(2),qs(3,"translate"),no(),to(4,"div",111),to(5,"input",139,140),uo("ngModelChange",(function(e){return mn(n),fo(3).actGroup.checkedVPView=e})),no(),to(7,"label",141),So(8),qs(9,"translate"),no(),no(),to(10,"div",111),to(11,"input",142,143),uo("ngModelChange",(function(e){return mn(n),fo(3).actGroup.checkedVPViewAudit=e})),no(),to(13,"label",144),So(14),qs(15,"translate"),no(),no(),to(16,"div",111),to(17,"input",145,146),uo("ngModelChange",(function(e){return mn(n),fo(3).actGroup.checkedVPModify=e})),no(),to(19,"label",147),So(20),qs(21,"translate"),no(),no(),to(22,"div",111),to(23,"input",148,149),uo("ngModelChange",(function(e){return mn(n),fo(3).actGroup.checkedCreateVariant=e})),no(),to(25,"label",150),So(26),qs(27,"translate"),no(),no(),to(28,"div",111),to(29,"input",151,152),uo("ngModelChange",(function(e){return mn(n),fo(3).actGroup.checkedVPManagePerm=e})),no(),to(31,"label",153),So(32),qs(33,"translate"),no(),no(),to(34,"div",111),to(35,"input",154,155),uo("ngModelChange",(function(e){return mn(n),fo(3).actGroup.checkedVPDelete=e})),no(),to(37,"label",156),So(38),qs(39,"translate"),no(),no(),no()}if(2&e){var i=fo(3);zi(2),To(zs(3,13,"perm.titleVPPerm")),zi(3),Xa("ngModel",i.actGroup.checkedVPView),zi(3),To(zs(9,15,"perm.vpView")),zi(3),Xa("ngModel",i.actGroup.checkedVPViewAudit),zi(3),To(zs(15,17,"perm.vpViewAudit")),zi(3),Xa("ngModel",i.actGroup.checkedVPModify),zi(3),To(zs(21,19,"perm.vpModify")),zi(3),Xa("ngModel",i.actGroup.checkedCreateVariant),zi(3),To(zs(27,21,"perm.vpCreateVariant")),zi(3),Xa("ngModel",i.actGroup.checkedVPManagePerm),zi(3),To(zs(33,23,"perm.vpManagePerm")),zi(3),Xa("ngModel",i.actGroup.checkedVPDelete),zi(3),To(zs(39,25,"perm.vpDelete"))}}function VC(e,t){if(1&e){var n=so();to(0,"div",160),to(1,"a",161),uo("click",(function(){mn(n);var e=fo().$implicit;return fo(4).activateUser(e)})),So(2),no(),no()}if(2&e){var i=fo().$implicit;zi(2),To(i.email)}}function wC(e,t){if(1&e&&(ro(0,64),Ya(1,VC,3,1,"div",159),ao()),2&e){var n=t.$implicit,i=fo(4);zi(1),Xa("ngIf",n.groupName==i.actGroup.name)}}function AC(e,t){if(1&e&&(to(0,"div",138),to(1,"label",157),So(2),qs(3,"translate"),no(),Ya(4,wC,2,1,"ng-container",158),no()),2&e){var n=fo(3);zi(2),To(zs(3,2,"perm.lblGroupMembers")),zi(2),Xa("ngForOf",n.vgUsers)}}function PC(e,t){1&e&&(to(0,"div",138),to(1,"label",157),So(2),qs(3,"translate"),no(),no()),2&e&&(zi(2),To(zs(3,1,"perm.lblNoGroupMembers")))}function DC(e,t){if(1&e&&(to(0,"button",162),So(1),no()),2&e){var n=fo(3);zi(1),To(n.confirm)}}function MC(e,t){if(1&e){var n=so();to(0,"button",163),uo("click",(function(){return mn(n),fo(3).addModifyVCGroup()})),So(1),no()}if(2&e){var i=fo(3);zi(1),To(i.confirm)}}function IC(e,t){if(1&e){var n=so();to(0,"div",17),to(1,"div",18),to(2,"div",19),Ya(3,pC,3,3,"h5",107),Ya(4,gC,3,3,"h5",107),to(5,"button",21),to(6,"span",22),So(7,"\xd7"),no(),no(),no(),to(8,"div",23),to(9,"form",108,109),Ya(11,bC,6,7,"div",110),Ya(12,kC,7,8,"div",110),to(13,"div"),So(14),qs(15,"translate"),no(),to(16,"div",111),to(17,"input",112,113),uo("ngModelChange",(function(e){return mn(n),fo(2).actGroup.checkedView=e})),no(),to(19,"label",114),So(20),qs(21,"translate"),no(),no(),to(22,"div",111),to(23,"input",115,116),uo("ngModelChange",(function(e){return mn(n),fo(2).actGroup.checkedViewAudit=e})),no(),to(25,"label",117),So(26),qs(27,"translate"),no(),no(),to(28,"div",111),to(29,"input",118,119),uo("ngModelChange",(function(e){return mn(n),fo(2).actGroup.checkedModify=e})),no(),to(31,"label",120),So(32),qs(33,"translate"),no(),no(),to(34,"div",111),to(35,"input",121,122),uo("ngModelChange",(function(e){return mn(n),fo(2).actGroup.checkedCreateVP=e})),no(),to(37,"label",123),So(38),qs(39,"translate"),no(),no(),to(40,"div",111),to(41,"input",124,125),uo("ngModelChange",(function(e){return mn(n),fo(2).actGroup.checkedManagePerm=e})),no(),to(43,"label",126),So(44),qs(45,"translate"),no(),no(),io(46,"br"),to(47,"div",111),to(48,"input",127,128),uo("ngModelChange",(function(e){return mn(n),fo(2).actGroup.global=e})),no(),to(50,"label",129),So(51),qs(52,"translate"),no(),no(),Ya(53,CC,40,27,"div",130),Ya(54,AC,5,4,"div",130),Ya(55,PC,4,3,"div",130),to(56,"div",38),to(57,"button",39),So(58),qs(59,"translate"),no(),Ya(60,DC,2,1,"button",131),Ya(61,MC,2,1,"button",132),no(),no(),no(),no(),no()}if(2&e){var i=$a(10),r=fo(2);zi(3),Xa("ngIf",r.actGroup._id),zi(1),Xa("ngIf",!r.actGroup._id),zi(7),Xa("ngIf",r.actGroup.internal),zi(1),Xa("ngIf",!r.actGroup.internal),zi(2),To(zs(15,23,"perm.titleVCPerm")),zi(3),Xa("ngModel",r.actGroup.checkedView),zi(3),To(zs(21,25,"perm.vcView")),zi(3),Xa("ngModel",r.actGroup.checkedViewAudit),zi(3),To(zs(27,27,"perm.vcViewAudit")),zi(3),Xa("ngModel",r.actGroup.checkedModify),zi(3),To(zs(33,29,"perm.vcModify")),zi(3),Xa("ngModel",r.actGroup.checkedCreateVP),zi(3),To(zs(39,31,"perm.vcCreateVP")),zi(3),Xa("ngModel",r.actGroup.checkedManagePerm),zi(3),To(zs(45,33,"perm.vcManagePerm")),zi(4),Xa("ngModel",r.actGroup.global),zi(3),To(zs(52,35,"perm.vcGlobal")),zi(2),Xa("ngIf",r.actGroup.global),zi(1),Xa("ngIf",r.helperUsersPerGroup(r.actGroup.name)),zi(1),Xa("ngIf",!r.helperUsersPerGroup(r.actGroup.name)),zi(3),To(zs(59,37,"vcDetail.btn.back")),zi(2),Xa("ngIf",!(i.form.valid&&r.hasVCPerm(r.permVC.ManagePerm))),zi(1),Xa("ngIf",i.form.valid&&r.hasVCPerm(r.permVC.ManagePerm))}}function SC(e,t){if(1&e){var n=so();to(0,"div",17),to(1,"div",18),to(2,"div",19),to(3,"h5",99),So(4),qs(5,"translate"),no(),to(6,"button",21),to(7,"span",22),So(8,"\xd7"),no(),no(),no(),to(9,"div",23),to(10,"div"),to(11,"label",100),So(12),qs(13,"translate"),no(),no(),to(14,"form"),to(15,"div",101),to(16,"label",102),So(17),qs(18,"translate"),no(),to(19,"label",103),So(20),no(),no(),to(21,"div",101),to(22,"label",104),So(23),qs(24,"translate"),no(),to(25,"label",103),So(26),no(),no(),to(27,"div",101),to(28,"label",104),So(29),qs(30,"translate"),no(),to(31,"label",103),So(32),no(),no(),no(),no(),to(33,"div",38),to(34,"button",39),So(35),qs(36,"translate"),no(),to(37,"button",164),uo("click",(function(){mn(n);var e=fo(2);return e.removeVCGroup(e.vgGroups[e.groupIndex])})),So(38),qs(39,"translate"),no(),no(),no(),no()}if(2&e){var i=fo(2);zi(4),To(zs(5,10,"vcDetail.titleDeleteGroup")),zi(8),To(zs(13,12,"vcDetail.msg.removeGroupConfirm")),zi(5),xo("",zs(18,14,"vcDetail.lbl.vc"),":"),zi(3),xo("",i.visbocenter.name," "),zi(3),xo("",zs(24,16,"vcDetail.lbl.group"),":"),zi(3),To(i.vgGroups[i.groupIndex].name),zi(3),xo("",zs(30,18,"vcDetail.lbl.members"),":"),zi(3),To(i.vgGroups[i.groupIndex].users.length),zi(3),To(zs(36,20,"vcDetail.btn.back")),zi(3),To(zs(39,22,"vcDetail.btn.delete"))}}function TC(e,t){1&e&&io(0,"input",192)}function xC(e,t){1&e&&io(0,"input",193)}function _C(e,t){1&e&&io(0,"input",194)}function UC(e,t){1&e&&io(0,"input",195)}function OC(e,t){1&e&&io(0,"input",196)}function EC(e,t){1&e&&io(0,"input",197)}function LC(e,t){1&e&&io(0,"input",198)}function GC(e,t){1&e&&io(0,"input",199)}function RC(e,t){1&e&&io(0,"input",200)}function jC(e,t){1&e&&io(0,"input",201)}function NC(e,t){1&e&&io(0,"input",202)}function FC(e,t){1&e&&io(0,"input",203)}function BC(e,t){1&e&&io(0,"input",204)}function HC(e,t){1&e&&io(0,"input",205)}function KC(e,t){1&e&&io(0,"input",206)}function qC(e,t){1&e&&io(0,"input",207)}function zC(e,t){1&e&&io(0,"input",208)}function QC(e,t){1&e&&io(0,"input",209)}function WC(e,t){1&e&&io(0,"input",210)}function JC(e,t){1&e&&io(0,"input",211)}function YC(e,t){1&e&&io(0,"input",212)}function $C(e,t){1&e&&io(0,"input",213)}function ZC(e,t){if(1&e){var n=so();to(0,"div",160),to(1,"a",214),uo("click",(function(){mn(n);var e=fo().$implicit;return fo(3).activateGroup(e)})),So(2),no(),no()}if(2&e){var i=fo().$implicit;zi(2),To(i.groupName)}}function XC(e,t){if(1&e&&(ro(0,64),Ya(1,ZC,3,1,"div",159),ao()),2&e){var n=t.$implicit,i=fo(3);zi(1),Xa("ngIf",n.email==i.vgUsers[i.userIndex].email)}}var eV=function(e){return{name:e}};function tV(e,t){if(1&e&&(to(0,"div",165),to(1,"div",166),to(2,"div",18),to(3,"div",19),to(4,"h5",167),So(5),qs(6,"translate"),no(),to(7,"button",21),to(8,"span",22),So(9,"\xd7"),no(),no(),no(),to(10,"div",23),to(11,"div",138),So(12),qs(13,"translate"),no(),to(14,"div",111),Ya(15,TC,1,0,"input",168),Ya(16,xC,1,0,"input",169),to(17,"label",114),So(18),qs(19,"translate"),no(),no(),to(20,"div",111),Ya(21,_C,1,0,"input",170),Ya(22,UC,1,0,"input",171),to(23,"label",117),So(24),qs(25,"translate"),no(),no(),to(26,"div",111),Ya(27,OC,1,0,"input",172),Ya(28,EC,1,0,"input",173),to(29,"label",120),So(30),qs(31,"translate"),no(),no(),to(32,"div",111),Ya(33,LC,1,0,"input",174),Ya(34,GC,1,0,"input",175),to(35,"label",123),So(36),qs(37,"translate"),no(),no(),to(38,"div",111),Ya(39,RC,1,0,"input",176),Ya(40,jC,1,0,"input",177),to(41,"label",126),So(42),qs(43,"translate"),no(),no(),io(44,"br"),to(45,"div"),So(46),qs(47,"translate"),no(),to(48,"div",111),Ya(49,NC,1,0,"input",178),Ya(50,FC,1,0,"input",179),to(51,"label",141),So(52),qs(53,"translate"),no(),no(),to(54,"div",111),Ya(55,BC,1,0,"input",180),Ya(56,HC,1,0,"input",181),to(57,"label",144),So(58),qs(59,"translate"),no(),no(),to(60,"div",111),Ya(61,KC,1,0,"input",182),Ya(62,qC,1,0,"input",183),to(63,"label",147),So(64),qs(65,"translate"),no(),no(),to(66,"div",111),Ya(67,zC,1,0,"input",184),Ya(68,QC,1,0,"input",185),to(69,"label",150),So(70),qs(71,"translate"),no(),no(),to(72,"div",111),Ya(73,WC,1,0,"input",186),Ya(74,JC,1,0,"input",187),to(75,"label",153),So(76),qs(77,"translate"),no(),no(),to(78,"div",111),Ya(79,YC,1,0,"input",188),Ya(80,$C,1,0,"input",189),to(81,"label",156),So(82),qs(83,"translate"),no(),no(),to(84,"label",190),So(85),qs(86,"translate"),no(),Ya(87,XC,2,1,"ng-container",158),to(88,"div",38),to(89,"button",191),So(90),qs(91,"translate"),no(),no(),no(),no(),no(),no()),2&e){var n=fo(2);zi(5),To(Qs(6,39,"vcDetail.titlePermUser",Gs(72,eV,n.vgUsers[n.userIndex].email))),zi(7),To(zs(13,42,"perm.titleVCPerm")),zi(3),Xa("ngIf",n.hasUserVCPerm(n.permVC.View)),zi(1),Xa("ngIf",!n.hasUserVCPerm(n.permVC.View)),zi(2),To(zs(19,44,"perm.vcView")),zi(3),Xa("ngIf",n.hasUserVCPerm(n.permVC.ViewAudit)),zi(1),Xa("ngIf",!n.hasUserVCPerm(n.permVC.ViewAudit)),zi(2),To(zs(25,46,"perm.vcViewAudit")),zi(3),Xa("ngIf",n.hasUserVCPerm(n.permVC.Modify)),zi(1),Xa("ngIf",!n.hasUserVCPerm(n.permVC.Modify)),zi(2),To(zs(31,48,"perm.vcModify")),zi(3),Xa("ngIf",n.hasUserVCPerm(n.permVC.CreateVP)),zi(1),Xa("ngIf",!n.hasUserVCPerm(n.permVC.CreateVP)),zi(2),To(zs(37,50,"perm.vcCreateVP")),zi(3),Xa("ngIf",n.hasUserVCPerm(n.permVC.ManagePerm)),zi(1),Xa("ngIf",!n.hasUserVCPerm(n.permVC.ManagePerm)),zi(2),To(zs(43,52,"perm.vcManagePerm")),zi(4),To(zs(47,54,"perm.titleVPPerm")),zi(3),Xa("ngIf",n.hasUserVPPerm(n.permVP.View)),zi(1),Xa("ngIf",!n.hasUserVPPerm(n.permVP.View)),zi(2),To(zs(53,56,"perm.vpView")),zi(3),Xa("ngIf",n.hasUserVPPerm(n.permVP.ViewAudit)),zi(1),Xa("ngIf",!n.hasUserVPPerm(n.permVP.ViewAudit)),zi(2),To(zs(59,58,"perm.vpViewAudit")),zi(3),Xa("ngIf",n.hasUserVPPerm(n.permVP.Modify)),zi(1),Xa("ngIf",!n.hasUserVPPerm(n.permVP.Modify)),zi(2),To(zs(65,60,"perm.vpModify")),zi(3),Xa("ngIf",n.hasUserVPPerm(n.permVP.CreateVariant)),zi(1),Xa("ngIf",!n.hasUserVPPerm(n.permVP.CreateVariant)),zi(2),To(zs(71,62,"perm.vpCreateVariant")),zi(3),Xa("ngIf",n.hasUserVPPerm(n.permVP.ManagePerm)),zi(1),Xa("ngIf",!n.hasUserVPPerm(n.permVP.ManagePerm)),zi(2),To(zs(77,64,"perm.vpManagePerm")),zi(3),Xa("ngIf",n.hasUserVPPerm(n.permVP.DeleteVP)),zi(1),Xa("ngIf",!n.hasUserVPPerm(n.permVP.DeleteVP)),zi(2),To(zs(83,66,"perm.vpDelete")),zi(3),To(zs(86,68,"perm.lblGroupMembership")),zi(2),Xa("ngForOf",n.vgUsers),zi(3),To(zs(91,70,"vcDetail.btn.back"))}}function nV(e,t){if(1&e){var n=so();to(0,"div",17),to(1,"div",18),to(2,"div",19),to(3,"h5",215),So(4),qs(5,"translate"),no(),to(6,"button",21),to(7,"span",22),So(8,"\xd7"),no(),no(),no(),to(9,"div",23),to(10,"form",216),to(11,"div",101),to(12,"label",217),So(13),qs(14,"translate"),no(),to(15,"label",218),So(16),no(),no(),to(17,"div",101),to(18,"label",219),So(19),qs(20,"translate"),no(),to(21,"label",220),So(22),no(),no(),to(23,"div",101),to(24,"label",221),So(25),qs(26,"translate"),no(),to(27,"label",222),So(28),qs(29,"date"),no(),no(),to(30,"div",101),to(31,"label",223),So(32),qs(33,"translate"),no(),to(34,"label",224),So(35),qs(36,"date"),no(),no(),no(),no(),to(37,"div",38),to(38,"button",39),So(39),qs(40,"translate"),no(),to(41,"button",225),uo("click",(function(){return mn(n),fo(2).downloadSetting()})),So(42),qs(43,"translate"),no(),no(),no(),no()}if(2&e){var i=fo(2);zi(4),To(zs(5,11,"vcDetail.titleSettings")),zi(9),xo("",zs(14,13,"vcDetail.lbl.settingName"),":"),zi(3),xo("",i.vcSetting.name," "),zi(3),xo("",zs(20,15,"vcDetail.lbl.settingType"),":"),zi(3),xo("",i.vcSetting.type," "),zi(3),xo("",zs(26,17,"vcDetail.lbl.timestamp"),":"),zi(3),xo("",Qs(29,19,i.vcSetting.timestamp,"dd.MM.yy")," "),zi(4),xo("",zs(33,22,"vcDetail.lbl.updatedAt"),":"),zi(3),xo("",Qs(36,24,i.vcSetting.updatedAt,"dd.MM.yy")," "),zi(4),To(zs(40,27,"vcDetail.btn.cancel")),zi(3),To(zs(43,29,"vcDetail.btn.download"))}}function iV(e,t){if(1&e&&(to(0,"div",101),to(1,"label",229),So(2),qs(3,"translate"),no(),to(4,"label",103),So(5),qs(6,"date"),no(),no()),2&e){var n=fo(3);zi(2),xo("",zs(3,2,"vcDetail.lbl.timestamp"),":"),zi(3),xo("",Qs(6,4,n.vcSetting.timestamp,"dd.MM.yyyy HH:mm")," ")}}function rV(e,t){if(1&e){var n=so();to(0,"div",17),to(1,"div",18),to(2,"div",19),to(3,"h5",226),So(4),qs(5,"translate"),no(),to(6,"button",21),to(7,"span",22),So(8,"\xd7"),no(),no(),no(),to(9,"div",23),to(10,"div"),to(11,"label",100),So(12),qs(13,"translate"),no(),no(),to(14,"form"),to(15,"div",101),to(16,"label",217),So(17),qs(18,"translate"),no(),to(19,"label",103),So(20),no(),no(),to(21,"div",101),to(22,"label",219),So(23),qs(24,"translate"),no(),to(25,"label",103),So(26),no(),no(),Ya(27,iV,7,7,"div",227),to(28,"div",101),to(29,"label",228),So(30),qs(31,"translate"),no(),to(32,"label",103),So(33),qs(34,"date"),no(),no(),no(),no(),to(35,"div",38),to(36,"button",39),So(37),qs(38,"translate"),no(),to(39,"button",164),uo("click",(function(){mn(n);var e=fo(2);return e.removeVCSetting(e.vcSetting)})),So(40),qs(41,"translate"),no(),no(),no(),no()}if(2&e){var i=fo(2);zi(4),To(zs(5,11,"vcDetail.titleDeleteSetting")),zi(8),To(zs(13,13,"vcDetail.msg.removeSettingConfirm")),zi(5),xo("",zs(18,15,"vcDetail.lbl.setting"),":"),zi(3),xo("",i.vcSetting.name," "),zi(3),xo("",zs(24,17,"vcDetail.lbl.settingType"),":"),zi(3),xo("",i.vcSetting.type," "),zi(1),Xa("ngIf",i.vcSetting.timestamp),zi(3),xo("",zs(31,19,"vcDetail.lbl.updatedAt"),":"),zi(3),xo("",Qs(34,21,i.vcSetting.updatedAt,"dd.MM.yyyy HH:mm")," "),zi(4),To(zs(38,24,"vcDetail.btn.back")),zi(3),To(zs(41,26,"vcDetail.btn.delete"))}}function aV(e,t){if(1&e){var n=so();to(0,"div"),to(1,"h3"),So(2),qs(3,"translate"),to(4,"a",1),uo("click",(function(){mn(n);var e=fo();return e.gotoVPList(e.visbocenter)})),So(5),qs(6,"uppercase"),no(),no(),to(7,"form"),to(8,"div",2),to(9,"label",3),So(10),qs(11,"translate"),no(),Ya(12,Tk,1,1,"input",4),Ya(13,xk,2,1,"label",5),no(),to(14,"div",2),to(15,"label",6),So(16),qs(17,"translate"),no(),Ya(18,_k,1,1,"textarea",7),Ya(19,Uk,2,1,"label",8),no(),to(20,"div",9),to(21,"label",10),So(22),qs(23,"translate"),no(),to(24,"label",11),So(25),qs(26,"date"),no(),to(27,"label",12),So(28),qs(29,"date"),no(),no(),no(),Ya(30,jk,7,5,"div",0),Ya(31,eC,4,3,"div",0),to(32,"div"),Ya(33,oC,26,17,"div",0),no(),to(34,"div",13),Ya(35,sC,3,3,"button",14),to(36,"button",15),uo("click",(function(){return mn(n),fo().goBack()})),So(37),qs(38,"translate"),no(),no(),to(39,"div",16),to(40,"div",17),to(41,"div",18),to(42,"div",19),to(43,"h5",20),So(44),qs(45,"translate"),no(),to(46,"button",21),to(47,"span",22),So(48,"\xd7"),no(),no(),no(),to(49,"div",23),to(50,"form",24,25),to(52,"div",26),to(53,"label",27),So(54),qs(55,"translate"),no(),to(56,"input",28,29),uo("ngModelChange",(function(e){return mn(n),fo().newUserInvite.email=e})),no(),Ya(58,lC,3,3,"div",30),no(),to(59,"div",26),to(60,"label",31),So(61),qs(62,"translate"),no(),to(63,"select",32,33),uo("ngModelChange",(function(e){return mn(n),fo().newUserInvite.groupName=e})),io(65,"option"),Ya(66,cC,2,1,"option",34),no(),Ya(67,uC,3,3,"div",30),no(),to(68,"div",26),to(69,"label",35),So(70),qs(71,"translate"),no(),to(72,"textarea",36,37),uo("ngModelChange",(function(e){return mn(n),fo().newUserInvite.inviteMessage=e})),So(74," "),no(),no(),Ya(75,dC,3,3,"div",30),to(76,"div",38),to(77,"button",39),So(78),qs(79,"translate"),no(),Ya(80,hC,3,3,"button",40),Ya(81,vC,3,3,"button",41),no(),no(),no(),no(),no(),no(),to(82,"div",42),Ya(83,fC,40,24,"div",43),no(),to(84,"div",44),Ya(85,IC,62,39,"div",43),no(),to(86,"div",45),Ya(87,SC,40,24,"div",43),no(),Ya(88,tV,92,74,"div",46),to(89,"div",47),Ya(90,nV,44,31,"div",43),no(),to(91,"div",48),Ya(92,rV,42,28,"div",43),no(),no()}if(2&e){var i=$a(51),r=$a(57),a=$a(64),o=$a(73),s=fo();zi(2),xo("",zs(3,39,"vcDetail.title"),": "),zi(3),To(zs(6,41,s.visbocenter.name)),zi(5),xo("",zs(11,43,"vcDetail.lbl.name"),":"),zi(2),Xa("ngIf",s.hasVCPerm(s.permVC.Modify)),zi(1),Xa("ngIf",!s.hasVCPerm(s.permVC.Modify)),zi(3),xo("",zs(17,45,"vcDetail.lbl.description"),":"),zi(2),Xa("ngIf",s.hasVCPerm(s.permVC.Modify)),zi(1),Xa("ngIf",!s.hasVCPerm(s.permVC.Modify)),zi(3),xo("",zs(23,47,"vcDetail.lbl.createdUpdated"),":"),zi(3),xo("",Qs(26,49,s.visbocenter.createdAt,"dd.MM.yyyy HH:mm:ss")," "),zi(3),xo("",Qs(29,52,s.visbocenter.updatedAt,"dd.MM.yyyy HH:mm:ss")," "),zi(2),Xa("ngIf",s.getVCPerm()!=s.permVC.View),zi(1),Xa("ngIf",s.getVCPerm()!=s.permVC.View),zi(2),Xa("ngIf","Settings"==s.showList),zi(2),Xa("ngIf",s.hasVCPerm(s.permVC.Modify)),zi(2),To(zs(38,55,"vcDetail.btn.back")),zi(7),To(zs(45,57,"vcDetail.titleAddUser")),zi(8),Xa("ngClass",Gs(67,mC,i.submitted&&!r.valid)),zi(2),xo("",zs(55,59,"vcDetail.lbl.email"),":"),zi(2),Xa("ngModel",s.newUserInvite.email),zi(2),Xa("ngIf",i.submitted&&!r.valid),zi(1),Xa("ngClass",Gs(69,mC,i.submitted&&!a.valid)),zi(2),xo("",zs(62,61,"vcDetail.lbl.group"),":"),zi(2),Xa("ngModel",s.newUserInvite.groupName),zi(3),Xa("ngForOf",s.vgGroups),zi(1),Xa("ngIf",i.submitted&&!a.valid),zi(1),Xa("ngClass",Gs(71,mC,i.submitted&&!o.valid)),zi(2),xo("",zs(71,63,"vcDetail.lbl.message"),":"),zi(2),Xa("ngModel",s.newUserInvite.inviteMessage),zi(3),Xa("ngIf",i.submitted&&!o.valid),zi(3),To(zs(79,65,"vcDetail.btn.cancel")),zi(2),Xa("ngIf",!(r.valid&&a.valid)),zi(1),Xa("ngIf",r.valid&&a.valid),zi(2),Xa("ngIf",s.userIndex>=0&&s.userIndex<s.vgUsers.length),zi(2),Xa("ngIf",s.actGroup),zi(2),Xa("ngIf",s.groupIndex>=0&&s.groupIndex<s.vgGroups.length),zi(1),Xa("ngIf",s.vgUsers&&s.userIndex>=0),zi(2),Xa("ngIf",s.vcSetting),zi(2),Xa("ngIf",s.vcSetting)}}var oV,sV,lV=function e(){p(this,e)},cV=((oV=function(){function e(t,n,i,r,a,o,s,l,c){p(this,e),this.messageService=t,this.visbocenterService=n,this.visbosettingService=i,this.route=r,this.location=a,this.router=o,this.alertService=s,this.translate=l,this.titleService=c,this.newUserInvite=new pf,this.showList="Users",this.permVC=uy,this.permVP=dy,this.sortUserColumn=1,this.sortUserAscending=!0,this.sortVPUserColumn=1,this.sortVPUserAscending=!0,this.sortGroupColumn=1,this.sortGroupAscending=!0,this.sortSettingColumn=1,this.sortSettingAscending=!0}return m(e,[{key:"ngOnInit",value:function(){this.getVisboCenter(),this.getVisboCenterUsers()}},{key:"getVisboCenter",value:function(){var e=this,t=this.route.snapshot.paramMap.get("id");this.visbocenterService.getVisboCenter(t).subscribe((function(t){e.visbocenter=t,e.combinedPerm=t.perm,e.titleService.setTitle(e.translate.instant("vcDetail.titleName",{name:t.name})),e.log("VisboCenter initialised ".concat(e.visbocenter._id," Perm ").concat(JSON.stringify(e.combinedPerm)," "))}),(function(t){if(e.log("Get VC failed: error: ".concat(t.status," message: ").concat(t.error.message)),403===t.status){var n=e.translate.instant("vcDetail.msg.errorPerm");e.alertService.error(n)}else e.alertService.error(Zv(t))}))}},{key:"hasVCPerm",value:function(e){return void 0!==this.combinedPerm&&(this.combinedPerm.vc&e)>0}},{key:"getVCPerm",value:function(){return void 0===this.combinedPerm?0:this.combinedPerm.vc}},{key:"hasVPPerm",value:function(e){return void 0!==this.combinedPerm&&(this.combinedPerm.vp&e)>0}},{key:"hasUserVCPerm",value:function(e){return void 0!==this.combinedUserPerm&&(this.combinedUserPerm.vc&e)>0}},{key:"hasUserVPPerm",value:function(e){return void 0!==this.combinedUserPerm&&(this.combinedUserPerm.vp&e)>0}},{key:"getVisboCenterUsers",value:function(){var e=this,t=this.route.snapshot.paramMap.get("id");this.log("VisboCenter UserList of: "+t),this.visbocenterService.getVCUsers(t).subscribe((function(t){e.vgUsers=t.users,e.vgGroups=t.groups,e.vgVPUsers=t.vpusers,e.log("fetched Users ".concat(e.vgUsers.length,", Groups ").concat(e.vgGroups.length," Project Users ").concat(e.vgVPUsers.length)),e.sortUserTable(),e.sortGroupTable()}),(function(t){if(e.log("Get VC Users failed: error: ".concat(t.status," message: ").concat(t.error.message)),403===t.status){var n=e.translate.instant("vcDetail.msg.errorPerm");e.alertService.error(n)}else e.alertService.error(Zv(t))}))}},{key:"gotoVCAudit",value:function(e){this.router.navigate(["vcAudit/".concat(e._id)])}},{key:"goBack",value:function(){this.location.back()}},{key:"gotoVPList",value:function(e){this.router.navigate(["vp/".concat(e._id)])}},{key:"gotoVPDetail",value:function(e){this.router.navigate(["vpDetail/".concat(e)])}},{key:"save",value:function(){var e=this;this.visbocenterService.updateVisboCenter(this.visbocenter).subscribe((function(t){var n=e.translate.instant("vcDetail.msg.updateVCSuccess",{name:t.name});e.alertService.success(n,!0),e.goBack()}),(function(t){if(e.log("save VC failed: error: ".concat(t.status," message: ").concat(t.error.message," ")),403===t.status){var n=e.translate.instant("vcDetail.msg.errorPermVC",{name:e.visbocenter.name});e.alertService.error(n)}else if(409===t.status){var i=e.translate.instant("vcDetail.msg.errorVCConflict",{name:e.visbocenter.name});e.alertService.error(i)}else e.alertService.error(Zv(t))}))}},{key:"switchView",value:function(e){this.showList=e,this.log("VisboCenter new View: "+e)}},{key:"showSetting",value:function(){var e=this;this.showList="Settings";var t=this.route.snapshot.paramMap.get("id");this.log("VisboCenter Settings of: "+t),this.visbosettingService.getVCSettings(t).subscribe((function(t){e.log("fetched VC Settings "+t.length),e.vcSettings=t,e.sortSettingTable()}),(function(t){if(e.log("Get VC Settings failed: error: ".concat(t.status," message: ").concat(t.error.message)),403===t.status){var n=e.translate.instant("vcDetail.msg.errorPerm");e.alertService.error(n)}else e.alertService.error(Zv(t))}))}},{key:"addNewVCUser",value:function(){var e=this,t=this.newUserInvite.email.trim(),n=this.newUserInvite.groupName.trim(),i=this.vgGroups.filter((function(e){return e.name===n}))[0],r=i._id,a="";this.newUserInvite.inviteMessage&&(a=this.newUserInvite.inviteMessage.trim());var o=this.visbocenter._id;this.log("Add VisboCenter User: ".concat(t," Group: ").concat(n,"/").concat(r," VC: ").concat(o)),t&&r&&this.visbocenterService.addVCUser(t,r,a,o).subscribe((function(n){var r=new fy;r.userId=n.users.filter((function(e){return e.email===t}))[0].userId,r.email=t,r.groupId=n._id,r.groupName=n.name,r.groupType=i.groupType,r.internal=i.internal,e.log("Add VisboCenter User Push: "+JSON.stringify(r)),e.vgUsers.push(r),e.sortUserTable();for(var a=0;a<e.vgGroups.length;a++)if(e.vgGroups[a]._id===n._id){e.vgGroups[a]=n;break}var o=e.translate.instant("vcDetail.msg.addUserSuccess",{name:t});e.alertService.success(o)}),(function(t){if(e.log("Add VisboCenter User error: "+JSON.stringify(t)),403===t.status){var n=e.translate.instant("vcDetail.msg.errorAddUserPerm",{name:e.visbocenter.name});e.alertService.error(n)}else t.error&&(e.log("Error during add VC user "+t.error.message),e.alertService.error(Zv(t)))}))}},{key:"helperUserIndex",value:function(e){this.userIndex=e}},{key:"helperSettingIndex",value:function(e){this.settingIndex=e}},{key:"calcCombinedPerm",value:function(e){this.userIndex=e,this.combinedUserPerm={system:0,vc:0,vp:0},this.vgUsers.forEach(this.addUserPerm,this),this.log("Combined Permission for ".concat(this.vgUsers[e].email,"  ").concat(JSON.stringify(this.combinedUserPerm)))}},{key:"addUserPerm",value:function(e){if(e.email===this.vgUsers[this.userIndex].email){this.log("Add User Permission for "+e.groupName);var t=this.vgGroups.findIndex((function(t){return t.name===e.groupName}));t>=0?this.vgGroups[t].permission?(this.combinedUserPerm.system=this.combinedUserPerm.system|(this.vgGroups[t].permission.system||0),this.combinedUserPerm.vc=this.combinedUserPerm.vc|(this.vgGroups[t].permission.vc||0),this.combinedUserPerm.vp=this.combinedUserPerm.vp|(this.vgGroups[t].permission.vp||0)):this.log("Permission for Group not set "+e.groupName):this.log("Group not found "+e.groupName)}}},{key:"helperRemoveGroup",value:function(e){this.groupIndex=e}},{key:"helperUsersPerGroup",value:function(e){var t=this.vgGroups&&this.vgGroups.find((function(t){return t.name===e}));return t?t.users.length:0}},{key:"removeVCUser",value:function(e,t){var n=this;this.log("Remove VisboCenter User: ".concat(e.email,"/").concat(e.userId," Group: ").concat(e.groupName," VC: ").concat(t)),this.visbocenterService.deleteVCUser(e,t).subscribe((function(){n.vgUsers=n.vgUsers.filter((function(t){return t!==e}));for(var t=0;t<n.vgGroups.length;t++)if(n.vgGroups[t]._id===e.groupId){for(var i=0;i<n.vgGroups[t].users.length;i++)if(n.vgGroups[t].users[i].userId===e.userId){n.vgGroups[t].users.splice(i,1);break}break}var r=n.translate.instant("vcDetail.msg.removeUserSuccess",{name:e.email});n.alertService.success(r)}),(function(t){if(n.log("Remove VisboCenter User error: "+t.error.message),403===t.status){var i=n.translate.instant("vcDetail.msg.errorRemoveUserPerm",{name:e.email});n.alertService.error(i)}else n.log("Error during remove VC user "+t.error.message),n.alertService.error(Zv(t))}))}},{key:"helperVCPerm",value:function(e){var t=0;return e.checkedView&&(t+=this.permVC.View),e.checkedViewAudit&&(t+=this.permVC.ViewAudit),e.checkedModify&&(t+=this.permVC.Modify),e.checkedCreateVP&&(t+=this.permVC.CreateVP),e.checkedManagePerm&&(t+=this.permVC.ManagePerm),t}},{key:"helperVPPerm",value:function(e){var t=0;return e.checkedVPView&&(t+=this.permVP.View),e.checkedVPViewAudit&&(t+=this.permVP.ViewAudit),e.checkedVPModify&&(t+=this.permVP.Modify),e.checkedCreateVariant&&(t+=this.permVP.CreateVariant),e.checkedVPManagePerm&&(t+=this.permVP.ManagePerm),e.checkedVPDelete&&(t+=this.permVP.DeleteVP),t}},{key:"activateGroup",value:function(e){this.log("Activate Group : "+e.groupName);var t=this.vgGroups.find((function(t){return t.name==e.groupName}));this.initGroup(t)}},{key:"activateUser",value:function(e){this.log("Activate User : "+e.email);var t=this.vgUsers.findIndex((function(t){return t.email==e.email}));t>=0&&this.calcCombinedPerm(t)}},{key:"initGroup",value:function(e){this.actGroup=new vy,e?(this.confirm=this.translate.instant("VC"===e.groupType?"vcDetail.btn.save":"vcDetail.btn.view"),this.actGroup._id=e._id,this.log("Init Group Set GroupID : ".concat(this.actGroup._id," ID ").concat(e._id)),this.actGroup.name=e.name,this.actGroup.groupType=e.groupType,this.actGroup.internal=e.internal,this.actGroup.global=e.global,this.actGroup.checkedView=(e.permission.vc&this.permVC.View)>0,this.actGroup.checkedViewAudit=(e.permission.vc&this.permVC.ViewAudit)>0,this.actGroup.checkedModify=(e.permission.vc&this.permVC.Modify)>0,this.actGroup.checkedCreateVP=(e.permission.vc&this.permVC.CreateVP)>0,this.actGroup.checkedManagePerm=(e.permission.vc&this.permVC.ManagePerm)>0,this.actGroup.checkedVPView=(e.permission.vp&this.permVP.View)>0,this.actGroup.checkedVPViewAudit=(e.permission.vp&this.permVP.ViewAudit)>0,this.actGroup.checkedVPModify=(e.permission.vp&this.permVP.Modify)>0,this.actGroup.checkedCreateVariant=(e.permission.vp&this.permVP.CreateVariant)>0,this.actGroup.checkedVPManagePerm=(e.permission.vp&this.permVP.ManagePerm)>0,this.actGroup.checkedVPDelete=(e.permission.vp&this.permVP.DeleteVP)>0):(this.confirm=this.translate.instant("vcDetail.btn.addGroup"),this.actGroup._id=void 0,this.actGroup.name="",this.actGroup.groupType="VC",this.actGroup.internal=!1,this.actGroup.global=!1,this.actGroup.checkedView=!0),this.log("Init Group for Creation / Modification: ".concat(this.actGroup.name," ID ").concat(this.actGroup._id," Action ").concat(this.confirm," "))}},{key:"addModifyVCGroup",value:function(){var e=this,t=new hy;t.name=this.actGroup.name.trim(),t.global=this.actGroup.global,t.vcid=this.visbocenter._id,t.permission=new ly,t.permission.vc=this.helperVCPerm(this.actGroup),t.permission.vp=this.helperVPPerm(this.actGroup),this.log("Add/Modify VisboCenter Group: Group: ".concat(t.name," New/Modify ").concat(this.actGroup._id)),this.actGroup._id?(this.log("Modify VisboCenter Group: Group: ".concat(t.name," VC: ").concat(t.vcid," Perm: vc ").concat(t.permission.vc," vp ").concat(t.permission.vp)),t._id=this.actGroup._id,this.visbocenterService.modifyVCGroup(t).subscribe((function(n){e.vgGroups=e.vgGroups.filter((function(e){return e._id!==t._id})),e.vgGroups.push(n);for(var i=0;i<e.vgUsers.length;i++)e.vgUsers[i].groupId===t._id&&(e.vgUsers[i].groupName=n.name);e.sortUserTable(),e.sortGroupTable();var r=e.translate.instant("vcDetail.msg.changeGroupSuccess",{name:n.name});e.alertService.success(r)}),(function(n){if(e.log("Modify VisboCenter Group error: "+n.error.message),403===n.status){var i=e.translate.instant("vcDetail.msg.errorChangeGroupPerm",{name:t.name});e.alertService.error(i)}else e.log("Error during modify VC Group "+n.error.message),e.alertService.error(Zv(n))}))):(this.log("Add VisboCenter Group: Group: ".concat(t.name," VC: ").concat(t.vcid," Perm: vc ").concat(t.permission.vc," vp ").concat(t.permission.vp)),this.visbocenterService.addVCGroup(t).subscribe((function(n){e.vgGroups.push(n);var i=e.translate.instant("vcDetail.msg.createGroupSuccess",{name:t.name});e.alertService.success(i)}),(function(n){if(e.log("Add VisboCenter Group error: "+n.error.message),403===n.status){var i=e.translate.instant("vcDetail.msg.errorCreateGroupPerm",{name:t.name});e.alertService.error(i)}else e.log("Error during add VC Group "+n.error.message),e.alertService.error(Zv(n))})))}},{key:"removeVCGroup",value:function(e){var t=this;this.log("Remove VisboCenter Group: ".concat(e.name,"/").concat(e._id," VC: ").concat(e.vcid)),this.visbocenterService.deleteVCGroup(e).subscribe((function(n){t.log("Remove VisboCenter Group result: "+JSON.stringify(n)),t.vgGroups=t.vgGroups.filter((function(t){return t!==e})),t.vgUsers=t.vgUsers.filter((function(t){return t.groupId!==e._id}));var i=t.translate.instant("vcDetail.msg.removeGroupSuccess",{name:e.name});t.alertService.success(i)}),(function(n){if(t.log("Remove VisboCenter Group error: "+n.error.message),403===n.status){var i=t.translate.instant("vcDetail.msg.errorRemoveGroupPerm",{name:e.name});t.alertService.error(i)}else t.log("Error during remove VC user "+n.error.message),t.alertService.error(Zv(n))}))}},{key:"initSetting",value:function(e){this.vcSetting=this.vcSettings[e]}},{key:"removeVCSetting",value:function(e){var t=this;this.log("Remove VisboCenter Setting: ".concat(e.name,"/").concat(e.type," Timestamp: ").concat(e.timestamp)),this.visbosettingService.deleteVCSetting(e).subscribe((function(n){t.log("Remove VisboCenter Setting result: "+JSON.stringify(n)),t.vcSettings=t.vcSettings.filter((function(t){return t!==e}));var i=t.translate.instant("vcDetail.msg.removeSettingSuccess",{name:e.name});t.alertService.success(i)}),(function(n){if(t.log("Remove VisboCenter Setting error: "+n.error.message),403===n.status){var i=t.translate.instant("vcDetail.msg.errorRemoveSettingPerm",{name:e.name});t.alertService.error(i)}else t.log("Error during remove VC setting "+n.error.message),t.alertService.error(Zv(n))}))}},{key:"calcFullPath",value:function(e,t){if(t&&e>=0){var n="",i=e,r=-1;if(t[i]){var a=t[i]&&t[i].pid;a>=0&&(t[i].parent=t[a]&&t[a].name)}for(;i>=0&&t[i];)n="/".concat(t[i].name,n),i=t[i].pid,r+=1;t[e].path=n,t[e].level=r}}},{key:"downloadSetting",value:function(){var e,t=this,n=this.vcSetting;if(this.log("Download Setting ".concat(n.name," ").concat(n.type," ").concat(n.updatedAt)),"organisation"==n.type&&(null===(e=n.value)||void 0===e?void 0:e.allRoles)){for(var i=[],r=0;n.value.allRoles&&r<n.value.allRoles.length;r++){var a=n.value.allRoles[r],o=a.uid;i[o]||(i[o]=new lV,i[o].uid=o,i[o].calcid=o,i[o].pid=void 0),i[o].name=a.name,i[o].isExternRole=a.isExternRole,i[o].defaultKapa=a.defaultKapa,i[o].tagessatz=a.tagessatzIntern,i[o].employeeNr=a.employeeNr,i[o].defaultDayCapa=a.defaultDayCapa,a.entryDate>"0001-01-01T00:00:00Z"&&(i[o].entryDate=a.entryDate),a.exitDate<"2200-11-30T23:00:00Z"&&(i[o].exitDate=a.exitDate),i[o].aliases=a.aliases,a.isTeam?(this.log("Skip Handling of Team Members"),i[o].type=2,i[o].isTeam=!0):i[o].type=1;for(var s=0;s<a.subRoleIDs.length;s++){var l=Number(a.subRoleIDs[s].key);if(l<0){this.log("Inconsistent Org Structure Role ".concat(o," SubRole ").concat(a.subRoleIDs[s].key));break}i[l]?this.log("SubRole already exists ".concat(o," SubRole ").concat(l)):(i[l]=new lV,i[l].uid=l,i[l].calcid=l),i[l].pid||(i[l].pid=o)}}var c=0;n.value.allRoles.forEach((function(e){e.uid>c&&(c=e.uid)})),this.log("MaxID "+c);for(var u=0;u<n.value.allRoles.length;u++){var d=n.value.allRoles[u];if(d.isTeam&&d.subRoleIDs&&d.subRoleIDs.length>0)for(var h=0;h<d.subRoleIDs.length;h++){var v=d.subRoleIDs[h].key;if(i[v]&&!i[v].isTeam){var f=i[v];i[c+=1]=new lV,i[c].uid=v,i[c].calcid=c,i[c].type=2,i[c].pid=d.uid,i[c].name=f.name,i[c].parent=d.name,f.employeeNr&&(i[c].employeeNr=f.employeeNr),f.isExternRole&&(i[c].isExternRole=f.isExternRole),f.defaultDayCapa>=0&&(i[c].defaultDayCapa=f.defaultDayCapa),f.defaultKapa>=0&&(i[c].defaultKapa=f.defaultKapa),f.tagessatz>=0&&(i[c].tagessatz=f.tagessatz),f.entryDate&&(i[c].entryDate=f.entryDate),f.exitDate&&(i[c].exitDate=f.exitDate),f.aliases&&(i[c].aliases=f.aliases),i[c].percent=Number(d.subRoleIDs[h].value)||0}}}i.forEach((function(e){return t.calcFullPath(e.calcid,i)})),i.sort((function(e,t){return e.type!=t.type?e.type-t.type:qv(e.path,t.path)}));for(var p=[],g=0;n.value.allCosts&&g<n.value.allCosts.length;g++){var m=n.value.allCosts[g],b=m.uid;p[b]||(p[b]=new lV,p[b].uid=b,p[b].calcid=b,p[b].pid=void 0),p[b].name=m.name,p[b].type=3;for(var y=0;m.subCostIDs&&y<m.subCostIDs.length;y++){var k=Number(m.subCostIDs[y].key);if(k<0){this.log("Inconsistent Org Structure Cost ".concat(b," SubCost ").concat(m.subCostIDs[y].key));break}p[k]?this.log("listCost already exists ".concat(b," listCost ").concat(k)):(p[k]=new lV,p[k].uid=k,p[k].calcid=k),p[k].pid=b}}p.forEach((function(e){return t.calcFullPath(e.calcid,p)})),p.sort((function(e,t){return e.type!=t.type?e.type-t.type:qv(e.path,t.path)})),p.forEach((function(e){return i.push(e)})),this.log("Orga Structure "+JSON.stringify(i));var C="",V="\t";C=(C="sep=\t\n")+"name\tuid\ttype\torganisation\tisExternal\tisTeam\tdefaultKapa\ttagessatz\temployeeNr\tdefaultDayCapa\tentryDate\texitDate\tpercent\taliases\n";for(var w=0;w<i.length;w++){var A=i[w];if(A){var P='"'+A.name.padStart(A.name.length+A.level," ")+'"'+V+A.uid+V+(A.type||"")+V+(A.parent||"")+V+(A.isExternRole?"1":"")+V+(A.isTeam?"1":"")+V+(A.defaultKapa||"").toLocaleString()+V+(A.tagessatz||"").toLocaleString()+V+(A.employeeNr||"")+V+(A.defaultDayCapa||"").toLocaleString()+V+(A.entryDate?new Date(A.entryDate).toLocaleDateString():"")+V+(A.exitDate?new Date(A.exitDate).toLocaleDateString():"")+V+(A.percent?A.percent.toLocaleString():"")+V+(A.aliases&&A.aliases.length>0?A.aliases.join("#"):"")+"\n";C=C.concat(P)}}this.log("VC Setting Orga CSV Len ".concat(C.length," "));var D=new Blob([C],{type:"text/csv;charset=utf-8"});C="\ufeff"+C;var M=window.URL.createObjectURL(D);this.log("Open URL "+M);var I=document.createElement("a");document.body.appendChild(I),I.href=M;var S=new Date(n.timestamp),T=(S.getMonth()+1).toString(),x=S.getFullYear()+"-"+T.padStart(2,"0");I.download="VisboCenterOrganisation_".concat(x,".csv"),this.log("Open URL ".concat(M," doc ").concat(JSON.stringify(I))),I.click(),window.URL.revokeObjectURL(M)}else{var _=JSON.stringify(n.value);this.log("VC Setting JSON Len ".concat(_.length," "));var U=new Blob([_],{type:"text/plain"}),O=window.URL.createObjectURL(U);this.log("Open URL "+O);var E=document.createElement("a");document.body.appendChild(E),E.href=O,E.download="VisboCenterSetting_".concat(n.name,".json"),this.log("Open URL ".concat(O," doc ").concat(JSON.stringify(E))),E.click(),window.URL.revokeObjectURL(O)}}},{key:"sortUserTable",value:function(e){this.vgUsers&&(void 0===e&&void 0!==this.sortUserColumn||(e!==this.sortUserColumn&&(this.sortUserColumn=e,this.sortUserAscending=void 0),this.sortUserAscending=void 0===this.sortUserAscending?1===e||2===e:!this.sortUserAscending),1===this.sortUserColumn?this.vgUsers.sort((function(e,t){return qv(e.email,t.email)})):2===this.sortUserColumn&&this.vgUsers.sort((function(e,t){return qv(e.groupName.toLowerCase(),t.groupName.toLowerCase())})),this.sortUserAscending||this.vgUsers.reverse())}},{key:"sortVPUserTable",value:function(e){this.vgVPUsers&&(void 0===e&&void 0!==this.sortVPUserColumn||(e!==this.sortVPUserColumn&&(this.sortVPUserColumn=e,this.sortVPUserAscending=void 0),this.sortVPUserAscending=void 0===this.sortVPUserAscending?1===e||2===e:!this.sortVPUserAscending),1===this.sortVPUserColumn?this.vgVPUsers.sort((function(e,t){return qv(e.users.email,t.users.email)})):2===this.sortVPUserColumn&&this.vgVPUsers.sort((function(e,t){return qv(e.vp.name.toLowerCase(),t.vp.name.toLowerCase())})),this.log("Sort VP Users Column ".concat(this.sortVPUserColumn," Reverse: ").concat(this.sortVPUserAscending)),this.sortVPUserAscending||this.vgVPUsers.reverse())}},{key:"sortGroupTable",value:function(e){this.vgGroups&&(void 0===e&&void 0!==this.sortGroupColumn||(e!==this.sortGroupColumn&&(this.sortGroupColumn=e,this.sortGroupAscending=void 0),this.sortGroupAscending=void 0===this.sortGroupAscending?1===e:!this.sortGroupAscending),1===this.sortGroupColumn?this.vgGroups.sort((function(e,t){return qv(e.name.toLowerCase(),t.name.toLowerCase())})):2===this.sortGroupColumn&&this.vgGroups.sort((function(e,t){return t.users.length-e.users.length})),this.sortGroupAscending||this.vgGroups.reverse())}},{key:"sortSettingTable",value:function(e){this.vcSettings&&(void 0===e&&void 0!==this.sortSettingColumn||(e!==this.sortSettingColumn&&(this.sortSettingColumn=e,this.sortSettingAscending=void 0),this.sortSettingAscending=void 0===this.sortSettingAscending?1===e:!this.sortSettingAscending),1===this.sortSettingColumn?this.vcSettings.sort((function(e,t){return qv(e.name.toLowerCase(),t.name.toLowerCase())})):2===this.sortSettingColumn?this.vcSettings.sort((function(e,t){return zv(e.timestamp,t.timestamp)})):3===this.sortSettingColumn&&this.vcSettings.sort((function(e,t){return zv(e.updatedAt,t.updatedAt)})),this.sortSettingAscending||this.vcSettings.reverse())}},{key:"isToday",value:function(e){return this.today||(this.today=new Date,this.today.setHours(0,0,0,0)),new Date(e)>=this.today}},{key:"log",value:function(e){this.messageService.add("VisboCenter Details: "+e)}}]),e}()).\u0275fac=function(e){return new(e||oV)(Za(tf),Za(my),Za(Sk),Za(sg),Za(mc),Za(Am),Za(Zm),Za(Rb),Za(ud))},oV.\u0275cmp=wt({type:oV,selectors:[["app-visbocenter-detail"]],inputs:{visbocenter:"visbocenter"},decls:2,vars:1,consts:[[4,"ngIf"],[3,"click"],[1,"form-group","row"],["for","vcName",1,"col-3","col-md-2","col-form-label"],["id","VCName","type","text","name","vcName","class","col-8 form-control","placeholder","Name",3,"ngModel","ngModelChange",4,"ngIf"],["id","VCName","class","col-8 form-control-static",4,"ngIf"],["for","vcDescription",1,"col-3","col-md-2","col-form-label"],["id","VCDesc","name","vcDescription","class","col-8 form-control","placeholder","Type in your description",3,"ngModel","ngModelChange",4,"ngIf"],["id","VCDesc","class","col-8 form-control-static",4,"ngIf"],[1,"form-group","row","d-none","d-md-block"],["for","Created",1,"col-3","col-md-2","col-form-label"],["id","VCCreated",1,"col-4","form-control-static","col-form-label"],["id","VCUpdated",1,"col-4","form-control-static","col-form-label"],[1,"mb-3"],["id","Save","class","btn btn-primary mx-1",3,"click",4,"ngIf"],[1,"btn","btn-secondary","mx-1",3,"click"],["id","VcUserModalCreate","tabindex","-1","role","dialog","aria-labelledby","VcUserModalCreateTitle","aria-hidden","true",1,"modal","fade"],["role","document",1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header"],["id","VcUserModalCenterTitle",1,"modal-title"],["type","button","data-dismiss","modal","aria-label","Close",1,"close"],["aria-hidden","true"],[1,"modal-body"],["name","newUserInvite","novalidate",""],["f1","ngForm"],[1,"form-group",3,"ngClass"],["for","email",1,"col-form-label"],["id","AddUserName","type","email","name","email","required","","pattern","[^@\\s]+@[^@\\s]+\\.[^@\\s]+","autocomplete","email",1,"form-control",3,"ngModel","ngModelChange"],["email","ngModel"],["class","help-block",4,"ngIf"],["for","group",1,"col-form-label"],["id","AddUserGroupName","name","group","required","",1,"form-control",3,"ngModel","ngModelChange"],["group","ngModel"],[4,"ngFor","ngForOf"],["for","inviteMessage",1,"col-form-label"],["id","AddUserMessage","name","inviteMessage",1,"form-control",3,"ngModel","ngModelChange"],["inviteMessage","ngModel"],[1,"modal-footer","align-items-end"],["id","ButtonBack","type","button","data-dismiss","modal",1,"btn","btn-secondary","mx-1"],["id","AddUserConfirm","type","submit","class","btn btn-primary mx-1",4,"ngIf"],["id","AddUserConfirm","type","submit","class","btn btn-primary mx-1","data-dismiss","modal",3,"click",4,"ngIf"],["id","VcUserRemove","tabindex","-1","role","dialog","aria-labelledby","VcUserModalRemoveTitle","aria-hidden","true",1,"modal","fade"],["class","modal-dialog modal-dialog-centered","role","document",4,"ngIf"],["id","VcGroupModalCreate","tabindex","-1","role","dialog","aria-labelledby","VcGroupModalCreateTitle","aria-hidden","true",1,"modal","fade"],["id","VcGroupRemove","tabindex","-1","role","dialog","aria-labelledby","VcGroupModalRemoveTitle","aria-hidden","true",1,"modal","fade"],["class","modal fade","id","VCUserDetail","tabindex","-1","role","dialog","aria-labelledby","VCUserDetailTitle","aria-hidden","true",4,"ngIf"],["id","VcSettingDetail","tabindex","-1","role","dialog","aria-labelledby","VcSettingDetailTitle","aria-hidden","true",1,"modal","fade"],["id","VcSettingRemove","tabindex","-1","role","dialog","aria-labelledby","VcSettingRemoveTitle","aria-hidden","true",1,"modal","fade"],["id","VCName","type","text","name","vcName","placeholder","Name",1,"col-8","form-control",3,"ngModel","ngModelChange"],["id","VCName",1,"col-8","form-control-static"],["id","VCDesc","name","vcDescription","placeholder","Type in your description",1,"col-8","form-control",3,"ngModel","ngModelChange"],["id","VCDesc",1,"col-8","form-control-static"],[1,"btn-toolbar"],["id","ViewAudit","type","button","class","btn btn-md btn-light mr-1",3,"click",4,"ngIf"],["id","ViewGroup","type","button","class","btn btn-md btn-light mx-1",3,"click",4,"ngIf"],["id","ViewUser","type","button","class","btn btn-md btn-light mx-1",3,"click",4,"ngIf"],["id","ViewProjectUser","type","button","class","btn btn-md btn-light mx-1",3,"click",4,"ngIf"],["id","ViewSetting","type","button","class","btn btn-md btn-light mx-1",3,"click",4,"ngIf"],["id","ViewAudit","type","button",1,"btn","btn-md","btn-light","mr-1",3,"click"],["id","ViewGroup","type","button",1,"btn","btn-md","btn-light","mx-1",3,"click"],["id","ViewUser","type","button",1,"btn","btn-md","btn-light","mx-1",3,"click"],["id","ViewProjectUser","type","button",1,"btn","btn-md","btn-light","mx-1",3,"click"],["id","ViewSetting","type","button",1,"btn","btn-md","btn-light","mx-1",3,"click"],[1,"row"],[1,"col"],[1,"panel-heading","mt-2"],["class","col",4,"ngIf"],[1,"panel-body"],[1,"table","table-hover"],["id","UserHead"],["id","UserList"],["id","AddUser","type","button","data-toggle","modal","data-target","#VcUserModalCreate",1,"my-1","btn","btn-primary","float-right"],["id","ColUser","data-toggle","modal","data-target","#VCUserDetail",3,"click"],["id","ColGroup",3,"click"],["id","ColDeleteUser","data-toggle","modal","data-target","#VcUserRemove",1,"Detail",3,"title","click"],[1,"panel-heading","mt-3"],["id","GroupHead"],["id","GroupList"],["id","AddGroup","type","button","data-toggle","modal","data-target","#VcGroupModalCreate",1,"btn","btn-primary","float-right",3,"click"],["id","ColGroup","data-toggle","modal","data-target","#VcGroupModalCreate",3,"click"],["id","ColMembers",3,"click"],["id","ColGlobal",4,"ngIf"],["id","ColDetail","data-toggle","modal","data-target","#VcGroupModalCreate",1,"Detail",3,"title","click"],["id","ColGlobal"],["id","ColDeleteGroup","data-toggle","modal","data-target","#VcGroupRemove",1,"Detail",3,"title","click"],[1,"panel-heading"],[3,"click",4,"ngFor","ngForOf"],["id","SettingHead"],["id","SettingList"],["id","ColSettingName","data-toggle","modal","data-target","#VcSettingDetail",3,"click"],["id","ColSettingTimestamp"],["id","ColSettingDate",4,"ngIf"],["id","ColSettingDate"],["id","ColDeleteSetting","data-toggle","modal","data-target","#VcSettingRemove",1,"Detail",3,"title","click"],["id","Save",1,"btn","btn-primary","mx-1",3,"click"],[1,"help-block"],["id","AddUserConfirm","type","submit",1,"btn","btn-primary","mx-1"],["id","AddUserConfirm","type","submit","data-dismiss","modal",1,"btn","btn-primary","mx-1",3,"click"],["id","VcUserRemoveTitle",1,"modal-title"],[1,"bg-warning"],[1,"form-group"],["for","VcName",1,"col-form-label"],[1,"col-8","form-control-static"],[1,"col-form-label"],["type","button","data-dismiss","modal",1,"btn","btn-secondary","mx-1"],["id","DeleteUserConfirm","type","button","data-dismiss","modal",1,"btn","btn-warning","mx-1",3,"click"],["class","modal-title","id","VcGroupModalCenterTitle",4,"ngIf"],["name","actGroup","novalidate",""],["f2","ngForm"],["class","form-group",3,"ngClass",4,"ngIf"],[1,"custom-control","custom-checkbox"],["type","checkbox","id","perm1","name","checkedView",1,"custom-control-input",3,"ngModel","ngModelChange"],["checkedView","ngModel"],["for","perm1",1,"custom-control-label"],["type","checkbox","id","perm2","name","checkedViewAudit",1,"custom-control-input",3,"ngModel","ngModelChange"],["checkedViewAudit","ngModel"],["for","perm2",1,"custom-control-label"],["type","checkbox","id","perm3","name","checkedModify",1,"custom-control-input",3,"ngModel","ngModelChange"],["checkedModify","ngModel"],["for","perm3",1,"custom-control-label"],["type","checkbox","id","perm4","name","checkedCreateVP",1,"custom-control-input",3,"ngModel","ngModelChange"],["checkedCreateVP","ngModel"],["for","perm4",1,"custom-control-label"],["type","checkbox","id","perm5","name","checkedManagePerm",1,"custom-control-input",3,"ngModel","ngModelChange"],["checkedManagePerm","ngModel"],["for","perm5",1,"custom-control-label"],["type","checkbox","id","global","name","global",1,"custom-control-input",3,"ngModel","ngModelChange"],["global","ngModel"],["for","global",1,"custom-control-label"],["class","mt-2",4,"ngIf"],["id","AddGroupConfirm","class","btn btn-primary disabled mx-1",4,"ngIf"],["id","AddGroupConfirm","class","btn btn-primary mx-1","data-dismiss","modal",3,"click",4,"ngIf"],["id","VcGroupModalCenterTitle",1,"modal-title"],["for","groupName",1,"col-form-label"],["name","groupName",1,"col-form-label"],["id","AddGroupName","type","text","name","groupName","required","","minlength","3",1,"form-control",3,"ngModel","ngModelChange"],["groupName","ngModel"],[1,"mt-2"],["type","checkbox","id","permVP1","name","checkedVPView",1,"custom-control-input",3,"ngModel","ngModelChange"],["checkedVPView","ngModel"],["for","permVP1",1,"custom-control-label"],["type","checkbox","id","permVP2","name","checkedVPViewAudit",1,"custom-control-input",3,"ngModel","ngModelChange"],["checkedVPViewAudit","ngModel"],["for","permVP2",1,"custom-control-label"],["type","checkbox","id","permVP3","name","checkedVPModify",1,"custom-control-input",3,"ngModel","ngModelChange"],["checkedVPModify","ngModel"],["for","permVP3",1,"custom-control-label"],["type","checkbox","id","permVP4","name","checkedCreateVariant",1,"custom-control-input",3,"ngModel","ngModelChange"],["checkedCreateVariant","ngModel"],["for","permVP4",1,"custom-control-label"],["type","checkbox","id","permVP5","name","checkedVPManagePerm",1,"custom-control-input",3,"ngModel","ngModelChange"],["checkedVPManagePerm","ngModel"],["for","permVP5",1,"custom-control-label"],["type","checkbox","id","permVP6","name","checkedVPDelete",1,"custom-control-input",3,"ngModel","ngModelChange"],["checkedVPDelete","ngModel"],["for","permVP6",1,"custom-control-label"],[1,"form-control-static"],["class","row",4,"ngFor","ngForOf"],["class","col-8 ml-3",4,"ngIf"],[1,"col-8","ml-3"],["data-dismiss","modal","data-toggle","modal","data-target","#VCUserDetail",3,"click"],["id","AddGroupConfirm",1,"btn","btn-primary","disabled","mx-1"],["id","AddGroupConfirm","data-dismiss","modal",1,"btn","btn-primary","mx-1",3,"click"],["id","DeleteGroupConfirm","type","button","data-dismiss","modal",1,"btn","btn-warning","mx-1",3,"click"],["id","VCUserDetail","tabindex","-1","role","dialog","aria-labelledby","VCUserDetailTitle","aria-hidden","true",1,"modal","fade"],["role","document",1,"modal-dialog","modal-lg","modal-dialog-centered"],["id","VCUserDetailTitle",1,"modal-title"],["type","checkbox","checked","","disabled","","class","custom-control-input","id","perm1","name","checkedView",4,"ngIf"],["type","checkbox","disabled","","class","custom-control-input","id","perm1","name","checkedView",4,"ngIf"],["type","checkbox","checked","","disabled","","class","custom-control-input","id","perm2","name","checkedView",4,"ngIf"],["type","checkbox","disabled","","class","custom-control-input","id","perm2","name","checkedView",4,"ngIf"],["type","checkbox","checked","","disabled","","class","custom-control-input","id","perm3","name","checkedView",4,"ngIf"],["type","checkbox","disabled","","class","custom-control-input","id","perm3","name","checkedView",4,"ngIf"],["type","checkbox","checked","","disabled","","class","custom-control-input","id","perm4","name","checkedView",4,"ngIf"],["type","checkbox","disabled","","class","custom-control-input","id","perm4","name","checkedView",4,"ngIf"],["type","checkbox","checked","","disabled","","class","custom-control-input","id","perm5","name","checkedView",4,"ngIf"],["type","checkbox","disabled","","class","custom-control-input","id","perm5","name","checkedView",4,"ngIf"],["type","checkbox","checked","","disabled","","class","custom-control-input","id","permVP1","name","checkedView",4,"ngIf"],["type","checkbox","disabled","","class","custom-control-input","id","permVP1","name","checkedView",4,"ngIf"],["type","checkbox","checked","","disabled","","class","custom-control-input","id","permVP2","name","checkedView",4,"ngIf"],["type","checkbox","disabled","","class","custom-control-input","id","permVP2","name","checkedView",4,"ngIf"],["type","checkbox","checked","","disabled","","class","custom-control-input","id","permVP3","name","checkedView",4,"ngIf"],["type","checkbox","disabled","","class","custom-control-input","id","permVP3","name","checkedView",4,"ngIf"],["type","checkbox","checked","","disabled","","class","custom-control-input","id","permVP4","name","checkedView",4,"ngIf"],["type","checkbox","disabled","","class","custom-control-input","id","permVP4","name","checkedView",4,"ngIf"],["type","checkbox","checked","","disabled","","class","custom-control-input","id","permVP5","name","checkedView",4,"ngIf"],["type","checkbox","disabled","","class","custom-control-input","id","permVP5","name","checkedView",4,"ngIf"],["type","checkbox","checked","","disabled","","class","custom-control-input","id","permVP6","name","checkedView",4,"ngIf"],["type","checkbox","disabled","","class","custom-control-input","id","permVP6","name","checkedView",4,"ngIf"],[1,"form-control-static","mt-2"],["id","ButtonBack","data-dismiss","modal",1,"btn","btn-primary"],["type","checkbox","checked","","disabled","","id","perm1","name","checkedView",1,"custom-control-input"],["type","checkbox","disabled","","id","perm1","name","checkedView",1,"custom-control-input"],["type","checkbox","checked","","disabled","","id","perm2","name","checkedView",1,"custom-control-input"],["type","checkbox","disabled","","id","perm2","name","checkedView",1,"custom-control-input"],["type","checkbox","checked","","disabled","","id","perm3","name","checkedView",1,"custom-control-input"],["type","checkbox","disabled","","id","perm3","name","checkedView",1,"custom-control-input"],["type","checkbox","checked","","disabled","","id","perm4","name","checkedView",1,"custom-control-input"],["type","checkbox","disabled","","id","perm4","name","checkedView",1,"custom-control-input"],["type","checkbox","checked","","disabled","","id","perm5","name","checkedView",1,"custom-control-input"],["type","checkbox","disabled","","id","perm5","name","checkedView",1,"custom-control-input"],["type","checkbox","checked","","disabled","","id","permVP1","name","checkedView",1,"custom-control-input"],["type","checkbox","disabled","","id","permVP1","name","checkedView",1,"custom-control-input"],["type","checkbox","checked","","disabled","","id","permVP2","name","checkedView",1,"custom-control-input"],["type","checkbox","disabled","","id","permVP2","name","checkedView",1,"custom-control-input"],["type","checkbox","checked","","disabled","","id","permVP3","name","checkedView",1,"custom-control-input"],["type","checkbox","disabled","","id","permVP3","name","checkedView",1,"custom-control-input"],["type","checkbox","checked","","disabled","","id","permVP4","name","checkedView",1,"custom-control-input"],["type","checkbox","disabled","","id","permVP4","name","checkedView",1,"custom-control-input"],["type","checkbox","checked","","disabled","","id","permVP5","name","checkedView",1,"custom-control-input"],["type","checkbox","disabled","","id","permVP5","name","checkedView",1,"custom-control-input"],["type","checkbox","checked","","disabled","","id","permVP6","name","checkedView",1,"custom-control-input"],["type","checkbox","disabled","","id","permVP6","name","checkedView",1,"custom-control-input"],["data-dismiss","modal","data-toggle","modal","data-target","#VcGroupModalCreate",3,"click"],["id","VcSettingDetailTitle",1,"modal-title"],["name","settingDetail"],["for","SettingName",1,"col-4","col-form-label"],["id","SettingName",1,"col-8","form-control-static"],["for","SettingType",1,"col-4","col-form-label"],["id","SettingType",1,"col-8","form-control-static"],["for","Timestamp",1,"col-4","col-form-label"],["id","Timestamp",1,"col-8","form-control-static"],["for","updatedAt",1,"col-4","col-form-label"],["id","updatedAt",1,"col-8","form-control-static"],["id","SettingDownload","type","submit","data-dismiss","modal",1,"btn","btn-primary","mx-1",3,"click"],["id","VcSettingRemoveTitle",1,"modal-title"],["class","form-group",4,"ngIf"],["for","SettingUpdated",1,"col-4","col-form-label"],["for","SettingTS",1,"col-4","col-form-label"]],template:function(e,t){1&e&&(io(0,"app-usernavbar"),Ya(1,aV,93,73,"div",0)),2&e&&(zi(1),Xa("ngIf",t.visbocenter))},directives:[pk,su,Fh,xd,Gh,iu,Ad,Kh,Yh,Td,Nh,rh,ah,dh,au,Cd,Wh],pipes:[jb,ku,Cu],styles:[""]}),oV),uV=function e(){p(this,e)},dV=new ov({"Content-Type":"application/json"}),hV=((sV=function(){function e(t,n,i){p(this,e),this.http=t,this.messageService=n,this.env=i,this.serviceBaseUrl=this.env.restUrl}return m(e,[{key:"getVisboAudits",value:function(e,t){var n=this,i=this.serviceBaseUrl.concat("/audit"),r=new cv;return e&&(r=r.append("sysadmin","1")),t&&(t.from&&(r=r.append("from",t.from.toISOString())),t.to&&(r=r.append("to",t.to.toISOString())),t.text&&(r=r.append("text",t.text)),t.maxcount&&(r=r.append("maxcount",t.maxcount.toString())),t.actionType&&(r=r.append("action",t.actionType)),t.area&&(r=r.append("area",t.area))),this.log("Calling HTTP Request: ".concat(i," ").concat(e?"as sysadmin":"")),this.http.get(i,{headers:dV,params:r}).pipe(B((function(e){return e.audit})),cf((function(e){return n.log("fetched ".concat(e.length," Audits "))})),af(this.handleError("getVisboAudit",[])))}},{key:"getVisboCenterAudits",value:function(e,t,n,i){var r=this,a=this.serviceBaseUrl.concat("/vc/",e,"/audit"),o=new cv;return t&&(o=o.append("sysadmin","1")),n&&(o=o.append("deleted","1")),i&&(i.from&&(o=o.append("from",i.from.toISOString())),i.to&&(o=o.append("to",i.to.toISOString())),i.text&&(o=o.append("text",i.text)),i.maxcount&&(o=o.append("maxcount",i.maxcount.toString())),i.actionType&&(o=o.append("action",i.actionType)),i.area&&(o=o.append("area",i.area))),this.log("Calling HTTP Request: ".concat(a," for VC ").concat(e)),this.http.get(a,{headers:dV,params:o}).pipe(B((function(e){return e.audit})),cf((function(e){return r.log("fetched ".concat(e.length," Audits "))})),af(this.handleError("getVisboAudit",[])))}},{key:"getVisboProjectAudits",value:function(e,t,n,i){var r=this,a=this.serviceBaseUrl.concat("/vp/",e,"/audit"),o=new cv;return t&&(o=o.append("sysadmin","1")),n&&(o=o.append("deleted","1")),i&&(i.from&&(o=o.append("from",i.from.toISOString())),i.to&&(o=o.append("to",i.to.toISOString())),i.text&&(o=o.append("text",i.text)),i.maxcount&&(o=o.append("maxcount",i.maxcount.toString())),i.actionType&&(o=o.append("action",i.actionType)),i.area&&(o=o.append("area",i.area))),this.log("Calling HTTP Request: ".concat(a," for VP ").concat(e)),this.http.get(a,{headers:dV,params:o}).pipe(B((function(e){return e.audit})),cf((function(e){return r.log("fetched ".concat(e.length," Audits "))})),af(this.handleError("getVisboAudit",[])))}},{key:"handleError",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"operation",n=arguments.length>1?arguments[1]:void 0;return function(i){return e.log("HTTP Request ".concat(t," failed: ").concat(i.error.message," status:").concat(i.status," result: ").concat(JSON.stringify(n))),nf(i)}}},{key:"log",value:function(e){this.messageService.add("VisboAuditService: "+e)}}]),e}()).\u0275fac=function(e){return new(e||sV)(ot(Sv),ot(tf),ot(Vf))},sV.\u0275prov=Ve({token:sV,factory:sV.\u0275fac}),sV);function vV(e,t){if(1&e){var n=so();to(0,"li",6),to(1,"a",7),uo("click",(function(){return mn(n),fo().gotoClickedItem("sysvc")})),So(2,"Visbo Centers"),no(),no()}}function fV(e,t){if(1&e){var n=so();to(0,"li",6),to(1,"a",7),uo("click",(function(){return mn(n),fo().gotoClickedItem("sysaudit")})),So(2,"Audit"),no(),no()}}function pV(e,t){if(1&e){var n=so();to(0,"div"),to(1,"a",13),uo("click",(function(){return mn(n),fo().gotoClickedItem("syslog")})),So(2,"Log Files"),no(),no()}}var gV,mV=((gV=function(){function e(t,n,i,r,a){p(this,e),this.route=t,this.router=n,this.alertService=i,this.messageService=r,this.visbocenterService=a,this.permSystem=cy,this.permVC=uy,this.permVP=dy}return m(e,[{key:"ngOnInit",value:function(){this.combinedPerm=this.visbocenterService.getSysAdminRole(),this.log("Navbar Init Sys Role ".concat(JSON.stringify(this.combinedPerm)," ").concat(this.permSystem.View))}},{key:"gotoClickedItem",value:function(e){this.router.navigate([e])}},{key:"hasSystemPerm",value:function(e){return(this.combinedPerm.system&e)>0}},{key:"hasVCPerm",value:function(e){return(this.combinedPerm.vc&e)>0}},{key:"log",value:function(e){this.messageService.add("Sys NavBar: "+e)}}]),e}()).\u0275fac=function(e){return new(e||gV)(Za(sg),Za(Am),Za(Zm),Za(tf),Za(my))},gV.\u0275cmp=wt({type:gV,selectors:[["app-sysnavbar"]],decls:29,vars:3,consts:[[1,"navbar","navbar-expand-md","bg-light","sticky-top"],[1,"navbar-brand","bg-light",3,"click"],["type","button","data-toggle","collapse","data-target","#navbarSupportedContent","aria-controls","navbarSupportedContent","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"fas","fa-bars"],["id","navbarSupportedContent",1,"collapse","navbar-collapse"],[1,"navbar-nav","mr-auto"],[1,"nav-item"],[1,"nav-link","bg-light",3,"click"],["class","nav-item",4,"ngIf"],[1,"nav-item","dropdown"],["href","#","id","navbarDropdown","role","button","data-toggle","dropdown","aria-haspopup","true","aria-expanded","false",1,"nav-link","dropdown-toggle","bg-light"],["aria-labelledby","navbarDropdown",1,"dropdown-menu"],[4,"ngIf"],[1,"dropdown-item",3,"click"],[1,"nav-link","bg-light","align-right",3,"click"]],template:function(e,t){1&e&&(to(0,"nav",0),to(1,"a",1),uo("click",(function(){return t.gotoClickedItem("sysdashboard")})),So(2,"Overviews"),no(),to(3,"button",2),io(4,"i",3),no(),to(5,"div",4),to(6,"ul",5),to(7,"li",6),to(8,"a",7),uo("click",(function(){return t.gotoClickedItem("sysadmins")})),So(9,"Administrators"),no(),no(),Ya(10,vV,3,0,"li",8),to(11,"li",6),to(12,"a",7),uo("click",(function(){return t.gotoClickedItem("sysuser")})),So(13,"Users"),no(),no(),Ya(14,fV,3,0,"li",8),to(15,"li",9),to(16,"a",10),So(17," Others "),no(),to(18,"div",11),Ya(19,pV,3,0,"div",12),to(20,"div"),to(21,"a",13),uo("click",(function(){return t.gotoClickedItem("systasks")})),So(22,"Tasks"),no(),no(),to(23,"div"),to(24,"a",13),uo("click",(function(){return t.gotoClickedItem("sysconfig")})),So(25,"Configuration"),no(),no(),no(),no(),to(26,"li",6),to(27,"a",14),uo("click",(function(){return t.gotoClickedItem("/")})),So(28,"Back"),no(),no(),no(),no(),no()),2&e&&(zi(10),Xa("ngIf",t.hasVCPerm(t.permVC.View)),zi(4),Xa("ngIf",t.hasSystemPerm(t.permSystem.ViewAudit)),zi(5),Xa("ngIf",t.hasSystemPerm(t.permSystem.ViewLog)))},directives:[su],styles:[".navbar[_ngcontent-%COMP%]{padding:0;margin-bottom:1em;margin-top:1em}"]}),gV);function bV(e,t){1&e&&(to(0,"div"),io(1,"app-usernavbar"),no())}function yV(e,t){1&e&&(to(0,"div"),io(1,"app-sysnavbar"),no())}function kV(e,t){if(1&e){var n=so();to(0,"div",11),to(1,"label",34),So(2),qs(3,"translate"),no(),to(4,"input",35),uo("ngModelChange",(function(e){return mn(n),fo(2).auditFrom=e})),no(),to(5,"label",36),So(6),qs(7,"translate"),no(),to(8,"input",37),uo("ngModelChange",(function(e){return mn(n),fo(2).auditTo=e})),no(),no()}if(2&e){var i=fo(2);zi(2),xo("",zs(3,4,"vcAudit.lbl.from"),":"),zi(2),Xa("ngModel",i.auditFrom),zi(2),xo("",zs(7,6,"vcAudit.lbl.to"),":"),zi(2),Xa("ngModel",i.auditTo)}}function CV(e,t){if(1&e){var n=so();to(0,"div",11),to(1,"label",34),So(2),qs(3,"translate"),no(),to(4,"input",38),uo("ngModelChange",(function(e){return mn(n),fo(2).auditFrom=e})),no(),to(5,"label",36),So(6),qs(7,"translate"),no(),to(8,"input",39),uo("ngModelChange",(function(e){return mn(n),fo(2).auditTo=e})),no(),no()}if(2&e){var i=fo(2);zi(2),xo("",zs(3,4,"vcAudit.lbl.from"),":"),zi(2),Xa("ngModel",i.auditFrom),zi(2),xo("",zs(7,6,"vcAudit.lbl.to"),":"),zi(2),Xa("ngModel",i.auditTo)}}function VV(e,t){if(1&e&&(to(0,"option",40),So(1),qs(2,"translate"),no()),2&e){var n=t.$implicit;po("value",n.name),zi(1),To(zs(2,2,"vcAudit.dropDown."+n.name))}}function wV(e,t){if(1&e&&(to(0,"option",40),So(1),qs(2,"translate"),no()),2&e){var n=t.$implicit;po("value",n.name),zi(1),To(zs(2,2,"vcAudit.dropDown."+n.name))}}function AV(e,t){if(1&e&&(to(0,"td",49),So(1),qs(2,"date"),no()),2&e){var n=fo().$implicit;zi(1),To(Qs(2,1,n.createdAt,"HH:mm:ss"))}}function PV(e,t){if(1&e&&(to(0,"td",49),So(1),qs(2,"date"),no()),2&e){var n=fo().$implicit;zi(1),To(Qs(2,1,n.createdAt,"dd.MM HH:mm"))}}function DV(e,t){if(1&e&&(to(0,"td",50),So(1),no()),2&e){var n=fo().$implicit;zi(1),To(n.user.email)}}function MV(e,t){1&e&&(to(0,"td",50),So(1," Unknown "),no())}function IV(e,t){if(1&e){var n=so();to(0,"tr",41),uo("click",(function(){mn(n);var e=t.index;return fo(2).helperAuditIndex(e)})),Ya(1,AV,3,4,"td",42),Ya(2,PV,3,4,"td",42),Ya(3,DV,2,1,"td",43),Ya(4,MV,2,0,"td",43),to(5,"td",44),So(6),no(),to(7,"td",45),So(8),no(),to(9,"td",46),So(10),no(),to(11,"td",47),So(12),no(),to(13,"td"),to(14,"button",48),uo("click",(function(){mn(n);var e=t.index;return fo(2).helperAuditIndex(e)})),So(15,"i"),no(),no(),no()}if(2&e){var i=t.$implicit,r=fo(2);zi(1),Xa("ngIf",r.isToday(i.createdAt)),zi(1),Xa("ngIf",!r.isToday(i.createdAt)),zi(1),Xa("ngIf",i.user),zi(1),Xa("ngIf",!i.user),zi(2),To(i.actionDescription),zi(2),To(i.vp?i.vp.name:""),zi(2),To(r.helperShortenText(i.actionInfo,30)),zi(2),To(r.helperResponseText(i))}}function SV(e,t){1&e&&(to(0,"div"),to(1,"h3",51),So(2),qs(3,"translate"),no(),no()),2&e&&(zi(2),xo(" ",zs(3,1,"vcAudit.msg.noAudit")," "))}function TV(e,t){if(1&e){var n=so();to(0,"div",4),to(1,"div",5),to(2,"h2",6),So(3),qs(4,"translate"),to(5,"a",7),uo("click",(function(){return mn(n),fo().goBack()})),So(6),no(),no(),no(),to(7,"form",8,9),uo("ngSubmit",(function(){return mn(n),fo().getVisboCenterAudits()})),Ya(9,kV,9,8,"div",10),Ya(10,CV,9,8,"div",10),to(11,"div",11),to(12,"label",12),So(13),qs(14,"translate"),no(),to(15,"input",13),uo("ngModelChange",(function(e){return mn(n),fo().auditText=e})),no(),to(16,"label",14),So(17),qs(18,"translate"),no(),to(19,"select",15),uo("ngModelChange",(function(e){return mn(n),fo().auditCount=e})),to(20,"option"),So(21,"50"),no(),to(22,"option"),So(23,"100"),no(),to(24,"option"),So(25,"500"),no(),to(26,"option"),So(27,"2000"),no(),no(),to(28,"select",16),uo("ngModelChange",(function(e){return mn(n),fo().auditArea=e})),Ya(29,VV,3,4,"option",17),no(),to(30,"select",18),uo("ngModelChange",(function(e){return mn(n),fo().auditType=e})),Ya(31,wV,3,4,"option",17),no(),to(32,"div",19),to(33,"button",20),uo("click",(function(){return mn(n),fo().getVisboCenterAudits()})),So(34),qs(35,"translate"),no(),to(36,"button",21),uo("click",(function(){return mn(n),fo().downloadVisboAudit()})),So(37),qs(38,"translate"),no(),no(),no(),no(),to(39,"div",22),to(40,"div",23),to(41,"table",24),to(42,"thead",25),to(43,"tr"),to(44,"th",26),uo("click",(function(){return mn(n),fo().sortTable(1)})),So(45),qs(46,"translate"),no(),to(47,"th",27),uo("click",(function(){return mn(n),fo().sortTable(2)})),So(48),qs(49,"translate"),no(),to(50,"th",28),uo("click",(function(){return mn(n),fo().sortTable(3)})),So(51),qs(52,"translate"),no(),to(53,"th",29),uo("click",(function(){return mn(n),fo().sortTable(8)})),So(54),qs(55,"translate"),no(),to(56,"th",30),uo("click",(function(){return mn(n),fo().sortTable(4)})),So(57),qs(58,"translate"),no(),to(59,"th",31),uo("click",(function(){return mn(n),fo().sortTable(5)})),So(60),qs(61,"translate"),no(),to(62,"th"),So(63,"Detail"),no(),no(),no(),to(64,"tbody",32),Ya(65,IV,16,8,"tr",33),no(),no(),Ya(66,SV,4,3,"div",0),no(),no(),no()}if(2&e){var i=fo();zi(3),xo(" ",zs(4,22,"vcAudit.title"),": "),zi(3),To(i.visbocenter.name),zi(3),Xa("ngIf",i.sysadmin),zi(1),Xa("ngIf",!i.sysadmin),zi(3),xo("",zs(14,24,"vcAudit.lbl.filter"),":"),zi(2),Xa("ngModel",i.auditText),zi(2),xo("",zs(18,26,"vcAudit.lbl.max"),":"),zi(2),Xa("ngModel",i.auditCount),zi(9),Xa("ngModel",i.auditArea),zi(1),Xa("ngForOf",i.auditAreaList),zi(1),Xa("ngModel",i.auditType),zi(1),Xa("ngForOf",i.auditTypeList),zi(3),To(zs(35,28,"vcAudit.btn.filter")),zi(3),To(zs(38,30,"vcAudit.btn.download")),zi(8),To(zs(46,32,"vcAudit.lbl.created")),zi(3),To(zs(49,34,"vcAudit.lbl.user")),zi(3),xo(" ",zs(52,36,"vcAudit.lbl.action"),""),zi(3),xo(" ",zs(55,38,"vcAudit.lbl.vp"),""),zi(3),xo(" ",zs(58,40,"vcAudit.lbl.info"),""),zi(3),xo(" ",zs(61,42,"vcAudit.lbl.result"),""),zi(5),Xa("ngForOf",i.audit),zi(1),Xa("ngIf",i.audit&&0==i.audit.length)}}function xV(e,t){if(1&e&&(to(0,"div"),to(1,"label",66),So(2),qs(3,"translate"),no(),to(4,"label",75),So(5),no(),no()),2&e){var n=fo(2);zi(2),xo("",zs(3,2,"vcAudit.lbl.info"),":"),zi(3),xo("",n.audit[n.auditIndex].actionInfo," ")}}function _V(e,t){if(1&e&&(to(0,"div"),to(1,"label",66),So(2),qs(3,"translate"),no(),to(4,"label",76),So(5),no(),no()),2&e){var n=fo(2);zi(2),xo("",zs(3,2,"vcAudit.lbl.vc"),":"),zi(3),xo("",n.audit[n.auditIndex].vc.name," ")}}function UV(e,t){if(1&e&&(to(0,"div"),to(1,"label",66),So(2),qs(3,"translate"),no(),to(4,"label",77),So(5),no(),no()),2&e){var n=fo(2);zi(2),xo("",zs(3,3,"vcAudit.lbl.vp"),":"),zi(3),_o("",n.audit[n.auditIndex].vp.name," (",n.audit[n.auditIndex].vp.vpid,") ")}}function OV(e,t){if(1&e&&(to(0,"div"),to(1,"label",66),So(2),qs(3,"translate"),no(),to(4,"label",78),So(5),no(),no()),2&e){var n=fo(2);zi(2),xo("",zs(3,3,"vcAudit.lbl.vpv"),":"),zi(3),_o("",n.audit[n.auditIndex].vpv.name," (",n.audit[n.auditIndex].vpv.vpvid,")")}}function EV(e,t){if(1&e&&(to(0,"div"),to(1,"label",66),So(2),qs(3,"translate"),no(),to(4,"label",70),So(5),no(),no()),2&e){var n=fo(2);zi(2),xo("",zs(3,2,"vcAudit.lbl.techAction"),":"),zi(3),xo("",n.audit[n.auditIndex].action," ")}}function LV(e,t){if(1&e&&(to(0,"div"),to(1,"label",66),So(2),qs(3,"translate"),no(),to(4,"label",79),So(5),no(),no()),2&e){var n=fo(2);zi(2),xo("",zs(3,2,"vcAudit.lbl.url"),":"),zi(3),xo("",n.audit[n.auditIndex].url," ")}}function GV(e,t){if(1&e&&(to(0,"div"),to(1,"label",66),So(2),qs(3,"translate"),no(),to(4,"label",70),So(5),no(),no()),2&e){var n=fo(2);zi(2),xo("",zs(3,2,"vcAudit.lbl.responseTime"),":"),zi(3),xo("",n.audit[n.auditIndex].result.time," ms ")}}function RV(e,t){if(1&e&&(to(0,"div"),to(1,"label",66),So(2),qs(3,"translate"),no(),to(4,"label",70),So(5),no(),no()),2&e){var n=fo(2);zi(2),xo("",zs(3,2,"vcAudit.lbl.responseSize"),":"),zi(3),xo("",n.helperFormatBytes(n.audit[n.auditIndex].result.size||0,2)," ")}}function jV(e,t){if(1&e&&(to(0,"div"),to(1,"label",66),So(2),qs(3,"translate"),no(),to(4,"label",70),So(5),no(),no()),2&e){var n=fo(2);zi(2),xo("",zs(3,2,"vcAudit.lbl.userAgent"),":"),zi(3),To(n.audit[n.auditIndex].userAgent)}}function NV(e,t){if(1&e&&(to(0,"div"),to(1,"label",66),So(2),qs(3,"translate"),no(),to(4,"label",70),So(5),no(),no()),2&e){var n=fo(2);zi(2),xo("",zs(3,2,"vcAudit.lbl.ip"),":"),zi(3),To(n.audit[n.auditIndex].ip)}}function FV(e,t){if(1&e&&(to(0,"div"),to(1,"label",66),So(2),qs(3,"translate"),no(),to(4,"label",70),So(5),qs(6,"date"),no(),no()),2&e){var n=fo(2);zi(2),xo("",zs(3,2,"vcAudit.lbl.ttl"),":"),zi(3),To(Qs(6,4,n.audit[n.auditIndex].ttl,"dd.MM HH:mm"))}}function BV(e,t){if(1&e){var n=so();to(0,"button",80),uo("click",(function(){return mn(n),fo(2).toggleDetail()})),So(1),qs(2,"translate"),no()}2&e&&(zi(1),To(zs(2,1,"vcAudit.btn.more")))}function HV(e,t){if(1&e){var n=so();to(0,"button",81),uo("click",(function(){return mn(n),fo(2).toggleDetail()})),So(1),qs(2,"translate"),no()}2&e&&(zi(1),To(zs(2,1,"vcAudit.btn.less")))}function KV(e,t){if(1&e){var n=so();to(0,"div",52),to(1,"div",53),to(2,"div",54),to(3,"h5",55),So(4),qs(5,"translate"),no(),to(6,"button",56),to(7,"span",57),So(8,"\xd7"),no(),no(),no(),to(9,"div",58),to(10,"div",5),to(11,"div",59),to(12,"h3",60),uo("click",(function(){return mn(n),fo().pageAuditIndex(-1)})),io(13,"a",61),no(),no(),to(14,"div",62),to(15,"h3",63),uo("click",(function(){return mn(n),fo().pageAuditIndex(1)})),io(16,"a",64),no(),no(),no(),to(17,"form",65),to(18,"label",66),So(19),qs(20,"translate"),no(),to(21,"label",67),So(22),qs(23,"date"),no(),to(24,"label",66),So(25),qs(26,"translate"),no(),to(27,"label",68),So(28),no(),to(29,"label",66),So(30),qs(31,"translate"),no(),to(32,"label",69),So(33),no(),Ya(34,xV,6,4,"div",0),Ya(35,_V,6,4,"div",0),Ya(36,UV,6,5,"div",0),Ya(37,OV,6,5,"div",0),to(38,"label",66),So(39),qs(40,"translate"),no(),to(41,"label",70),So(42),no(),Ya(43,EV,6,4,"div",0),Ya(44,LV,6,4,"div",0),Ya(45,GV,6,4,"div",0),Ya(46,RV,6,4,"div",0),Ya(47,jV,6,4,"div",0),Ya(48,NV,6,4,"div",0),Ya(49,FV,7,7,"div",0),no(),no(),to(50,"div",71),Ya(51,BV,3,3,"button",72),Ya(52,HV,3,3,"button",73),to(53,"button",74),So(54),qs(55,"translate"),no(),no(),no(),no()}if(2&e){var i=fo();zi(4),To(zs(5,23,"vcAudit.titleDetail")),zi(15),xo("",zs(20,25,"vcAudit.lbl.created"),":"),zi(3),xo("",Qs(23,27,i.audit[i.auditIndex].createdAt,"dd.MM.yyyy HH:mm:ss.SSS")," "),zi(3),xo("",zs(26,30,"vcAudit.lbl.user"),":"),zi(3),xo("",i.audit[i.auditIndex].user.email," "),zi(2),xo("",zs(31,32,"vcAudit.lbl.action"),":"),zi(3),xo("",i.audit[i.auditIndex].actionDescription," "),zi(1),Xa("ngIf",i.audit[i.auditIndex].actionInfo),zi(1),Xa("ngIf",i.audit[i.auditIndex].vc),zi(1),Xa("ngIf",i.audit[i.auditIndex].vp),zi(1),Xa("ngIf",i.audit[i.auditIndex].vpv),zi(2),xo("",zs(40,34,"vcAudit.lbl.result"),":"),zi(3),xo("",i.helperResponseText(i.audit[i.auditIndex])," "),zi(1),Xa("ngIf",i.showMore),zi(1),Xa("ngIf",i.showMore),zi(1),Xa("ngIf",i.showMore),zi(1),Xa("ngIf",i.showMore),zi(1),Xa("ngIf",i.showMore),zi(1),Xa("ngIf",i.showMore),zi(1),Xa("ngIf",i.showMore&&i.audit[i.auditIndex].ttl),zi(2),Xa("ngIf",!i.showMore),zi(1),Xa("ngIf",i.showMore),zi(2),To(zs(55,36,"vcAudit.btn.back"))}}function qV(e){var t;return e?("="!==(t=e.replace(/\t/g," "))[0]&&"+"!==t[0]&&"-"!==t[0]||(t="'".concat(t)),t):e}var zV,QV=((zV=function(){function e(t,n,i,r,a,o,s,l){p(this,e),this.visboauditService=t,this.visbocenterService=n,this.messageService=i,this.alertService=r,this.route=a,this.location=o,this.router=s,this.translate=l,this.auditTypeList=[{name:"All",action:""},{name:"Read",action:"GET"},{name:"Create",action:"POST"},{name:"Update",action:"PUT"},{name:"Delete",action:"DELETE"}],this.auditAreaList=[{name:"All",action:""},{name:"VC",action:"vc"},{name:"VP",action:"vp"}],this.deleted=!1}return m(e,[{key:"ngOnInit",value:function(){var e=this;this.sysadmin=this.route.snapshot.queryParams.sysadmin,this.deleted=!0===this.route.snapshot.queryParams.deleted;var t=this.route.snapshot.paramMap.get("id");this.visbocenterService.getVisboCenter(t,this.sysadmin,this.deleted).subscribe((function(t){e.visbocenter=t,e.combinedPerm=t.perm,e.log("VisboCenter initialised ".concat(e.visbocenter._id," Perm ").concat(JSON.stringify(e.combinedPerm)," "))}),(function(t){if(e.log("Get VC failed: error: ".concat(t.status," message: ").concat(t.error.message)),403===t.status){var n=e.translate.instant("vcAudit.msg.errorPerm");e.alertService.error(n)}else e.alertService.error(Zv(t))})),this.auditCount=50,this.auditType=this.auditTypeList[0].name,this.auditArea=this.auditAreaList[0].name,this.today=new Date,this.today.setHours(0,0,0,0),this.getVisboCenterAudits(),this.sortTable(void 0)}},{key:"getVisboCenterAudits",value:function(){var e=this,t=this.route.snapshot.paramMap.get("id"),n=new uV;this.log("Audit getVisboCenterAudits from ".concat(this.auditFrom," to ").concat(this.auditTo," Text ").concat(this.auditText," AuditType ").concat(this.auditType)),this.alertService.clear(),n.to=this.auditTo?new Date(this.auditTo):new Date,this.auditFrom&&(n.from=new Date(this.auditFrom)),this.auditText&&(n.text=this.auditText.trim());for(var i=0;i<this.auditTypeList.length;i++)if(this.auditType===this.auditTypeList[i].name){n.actionType=this.auditTypeList[i].action;break}for(var r=0;r<this.auditAreaList.length;r++)if(this.auditArea===this.auditAreaList[r].name){n.area=this.auditAreaList[r].action;break}n.maxcount=this.auditCount,this.log("Audit getVisboCenterAudits VC ".concat(t," recalc Query ").concat(JSON.stringify(n))),this.visboauditService.getVisboCenterAudits(t,this.sysadmin,this.deleted,n).subscribe((function(t){e.audit=t,e.sortTable(void 0);var n=e.translate.instant("vcAudit.msg.auditSuccess");e.alertService.success(n,!0),e.log("get Audit success")}),(function(t){e.log("get Audit failed: error: ".concat(t.status," message: ").concat(t.error.message)),e.alertService.error(Zv(t))}))}},{key:"downloadVisboAudit",value:function(){var e;this.log("sysAudit Download ".concat(this.audit.length," Items")),e="sep=\t\n",e+="date\ttime UTC\temail\tactiondDescription\taction\turl\tactionInfo\tresponseTime\tresponseStatus\tvcid\tvcname\tvpid\tvpname\tvpvid\tsize\tip\tuserId\tuserAgent\tttl\tVC Details\tVP Details\n";for(var t=0;t<this.audit.length;t++){var n=new Date(this.audit[t].createdAt).toISOString(),i=(this.audit[t].userAgent||"").replace(/,/g,";"),r=n.substr(0,10)+"\t"+n.substr(11,8)+"\t"+qV(this.audit[t].user.email)+"\t"+qV(this.audit[t].actionDescription)+"\t"+this.audit[t].action+"\t"+this.audit[t].url+"\t"+this.audit[t].actionInfo+"\t"+(this.audit[t].result?this.audit[t].result.time:"")+"\t"+(this.audit[t].result?this.audit[t].result.status:"")+"\t"+(this.audit[t].vc?this.audit[t].vc.vcid:"")+"\t"+(this.audit[t].vc?qV(this.audit[t].vc.name):"")+"\t"+(this.audit[t].vp?this.audit[t].vp.vpid:"")+"\t"+(this.audit[t].vp?qV(this.audit[t].vp.name):"")+"\t"+(this.audit[t].vpv?this.audit[t].vpv.vpvid:"")+"\t"+(this.audit[t].result?this.audit[t].result.size:"0")+"\t"+this.audit[t].ip+"\t"+this.audit[t].user.userId+"\t"+qV(i)+"\t"+(this.audit[t].ttl||"")+"\t"+(this.audit[t].vc&&qV(this.audit[t].vc.vcjson)||"")+"\t"+(this.audit[t].vp&&qV(this.audit[t].vp.vpjson)||"")+"\n";e=e.concat(r)}this.log("VC Audit CSV Len ".concat(e.length," "));var a=new Blob([e],{type:"text/plain"}),o=window.URL.createObjectURL(a);this.log("Open URL "+o);var s=document.createElement("a");document.body.appendChild(s),s.href=o,s.download="auditlog-VC.csv",this.log("Open URL ".concat(o," doc ").concat(JSON.stringify(s))),s.click(),window.URL.revokeObjectURL(o)}},{key:"helperAuditIndex",value:function(e){this.auditIndex=e}},{key:"helperFormatBytes",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;if(0===e)return"0 B";var n=t||2,i=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,i)).toFixed(n))+" "+["B","KB","MB","GB","TB","PB","EB","ZB","YB"][i]}},{key:"pageAuditIndex",value:function(e){var t=this.auditIndex+e;t<0&&(t=0),t>=this.audit.length&&(t=this.audit.length-1),this.auditIndex=t}},{key:"helperResponseText",value:function(e){var t=e.result.status;switch(t){case"200":case"304":case"400":case"401":case"403":case"404":case"409":case"423":case"500":return this.translate.instant("vcAudit.result.HTTP"+t);default:return e.result.statusText?e.result.statusText:t.toString()}}},{key:"helperShortenText",value:function(e,t){return $v(e,t)}},{key:"goBack",value:function(){this.location.back()}},{key:"toggleDetail",value:function(){this.log("Toggle ShowMore"),this.showMore=!this.showMore}},{key:"isToday",value:function(e){return new Date(e)>this.today}},{key:"sortTable",value:function(e){this.audit&&(void 0!==e?e!==this.sortColumn?(this.sortColumn=e,this.sortAscending=void 0):void 0!==this.sortAscending&&(this.sortAscending=!this.sortAscending):(this.sortColumn=1,this.sortAscending=void 0),void 0===this.sortAscending&&(this.sortAscending=2===e||3===e||4===e),1===this.sortColumn?this.audit.sort((function(e,t){return zv(e.createdAt,t.createdAt)})):2===this.sortColumn?this.audit.sort((function(e,t){return qv(e.user.email.toLowerCase(),t.user.email.toLowerCase())})):3===this.sortColumn?this.audit.sort((function(e,t){return qv(e.actionDescription,t.actionDescription)})):4===this.sortColumn?this.audit.sort((function(e,t){return qv(e.url,t.url)})):5===this.sortColumn?this.audit.sort((function(e,t){return qv(e.result.status,t.result.status)})):6===this.sortColumn?this.audit.sort((function(e,t){return e.result.time-t.result.time})):7===this.sortColumn?this.audit.sort((function(e,t){return(e.result.size||0)-(t.result.size||0)})):8===this.sortColumn&&this.audit.sort((function(e,t){var n,i;return qv(null===(n=e.vp)||void 0===n?void 0:n.name,null===(i=t.vp)||void 0===i?void 0:i.name)})),this.sortAscending||this.audit.reverse())}},{key:"log",value:function(e){this.messageService.add("VC Audit: "+e)}}]),e}()).\u0275fac=function(e){return new(e||zV)(Za(hV),Za(my),Za(tf),Za(Zm),Za(sg),Za(mc),Za(Am),Za(Rb))},zV.\u0275cmp=wt({type:zV,selectors:[["app-visbocenter-audit"]],inputs:{visbocenter:"visbocenter"},decls:5,vars:4,consts:[[4,"ngIf"],["class","well",4,"ngIf"],["id","AuditDetail","tabindex","-1","role","dialog","aria-labelledby","Audit Detail","aria-hidden","true",1,"modal","fade"],["class","modal-dialog modal-lg modal-dialog-centered","role","document",4,"ngIf"],[1,"well"],[1,"row"],[1,"panel-heading","ml-0"],[3,"click"],["name","form","novalidate","",3,"ngSubmit"],["f","ngForm"],["class","form-group row",4,"ngIf"],[1,"form-group","row"],["for","auditText",1,"col-1","col-form-label"],["id","auditText","type","text","name","auditText",1,"col-2","col-sm-3","form-control",3,"ngModel","ngModelChange"],["for","auditCount",1,"col-1","col-form-label"],["id","auditCount","name","auditCount",1,"col-1","form-control","mx-1",3,"ngModel","ngModelChange"],["id","auditArea","id","auditType","name","auditArea",1,"col-1","form-control","mx-1",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["id","auditType","id","auditType","name","auditType",1,"col-1","form-control","mx-1",3,"ngModel","ngModelChange"],[1,"btn-group"],["type","button",1,"btn","btn-sm","btn-primary","ml-auto","mx-1",3,"click"],["type","button",1,"btn","btn-sm","btn-secondary","ml-auto","mx-1",3,"click"],[1,"container-fluid"],[1,"panel-body"],[1,"table","table-hover","table-sortable"],["id","AuditHead"],["id","SortDate",1,"d-none","d-md-table-cell",3,"click"],["id","SortUser",3,"click"],["id","SortAction",3,"click"],["id","SortVP",1,"d-none","d-lg-table-cell",3,"click"],["id","SortInfo",1,"d-none","d-md-table-cell",3,"click"],["id","SortResult",1,"d-none","d-lg-table-cell",3,"click"],["id","AuditList"],["data-toggle","modal","data-target","#AuditDetail",3,"click",4,"ngFor","ngForOf"],["for","auditFrom",1,"col-1","col-form-label"],["id","auditFrom","type","datetime-local","name","auditFrom",1,"col-2","col-sm-4","form-control",3,"ngModel","ngModelChange"],["for","auditTo",1,"col-1","col-form-label"],["id","auditTo","type","datetime-local","name","auditTo",1,"col-2","col-sm-4","form-control",3,"ngModel","ngModelChange"],["id","auditFrom","type","date","name","auditFrom",1,"col-2","col-sm-4","form-control",3,"ngModel","ngModelChange"],["id","auditTo","type","date","name","auditTo",1,"col-2","col-sm-4","form-control",3,"ngModel","ngModelChange"],[3,"value"],["data-toggle","modal","data-target","#AuditDetail",3,"click"],["id","ColCreated","class","d-none d-md-table-cell",4,"ngIf"],["id","ColUser",4,"ngIf"],["id","ColAction"],["id","ColVP",1,"d-none","d-lg-table-cell"],["id","ColInfo",1,"d-none","d-md-table-cell"],["id","ColResult",1,"d-none","d-lg-table-cell"],["id","ColDetail","data-toggle","modal","data-target","#AuditDetail",1,"Detail",3,"click"],["id","ColCreated",1,"d-none","d-md-table-cell"],["id","ColUser"],[1,"d-flex","justify-content-center"],["role","document",1,"modal-dialog","modal-lg","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header"],["id","AuditDetailTitle",1,"modal-title"],["type","button","data-dismiss","modal","aria-label","Close",1,"close"],["aria-hidden","true"],[1,"modal-body"],[1,"col-11"],["id","ButtonPrev",3,"click"],[1,"px-3","col-1","fas","fa-caret-square-left"],[1,"col-1"],["id","ButtonNext",3,"click"],[1,"px-3","col-1","fas","fa-caret-square-right"],["id","auditEntry"],[1,"v_compact_t","col-4","form-control-static"],["id","auditCreated",1,"v_compact_t","col-7","form-control-static"],["id","auditUser",1,"v_compact_t","col-7","form-control-static"],["id","auditAction",1,"v_compact_t","col-7","form-control-static"],[1,"v_compact_t","col-7","form-control-static"],[1,"modal-footer","align-items-end"],["id","ButtonMore","type","button","class","btn btn-secondary",3,"click",4,"ngIf"],["id","ButtonLess","type","button","class","btn btn-secondary",3,"click",4,"ngIf"],["id","ButtonBack","type","button","data-dismiss","modal",1,"btn","btn-primary"],["id","auditInfo",1,"v_compact_t","col-7","form-control-static"],["id","auditVC",1,"v_compact_t","col-7","form-control-static"],["id","auditVP",1,"v_compact_t","col-7","form-control-static"],["id","auditVPV",1,"v_compact_t","col-7","form-control-static"],[1,"v_compact_t","col-7","form-control-static",2,"overflow-wrap","break-word"],["id","ButtonMore","type","button",1,"btn","btn-secondary",3,"click"],["id","ButtonLess","type","button",1,"btn","btn-secondary",3,"click"]],template:function(e,t){1&e&&(Ya(0,bV,2,0,"div",0),Ya(1,yV,2,0,"div",0),Ya(2,TV,67,44,"div",1),to(3,"div",2),Ya(4,KV,56,38,"div",3),no()),2&e&&(Xa("ngIf",!t.sysadmin),zi(1),Xa("ngIf",t.sysadmin),zi(1),Xa("ngIf",t.visbocenter),zi(2),Xa("ngIf",t.auditIndex>=0&&t.auditIndex<t.audit.length))},directives:[su,pk,mV,Fh,xd,Gh,Ad,Td,Nh,rh,ah,dh,au],pipes:[jb,Cu],styles:[".v_compact_t[_ngcontent-%COMP%]{margin:0;padding-top:0}"]}),zV);function WV(e,t){1&e&&(to(0,"div"),io(1,"app-usernavbar"),no())}function JV(e,t){1&e&&(to(0,"div"),io(1,"app-sysnavbar"),no())}function YV(e,t){if(1&e){var n=so();to(0,"div",11),to(1,"label",32),So(2),qs(3,"translate"),no(),to(4,"input",33),uo("ngModelChange",(function(e){return mn(n),fo(2).auditFrom=e})),no(),to(5,"label",34),So(6),qs(7,"translate"),no(),to(8,"input",35),uo("ngModelChange",(function(e){return mn(n),fo(2).auditTo=e})),no(),no()}if(2&e){var i=fo(2);zi(2),xo("",zs(3,4,"vpAudit.lbl.from"),":"),zi(2),Xa("ngModel",i.auditFrom),zi(2),xo("",zs(7,6,"vpAudit.lbl.to"),":"),zi(2),Xa("ngModel",i.auditTo)}}function $V(e,t){if(1&e){var n=so();to(0,"div",11),to(1,"label",32),So(2),qs(3,"translate"),no(),to(4,"input",36),uo("ngModelChange",(function(e){return mn(n),fo(2).auditFrom=e})),no(),to(5,"label",34),So(6),qs(7,"translate"),no(),to(8,"input",37),uo("ngModelChange",(function(e){return mn(n),fo(2).auditTo=e})),no(),no()}if(2&e){var i=fo(2);zi(2),xo("",zs(3,4,"vpAudit.lbl.from"),":"),zi(2),Xa("ngModel",i.auditFrom),zi(2),xo("",zs(7,6,"vpAudit.lbl.to"),":"),zi(2),Xa("ngModel",i.auditTo)}}function ZV(e,t){if(1&e&&(to(0,"option"),So(1),no()),2&e){var n=t.$implicit;zi(1),To(n.name)}}function XV(e,t){if(1&e&&(to(0,"td",45),So(1),qs(2,"date"),no()),2&e){var n=fo().$implicit;zi(1),To(Qs(2,1,n.createdAt,"HH:mm:ss"))}}function ew(e,t){if(1&e&&(to(0,"td",45),So(1),qs(2,"date"),no()),2&e){var n=fo().$implicit;zi(1),To(Qs(2,1,n.createdAt,"dd.MM HH:mm"))}}function tw(e,t){if(1&e&&(to(0,"td",46),So(1),no()),2&e){var n=fo().$implicit;zi(1),To(n.user.email)}}function nw(e,t){1&e&&(to(0,"td",46),So(1," Unknown "),no())}function iw(e,t){if(1&e){var n=so();to(0,"tr",38),uo("click",(function(){mn(n);var e=t.index;return fo(2).helperAuditIndex(e)})),Ya(1,XV,3,4,"td",39),Ya(2,ew,3,4,"td",39),Ya(3,tw,2,1,"td",40),Ya(4,nw,2,0,"td",40),to(5,"td",41),So(6),no(),to(7,"td",42),So(8),no(),to(9,"td",43),So(10),no(),to(11,"td"),to(12,"button",44),uo("click",(function(){mn(n);var e=t.index;return fo(2).helperAuditIndex(e)})),So(13,"i"),no(),no(),no()}if(2&e){var i=t.$implicit,r=fo(2);zi(1),Xa("ngIf",r.isToday(i.createdAt)),zi(1),Xa("ngIf",!r.isToday(i.createdAt)),zi(1),Xa("ngIf",i.user),zi(1),Xa("ngIf",!i.user),zi(2),To(i.actionDescription),zi(2),To(r.helperShortenText(i.actionInfo,30)),zi(2),To(r.helperResponseText(i))}}function rw(e,t){1&e&&(to(0,"div"),to(1,"h3",47),So(2),qs(3,"translate"),no(),no()),2&e&&(zi(2),xo(" ",zs(3,1,"vpAudit.msg.noAudit")," "))}function aw(e,t){if(1&e){var n=so();to(0,"div",4),to(1,"div",5),to(2,"h2",6),So(3),qs(4,"translate"),to(5,"a",7),uo("click",(function(){return mn(n),fo().goBack()})),So(6),no(),no(),no(),to(7,"form",8,9),uo("ngSubmit",(function(){return mn(n),fo().getVisboProjectAudits()})),Ya(9,YV,9,8,"div",10),Ya(10,$V,9,8,"div",10),to(11,"div",11),to(12,"label",12),So(13),qs(14,"translate"),no(),to(15,"input",13),uo("ngModelChange",(function(e){return mn(n),fo().auditText=e})),no(),to(16,"label",14),So(17),qs(18,"translate"),no(),to(19,"select",15),uo("ngModelChange",(function(e){return mn(n),fo().auditCount=e})),to(20,"option"),So(21,"50"),no(),to(22,"option"),So(23,"100"),no(),to(24,"option"),So(25,"500"),no(),to(26,"option"),So(27,"2000"),no(),no(),to(28,"select",16),uo("ngModelChange",(function(e){return mn(n),fo().auditType=e})),Ya(29,ZV,2,1,"option",17),no(),to(30,"div",18),to(31,"button",19),uo("click",(function(){return mn(n),fo().getVisboProjectAudits()})),So(32),qs(33,"translate"),no(),to(34,"button",20),uo("click",(function(){return mn(n),fo().downloadVisboAudit()})),So(35),qs(36,"translate"),no(),no(),no(),no(),to(37,"div",21),to(38,"div",22),to(39,"table",23),to(40,"thead",24),to(41,"tr"),to(42,"th",25),uo("click",(function(){return mn(n),fo().sortTable(1)})),So(43),qs(44,"translate"),no(),to(45,"th",26),uo("click",(function(){return mn(n),fo().sortTable(2)})),So(46),qs(47,"translate"),no(),to(48,"th",27),uo("click",(function(){return mn(n),fo().sortTable(3)})),So(49),qs(50,"translate"),no(),to(51,"th",28),uo("click",(function(){return mn(n),fo().sortTable(4)})),So(52),qs(53,"translate"),no(),to(54,"th",29),uo("click",(function(){return mn(n),fo().sortTable(5)})),So(55),qs(56,"translate"),no(),to(57,"th"),So(58,"Detail"),no(),no(),no(),to(59,"tbody",30),Ya(60,iw,14,7,"tr",31),no(),no(),Ya(61,rw,4,3,"div",0),no(),no(),no()}if(2&e){var i=fo();zi(3),xo(" ",zs(4,19,"vpAudit.title"),": "),zi(3),To(i.visboproject.name),zi(3),Xa("ngIf",i.sysadmin),zi(1),Xa("ngIf",!i.sysadmin),zi(3),xo("",zs(14,21,"vpAudit.lbl.filter"),":"),zi(2),Xa("ngModel",i.auditText),zi(2),xo("",zs(18,23,"vpAudit.lbl.max"),":"),zi(2),Xa("ngModel",i.auditCount),zi(9),Xa("ngModel",i.auditType),zi(1),Xa("ngForOf",i.auditTypeList),zi(3),To(zs(33,25,"vpAudit.btn.filter")),zi(3),To(zs(36,27,"vpAudit.btn.download")),zi(8),To(zs(44,29,"vpAudit.lbl.created")),zi(3),To(zs(47,31,"vpAudit.lbl.user")),zi(3),To(zs(50,33,"vpAudit.lbl.action")),zi(3),To(zs(53,35,"vpAudit.lbl.info")),zi(3),To(zs(56,37,"vpAudit.lbl.result")),zi(5),Xa("ngForOf",i.audit),zi(1),Xa("ngIf",i.audit&&0==i.audit.length)}}function ow(e,t){if(1&e&&(to(0,"div"),to(1,"label",62),So(2),qs(3,"translate"),no(),to(4,"label",71),So(5),no(),no()),2&e){var n=fo(2);zi(2),xo("",zs(3,2,"vpAudit.lbl.info"),":"),zi(3),xo("",n.audit[n.auditIndex].actionInfo," ")}}function sw(e,t){if(1&e&&(to(0,"div"),to(1,"label",62),So(2),qs(3,"translate"),no(),to(4,"label",72),So(5),no(),no()),2&e){var n=fo(2);zi(2),xo("",zs(3,2,"vpAudit.lbl.vc"),":"),zi(3),xo("",n.audit[n.auditIndex].vc.name," ")}}function lw(e,t){if(1&e&&(to(0,"div"),to(1,"label",62),So(2),qs(3,"translate"),no(),to(4,"label",73),So(5),no(),no()),2&e){var n=fo(2);zi(2),xo("",zs(3,3,"vpAudit.lbl.vp"),":"),zi(3),_o("",n.audit[n.auditIndex].vp.name," (",n.audit[n.auditIndex].vp.vpid,") ")}}function cw(e,t){if(1&e&&(to(0,"div"),to(1,"label",62),So(2),qs(3,"translate"),no(),to(4,"label",74),So(5),no(),no()),2&e){var n=fo(2);zi(2),xo("",zs(3,3,"vpAudit.lbl.vpv"),":"),zi(3),_o("",n.audit[n.auditIndex].vpv.name," (",n.audit[n.auditIndex].vpv.vpvid,")")}}function uw(e,t){if(1&e&&(to(0,"div"),to(1,"label",62),So(2),qs(3,"translate"),no(),to(4,"label",66),So(5),no(),no()),2&e){var n=fo(2);zi(2),xo("",zs(3,2,"vpAudit.lbl.techAction"),":"),zi(3),xo("",n.audit[n.auditIndex].action," ")}}function dw(e,t){if(1&e&&(to(0,"div"),to(1,"label",62),So(2),qs(3,"translate"),no(),to(4,"label",75),So(5),no(),no()),2&e){var n=fo(2);zi(2),xo("",zs(3,2,"vpAudit.lbl.url"),":"),zi(3),xo("",n.audit[n.auditIndex].url," ")}}function hw(e,t){if(1&e&&(to(0,"div"),to(1,"label",62),So(2),qs(3,"translate"),no(),to(4,"label",66),So(5),no(),no()),2&e){var n=fo(2);zi(2),xo("",zs(3,2,"vpAudit.lbl.responseTime"),":"),zi(3),xo("",n.audit[n.auditIndex].result.time," ms ")}}function vw(e,t){if(1&e&&(to(0,"div"),to(1,"label",62),So(2),qs(3,"translate"),no(),to(4,"label",66),So(5),no(),no()),2&e){var n=fo(2);zi(2),xo("",zs(3,2,"vpAudit.lbl.responseSize"),":"),zi(3),xo("",n.helperFormatBytes(n.audit[n.auditIndex].result.size||0,2)," ")}}function fw(e,t){if(1&e&&(to(0,"div"),to(1,"label",62),So(2),qs(3,"translate"),no(),to(4,"label",66),So(5),no(),no()),2&e){var n=fo(2);zi(2),xo("",zs(3,2,"vpAudit.lbl.userAgent"),":"),zi(3),To(n.audit[n.auditIndex].userAgent)}}function pw(e,t){if(1&e&&(to(0,"div"),to(1,"label",62),So(2),qs(3,"translate"),no(),to(4,"label",66),So(5),no(),no()),2&e){var n=fo(2);zi(2),xo("",zs(3,2,"vpAudit.lbl.ip"),":"),zi(3),To(n.audit[n.auditIndex].ip)}}function gw(e,t){if(1&e&&(to(0,"div"),to(1,"label",62),So(2),qs(3,"translate"),no(),to(4,"label",66),So(5),qs(6,"date"),no(),no()),2&e){var n=fo(2);zi(2),xo("",zs(3,2,"vpAudit.lbl.ttl"),":"),zi(3),To(Qs(6,4,n.audit[n.auditIndex].ttl,"dd.MM HH:mm"))}}function mw(e,t){if(1&e){var n=so();to(0,"button",76),uo("click",(function(){return mn(n),fo(2).toggleDetail()})),So(1),qs(2,"translate"),no()}2&e&&(zi(1),To(zs(2,1,"vpAudit.btn.more")))}function bw(e,t){if(1&e){var n=so();to(0,"button",77),uo("click",(function(){return mn(n),fo(2).toggleDetail()})),So(1),qs(2,"translate"),no()}2&e&&(zi(1),To(zs(2,1,"vpAudit.btn.less")))}function yw(e,t){if(1&e){var n=so();to(0,"div",48),to(1,"div",49),to(2,"div",50),to(3,"h5",51),So(4),qs(5,"translate"),no(),to(6,"button",52),to(7,"span",53),So(8,"\xd7"),no(),no(),no(),to(9,"div",54),to(10,"div",5),to(11,"div",55),to(12,"h3",56),uo("click",(function(){return mn(n),fo().pageAuditIndex(-1)})),io(13,"a",57),no(),no(),to(14,"div",58),to(15,"h3",59),uo("click",(function(){return mn(n),fo().pageAuditIndex(1)})),io(16,"a",60),no(),no(),no(),to(17,"form",61),to(18,"label",62),So(19),qs(20,"translate"),no(),to(21,"label",63),So(22),qs(23,"date"),no(),to(24,"label",62),So(25),qs(26,"translate"),no(),to(27,"label",64),So(28),no(),to(29,"label",62),So(30),qs(31,"translate"),no(),to(32,"label",65),So(33),no(),Ya(34,ow,6,4,"div",0),Ya(35,sw,6,4,"div",0),Ya(36,lw,6,5,"div",0),Ya(37,cw,6,5,"div",0),to(38,"div"),to(39,"label",62),So(40),qs(41,"translate"),no(),to(42,"label",66),So(43),no(),no(),Ya(44,uw,6,4,"div",0),Ya(45,dw,6,4,"div",0),Ya(46,hw,6,4,"div",0),Ya(47,vw,6,4,"div",0),Ya(48,fw,6,4,"div",0),Ya(49,pw,6,4,"div",0),Ya(50,gw,7,7,"div",0),no(),no(),to(51,"div",67),Ya(52,mw,3,3,"button",68),Ya(53,bw,3,3,"button",69),to(54,"button",70),So(55),qs(56,"translate"),no(),no(),no(),no()}if(2&e){var i=fo();zi(4),To(zs(5,23,"vpAudit.titleDetail")),zi(15),xo("",zs(20,25,"vpAudit.lbl.created"),":"),zi(3),xo("",Qs(23,27,i.audit[i.auditIndex].createdAt,"dd.MM.yyyy HH:mm:ss.SSS")," "),zi(3),xo("",zs(26,30,"vpAudit.lbl.user"),":"),zi(3),xo("",i.audit[i.auditIndex].user.email," "),zi(2),xo("",zs(31,32,"vpAudit.lbl.action"),":"),zi(3),xo("",i.audit[i.auditIndex].actionDescription," "),zi(1),Xa("ngIf",i.audit[i.auditIndex].actionInfo),zi(1),Xa("ngIf",i.audit[i.auditIndex].vc),zi(1),Xa("ngIf",i.audit[i.auditIndex].vp),zi(1),Xa("ngIf",i.audit[i.auditIndex].vpv),zi(3),xo("",zs(41,34,"vpAudit.lbl.result"),":"),zi(3),xo("",i.helperResponseText(i.audit[i.auditIndex])," "),zi(1),Xa("ngIf",i.showMore),zi(1),Xa("ngIf",i.showMore),zi(1),Xa("ngIf",i.showMore),zi(1),Xa("ngIf",i.showMore),zi(1),Xa("ngIf",i.showMore),zi(1),Xa("ngIf",i.showMore),zi(1),Xa("ngIf",i.showMore&&i.audit[i.auditIndex].ttl),zi(2),Xa("ngIf",!i.showMore),zi(1),Xa("ngIf",i.showMore),zi(2),To(zs(56,36,"vpAudit.btn.back"))}}function kw(e){var t;return e?("="!==(t=e.replace(/\t/g," "))[0]&&"+"!==t[0]&&"-"!==t[0]||(t="'".concat(t)),t):e}var Cw,Vw,ww,Aw,Pw,Dw,Mw,Iw=((Cw=function(){function e(t,n,i,r,a,o,s,l){p(this,e),this.visboauditService=t,this.visboprojectService=n,this.messageService=i,this.alertService=r,this.location=a,this.route=o,this.router=s,this.translate=l,this.auditTypeList=[{name:"All",action:""},{name:"Read",action:"GET"},{name:"Create",action:"POST"},{name:"Update",action:"PUT"},{name:"Delete",action:"DELETE"}],this.deleted=!1}return m(e,[{key:"ngOnInit",value:function(){this.sysadmin=this.route.snapshot.queryParams.sysadmin,this.deleted=!!this.route.snapshot.queryParams.deleted,this.getVisboProject(),this.auditCount=50,this.auditType=this.auditTypeList[0].name,this.today=new Date,this.today.setHours(0,0,0,0),this.getVisboProjectAudits(),this.sortTable(void 0)}},{key:"getVisboProject",value:function(){var e=this,t=this.route.snapshot.paramMap.get("id");this.log("VisboProject Detail of: "+t),this.visboprojectService.getVisboProject(t,this.sysadmin,this.deleted).subscribe((function(n){e.visboproject=n,e.combinedPerm=n.perm,e.log("Get VisboProject ".concat(t," ").concat(e.visboproject.name," Perm ").concat(JSON.stringify(e.combinedPerm)))}),(function(t){e.log("get VPs failed: error: ".concat(t.status," message: ").concat(t.error.message)),e.alertService.error(Zv(t))}))}},{key:"getVisboProjectAudits",value:function(){var e=this,t=this.route.snapshot.paramMap.get("id"),n=new uV;this.log("Audit getVisboProjectAudits from ".concat(this.auditFrom," to ").concat(this.auditTo," Text ").concat(this.auditText," AuditType ").concat(this.auditType)),this.alertService.clear(),n.to=this.auditTo?new Date(this.auditTo):new Date,this.auditFrom&&(n.from=new Date(this.auditFrom)),this.auditText&&(n.text=this.auditText.trim());for(var i=0;i<this.auditTypeList.length;i++)if(this.auditType===this.auditTypeList[i].name){n.actionType=this.auditTypeList[i].action;break}n.maxcount=this.auditCount,this.log("Audit getVisboProjectAudits VP ".concat(t," recalc Query ").concat(JSON.stringify(n))),this.visboauditService.getVisboProjectAudits(t,this.sysadmin,this.deleted,n).subscribe((function(t){e.audit=t,e.sortTable(void 0);var n=e.translate.instant("vpAudit.msg.auditSuccess");e.alertService.success(n,!0),e.log("get Audit success ".concat(e.audit.length," for ").concat(e.visboproject.name))}),(function(t){e.log("get Audit failed: error: ".concat(t.status," message: ").concat(JSON.stringify(t))),e.alertService.error(Zv(t))}))}},{key:"downloadVisboAudit",value:function(){var e;this.log("sysAudit Download ".concat(this.audit.length," Items")),e="sep=\t\n",e+="date\ttime UTC\temail\tactiondDescription\taction\turl\tactionInfo\tresponseTime\tresponseStatus\tvcid\tvcname\tvpid\tvpname\tvpvid\tsize\tip\tuserId\tuserAgent\tttl\tVC Details\tVP Details\n";for(var t=0;t<this.audit.length;t++){var n=new Date(this.audit[t].createdAt).toISOString(),i=(this.audit[t].userAgent||"").replace(/,/g,";"),r=n.substr(0,10)+"\t"+n.substr(11,8)+"\t"+kw(this.audit[t].user.email)+"\t"+kw(this.audit[t].actionDescription)+"\t"+this.audit[t].action+"\t"+this.audit[t].url+"\t"+this.audit[t].actionInfo+"\t"+(this.audit[t].result?this.audit[t].result.time:"")+"\t"+(this.audit[t].result?this.audit[t].result.status:"")+"\t"+(this.audit[t].vc?this.audit[t].vc.vcid:"")+"\t"+(this.audit[t].vc?kw(this.audit[t].vc.name):"")+"\t"+(this.audit[t].vp?this.audit[t].vp.vpid:"")+"\t"+(this.audit[t].vp?kw(this.audit[t].vp.name):"")+"\t"+(this.audit[t].vpv?this.audit[t].vpv.vpvid:"")+"\t"+(this.audit[t].result?this.audit[t].result.size:"0")+"\t"+this.audit[t].ip+"\t"+this.audit[t].user.userId+"\t"+kw(i)+"\t"+(this.audit[t].ttl||"")+"\t"+(this.audit[t].vc&&kw(this.audit[t].vc.vcjson)||"")+"\t"+(this.audit[t].vp&&kw(this.audit[t].vp.vpjson)||"")+"\n";e=e.concat(r)}this.log("sysAudit CSV Len ".concat(e.length," "));var a=new Blob([e],{type:"text/plain"}),o=window.URL.createObjectURL(a);this.log("Open URL "+o);var s=document.createElement("a");document.body.appendChild(s),s.href=o,s.download="auditlog-VP.csv",this.log("Open URL ".concat(o," doc ").concat(JSON.stringify(s))),s.click(),window.URL.revokeObjectURL(o)}},{key:"goBack",value:function(){this.location.back()}},{key:"helperAuditIndex",value:function(e){this.auditIndex=e}},{key:"helperFormatBytes",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;if(0===e)return"0 B";var n=t||2,i=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,i)).toFixed(n))+" "+["B","KB","MB","GB","TB","PB","EB","ZB","YB"][i]}},{key:"pageAuditIndex",value:function(e){var t;(t=this.auditIndex+e)<0&&(t=0),t>=this.audit.length&&(t=this.audit.length-1),this.auditIndex=t}},{key:"helperResponseText",value:function(e){if(e.result.statusText)return e.result.statusText;var t=e.result.status;return"200"===t||"304"===t?"Success":"400"===t?"Bad Request":"401"===t?"Not Authenticated":"403"===t?"Permission Denied":"404"===t?"URL not found":"409"===t?"Conflict":"423"===t?"Locked":"500"===t?"Server Error":t.toString()}},{key:"helperShortenText",value:function(e,t){return $v(e,t)}},{key:"toggleDetail",value:function(){this.log("Toggle ShowMore"),this.showMore=!this.showMore}},{key:"isToday",value:function(e){return new Date(e)>this.today}},{key:"sortTable",value:function(e){this.audit&&(this.log("Sort Table Column "+e),void 0!==e?e!==this.sortColumn?(this.sortColumn=e,this.sortAscending=void 0):void 0!==this.sortAscending&&(this.sortAscending=!this.sortAscending):(this.sortColumn=1,this.sortAscending=void 0),void 0===this.sortAscending&&(this.sortAscending=2===e||3===e||4===e),1===this.sortColumn?this.audit.sort((function(e,t){return zv(e.createdAt,t.createdAt)})):2===this.sortColumn?this.audit.sort((function(e,t){return qv(e.user.email.toLowerCase(),t.user.email.toLowerCase())})):3===this.sortColumn?this.audit.sort((function(e,t){return qv(e.actionDescription,t.actionDescription)})):4===this.sortColumn?this.audit.sort((function(e,t){return qv(e.url,t.url)})):5===this.sortColumn?this.audit.sort((function(e,t){return qv(e.result.status,t.result.status)})):6===this.sortColumn?this.audit.sort((function(e,t){return e.result.time-t.result.time})):7===this.sortColumn&&this.audit.sort((function(e,t){return(e.result.size||0)-(t.result.size||0)})),this.sortAscending||this.audit.reverse())}},{key:"log",value:function(e){this.messageService.add("Audit: "+e)}}]),e}()).\u0275fac=function(e){return new(e||Cw)(Za(hV),Za(dk),Za(tf),Za(Zm),Za(mc),Za(sg),Za(Am),Za(Rb))},Cw.\u0275cmp=wt({type:Cw,selectors:[["app-visboproject-audit"]],decls:5,vars:4,consts:[[4,"ngIf"],["class","well",4,"ngIf"],["id","AuditDetail","tabindex","-1","role","dialog","aria-labelledby","Audit Detail","aria-hidden","true",1,"modal","fade"],["class","modal-dialog modal-lg modal-dialog-centered","role","document",4,"ngIf"],[1,"well"],[1,"row"],[1,"panel-heading","ml-0"],[3,"click"],["name","form","novalidate","",3,"ngSubmit"],["f","ngForm"],["class","form-group row",4,"ngIf"],[1,"form-group","row"],["for","auditText",1,"col-1","col-form-label"],["id","auditText","type","text","name","auditText",1,"col-2","col-sm-3","form-control",3,"ngModel","ngModelChange"],["for","auditCount",1,"col-1","col-form-label"],["name","auditCount",1,"col-1","form-control","mx-1",3,"ngModel","ngModelChange"],["id","auditType","id","auditType","name","auditType",1,"col-1","form-control","mx-1",3,"ngModel","ngModelChange"],[4,"ngFor","ngForOf"],[1,"btn-group"],["type","button",1,"btn","btn-sm","btn-primary","ml-auto","mx-1",3,"click"],["type","button",1,"btn","btn-sm","btn-secondary","ml-auto","mx-1",3,"click"],[1,"container-fluid"],[1,"panel-body"],[1,"table","table-hover","table-sortable"],["id","AuditHead"],["id","SortDate",1,"d-none","d-md-table-cell",3,"click"],["id","SortUser",3,"click"],["id","SortAction",3,"click"],["id","SortInfo",1,"d-none","d-md-table-cell",3,"click"],["id","SortResult",1,"d-none","d-lg-table-cell",3,"click"],["id","AuditList"],["data-toggle","modal","data-target","#AuditDetail",3,"click",4,"ngFor","ngForOf"],["for","auditFrom",1,"col-1","col-form-label"],["id","auditFrom","type","datetime-local","name","auditFrom",1,"col-2","col-sm-4","form-control",3,"ngModel","ngModelChange"],["for","auditTo",1,"col-1","col-form-label"],["id","auditTo","type","datetime-local","name","auditTo",1,"col-2","col-sm-4","form-control",3,"ngModel","ngModelChange"],["id","auditFrom","type","date","name","auditFrom",1,"col-2","col-sm-4","form-control",3,"ngModel","ngModelChange"],["id","auditTo","type","date","name","auditTo",1,"col-2","col-sm-4","form-control",3,"ngModel","ngModelChange"],["data-toggle","modal","data-target","#AuditDetail",3,"click"],["id","ColCreated","class","d-none d-md-table-cell",4,"ngIf"],["id","ColUser",4,"ngIf"],["id","ColAction"],["id","ColInfo",1,"d-none","d-md-table-cell"],["id","ColResult",1,"d-none","d-lg-table-cell"],["id","ColDetail","data-toggle","modal","data-target","#AuditDetail",1,"Detail",3,"click"],["id","ColCreated",1,"d-none","d-md-table-cell"],["id","ColUser"],[1,"d-flex","justify-content-center"],["role","document",1,"modal-dialog","modal-lg","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header"],["id","AuditDetailTitle",1,"modal-title"],["type","button","data-dismiss","modal","aria-label","Close",1,"close"],["aria-hidden","true"],[1,"modal-body"],[1,"col-11"],["id","ButtonPrev",3,"click"],[1,"px-3","col-1","fas","fa-caret-square-left"],[1,"col-1"],["id","ButtonNext",3,"click"],[1,"px-3","col-1","fas","fa-caret-square-right"],["id","auditEntry"],[1,"v_compact_t","col-4","form-control-static"],["id","auditCreated",1,"v_compact_t","col-7","form-control-static"],["id","auditUser",1,"v_compact_t","col-7","form-control-static"],["id","auditAction",1,"v_compact_t","col-7","form-control-static"],[1,"v_compact_t","col-7","form-control-static"],[1,"modal-footer","align-items-end"],["id","ButtonMore","type","button","class","btn btn-secondary",3,"click",4,"ngIf"],["id","ButtonLess","type","button","class","btn btn-secondary",3,"click",4,"ngIf"],["id","ButtonBack","type","button","data-dismiss","modal",1,"btn","btn-primary"],["id","auditInfo",1,"v_compact_t","col-7","form-control-static"],["id","auditVC",1,"v_compact_t","col-7","form-control-static"],["id","auditVP",1,"v_compact_t","col-7","form-control-static"],["id","auditVPV",1,"v_compact_t","col-7","form-control-static"],[1,"v_compact_t","col-7","form-control-static",2,"overflow-wrap","break-word"],["id","ButtonMore","type","button",1,"btn","btn-secondary",3,"click"],["id","ButtonLess","type","button",1,"btn","btn-secondary",3,"click"]],template:function(e,t){1&e&&(Ya(0,WV,2,0,"div",0),Ya(1,JV,2,0,"div",0),Ya(2,aw,62,39,"div",1),to(3,"div",2),Ya(4,yw,57,38,"div",3),no()),2&e&&(Xa("ngIf",!t.sysadmin),zi(1),Xa("ngIf",t.sysadmin),zi(1),Xa("ngIf",t.visboproject),zi(2),Xa("ngIf",t.auditIndex>=0&&t.auditIndex<t.audit.length))},directives:[su,pk,mV,Fh,xd,Gh,Ad,Td,Nh,rh,ah,dh,au],pipes:[jb,Cu],styles:[".v_compact_t[_ngcontent-%COMP%]{margin:0;padding-top:0}"]}),Cw),Sw=function e(){p(this,e)},Tw=function e(){p(this,e)},xw=function e(){p(this,e)},_w=function e(){p(this,e)},Uw=function e(){p(this,e)},Ow={headers:new ov({"Content-Type":"application/json"})},Ew=((Vw=function(){function e(t,n,i){p(this,e),this.http=t,this.messageService=n,this.env=i,this.vpvUrl=this.env.restUrl.concat("/vpv"),this.vpfUrl=this.env.restUrl.concat("/vp")}return m(e,[{key:"getVisboProjectVersions",value:function(e,t,n,i){var r=this,a=""+this.vpvUrl,o=new ov({"Content-Type":"application/json"}),s=new cv;return e&&(s=s.append("vpid",e)),t&&(s=s.append("deleted","1")),void 0!==n&&(s=s.append("variantID",n)),i&&(s=s.append("keyMetrics","1")),this.log("Calling HTTP Request: ".concat(a," Options: ").concat(s)),this.http.get(this.vpvUrl,{headers:o,params:s}).pipe(B((function(e){return e.vpv})),cf((function(e){return r.log("fetched ".concat(e.length," VisboProjectVersions "))})),af(this.handleError("getVisboProjectVersions")))}},{key:"getVisboProjectVersion",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i="".concat(this.vpvUrl,"/").concat(e),r=new ov({"Content-Type":"application/json"}),a=new cv;return n&&(a=a.append("deleted","1")),this.log("Calling HTTP Request for a specific entry: ".concat(i," Params ").concat(a)),this.http.get(i,{headers:r,params:a}).pipe(B((function(e){return e.vpv[0].perm=e.perm,e.vpv[0]})),cf((function(){return t.log("fetched Specific Version ")})),af(this.handleError("getVisboProjectVersion id="+e)))}},{key:"addVisboProjectVersion",value:function(e){var t=this;return(new Uw).name=e.name,this.http.post(this.vpvUrl,e,Ow).pipe(B((function(e){return JSON.parse(JSON.stringify(e)).vpv})),cf((function(e){return t.log("added VisboProjectVersion w/ id="+e._id)})),af(this.handleError("addVisboProjectVersion")))}},{key:"deleteVisboProjectVersion",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=e._id,r="".concat(this.vpvUrl,"/").concat(i),a=new ov({"Content-Type":"application/json"}),o=new cv;return n&&(o=o.append("deleted","1")),this.log("Calling HTTP Request Delete: ".concat(r," Params ").concat(o)),this.http.delete(r,{headers:a,params:o}).pipe(cf((function(){return t.log("deleted VisboProjectVersion id="+i)})),af(this.handleError("deleteVisboProjectVersion")))}},{key:"updateVisboProjectVersion",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i="".concat(this.vpvUrl,"/").concat(e._id),r=new ov({"Content-Type":"application/json"}),a=new cv;return n&&(a=a.append("deleted","1")),this.log("Calling HTTP Request PUT: ".concat(i," Params ").concat(a)),this.http.put(i,e,{headers:r,params:a}).pipe(B((function(e){return e.vpv[0]})),cf((function(){return t.log("updated VisboProjectVersion id=".concat(e._id," url=").concat(t.vpvUrl))})),af(this.handleError("updateVisboProjectVersion")))}},{key:"getVisboPortfolioVersions",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i="".concat(this.vpfUrl,"/").concat(e,"/portfolio"),r=new ov({"Content-Type":"application/json"}),a=new cv;return n&&(a=a.append("deleted","1")),this.log("Calling HTTP Request: ".concat(i," Options: ").concat(a)),this.http.get(i,{headers:r,params:a}).pipe(B((function(e){return e.vpf&&e.vpf.length>0&&(e.vpf[0].perm=e.perm),e.vpf})),cf((function(e){return t.log("fetched ".concat(e.length," VisboPortfolioVersion "))})),af(this.handleError("getVisboPortfolioVersions")))}},{key:"addVisboPortfolioVersion",value:function(e,t){var n=this,i="".concat(this.vpfUrl,"/").concat(e._id,"/portfolio"),r=new ov({"Content-Type":"application/json"}),a=new cv;return this.http.post(i,t,{headers:r,params:a}).pipe(B((function(e){return e.vpf[0]})),cf((function(e){return n.log("added VisboPortfolioVersion w/ id="+e._id)})),af(this.handleError("addVisboPortfolioVersion")))}},{key:"updateVisboPortfolioVersion",value:function(e,t){var n=this,i="".concat(this.vpfUrl,"/").concat(e._id,"/portfolio/").concat(t._id),r=new ov({"Content-Type":"application/json"}),a=new cv;return this.http.put(i,t,{headers:r,params:a}).pipe(B((function(e){return e.vpf[0]})),cf((function(e){return n.log("updated VisboPortfolioVersion w/ id="+e._id)})),af(this.handleError("updateVisboPortfolioVersion")))}},{key:"deleteVisboPortfolioVersion",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=e._id,r="".concat(this.vpfUrl,"/").concat(e.vpid,"/portfolio/").concat(i),a=new ov({"Content-Type":"application/json"}),o=new cv;return n&&(o=o.append("deleted","1")),this.log("Calling HTTP Request Delete: ".concat(r," Params ").concat(o)),this.http.delete(r,{headers:a,params:o}).pipe(cf((function(){return t.log("deleted VisboPortfolioVersion id="+i)})),af(this.handleError("deleteVisboPortfolioVersion")))}},{key:"getVisboPortfolioKeyMetrics",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Date,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=""+this.vpvUrl,a=new ov({"Content-Type":"application/json"}),o=new cv;return o=(o=(o=o.append("vpfid",e)).append("refDate",n.toISOString())).append("keyMetrics","1"),i&&(o=o.append("deleted","1")),this.log("Calling HTTP Request: ".concat(r," Options: ").concat(o)),this.http.get(r,{headers:a,params:o}).pipe(B((function(e){return e.vpv})),cf((function(e){return t.log("fetched ".concat(e.length," VisboPortfolio Project Versions "))})),af(this.handleError("getVisboPortfoliokeyMetrics")))}},{key:"getVisboCenterProjectVersions",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Date,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=""+this.vpvUrl,a=new ov({"Content-Type":"application/json"}),o=new cv;return o=(o=(o=(o=o.append("vcid",e)).append("refDate",n.toISOString())).append("keyMetrics","1")).append("variantID",""),i&&(o=o.append("deleted","1")),this.log("Calling HTTP Request: ".concat(r," Options: ").concat(o)),this.http.get(r,{headers:a,params:o}).pipe(B((function(e){return e.vpv})),cf((function(e){return t.log("fetched ".concat(e.length," VisboCenter Project Versions "))})),af(this.handleError("getVisboCenterProjectkeyMetrics")))}},{key:"getVisboPortfolioVersion",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i="".concat(this.vpfUrl,"/").concat(e,"/portfolio"),r=new ov({"Content-Type":"application/json"}),a=new cv;return n&&(a=a.append("deleted","1")),this.log("Calling HTTP Request for a specific entry: ".concat(i," Params ").concat(a)),this.http.get(i,{headers:r,params:a}).pipe(B((function(e){return e.vpf[0]})),cf((function(){return t.log("fetched Specific Portfolio Version ")})),af(this.handleError("getVisboPortfolioVersion id="+e)))}},{key:"getCapacity",value:function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a="".concat(this.vpvUrl,"/").concat(e,"/capacity"),o=new ov({"Content-Type":"application/json"}),s=new cv;return i&&(s=s.append("hierarchy","1")),r&&(s=s.append("pfv","1")),t&&(this.log("Calling RoleID: "+t),s=s.append("roleID",t)),this.log("Calling HTTP Request: ".concat(a," Options: ").concat(s)),this.http.get(a,{headers:o,params:s}).pipe(B((function(e){return e.vpv})),cf((function(){return n.log("fetched Capacity Calculation for "+e)})),af(this.handleError("getVisboProjectVersions")))}},{key:"getCost",value:function(e){var t=this,n="".concat(this.vpvUrl,"/").concat(e,"/cost"),i=new ov({"Content-Type":"application/json"}),r=new cv;return this.log("Calling HTTP Request: ".concat(n," Options: ").concat(r)),this.http.get(n,{headers:i,params:r}).pipe(B((function(e){return e.vpv})),cf((function(){return t.log("fetched Cost Calc for "+e)})),af(this.handleError("getVisboProjectVersions")))}},{key:"getDelivery",value:function(e,t){var n=this,i="".concat(this.vpvUrl,"/").concat(e,"/delivery"),r=new ov({"Content-Type":"application/json"}),a=new cv;return t&&(a=a.append("ref",t)),this.log("Calling HTTP Request: ".concat(i," Options: ").concat(a)),this.http.get(i,{headers:r,params:a}).pipe(B((function(e){return e.vpv})),cf((function(){return n.log("fetched Delivery Calc for "+e)})),af(this.handleError("getVisboProjectVersions")))}},{key:"getDeadline",value:function(e,t){var n=this,i="".concat(this.vpvUrl,"/").concat(e,"/deadline"),r=new ov({"Content-Type":"application/json"}),a=new cv;return t&&(a=a.append("ref",t)),this.log("Calling HTTP Request: ".concat(i," Options: ").concat(a)),this.http.get(i,{headers:r,params:a}).pipe(B((function(e){return e.vpv})),cf((function(){return n.log("fetched Deadline Calc for "+e)})),af(this.handleError("getVisboProjectVersions")))}},{key:"handleError",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"operation";return function(n){return e.log("HTTP Request ".concat(t," failed: ").concat(n.message," ").concat(n.status)),nf(n)}}},{key:"log",value:function(e){this.messageService.add("VisboProjectVersionService: "+e)}}]),e}()).\u0275fac=function(e){return new(e||Vw)(ot(Sv),ot(tf),ot(Vf))},Vw.\u0275prov=Ve({token:Vw,factory:Vw.\u0275fac}),Vw),Lw=function e(){p(this,e)},Gw=function(e){return e.SELECTED="SELECTED",e.NOT_SELECTED="NOT_SELECTED",e.PARENT_SELECTED="PARENT_SELECTED",e}({}),Rw=c("h9Sk"),jw=function e(t,n,i,r,a){p(this,e),this.element=t,this.newWidth=n,this.newHeight=i,this.oldWidth=r,this.oldHeight=a},Nw=((Mw=function(){function e(t){p(this,e),this.element=t,this.resized=new Ys}return m(e,[{key:"ngOnInit",value:function(){var e=this;Rw.ResizeSensor&&(this.resizeSensor=new Rw.ResizeSensor(this.element.nativeElement,(function(){return e.onResized()})))}},{key:"ngOnDestroy",value:function(){this.resizeSensor&&this.resizeSensor.detach()}},{key:"onResized",value:function(){var e=this.element.nativeElement.clientWidth,t=this.element.nativeElement.clientHeight;if(e!==this.oldWidth||t!==this.oldHeight){var n=new jw(this.element,e,t,this.oldWidth,this.oldHeight);this.oldWidth=this.element.nativeElement.clientWidth,this.oldHeight=this.element.nativeElement.clientHeight,this.resized.emit(n)}}}]),e}()).\u0275fac=function(e){return new(e||Mw)(Za(es))},Mw.\u0275dir=St({type:Mw,selectors:[["","resized",""]],outputs:{resized:"resized"}}),Mw),Fw=((Dw=function e(){p(this,e)}).\u0275mod=Mt({type:Dw}),Dw.\u0275inj=we({factory:function(e){return new(e||Dw)},imports:[[]]}),Dw),Bw=((Pw=function e(){p(this,e)}).\u0275mod=Mt({type:Pw}),Pw.\u0275inj=we({factory:function(e){return new(e||Pw)},imports:[[wu]]}),Pw),Hw=((Aw=function(){function e(){p(this,e),this.google=google}return m(e,[{key:"getGoogle",value:function(){return this.google}}]),e}()).\u0275fac=function(e){return new(e||Aw)},Aw.\u0275prov=Ve({token:Aw,factory:Aw.\u0275fac,providedIn:Bw}),Aw),Kw=((ww=function(){function e(t){p(this,e),this.gChartService=t}return m(e,[{key:"ngOnInit",value:function(){this.language||(this.language="de"),this.gLib=this.gChartService.getGoogle(),this.gLib.charts.load("current",{packages:["corechart","table"],language:this.language}),this.gLib.charts.setOnLoadCallback(this.drawChart.bind(this))}},{key:"ngOnChanges",value:function(){this.initialised&&this.drawChart()}},{key:"drawChart",value:function(){var e=new this.gLib.visualization.ComboChart(document.getElementById("divComboChart")),t=new this.gLib.visualization.arrayToDataTable(this.graphData),n=this.parentThis;this.gLib.visualization.events.addListener(e,"select",(function(){var i=e.getSelection();if(i&&0!==i.length){var r=i[0];if(void 0===n)console.log("Chart Combo: The user clicked and this is undefined");else if(r){var a=r.row,o=r.column;if(null!=a&&a>=0){var s=t.getValue(a,0);n.chartSelectRow(a,o,s)}}}else console.log("Chart Combo: chartGetSelection is undefined",i||i.length)})),e.draw(t,this.graphOptions||{title:"Combo Chart"}),this.initialised=!0}}]),e}()).\u0275fac=function(e){return new(e||ww)(Za(Hw))},ww.\u0275cmp=wt({type:ww,selectors:[["app-combo-chart"]],inputs:{graphData:"graphData",language:"language",graphOptions:"graphOptions",parentThis:"parentThis"},features:[Qt],decls:1,vars:0,consts:[["id","divComboChart"]],template:function(e,t){1&e&&io(0,"div",0)},styles:["#divComboChart[_ngcontent-%COMP%]{width:100%;height:500px}"]}),ww);function qw(e,t){1&e&&(to(0,"span",22),So(1),qs(2,"translate"),no()),2&e&&(zi(1),To(zs(2,1,"ViewCapacity.title2")))}function zw(e,t){if(1&e){var n=so();to(0,"span",23),to(1,"a",24),So(2),no(),to(3,"div",25),to(4,"a",26),uo("click",(function(){return mn(n),fo(2).updateShowUnit("PD")})),So(5),qs(6,"translate"),no(),to(7,"a",26),uo("click",(function(){return mn(n),fo(2).updateShowUnit("Euro")})),So(8),qs(9,"translate"),no(),no(),no()}if(2&e){var i=fo(2);zi(2),xo(" ",i.showUnitText," "),zi(3),To(zs(6,3,"ViewCapacity.lbl.pd")),zi(3),To(zs(9,5,"ViewCapacity.lbl.euro"))}}function Qw(e,t){if(1&e){var n=so();to(0,"div",15),to(1,"span"),to(2,"label",16),So(3),qs(4,"translate"),no(),no(),to(5,"span"),to(6,"input",17),uo("input",(function(e){mn(n);var t=fo();return t.capacityFrom=t.parseDate(e.target.value)}))("change",(function(){return mn(n),fo().updateDateRange()})),qs(7,"date"),no(),no(),to(8,"span"),to(9,"label",18),So(10),qs(11,"translate"),no(),to(12,"input",19),uo("input",(function(e){mn(n);var t=fo();return t.capacityTo=t.parseDate(e.target.value)}))("change",(function(){return mn(n),fo().updateDateRange()})),qs(13,"date"),no(),no(),to(14,"div",18),Ya(15,qw,3,3,"span",20),Ya(16,zw,10,7,"span",21),no(),no()}if(2&e){var i=fo();zi(3),To(zs(4,6,"ViewCapacity.titleCapacity")),zi(3),Xa("ngModel",Qs(7,8,i.capacityFrom,"yyyy-MM-dd")),zi(4),To(zs(11,11,"ViewCapacity.titleTimeTo")),zi(2),Xa("ngModel",Qs(13,13,i.capacityTo,"yyyy-MM-dd")),zi(3),Xa("ngIf",i.hasCost),zi(1),Xa("ngIf",i.hasCost)}}function Ww(e,t){if(1&e){var n=so();to(0,"div",30),to(1,"input",31),uo("change",(function(){return mn(n),fo(2).updateRef()}))("ngModelChange",(function(e){return mn(n),fo(2).refPFV=e})),no(),to(2,"label",32),So(3),qs(4,"translate"),no(),no()}if(2&e){var i=fo(2);zi(1),Xa("ngModel",i.refPFV),zi(2),To(zs(4,2,"ViewCapacity.lbl.refPFV"))}}function Jw(e,t){if(1&e&&(to(0,"option",37),So(1),no()),2&e){var n=t.$implicit;po("value",n.id),zi(1),To(n.localName)}}function Yw(e,t){if(1&e){var n=so();to(0,"div",33),to(1,"label",34),So(2),qs(3,"translate"),no(),to(4,"select",35),uo("change",(function(){return mn(n),fo(2).updateDrillDown()}))("ngModelChange",(function(e){return mn(n),fo(2).drillDown=e})),Ya(5,Jw,2,2,"option",36),no(),no()}if(2&e){var i=fo(2);zi(2),xo("",zs(3,3,"ViewCapacity.lbl.showDrill"),":"),zi(2),Xa("ngModel",i.drillDown),zi(1),Xa("ngForOf",i.drillDownCapaFiltered)}}function $w(e,t){if(1&e&&(to(0,"div",27),Ya(1,Ww,5,4,"div",28),Ya(2,Yw,6,5,"div",29),no()),2&e){var n=fo();zi(1),Xa("ngIf",!n.vpvActive),zi(1),Xa("ngIf",!n.getPreView())}}function Zw(e,t){1&e&&oo(0)}function Xw(e,t){1&e&&(to(0,"div"),So(1),qs(2,"translate"),no()),2&e&&(zi(1),xo(" ",zs(2,1,"ViewCapacity.lbl.totalCost")," "))}function eA(e,t){1&e&&(to(0,"div"),So(1),qs(2,"translate"),no()),2&e&&(zi(1),xo(" ",zs(2,1,"ViewCapacity.lbl.totalCostPT")," "))}function tA(e,t){1&e&&oo(0)}function nA(e,t){1&e&&(to(0,"span"),So(1,"T\u20ac"),no())}function iA(e,t){1&e&&(to(0,"span"),So(1),qs(2,"translate"),no()),2&e&&(zi(1),To(zs(2,1,"ViewCapacity.lbl.pd")))}function rA(e,t){1&e&&(to(0,"div"),So(1),qs(2,"translate"),no()),2&e&&(zi(1),xo(" ",zs(2,1,"ViewCapacity.lbl.budget")," "))}function aA(e,t){1&e&&(to(0,"div"),So(1),qs(2,"translate"),no()),2&e&&(zi(1),xo(" ",zs(2,1,"ViewCapacity.lbl.totalCapa")," "))}function oA(e,t){1&e&&(to(0,"span"),So(1),qs(2,"translate"),no()),2&e&&(zi(1),To(zs(2,1,"ViewCapacity.lbl.keuro")))}function sA(e,t){1&e&&(to(0,"span"),So(1),qs(2,"translate"),no()),2&e&&(zi(1),To(zs(2,1,"ViewCapacity.lbl.pd")))}var lA=function(e){return{level:e}};function cA(e,t){if(1&e&&(to(0,"div",38),to(1,"h5",39),to(2,"strong",40),Ya(3,Zw,1,0,"ng-container",41),no(),So(4),qs(5,"translate"),no(),to(6,"div",42),to(7,"div",8),to(8,"div",43),Ya(9,Xw,3,3,"div",12),Ya(10,eA,3,3,"div",12),no(),to(11,"div",44),to(12,"strong",40),Ya(13,tA,1,0,"ng-container",41),no(),So(14),qs(15,"number"),Ya(16,nA,2,0,"span",12),Ya(17,iA,3,3,"span",12),no(),no(),to(18,"div",8),to(19,"div",45),qs(20,"translate"),Ya(21,rA,3,3,"div",12),Ya(22,aA,3,3,"div",12),no(),to(23,"div",44),So(24),qs(25,"number"),Ya(26,oA,3,3,"span",12),Ya(27,sA,3,3,"span",12),no(),no(),no(),no()),2&e){var n=fo(),i=$a(17);zi(3),Xa("ngTemplateOutlet",i)("ngTemplateOutletContext",Gs(26,lA,n.getLevel(n.sumCost,n.sumBudget))),zi(1),xo(" ",zs(5,16,"ViewCapacity.titleBox"),""),zi(5),Xa("ngIf","PD"!=n.showUnit),zi(1),Xa("ngIf","PD"==n.showUnit),zi(3),Xa("ngTemplateOutlet",i)("ngTemplateOutletContext",Gs(28,lA,n.getLevel(n.sumCost,n.sumBudget))),zi(1),xo(" ",Qs(15,18,n.sumCost,"1.0-0")," "),zi(2),Xa("ngIf","PD"!=n.showUnit),zi(1),Xa("ngIf","PD"==n.showUnit),zi(2),po("title",zs(20,21,"keyMetrics.longBAC")),zi(2),Xa("ngIf",n.refPFV),zi(1),Xa("ngIf",!n.refPFV),zi(2),xo(" ",Qs(25,23,n.sumBudget,"1.0-0")," "),zi(2),Xa("ngIf","PD"!=n.showUnit),zi(1),Xa("ngIf","PD"==n.showUnit)}}function uA(e,t){1&e&&oo(0)}var dA=function(e){return{$implicit:e,level:0}};function hA(e,t){if(1&e&&(to(0,"div",46),to(1,"span",47),So(2),qs(3,"translate"),no(),Ya(4,uA,1,0,"ng-container",41),no()),2&e){var n=fo(),i=$a(15);zi(2),To(zs(3,3,"ViewCapacity.title1")),zi(2),Xa("ngTemplateOutlet",i)("ngTemplateOutletContext",Gs(5,dA,n.orgaTreeData.children))}}function vA(e,t){if(1&e&&(to(0,"div"),io(1,"app-combo-chart",49),no()),2&e){var n=fo(3);zi(1),Xa("graphData",n.graphDataComboChart)("graphOptions",n.graphOptionsComboChart)("parentThis",n.parentThis)("language",n.currentLang)}}function fA(e,t){1&e&&(to(0,"div"),to(1,"span",47),So(2),qs(3,"translate"),no(),no()),2&e&&(zi(2),To(zs(3,1,"ViewCapacity.msg.noCapacity")))}function pA(e,t){if(1&e&&(to(0,"div"),Ya(1,vA,2,4,"div",12),Ya(2,fA,4,3,"div",12),no()),2&e){var n=fo(2);zi(1),Xa("ngIf",n.graphDataComboChart.length>2),zi(1),Xa("ngIf",n.graphDataComboChart.length<2)}}function gA(e,t){if(1&e&&(to(0,"div",48),Ya(1,pA,3,2,"div",12),no()),2&e){var n=fo();zi(1),Xa("ngIf",n.displayCapacity()>0)}}function mA(e,t){if(1&e&&(to(0,"div"),io(1,"app-combo-chart",49),no()),2&e){var n=fo(3);zi(1),Xa("graphData",n.graphDataComboChart)("graphOptions",n.graphOptionsComboChart)("parentThis",n.parentThis)("language",n.currentLang)}}function bA(e,t){1&e&&(to(0,"div"),to(1,"span",47),So(2),qs(3,"translate"),no(),no()),2&e&&(zi(2),To(zs(3,1,"ViewCapacity.msg.noCapacity")))}function yA(e,t){if(1&e&&(to(0,"div"),Ya(1,mA,2,4,"div",12),Ya(2,bA,4,3,"div",12),no()),2&e){var n=fo(2);zi(1),Xa("ngIf",n.graphDataComboChart.length>2),zi(1),Xa("ngIf",n.graphDataComboChart.length<2)}}function kA(e,t){if(1&e&&(to(0,"div",50),Ya(1,yA,3,2,"div",12),no()),2&e){var n=fo();zi(1),Xa("ngIf",n.displayCapacity()>0)}}function CA(e,t){1&e&&(to(0,"div"),to(1,"span",47),So(2),qs(3,"translate"),no(),no()),2&e&&(zi(2),To(zs(3,1,"ViewCapacity.msg.noCapacity")))}function VA(e,t){1&e&&(to(0,"span",56),io(1,"strong",59),no())}function wA(e,t){1&e&&(to(0,"span",56),io(1,"strong",60),no())}function AA(e,t){1&e&&oo(0)}var PA=function(){return{"list-style-type":"none"}},DA=function(e,t){return{$implicit:e,level:t}};function MA(e,t){if(1&e&&(to(0,"div",61),Ya(1,AA,1,0,"ng-container",41),no()),2&e){var n=fo().$implicit,i=fo().level;fo();var r=$a(15);Xa("ngStyle",Ls(3,PA)),zi(1),Xa("ngTemplateOutlet",r)("ngTemplateOutletContext",Rs(4,DA,n.children,i+1))}}var IA=function(e,t){return{"tree-item__selected":e,"tree-item__parent-selected":t}},SA=function(e,t){return{"fa-chevron-right":e,"fa-chevron-down":t}};function TA(e,t){if(1&e){var n=so();to(0,"div",52),to(1,"div",53),uo("click",(function(){mn(n);var e=t.$implicit;return fo(2).selectLeaf(e)})),to(2,"span"),to(3,"a",54),uo("click",(function(e){mn(n);var i=t.$implicit,r=fo(2);return e.stopPropagation(),r.switchLeaf(i)})),io(4,"i",55),no(),to(5,"span",56),So(6),no(),Ya(7,VA,2,0,"span",57),Ya(8,wA,2,0,"span",57),no(),no(),Ya(9,MA,2,7,"div",58),no()}if(2&e){var i=t.$implicit,r=fo().level,a=fo();zi(1),Xa("ngClass",Rs(8,IA,"SELECTED"===i.isSelected,"PARENT_SELECTED"===i.isSelected)),zi(1),Vo("margin-left",20*r+"px"),zi(2),Xa("ngClass",Rs(11,SA,!i.showChildren,i.showChildren)),zi(2),xo(" ",i.name," "),zi(1),Xa("ngIf",a.capaLoad[i.uid]&&a.capaLoad[i.uid].rankOver>0),zi(1),Xa("ngIf",a.capaLoad[i.uid]&&a.capaLoad[i.uid].rankUnder>0),zi(1),Xa("ngIf",(null==i.children?null:i.children.length)>0&&i.showChildren)}}function xA(e,t){1&e&&Ya(0,TA,10,14,"div",51),2&e&&Xa("ngForOf",t.$implicit)}var _A=function(e,t,n){return{"fa-check-circle text-success":e,"fa-exclamation-triangle text-warning":t,"fa-exclamation-circle text-danger":n}};function UA(e,t){if(1&e&&io(0,"i",55),2&e){var n=t.level;Xa("ngClass",js(1,_A,1==n,2==n,3==n))}}function OA(e,t){1&e&&(to(0,"div"),io(1,"div",62),to(2,"span"),So(3),qs(4,"translate"),no(),no()),2&e&&(zi(3),xo(" ",zs(4,1,"ViewCapacity.msg.calculating"),""))}var EA,LA,GA=function e(){p(this,e)},RA=function e(){p(this,e)},jA=((LA=function(){function e(t,n,i,r,a,o,s,l,c){p(this,e),this.visbocenterService=t,this.visboprojectService=n,this.visboprojectversionService=i,this.visbosettingService=r,this.messageService=a,this.alertService=o,this.route=s,this.router=l,this.translate=c,this.printView=!1,this.sumCost=0,this.sumBudget=0,this.refPFV=!1,this.parentThis=this,this.colorsPFV=["#F7941E","#BDBDBD","#458CCB"],this.colorsOrga=["#F7941E","#F7941E","#BDBDBD","#458CCB"],this.seriesPFV=[{type:"line",lineWidth:4,pointSize:0}],this.seriesOrga=[{type:"line",lineWidth:4,pointSize:0},{type:"line",lineWidth:2,lineDashStyle:[4,4],pointSize:1}],this.graphDataComboChart=[],this.graphOptionsComboChart={chartArea:{left:100,top:100,width:"90%"},width:"100%",height:"600",title:"Monthly Capacity comparison",animation:{startup:!0,duration:200},legend:{position:"top"},explorer:{actions:["dragToZoom","rightClickToReset"],maxZoomIn:.01},annotations:{textStyle:{fontSize:10}},colors:this.colorsOrga,series:this.seriesOrga,seriesType:"bars",isStacked:!0,tooltip:{isHtml:!0},vAxis:{title:"Monthly Capacity",format:"###,###.## ",minorGridlines:{count:0,color:"none"}},hAxis:{format:"MMM yy",gridlines:{color:"#FFF",count:-1},minorGridlines:{count:0,color:"none"}}},this.permVC=uy,this.permVP=dy}return m(e,[{key:"ngOnInit",value:function(){this.currentLang=this.translate.currentLang,this.drillDownCapa=[{id:0,name:"drillNone",localName:this.translate.instant("ViewCapacity.lbl.drillNone")},{id:1,name:"drillOrga",localName:this.translate.instant("ViewCapacity.lbl.drillOrga")},{id:2,name:"drillProject",localName:this.translate.instant("ViewCapacity.lbl.drillProject")}],this.drillDownCapaFiltered=this.drillDownCapa,this.initSetting(),this.refDate||(this.refDate=new Date),this.currentRefDate=this.refDate,this.showUnitText=this.translate.instant("PD"==this.showUnit?"ViewCapacity.lbl.pd":"ViewCapacity.lbl.euro"),this.log("Capacity Init  RefDate ".concat(this.refDate," Current RefDate ").concat(this.currentRefDate)),this.capaLoad=[],this.vpfActive?this.lastTimestampVPF=this.vpfActive.timestamp:this.vpvActive&&(this.drillDownCapaFiltered=this.drillDownCapa.filter((function(e){return 2!=e.id})),this.lastTimestampVPF=this.vpvActive.timestamp),this.visboGetOrganisation()}},{key:"ngOnChanges",value:function(e){var t,n,i,r,a,o,s,l,c,u,d,h;this.log("Capacity Changes  RefDate ".concat(this.refDate," Current RefDate ").concat(this.currentRefDate));var v=!1;(null===(n=null===(t=e.vpvActive)||void 0===t?void 0:t.currentValue)||void 0===n?void 0:n.timestamp)&&(null===(r=null===(i=e.vpvActive)||void 0===i?void 0:i.currentValue)||void 0===r?void 0:r.timestamp)!=(null===(o=null===(a=e.vpvActive)||void 0===a?void 0:a.previousValue)||void 0===o?void 0:o.timestamp)&&(v=!0),(null===(l=null===(s=e.vpfActive)||void 0===s?void 0:s.currentValue)||void 0===l?void 0:l.timestamp)&&(null===(u=null===(c=e.vpfActive)||void 0===c?void 0:c.currentValue)||void 0===u?void 0:u.timestamp)!=(null===(h=null===(d=e.vpfActive)||void 0===d?void 0:d.previousValue)||void 0===h?void 0:h.timestamp)&&(v=!0),(v||void 0!==this.currentRefDate&&this.refDate.getTime()!==this.currentRefDate.getTime()||this.vpfActive&&this.lastTimestampVPF!==this.vpfActive.timestamp)&&(this.initSetting(),this.getCapacity())}},{key:"onResized",value:function(e){var t=this;e||this.log("No event in Resize");var n=0;this.chartActive&&(n=(new Date).getTime()-this.chartActive.getTime()),n<1e3||Math.abs(e.newWidth-e.oldWidth)<5||(this.log("Capacity Resize ".concat(n," ").concat(Math.abs(e.newHeight-e.oldHeight)," ").concat(Math.abs(e.newWidth-e.oldWidth))),this.timeoutID&&clearTimeout(this.timeoutID),this.timeoutID=setTimeout((function(){t.visboViewCapacityOverTime(),t.timeoutID=void 0}),500))}},{key:"initSetting",value:function(){this.chartActive=void 0,this.roleID=this.route.snapshot.queryParams.roleID;var e=this.route.snapshot.queryParams.pfv;this.refPFV=!(!e||!Number(e)),this.drillDown=Number(this.route.snapshot.queryParams.drillDown)||0,this.initShowUnit(this.route.snapshot.queryParams.unit);var t=this.route.snapshot.queryParams.from,n=this.route.snapshot.queryParams.to;t&&Wv(t,!1)?this.capacityFrom=new Date(Wv(t,!1)):this.vpvActive?this.capacityFrom=new Date(this.vpvActive.startDate):(this.capacityFrom=new Date,this.capacityFrom.setMonth(this.capacityFrom.getMonth()-3)),this.capacityFrom.setDate(1),this.capacityFrom.setHours(0,0,0,0),n&&Wv(n,!1)?this.capacityTo=new Date(Wv(n,!1)):this.vpvActive?this.capacityTo=new Date(this.vpvActive.endDate):(this.capacityTo=new Date,this.capacityTo.setMonth(this.capacityTo.getMonth()+9)),this.capacityTo.setDate(1),this.capacityTo.setHours(0,0,0,0),this.vcActive?this.currentName=this.vcActive.name:this.vpfActive?this.currentName=this.vpfActive.name:this.vpActive&&(this.currentName=this.vpActive.name),this.log("Capacity From / To ".concat(this.capacityFrom," / ").concat(this.capacityTo))}},{key:"hasVPPerm",value:function(e){return void 0!==this.combinedPerm&&(this.combinedPerm.vp&e)>0}},{key:"hasVCPerm",value:function(e){return void 0!==this.combinedPerm&&(this.combinedPerm.vc&e)>0}},{key:"visboGetOrganisation",value:function(){var e,t=this;this.vcActive?e=this.vcActive._id:this.vpActive&&(e=this.vpActive.vcid),e&&(this.log("Organisaions for CapacityCalc for Object  "+e),this.visbosettingService.getVCOrganisations(e,!1,(new Date).toISOString()).subscribe((function(e){0===e.length?(t.log("get VCOrganisations - result is empty "),t.vcorganisation=[]):(t.log("Store Organisation for Len "+e.length),t.vcorganisation=e,t.vcorganisation.sort((function(e,t){return zv(e.timestamp,t.timestamp)})),t.actOrga=t.vcorganisation[t.vcorganisation.length-1].value),t.visboViewOrganisationTree(),t.getCapacity()}),(function(e){if(t.log("get VCOrganisations failed: error: ".concat(e.status," message: ").concat(e.error.message)),403===e.status){var n;t.vpActive?n=t.vpActive.name:t.vcActive&&(n=t.vcActive.name);var i=t.translate.instant("ViewCapacity.msg.errorPermCapacity",{name:n});t.log("Alert: "+i),t.alertService.error(i,!0)}else t.alertService.error(Zv(e),!0)})))}},{key:"getCapacity",value:function(){2==this.drillDown?this.getProjectCapacity():this.getCapacityOrga()}},{key:"getProjectCapacity",value:function(){var e=this;this.visboCapacity=void 0,this.vcActive?(this.log("Capacity Calc for VC ".concat(this.vcActive._id," role ").concat(this.currentLeaf.name)),this.visbocenterService.getCapacity(this.vcActive._id,this.refDate,this.currentLeaf.uid.toString(),!0,this.refPFV,!1,!1,!0).subscribe((function(t){t.capacity&&0!==t.capacity.length?(e.log("Store VC Project Capacity for Len "+t.capacity.length),e.visboCapacity=t.capacity.filter((function(e){return null==e.vpid})),e.visboCapacityChild=t.capacity.filter((function(e){return null!=e.vpid}))):(e.log("get VPV Calc: Reset Capacity to empty "),e.visboCapacity=[],e.visboCapacityChild=[]),e.checkCostAvailable(e.visboCapacity),e.visboViewCapacityOverTime()}),(function(t){if(e.log("get VC Capacity failed: error: ".concat(t.status," message: ").concat(t.error.message)),403===t.status){var n=e.translate.instant("ViewCapacity.msg.errorPermCapacity",{name:e.vcActive.name});e.alertService.error(n,!0)}else if(409===t.status){var i=e.translate.instant("ViewCapacity.msg.errorPermOrganisation",{name:e.vcActive.name});e.alertService.error(i,!0)}else e.alertService.error(Zv(t),!0)}))):this.vpActive&&this.vpfActive&&this.currentLeaf&&(this.log("Capacity Calc for VP ".concat(this.vpActive._id," VPF ").concat(this.vpfActive._id," role ").concat(this.currentLeaf.name," DrillDown Project")),this.visboprojectService.getCapacity(this.vpActive._id,this.vpfActive._id,this.refDate,this.currentLeaf.uid.toString(),!0,this.refPFV,!1,!1,!0).subscribe((function(t){t.capacity&&0!==t.capacity.length?(e.log("Store VPF Project Capacity for Len "+t.capacity.length),e.visboCapacity=t.capacity.filter((function(e){return null==e.vpid})),e.visboCapacityChild=t.capacity.filter((function(e){return null!=e.vpid}))):(e.log("get VPF Calc: Reset Capacity to empty "),e.visboCapacity=[]),e.checkCostAvailable(e.visboCapacity),e.visboViewCapacityOverTime()}),(function(t){if(e.log("get VPF Capacity Project failed: error: ".concat(t.status," message: ").concat(t.error&&t.error.message)),403===t.status){var n=e.translate.instant("ViewCapacity.msg.errorPermCapacity",{name:e.vpActive.name});e.alertService.error(n,!0)}else e.alertService.error(Zv(t),!0)})))}},{key:"getCapacityOrga",value:function(){var e=this;this.visboCapacity=void 0,this.vcActive?(this.log("Capacity Calc for VC ".concat(this.vcActive._id," role ").concat(this.roleID)),this.visbocenterService.getCapacity(this.vcActive._id,this.refDate,this.currentLeaf.uid.toString(),!0,this.refPFV).subscribe((function(t){t.capacity&&0!==t.capacity.length?(e.log("Store Capacity for Len "+t.capacity.length),e.visboCapacity=t.capacity.filter((function(t){return t.roleID==e.currentLeaf.uid.toString()})),e.visboCapacityChild=t.capacity.filter((function(t){return t.roleID!=e.currentLeaf.uid.toString()}))):(e.log("get VPV Calc: Reset Capacity to empty "),e.visboCapacity=[],e.visboCapacityChild=[]),e.topLevelNodes.findIndex((function(t){return t.uid==e.currentLeaf.uid}))>=0&&e.calcLoad(e.visboCapacity,e.refPFV),e.calcLoad(e.visboCapacityChild,e.refPFV),e.visboViewCapacityOverTime()}),(function(t){if(e.log("get VC Capacity failed: error: ".concat(t.status," message: ").concat(t.error.message)),403===t.status){var n=e.translate.instant("ViewCapacity.msg.errorPermCapacity",{name:e.vcActive.name});e.alertService.error(n,!0)}else if(409===t.status){var i=e.translate.instant("ViewCapacity.msg.errorPermOrganisation",{name:e.vcActive.name});e.alertService.error(i,!0)}else e.alertService.error(Zv(t),!0)}))):this.vpActive&&this.vpfActive&&this.currentLeaf?(this.log("Capacity Calc for VP ".concat(this.vpActive._id," VPF ").concat(this.vpfActive._id," role ").concat(this.roleID)),this.visboprojectService.getCapacity(this.vpActive._id,this.vpfActive._id,this.refDate,this.currentLeaf.uid.toString(),!0,this.refPFV).subscribe((function(t){t.capacity&&0!==t.capacity.length?(e.log("Store Capacity for Len "+t.capacity.length),e.visboCapacity=t.capacity.filter((function(t){return t.roleID==e.currentLeaf.uid.toString()})),e.visboCapacityChild=t.capacity.filter((function(t){return t.roleID!=e.currentLeaf.uid.toString()}))):(e.log("get VPF Calc: Reset Capacity to empty "),e.visboCapacity=[]),e.topLevelNodes.findIndex((function(t){return t.uid==e.currentLeaf.uid}))>=0&&e.calcLoad(e.visboCapacity,e.refPFV),e.calcLoad(e.visboCapacityChild,e.refPFV),e.visboViewCapacityOverTime()}),(function(t){if(e.log("get VPF Capacity failed: error: ".concat(t.status," message: ").concat(t.error&&t.error.message)),403===t.status){var n=e.translate.instant("ViewCapacity.msg.errorPermCapacity",{name:e.vpActive.name});e.alertService.error(n,!0)}else e.alertService.error(Zv(t),!0)}))):this.vpActive&&this.vpvActive&&this.currentLeaf&&(this.refPFV=!0,this.log("Capacity Calc for VPV ".concat(this.vpvActive.vpid," role ").concat(this.roleID)),this.visboprojectversionService.getCapacity(this.vpvActive._id,this.currentLeaf.uid.toString(),!0,this.refPFV).subscribe((function(t){if(t&&1==t.length&&t[0].capacity&&0!==t[0].capacity.length){var n=t[0];e.log("Store Capacity for Len "+n.capacity.length),e.visboCapacity=n.capacity.filter((function(t){return t.roleID==e.currentLeaf.uid})),e.visboCapacityChild=n.capacity.filter((function(t){return t.roleID!=e.currentLeaf.uid}))}else e.log("get VPF Calc: Reset Capacity to empty "),e.visboCapacity=[];e.topLevelNodes.findIndex((function(t){return t.uid==e.currentLeaf.uid}))>=0&&e.calcLoad(e.visboCapacity,e.refPFV),e.calcLoad(e.visboCapacityChild,e.refPFV),e.visboViewCapacityOverTime()}),(function(t){if(e.log("get VPF Capacity failed: error: ".concat(t.status," message: ").concat(t.error&&t.error.message)),403===t.status){var n=e.translate.instant("ViewCapacity.msg.errorPermCapacity",{name:e.vpActive.name});e.alertService.error(n,!0)}else e.alertService.error(Zv(t),!0)})))}},{key:"checkCostAvailable",value:function(e){var t=!1;e&&e.length>0&&(t=null!=e[0].actualCost||null!=e[0].plannedCost||null!=e[0].baselineCost),this.hasCost=t}},{key:"calcLoad",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e&&0!=e.length){this.checkCostAvailable(e);for(var n=[],i=0;i<e.length;i++){var r=d(e[i],this.capacityFrom,this.capacityTo,t),a=e[i].roleID;if(!n[a]){var o=new GA;o.uid=a,o.percentOver=0,o.percentUnder=0,n[a]=o}r>0?n[a].percentOver+=r:r<0&&(n[a].percentUnder+=r)}n=n.filter((function(e){return e.uid>=0}));var s=Math.round(n.length/4);s<3&&(s=Math.min(3,n.length)),n.sort((function(e,t){return t.percentOver-e.percentOver}));for(var l=0;l<s&&!(n[l].percentOver<=0);l++)n[l].rankOver=s-l;n.sort((function(e,t){return e.percentUnder-t.percentUnder}));for(var c=0;c<s&&!(n[c].percentUnder>=0);c++)n[c].rankOver>0||(n[c].rankUnder=s-c);for(var u=0;u<n.length;u++)this.capaLoad[n[u].uid]=n[u]}function d(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=new Date(e.month);if(r.getTime()<t.getTime()||r.getTime()>n.getTime())return 0;var a=0,o=0;return a=i?(null==e?void 0:e.baselineCost_PT)||0:((null==e?void 0:e.internCapa_PT)||0)+((null==e?void 0:e.externCapa_PT)||0),(o=((null==e?void 0:e.actualCost_PT)||0)+((null==e?void 0:e.plannedCost_PT)||0))>0&&0===a&&(a=1),o/a-1}}},{key:"visboViewOrganisationTree",value:function(){this.log("Show the OrgaTree of the VC ");var e=this.actOrga,t=[],n=[];this.log("get all roles of the organisation, prepared for direct access");for(var i=0;e&&e.allRoles&&e.allRoles&&i<e.allRoles.length;i++)t[e.allRoles[i].uid]=e.allRoles[i],n[e.allRoles[i].name]=e.allRoles[i];this.log("get all roles of the organisation, prepared for the TreeView"),this.topLevelNodes=this.buildTopNodes(t),this.orgaTreeData=this.buildOrgaTree(this.topLevelNodes,t),this.log("initialize the orgaTreeData with one of the topLevel"),this.roleID>=0&&this.roleID<t.length&&(this.currentLeaf=this.getMappingLeaf(t[this.roleID].name)),this.currentLeaf||(this.currentLeaf=this.orgaTreeData.children[0]),this.expandParentTree(this.currentLeaf),this.setTreeLeafSelection(this.currentLeaf,Gw.SELECTED)}},{key:"initShowUnit",value:function(e){var t="1"==e||"PD"==e?"PD":void 0;this.showUnit=t,this.updateUrlParam("unit","PD"==t?"1":"0"),this.showUnitText=this.translate.instant("PD"===e?"ViewCapacity.lbl.pd":"ViewCapacity.lbl.euro")}},{key:"updateShowUnit",value:function(e){this.initShowUnit(e),this.visboViewCapacityOverTime()}},{key:"updateDateRange",value:function(){this.updateUrlParam("from",void 0),this.visboViewCapacityOverTime()}},{key:"updateRef",value:function(){this.log("Show Ref change to "+this.refPFV),this.updateUrlParam("pfv",this.refPFV?"1":"0"),this.capaLoad=[],this.getCapacity()}},{key:"updateDrillDown",value:function(){this.log("Show Drilldown change to "+this.drillDown),this.updateUrlParam("drillDown",this.drillDown.toString()),this.capaLoad=[],this.getCapacity()}},{key:"updateUrlParam",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=this.route.snapshot.url.join("/");void 0===t&&(t=null);var r=new xw;"roleID"==e?r.roleID=Number(t):"from"==e||"to"==e?(r.from=this.capacityFrom.toISOString(),r.to=this.capacityTo.toISOString()):"unit"==e?r.unit=t:"pfv"==e?r.pfv=t:"drillDown"==e&&(r.drillDown="0"==t?void 0:t),this.router.navigate([i],{queryParams:r,replaceUrl:!n,queryParamsHandling:"merge"})}},{key:"visboViewCapacityOverTime",value:function(){var e;this.visboCapacity&&0!==this.visboCapacity.length?(e="PD"===this.showUnit?"# "+this.translate.instant("ViewCapacity.lbl.pd"):"###,###.## "+this.translate.instant("ViewCapacity.lbl.keuro"),this.graphOptionsComboChart.title=this.translate.instant(this.refPFV?"ViewCapacity.titleCapaOverTimeBL":"ViewCapacity.titleCapaOverTime",{name:this.currentName,roleName:this.currentLeaf.name}),this.graphOptionsComboChart.vAxis.title=this.translate.instant("ViewCapacity.yAxisCapaOverTime"),this.graphOptionsComboChart.vAxis.format=e,this.drillDown>0?(delete this.graphOptionsComboChart.colors,this.graphOptionsComboChart.series=this.seriesPFV):this.refPFV?(this.graphOptionsComboChart.colors=this.colorsPFV,this.graphOptionsComboChart.series=this.seriesPFV):(this.graphOptionsComboChart.colors=this.colorsOrga,this.graphOptionsComboChart.series=this.seriesOrga),this.log("ViewCapacityOverTime Type ".concat(this.drillDown?"DrillDown":"Plan/Ist"," resource ").concat(this.currentLeaf.name)),2==this.drillDown?this.visboViewProjectCapacityDrillDown():1==this.drillDown?this.visboViewCapacityDrillDown():this.visboViewCapacity()):this.graphDataComboChart=[]}},{key:"calcChildNode",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"roleName",n=[];return e?(e.forEach((function(e){n.push(e[t]||"")})),n.sort((function(e,t){return qv(e.toString(),t.toString())})),n.filter((function(e,t){return n.indexOf(e)===t}))):n}},{key:"mapChildNode",value:function(e){var t=[];if(!e)return t;for(var n=0;n<e.length;n++)t[e[n]]=n;return t}},{key:"visboViewProjectCapacityDrillDown",value:function(){var e=this,t=[];this.log("visboViewProjectCapacityDrillDown resource "+this.currentLeaf.name),this.sumCost=0,this.sumBudget=0;var n=this.calcChildNode(this.visboCapacityChild,"name"),i=this.mapChildNode(n),r=[];this.visboCapacity.forEach((function(t){var i=new Date(t.month);if(i.getTime()>=e.capacityFrom.getTime()&&i.getTime()<=e.capacityTo.getTime()){var a,o;o="PD"===e.showUnit?(t.actualCost_PT||0)+(t.plannedCost_PT||0):(t.actualCost||0)+(t.plannedCost||0),a=e.refPFV?"PD"===e.showUnit?t.baselineCost_PT||0:t.baselineCost||0:"PD"===e.showUnit?(t.internCapa_PT||0)+(t.externCapa_PT||0):(t.internCapa||0)+(t.externCapa||0),e.sumCost+=o,e.sumBudget+=a;var s=[],l=new RA;l.currentDate=i,l.name="All",l.plan=o,l.planTotal=o,l.budget=a,s.push(l),n.forEach((function(e){s.push({currentDate:i,name:e,variantName:"",plan:0,planTotal:0,budget:0})})),r.push(s)}})),this.visboCapacityChild.forEach((function(t){var n=new Date(t.month),a=r.find((function(e){return e[0].currentDate.getTime()==n.getTime()}));if(a){var o,s,l=i[t.name];if(l>=0)o="PD"===e.showUnit?(t.actualCost_PT||0)+(t.plannedCost_PT||0):(t.actualCost||0)+(t.plannedCost||0),s=e.refPFV?"PD"===e.showUnit?t.baselineCost_PT||0:t.baselineCost||0:"PD"===e.showUnit?(t.internCapa_PT||0)+(t.externCapa_PT||0):(t.internCapa||0)+(t.externCapa||0),a[l+1].plan=o,a[l+1].budget=s,a[l+1].variantName=t.variantName}}));for(var a=function(i){var a=r[i],o=a[0].currentDate;if(o.getTime()>=e.capacityFrom.getTime()&&o.getTime()<=e.capacityTo.getTime()){var s=[];s.push(o),s.push(a[0].budget||0);var l=e.createTooltipProjectDrillDown(a[0],"PD"===e.showUnit,e.refPFV);s.push(l),n.forEach((function(t,n){s.push(a[n+1].plan),s.push(e.createTooltipProjectDrillDown(a[n+1],"PD"===e.showUnit,e.refPFV));var i=e.calcLoadDiff(a[n+1],!0);if(null==i)s.push("> 999 %");else if(i>100){var r=Math.round(100*i);s.push(r+" %")}else s.push(void 0)})),t.push(s)}},o=0;o<r.length;o++)a(o);var s=t.length;if(s<1&&this.log("visboCapacity Empty"),1===s){var l=new Date(t[0][0]);l.setMonth(l.getMonth()+1);var c=[];c.push(l),c.push(void 0),c.push(void 0),n.forEach((function(){c.push(void 0),c.push(void 0),c.push(void 0)})),t.push(c)}var u={type:"string",role:"tooltip",p:{html:!0}},d={type:"string",role:"annotation"},h=[];h.push("Month"),h.push(this.translate.instant(this.refPFV?"ViewCapacity.lbl.budget":"ViewCapacity.lbl.totalCapa")),h.push(u),n.forEach((function(e){h.push(e),h.push(u),h.push(d)})),t.unshift(h),this.graphDataComboChart=t,this.chartActive=new Date}},{key:"visboViewCapacityDrillDown",value:function(){var e=this,t=[];this.log("ViewCapacityDrillDown resource "+this.currentLeaf.name),this.sumCost=0,this.sumBudget=0;var n=this.calcChildNode(this.visboCapacityChild),i=this.mapChildNode(n),r=[];this.visboCapacity.forEach((function(t){var i=new Date(t.month);if(i.getTime()>=e.capacityFrom.getTime()&&i.getTime()<=e.capacityTo.getTime()){var a,o;o="PD"===e.showUnit?(t.actualCost_PT||0)+(t.plannedCost_PT||0):(t.actualCost||0)+(t.plannedCost||0),a=e.refPFV?"PD"===e.showUnit?t.baselineCost_PT||0:t.baselineCost||0:"PD"===e.showUnit?(t.internCapa_PT||0)+(t.externCapa_PT||0):(t.internCapa||0)+(t.externCapa||0),e.sumCost+=o,e.sumBudget+=a;var s=[],l=new RA;l.currentDate=i,l.name=e.currentLeaf.name,l.plan=o,l.planTotal=o,l.budget=a,s.push(l),n.forEach((function(e){s.push({currentDate:i,name:e,variantName:"",plan:0,planTotal:void 0,budget:0})})),r.push(s)}})),this.visboCapacityChild.forEach((function(t){var n=new Date(t.month),a=r.find((function(e){return e[0].currentDate.getTime()==n.getTime()}));if(a){var o,s,l=i[t.roleName];if(l>=0)o="PD"===e.showUnit?(t.actualCost_PT||0)+(t.plannedCost_PT||0):(t.actualCost||0)+(t.plannedCost||0),s=e.refPFV?"PD"===e.showUnit?t.baselineCost_PT||0:t.baselineCost||0:"PD"===e.showUnit?(t.internCapa_PT||0)+(t.externCapa_PT||0):(t.internCapa||0)+(t.externCapa||0),a[l+1].plan=o,a[l+1].budget=s,a[0].plan>=o?a[0].plan-=o:a[0].plan=0}}));for(var a=function(i){var a=r[i],o=a[0].currentDate;if(o.getTime()>=e.capacityFrom.getTime()&&o.getTime()<=e.capacityTo.getTime()){var s=[];s.push(o),s.push(a[0].budget||0);var l=e.createTooltipOrgaDrillDown(a[0],"PD"===e.showUnit,e.refPFV);s.push(l),s.push(a[0].plan||0),s.push(l),n.forEach((function(t,n){s.push(a[n+1].plan),s.push(e.createTooltipOrgaDrillDown(a[n+1],"PD"===e.showUnit,e.refPFV));var i=Math.round(100*e.calcLoadDiff(a[n+1],!0));s.push(i>100?i+" %":void 0)})),t.push(s)}},o=0;o<r.length;o++)a(o);var s=t.length;if(s<1&&this.log("visboCapacity Empty"),1===s){var l=new Date(t[0][0]);l.setMonth(l.getMonth()+1);var c=[];c.push(l),c.push(void 0),c.push(void 0),c.push(void 0),c.push(void 0),n.forEach((function(){c.push(void 0),c.push(void 0),c.push(void 0)})),t.push(c)}var u={type:"string",role:"tooltip",p:{html:!0}},d={type:"string",role:"annotation"},h=[];h.push("Month"),h.push(this.translate.instant(this.refPFV?"ViewCapacity.lbl.budget":"ViewCapacity.lbl.totalCapa")),h.push(u),h.push(this.currentLeaf.name),h.push(u),n.forEach((function(e){h.push(e),h.push(u),h.push(d)})),t.unshift(h),this.graphDataComboChart=t,this.chartActive=new Date}},{key:"visboViewCapacity",value:function(){var e=[],t=this.visboCapacity;this.sumCost=0,this.sumBudget=0;for(var n=0;n<t.length;n++){var i=new Date(t[n].month);if(i.getTime()>=this.capacityFrom.getTime()&&i.getTime()<=this.capacityTo.getTime()){var r=this.currentLeaf.uid;if(this.refPFV)if("PD"===this.showUnit){var a=Math.round(10*t[n].baselineCost_PT)/10||0,o=Math.round(10*t[n].actualCost_PT)/10||0,s=Math.round(10*t[n].plannedCost_PT)/10||0;this.sumCost+=o+s,this.sumBudget+=a;var l=this.createTooltipPlanActual(t[n],!0,this.refPFV);e.push([i,t[n].roleID==r?a:void 0,t[n].roleID==r?l:void 0,o,l,s,l])}else{var c=Math.round(10*t[n].baselineCost/10||0),u=Math.round(10*t[n].actualCost/10||0),d=Math.round(10*t[n].plannedCost/10||0);this.sumCost+=u+d,this.sumBudget+=c;var h=this.createTooltipPlanActual(t[n],!1,this.refPFV);e.push([i,t[n].roleID==r?c:void 0,t[n].roleID==r?h:void 0,u,h,d,h])}else if("PD"===this.showUnit){var v=Math.round(10*t[n].internCapa_PT)/10||0,f=Math.round(10*t[n].externCapa_PT)/10||0,p=Math.round(10*t[n].actualCost_PT)/10||0,g=Math.round(10*t[n].plannedCost_PT)/10||0;this.sumCost+=p+g,this.sumBudget+=v+f;var m=this.createTooltipPlanActual(t[n],!0);e.push([i,t[n].roleID==r?v+f:void 0,t[n].roleID==r?m:void 0,t[n].roleID==r?v:void 0,t[n].roleID==r?m:void 0,p,m,g,m])}else{var b=Math.round(10*t[n].internCapa/10||0),y=Math.round(10*t[n].externCapa/10||0),k=Math.round(10*t[n].actualCost/10||0),C=Math.round(10*t[n].plannedCost/10||0);this.sumCost+=k+C,this.sumBudget+=b+y;var V=this.createTooltipPlanActual(t[n],!1);e.push([i,t[n].roleID==r?b+y:void 0,t[n].roleID==r?V:void 0,t[n].roleID==r?b:void 0,t[n].roleID==r?V:void 0,k,V,C,V])}}}var w=e.length;if(w<1&&this.log("visboCapacity Empty"),1===w){var A=new Date(e[0][0]);A.setMonth(A.getMonth()+1),e.push(this.refPFV?[A,void 0,void 0,void 0,void 0,void 0,void 0]:[A,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0])}e.unshift(this.refPFV?["Month",this.translate.instant("ViewCapacity.lbl.budget"),{type:"string",role:"tooltip",p:{html:!0}},this.translate.instant("ViewCapacity.lbl.actualCost"),{type:"string",role:"tooltip",p:{html:!0}},this.translate.instant("ViewCapacity.lbl.cost"),{type:"string",role:"tooltip",p:{html:!0}}]:["Month",this.translate.instant("ViewCapacity.lbl.totalCapa"),{type:"string",role:"tooltip",p:{html:!0}},this.translate.instant("ViewCapacity.lbl.internCapa"),{type:"string",role:"tooltip",p:{html:!0}},this.translate.instant("ViewCapacity.lbl.actualCost"),{type:"string",role:"tooltip",p:{html:!0}},this.translate.instant("ViewCapacity.lbl.cost"),{type:"string",role:"tooltip",p:{html:!0}}]),this.graphDataComboChart=e,this.chartActive=new Date}},{key:"chartSelectRow",value:function(e,t,n){if(this.log("chart Select Row ".concat(e," ").concat(t," ").concat(n," ")),this.graphDataComboChart&&e<this.graphDataComboChart.length)if(2==this.drillDown){var i=this.graphDataComboChart[0][t];this.log("chart identified Row ".concat(this.graphDataComboChart[e+1][0]," Project: ").concat(i)),this.gotoClickedRow(i)}else{var r=this.graphDataComboChart[0][t];this.log("chart identified Row ".concat(this.graphDataComboChart[e+1][0]," Role: ").concat(r));var a=this.getMappingLeaf(r);a&&this.selectLeaf(a,!0)}}},{key:"gotoClickedRow",value:function(e){this.log("goto VP "+e);var t=this.visboCapacityChild.find((function(t){return t.name==e}));if(t){var n=new ck;t.variantName&&(n.variantName=t.variantName),this.refDate&&!Jv(this.refDate)&&(n.refDate=this.refDate.toISOString()),n.unit="PD"===this.showUnit?"1":"0",this.roleID&&(n.roleID=this.roleID),this.capacityFrom&&(n.from=this.capacityFrom.toISOString()),this.capacityTo&&(n.to=this.capacityTo.toISOString()),this.refDate&&(n.refDate=this.refDate.toISOString()),n.view="Capacity",n.drillDown="1",this.log("Goto vpid ".concat(t.vpid," QueryParams ").concat(JSON.stringify(n))),this.router.navigate(["vpKeyMetrics/".concat(t.vpid)],{queryParams:n})}else this.log("Project ".concat(e," not found"))}},{key:"createTooltipPlanActual",value:function(e,t){var n,i,r,a,o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s='<div style="padding:5px 5px 5px 5px;color:black;width:250px;"><div><b>'+Qv(new Date(e.month),"fullMonthYear",this.currentLang)+"</b></div>",l=this.translate.instant("ViewCapacity.lbl.totalCapa"),c=this.translate.instant("ViewCapacity.lbl.internCapa"),u=this.translate.instant("ViewCapacity.lbl.actualCost"),d=this.translate.instant("ViewCapacity.lbl.cost"),h=this.translate.instant("ViewCapacity.lbl.roleName"),v=this.translate.instant("ViewCapacity.lbl.budget"),f=this.translate.instant("ViewCapacity.lbl.diffCost"),p=" "+this.translate.instant(t?"ViewCapacity.lbl.pd":"ViewCapacity.lbl.keuro");t?(r=e.actualCost_PT||0,a=e.plannedCost_PT||0):(r=e.actualCost||0,a=e.plannedCost||0),o?n=t?e.baselineCost_PT||0:e.baselineCost||0:t?(i=e.internCapa_PT||0,n=(e.internCapa_PT||0)+(e.externCapa_PT||0)):(i=e.internCapa||0,n=(e.internCapa||0)+(e.externCapa||0)),s+=this.addTooltipRowString(h+":",e.roleName,!1),s+=this.addTooltipRowNumber(o?v:l,n,t?0:1,p,!1),o||(s+=this.addTooltipRowNumber(c,i,t?0:1,p,!1)),0!==r&&(s+=this.addTooltipRowNumber(u,r,t?0:1,p,!1)),s+=this.addTooltipRowNumber(d,a,t?0:1,p,!1);var g=r+a-n;return 0!=g&&(s+=this.addTooltipRowNumber(f,g,t?0:1,p,!0)),s+="</div>"}},{key:"addTooltipRowNumber",value:function(e,t,n,i,r){var a;return a='<div class="row"><div class="col-8">'+e,!0===r&&0!==t?t<0?a+='</div><div  class="col-4 text-right text-success font-weight-bold">':t>0&&(a+='</div><div  class="col-4 text-right text-danger font-weight-bold">'):a+='</div><div  class="col-4 text-right font-weight-bold">',a+=this.visboRoundToString(t,n)+i+"</div>",a+="</div>"}},{key:"addTooltipRowString",value:function(e,t,n){var i;return i='<div class="row"><div class="col-4">'+e,i+='</div><div  class="col-8 text-right font-weight-bold">',i+=t+"</div>",i+="</div>"}},{key:"createTooltipProjectDrillDown",value:function(e,t){var n,i,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a='<div style="padding:5px 5px 5px 5px;color:black;width:250px;"><div><b>'+Qv(e.currentDate,"fullMonthYear",this.currentLang)+"</b></div>",o=this.translate.instant("ViewCapacity.lbl.project"),s=this.translate.instant("ViewCapacity.lbl.fractionCost"),l=this.translate.instant("ViewCapacity.lbl.cost");n=t?" "+this.translate.instant("ViewCapacity.lbl.pd"):" "+this.translate.instant("ViewCapacity.lbl.keuro"),r&&(i=this.translate.instant("ViewCapacity.lbl.budget"));var c=e.name;e.variantName&&(c=c.concat(" (",e.variantName,")")),a+=this.addTooltipRowString(o,c,!1);var u=e.planTotal>0?e.planTotal:e.plan;if(r&&(a+=this.addTooltipRowNumber(i,e.budget,t?0:1,n,!1)),a+=this.addTooltipRowNumber(l,u,t?0:1,n,!1),this.calcLoadDiff(e,!1)){var d=Math.round(100*this.calcLoadDiff(e,!0))+" %";a+=void 0!==d?this.addTooltipRowString(s,d,!0):this.addTooltipRowString(s,"Unknown",!1)}return a+="</div>"}},{key:"createTooltipOrgaDrillDown",value:function(e,t){var n,i,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a='<div style="padding:5px 5px 5px 5px;color:black;width:250px;"><div><b>'+Qv(e.currentDate,"fullMonthYear",this.currentLang)+"</b></div>",o=this.translate.instant("ViewCapacity.lbl.roleName"),s=this.translate.instant("ViewCapacity.lbl.diffCost"),l=this.translate.instant("ViewCapacity.lbl.cost");n=t?" "+this.translate.instant("ViewCapacity.lbl.pd"):" "+this.translate.instant("ViewCapacity.lbl.keuro"),i=this.translate.instant(r?"ViewCapacity.lbl.budget":"ViewCapacity.lbl.totalCapa"),a+=this.addTooltipRowString(o,e.name,!1);var c=e.planTotal>0?e.planTotal:e.plan;a+=this.addTooltipRowNumber(i,e.budget,t?0:1,n,!1),a+=this.addTooltipRowNumber(l,c,t?0:1,n,!1);var u=this.calcLoadDiff(e,!1);if(0!=u){a+=this.addTooltipRowNumber(s,u,t?0:1,n,!0);var d=this.calcLoadDiff(e,!0);if(null==d)a+=this.addTooltipRowString(s,"> 999 %",!0);else{var h=Math.round(100*d)+" %";a+=this.addTooltipRowString(s,h,!0)}}return a+="</div>"}},{key:"calcLoadDiff",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.planTotal>0?e.planTotal:e.plan;return t?e.budget?n/e.budget:n?void 0:1:n-e.budget}},{key:"visboRoundToString",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return(e||0).toLocaleString(this.currentLang,{minimumFractionDigits:t,maximumFractionDigits:t})}},{key:"displayCapacity",value:function(){var e=-1;return 2!=this.drillDown&&this.actOrga&&this.visboCapacity?e=this.visboCapacity.length:2==this.drillDown&&this.actOrga&&this.visboCapacityChild&&(e=this.visboCapacityChild.length),e}},{key:"getLevel",value:function(e,t){var n=1;return t&&(n=e/t),n<=1?1:n<=1.05?2:3}},{key:"getSummaryRoles",value:function(e,t){this.log("get all summary roles of the organisation roleID "+{roleID:t});var n=[];if(void 0===t&&e){var i=0;for(i=0;e&&i<=e.length;i++){var r=e[i];r&&r.subRoleIDs.length>0&&(n[e[i].uid]=e[i])}return n}if(t&&e){var a=e[t];if(a.subRoleIDs&&a.subRoleIDs.length>0){var o=a.subRoleIDs;o.length>0&&(n[a.uid]=a,o.forEach((function t(i){var r=i.key,a=e[r];a.subRoleIDs.length>0&&(n[r]=a,a.subRoleIDs.forEach(t))})))}return n}}},{key:"getParentOfRole",value:function(e,t,n){var i;if(t[e]){for(var r=!0,a=0;n&&a<n.length;a++){var o=n[a];if(o)for(var s=0;r&&o&&o.subRoleIDs&&s<o.subRoleIDs.length;s++)o.subRoleIDs[s]&&1*o.subRoleIDs[s].key===e&&(i=o,r=!1)}return i}}},{key:"buildTopNodes",value:function(e){var t=[],n=[],i=1;this.log("get all TopNodes of the organisation");for(var r=this.getSummaryRoles(e,void 0);i<=e.length;){var a=e[i];a&&(this.getParentOfRole(a.uid,e,r)||n[a.uid]||(n[a.uid]=a,t.push(a))),i++}return t}},{key:"buildOrgaTree",value:function(e,t){this.log("build the OrgaTree used for the selectionTree of the organisation");var n=new Lw;n.uid=0,n.name="root",n.parent=null,n.children=[],n.showChildren=!0;for(var i=function(i){var r=new Lw;r.parent=n,r.children=[],r.uid=e[i].uid,r.name=e[i].name,r.showChildren=!1,e&&e[i].subRoleIDs&&e[i].subRoleIDs.length>0&&e[i].subRoleIDs.forEach((function(e){r.children.push(function e(n,i){var r=new Lw,a=n.key,o=t[a],s=null==o?void 0:o.name;return r.children=[],r.uid=a,r.name=s,r.parent=i,o.subRoleIDs.forEach((function(t){r.children.push(e(t,r))})),r}(e,r))})),n.children.push(r)},r=0;e&&r<e.length;r++)i(r);return n}},{key:"setTreeLeafSelection",value:function(e,t){var n=this;e.isSelected=t,e.children&&0!==e.children.length&&e.children.forEach((function(e){n.setTreeLeafSelection(e,t===Gw.SELECTED?Gw.PARENT_SELECTED:t)}))}},{key:"selectLeaf",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];e.name!==this.currentLeaf.name&&(this.setTreeLeafSelection(this.currentLeaf,Gw.NOT_SELECTED),this.currentLeaf=e,this.updateUrlParam("roleID",e.uid.toString()),this.getCapacity()),t&&(e.showChildren=!0),this.setTreeLeafSelection(e,Gw.SELECTED)}},{key:"switchLeaf",value:function(e){e.showChildren=!e.showChildren,this.selectLeaf(e,e.showChildren)}},{key:"expandParentTree",value:function(e){null!==e.parent&&(e.parent.showChildren=!0,this.expandParentTree(e.parent))}},{key:"getMappingLeaf",value:function(e){var t,n=this.orgaTreeData,i=!1;function r(n){var a=n;if(a.name===e)a&&a.children&&a.children.length>0&&(a.showChildren=!0),t=a,i=!0;else for(var o=a.children,s=0;!i&&o&&s<o.length;s++)r(o[s])}for(var a=0;!i&&n&&n.children&&a<n.children.length;a++)r(n.children[a]);return t}},{key:"parseDate",value:function(e){if(e){var t=new Date(e);return t.setDate(1),t.setHours(0,0,0,0),t}return null}},{key:"getPreView",value:function(){return Xv()}},{key:"log",value:function(e){this.messageService.add("CompVisboViewCapcity: "+e)}}]),e}()).\u0275fac=function(e){return new(e||LA)(Za(my),Za(dk),Za(Ew),Za(Sk),Za(tf),Za(Zm),Za(sg),Za(Am),Za(Rb))},LA.\u0275cmp=wt({type:LA,selectors:[["app-comp-viewcapacity"]],inputs:{vcActive:"vcActive",vpActive:"vpActive",vpfActive:"vpfActive",vpvActive:"vpvActive",vcOrganisation:"vcOrganisation",refDate:"refDate",combinedPerm:"combinedPerm"},features:[Qt],decls:19,vars:8,consts:[[1,"well",3,"resized"],[1,"container-fluid","mb-2"],[1,"row","row-cols-1","row-cols-lg-2"],[1,"col","col-sm-12","col-lg-8"],[1,"text-dark"],["class","row ml-1 pt-2 d-print-none",4,"ngIf"],["class","d-flex flex-wrap d-print-none mt-1",4,"ngIf"],["class","col-sm-12 col-md-10 col-lg-4 card align-right px-0",4,"ngIf"],[1,"row"],["class","pl-3 col-3 border-right scroll d-print-none",4,"ngIf"],["class","col-9",4,"ngIf"],["class","col-12",4,"ngIf"],[4,"ngIf"],["recursiveList",""],["indicator",""],[1,"row","ml-1","pt-2","d-print-none"],[1,"mr-2","pt-1"],["id","capacityFrom","type","date","name","capacityFrom",1,"border-1","font-weight-bold",3,"ngModel","input","change"],[1,"mx-2","pt-1"],["id","capacityTo","type","date","name","capacityTo",1,"border-1","font-weight-bold",3,"ngModel","input","change"],["class","mr-auto",4,"ngIf"],["class","mr-auto dropdown",4,"ngIf"],[1,"mr-auto"],[1,"mr-auto","dropdown"],["data-toggle","dropdown",1,"pl-2","font-weight-bold","dropdown-toggle"],[1,"dropdown-menu"],[1,"dropdown-item",3,"click"],[1,"d-flex","flex-wrap","d-print-none","mt-1"],["class","custom-control custom-checkbox m-2",4,"ngIf"],["class","d-flex flex-wrap d-print-none",4,"ngIf"],[1,"custom-control","custom-checkbox","m-2"],["type","checkbox","id","idRefPFV",1,"custom-control-input",3,"ngModel","change","ngModelChange"],["for","idRefPFV",1,"custom-control-label"],[1,"d-flex","flex-wrap","d-print-none"],["for","drillDownOpt",1,"col-3","col-form-label"],["id","drillDownOpt","name","drillDown",1,"col-9","form-control",3,"ngModel","change","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"col-sm-12","col-md-10","col-lg-4","card","align-right","px-0"],[1,"card-header","p-2"],[1,"mr-1"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"card-body","p-2"],[1,"col","col-sm-6"],[1,"col","col-sm-6","text-right"],[1,"col","col-sm-6",3,"title"],[1,"pl-3","col-3","border-right","scroll","d-print-none"],[1,"pt-2","text-dark","font-weight-bold"],[1,"col-9"],[3,"graphData","graphOptions","parentThis","language"],[1,"col-12"],["style","white-space: nowrap;",4,"ngFor","ngForOf"],[2,"white-space","nowrap"],[1,"dropdown-item","tree-item",3,"ngClass","click"],[3,"click"],[1,"fa",3,"ngClass"],[1,"ml-sm-1"],["class","ml-sm-1",4,"ngIf"],[3,"ngStyle",4,"ngIf"],[1,"fas","fa-arrow-up",2,"color","red"],[1,"fas","fa-arrow-down",2,"color","green"],[3,"ngStyle"],["role","status",1,"spinner-border"]],template:function(e,t){1&e&&(to(0,"div",0),uo("resized",(function(e){return t.onResized(e)})),to(1,"div",1),to(2,"div",2),to(3,"div",3),to(4,"div",4),Ya(5,Qw,17,16,"div",5),Ya(6,$w,3,2,"div",6),no(),no(),Ya(7,cA,28,30,"div",7),no(),no(),to(8,"div"),to(9,"div",8),Ya(10,hA,5,7,"div",9),Ya(11,gA,2,1,"div",10),Ya(12,kA,2,1,"div",11),Ya(13,CA,4,3,"div",12),no(),no(),Ya(14,xA,1,1,"ng-template",null,13,$s),Ya(16,UA,1,5,"ng-template",null,14,$s),Ya(18,OA,5,3,"div",12),no()),2&e&&(zi(5),Xa("ngIf",!t.getPreView()),zi(1),Xa("ngIf",!t.getPreView()),zi(1),Xa("ngIf",t.visboCapacity&&t.visboCapacity.length>0),zi(3),Xa("ngIf",t.orgaTreeData&&!t.getPreView()),zi(1),Xa("ngIf",!t.getPreView()),zi(1),Xa("ngIf",t.getPreView()),zi(1),Xa("ngIf",0==t.displayCapacity()),zi(5),Xa("ngIf",t.displayCapacity()<0))},directives:[Nw,su,Ad,Td,Nh,Cd,rh,au,ah,dh,vu,Kw,iu,hu],pipes:[jb,Cu,Vu],styles:[".dropdown-item.tree-item[_ngcontent-%COMP%]{opacity:.7;cursor:pointer}.dropdown-item.tree-item.tree-item__selected[_ngcontent-%COMP%]{background-color:#afb9c0}.dropdown-item.tree-item.tree-item__parent-selected[_ngcontent-%COMP%]{background-color:#d8dadb}.dropdown-item.tree-item[_ngcontent-%COMP%]:hover{opacity:1}.scroll[_ngcontent-%COMP%]{background:#fcfdfd;height:645px;overflow-y:scroll;padding:1px}"]}),LA),NA=((EA=function(){function e(t){p(this,e),this.gChartService=t}return m(e,[{key:"ngOnInit",value:function(){this.language||(this.language="de"),this.gLib=this.gChartService.getGoogle(),this.gLib.charts.load("current",{packages:["corechart","table"],language:this.language}),this.gLib.charts.setOnLoadCallback(this.drawChart.bind(this))}},{key:"ngOnChanges",value:function(){this.initialised&&this.drawChart()}},{key:"drawChart",value:function(){var e=new this.gLib.visualization.BubbleChart(document.getElementById("divBubbleChart")),t=new this.gLib.visualization.arrayToDataTable(this.graphData),n=this.parentThis;this.gLib.visualization.events.addListener(e,"select",(function(){var i=e.getSelection()[0];if(void 0===n)console.log("Bubble: The user clicked and this is undefined");else if(i){var r=i.row,a=t.getValue(i.row,0);n.chartSelectRow(r,a)}})),this.gLib.visualization.events.addListener(e,"click",(function(e){void 0===n?console.log("Bubble: The user clicked and this is undefined"):e||console.log("Bubble: The user clicked somewhere")})),e.draw(t,this.graphOptions||{title:"Bubble Chart"}),this.initialised=!0}}]),e}()).\u0275fac=function(e){return new(e||EA)(Za(Hw))},EA.\u0275cmp=wt({type:EA,selectors:[["app-bubble-chart"]],inputs:{graphData:"graphData",language:"language",graphOptions:"graphOptions",parentThis:"parentThis"},features:[Qt],decls:1,vars:0,consts:[["id","divBubbleChart"]],template:function(e,t){1&e&&io(0,"div",0)},styles:["#divBubbleChart[_ngcontent-%COMP%]{width:100%;height:400px}"]}),EA);function FA(e,t){if(1&e&&(to(0,"div",30),to(1,"div",31),to(2,"div",32),to(3,"span"),So(4),qs(5,"translate"),no(),to(6,"span",33),to(7,"a",34),So(8),no(),no(),to(9,"span"),So(10),qs(11,"translate"),no(),to(12,"span",33),to(13,"a",34),So(14),no(),no(),to(15,"span"),So(16),qs(17,"translate"),no(),to(18,"span",35),to(19,"a",34),io(20,"i",36),no(),no(),no(),no(),no()),2&e){var n=fo(2);zi(4),xo("",zs(5,5,"compViewBubble.lbl.show")," "),zi(4),To(n.getMetric(n.metricX).name),zi(2),xo(" ",zs(11,7,"compViewBubble.lbl.and")," "),zi(4),To(n.getMetric(n.metricY).name),zi(2),xo(" ",zs(17,9,"compViewBubble.lbl.planVsBase"),"")}}function BA(e,t){if(1&e){var n=so();to(0,"div",37),to(1,"div",38),to(2,"div",32),to(3,"span"),So(4),qs(5,"translate"),no(),to(6,"input",39),uo("keyup",(function(e){return mn(n),fo(2).filterKeyBoardEvent(e)}))("ngModelChange",(function(e){return mn(n),fo(2).filter=e})),no(),no(),no(),no()}if(2&e){var i=fo(2);zi(4),xo(" ",zs(5,2,"compViewBubble.lbl.filter"),":"),zi(2),Xa("ngModel",i.filter)}}function HA(e,t){1&e&&oo(0)}function KA(e,t){1&e&&oo(0)}function qA(e,t){1&e&&oo(0)}var zA=function(e){return{level:e}};function QA(e,t){if(1&e&&(to(0,"div",40),to(1,"h5",41),to(2,"strong",42),Ya(3,HA,1,0,"ng-container",43),no(),So(4),qs(5,"translate"),no(),to(6,"div",44),to(7,"div",45),to(8,"div",46),So(9),qs(10,"translate"),no(),to(11,"div",47),to(12,"strong",42),Ya(13,KA,1,0,"ng-container",43),no(),So(14),no(),no(),to(15,"div",45),to(16,"div",48),qs(17,"translate"),So(18),qs(19,"translate"),qs(20,"translate"),no(),to(21,"div",47),to(22,"strong",42),Ya(23,qA,1,0,"ng-container",43),no(),So(24),qs(25,"number"),no(),no(),to(26,"div",45),to(27,"div",48),qs(28,"translate"),So(29),qs(30,"translate"),qs(31,"translate"),no(),to(32,"div",47),So(33),qs(34,"number"),no(),no(),no(),no()),2&e){var n=fo(2),i=$a(4);zi(3),Xa("ngTemplateOutlet",i)("ngTemplateOutletContext",Gs(40,zA,n.getLevel(n.estimateAtCompletion,n.budgetAtCompletion))),zi(1),xo(" ",zs(5,18,"compViewBubble.metric.costName")," "),zi(5),xo(" ",zs(10,20,"compViewBubble.lbl.nrProjects")," "),zi(4),Xa("ngTemplateOutlet",i)("ngTemplateOutletContext",Gs(42,zA,n.countKM<n.visbokeymetrics.length?2:1)),zi(1),_o(" ",n.countKM," / ",n.visbokeymetrics.length," "),zi(2),po("title",zs(17,22,"keyMetrics.longEAC")),zi(2),_o(" ",zs(19,24,"keyMetrics.shortEAC")," (",zs(20,26,"keyMetrics.longEAC"),") "),zi(5),Xa("ngTemplateOutlet",i)("ngTemplateOutletContext",Gs(44,zA,n.getLevel(n.estimateAtCompletion,n.budgetAtCompletion))),zi(1),xo(" ",Qs(25,28,n.estimateAtCompletion,"1.0-0")," T\u20ac "),zi(3),po("title",zs(28,31,"keyMetrics.longBAC")),zi(2),_o(" ",zs(30,33,"keyMetrics.shortBAC")," (",zs(31,35,"keyMetrics.longBAC"),") "),zi(4),xo(" ",Qs(34,37,n.budgetAtCompletion,"1.0-0")," T\u20ac ")}}function WA(e,t){if(1&e&&(to(0,"div"),io(1,"app-bubble-chart",49),no()),2&e){var n=fo(3);zi(1),Xa("graphData",n.graphBubbleData)("graphOptions",n.graphBubbleOptions)("parentThis",n.parentThis)("language",n.currentLang)}}function JA(e,t){if(1&e&&(to(0,"div",37),Ya(1,WA,2,4,"div",29),no()),2&e){var n=fo(2);zi(1),Xa("ngIf",n.countKM>0&&n.graphBubbleData)}}function YA(e,t){if(1&e){var n=so();to(0,"th",60),uo("click",(function(){return mn(n),fo(3).sortKeyMetricsTable(12)})),So(1),qs(2,"translate"),no()}2&e&&(zi(1),To(zs(2,1,"compViewBubble.lbl.variant")))}function $A(e,t){if(1&e){var n=so();to(0,"th",61),uo("click",(function(){return mn(n),fo(3).sortKeyMetricsTable(16)})),So(1),qs(2,"translate"),no()}2&e&&(zi(1),To(zs(2,1,"compViewBubble.lbl.pv")))}function ZA(e,t){if(1&e){var n=so();to(0,"th",62),uo("click",(function(){return mn(n),fo(3).sortKeyMetricsTable(15)})),So(1),no()}if(2&e){var i=fo(3);zi(1),To(i.getMetric("ActualCost").table)}}function XA(e,t){if(1&e){var n=so();to(0,"th",61),uo("click",(function(){return mn(n),fo(3).sortKeyMetricsTable(3)})),So(1),qs(2,"translate"),no()}2&e&&(zi(1),To(zs(2,1,"compViewBubble.lbl.bac")))}function eP(e,t){if(1&e){var n=so();to(0,"th",62),uo("click",(function(){return mn(n),fo(3).sortKeyMetricsTable(2)})),So(1),no()}if(2&e){var i=fo(3);zi(1),To(i.getMetric("Cost").table)}}function tP(e,t){if(1&e){var n=so();to(0,"th",61),uo("click",(function(){return mn(n),fo(3).sortKeyMetricsTable(5)})),So(1),qs(2,"translate"),no()}2&e&&(zi(1),To(zs(2,1,"compViewBubble.lbl.endDate")))}function nP(e,t){if(1&e){var n=so();to(0,"th",62),uo("click",(function(){return mn(n),fo(3).sortKeyMetricsTable(4)})),So(1),no()}if(2&e){var i=fo(3);zi(1),To(i.getMetric("EndDate").table)}}function iP(e,t){if(1&e){var n=so();to(0,"th",61),uo("click",(function(){return mn(n),fo(3).sortKeyMetricsTable(7)})),So(1),qs(2,"translate"),no()}2&e&&(zi(1),To(zs(2,1,"compViewBubble.lbl.deadlines")))}function rP(e,t){if(1&e){var n=so();to(0,"th",62),uo("click",(function(){return mn(n),fo(3).sortKeyMetricsTable(6)})),So(1),no()}if(2&e){var i=fo(3);zi(1),To(i.getMetric("Deadline").table)}}function aP(e,t){if(1&e){var n=so();to(0,"th",62),uo("click",(function(){return mn(n),fo(3).sortKeyMetricsTable(11)})),So(1),no()}if(2&e){var i=fo(3);zi(1),To(i.getMetric("DeadlineUnFinishedDelay").table)}}function oP(e,t){if(1&e){var n=so();to(0,"th",62),uo("click",(function(){return mn(n),fo(3).sortKeyMetricsTable(10)})),So(1),no()}if(2&e){var i=fo(3);zi(1),To(i.getMetric("DeadlineFinishedDelay").table)}}function sP(e,t){if(1&e){var n=so();to(0,"th",61),uo("click",(function(){return mn(n),fo(3).sortKeyMetricsTable(9)})),So(1),qs(2,"translate"),no()}2&e&&(zi(1),To(zs(2,1,"compViewBubble.lbl.deliveries")))}function lP(e,t){if(1&e){var n=so();to(0,"th",62),uo("click",(function(){return mn(n),fo(3).sortKeyMetricsTable(8)})),So(1),no()}if(2&e){var i=fo(3);zi(1),To(i.getMetric("Delivery").table)}}function cP(e,t){if(1&e&&(to(0,"td",53),So(1),no()),2&e){var n=fo().$implicit;zi(1),To(n.variantName)}}function uP(e,t){1&e&&oo(0)}function dP(e,t){if(1&e&&(to(0,"td",70),So(1),qs(2,"number"),no()),2&e){var n=fo().$implicit;zi(1),xo("",Qs(2,1,n.keyMetrics.costBaseLastActual||0,"1.0-0")," k\u20ac")}}function hP(e,t){1&e&&oo(0)}function vP(e,t){if(1&e&&(to(0,"td",71),qs(1,"number"),Ya(2,hP,1,0,"ng-container",43),So(3),qs(4,"number"),no()),2&e){var n=fo().$implicit,i=fo(3),r=$a(4);go("title","",Qs(1,4,n.keyMetrics.costCurrentActual||0,"1.0-0")," k\u20ac"),zi(2),Xa("ngTemplateOutlet",r)("ngTemplateOutletContext",Gs(10,zA,i.calcLevel(n.savingCostActual,"percentOver"))),zi(1),xo(" ",Qs(4,7,100*n.savingCostActual,"1.0-0")," % ")}}function fP(e,t){1&e&&io(0,"td",70)}function pP(e,t){1&e&&io(0,"td")}function gP(e,t){if(1&e&&(to(0,"td",70),So(1),qs(2,"number"),no()),2&e){var n=fo().$implicit;zi(1),xo("",Qs(2,1,n.keyMetrics.costBaseLastTotal,"1.0-0")," k\u20ac")}}function mP(e,t){1&e&&oo(0)}function bP(e,t){if(1&e&&(to(0,"td",71),qs(1,"number"),Ya(2,mP,1,0,"ng-container",43),So(3),qs(4,"number"),no()),2&e){var n=fo().$implicit,i=fo(3),r=$a(4);go("title","",Qs(1,4,n.keyMetrics.costCurrentTotal,"1.0-0")," k\u20ac"),zi(2),Xa("ngTemplateOutlet",r)("ngTemplateOutletContext",Gs(10,zA,i.calcLevel(n.savingCostTotal,"percentOver"))),zi(1),xo(" ",Qs(4,7,100*n.savingCostTotal,"1.0-0")," % ")}}function yP(e,t){1&e&&io(0,"td",70)}function kP(e,t){1&e&&io(0,"td")}function CP(e,t){if(1&e&&(to(0,"td",70),So(1),qs(2,"date"),no()),2&e){var n=fo().$implicit;zi(1),To(Qs(2,1,n.keyMetrics.endDateBaseLast,"dd.MM.yyyy"))}}function VP(e,t){1&e&&oo(0)}function wP(e,t){if(1&e&&(to(0,"td",71),qs(1,"date"),Ya(2,VP,1,0,"ng-container",43),So(3),qs(4,"number"),no()),2&e){var n=fo().$implicit,i=fo(3),r=$a(4);po("title",Qs(1,4,n.keyMetrics.endDateCurrent,"dd.MM.yyyy")),zi(2),Xa("ngTemplateOutlet",r)("ngTemplateOutletContext",Gs(10,zA,i.calcLevel(n.savingEndDate,"delay"))),zi(1),xo(" ",Qs(4,7,n.savingEndDate,"1.0-0")," weeks ")}}function AP(e,t){if(1&e&&(to(0,"td",70),So(1),qs(2,"date"),no()),2&e){var n=fo().$implicit;zi(1),To(Qs(2,1,n.endDate,"dd.MM.yyyy"))}}function PP(e,t){1&e&&io(0,"td",72)}function DP(e,t){if(1&e&&(to(0,"td",70),So(1),qs(2,"number"),no()),2&e){var n=fo().$implicit;zi(1),To(Qs(2,1,n.keyMetrics.timeCompletionBaseLastActual,"1.0-0"))}}function MP(e,t){1&e&&oo(0)}function IP(e,t){if(1&e&&(to(0,"td",71),qs(1,"number"),Ya(2,MP,1,0,"ng-container",43),So(3),qs(4,"number"),no()),2&e){var n=fo().$implicit,i=fo(3),r=$a(4);po("title",Qs(1,4,n.keyMetrics.timeCompletionCurrentActual,"1.0-0")),zi(2),Xa("ngTemplateOutlet",r)("ngTemplateOutletContext",Gs(10,zA,i.calcLevel(n.timeCompletionActual,"percentUnder"))),zi(1),xo(" ",Qs(4,7,100*n.timeCompletionActual,"1.0-0")," % ")}}function SP(e,t){1&e&&io(0,"td",70)}function TP(e,t){1&e&&io(0,"td",72)}function xP(e,t){if(1&e&&(to(0,"td",72),So(1),qs(2,"number"),qs(3,"translate"),no()),2&e){var n=fo().$implicit;zi(1),_o("",Qs(2,2,n.keyMetrics.timeDelayUnFinished||0,"1.0-0")," ",zs(3,5,"compViewBubble.lbl.days"),"")}}function _P(e,t){if(1&e&&(to(0,"td",72),So(1),qs(2,"number"),qs(3,"translate"),no()),2&e){var n=fo().$implicit;zi(1),_o("",Qs(2,2,n.keyMetrics.timeDelayFinished||0,"1.0-0")," ",zs(3,5,"compViewBubble.lbl.days"),"")}}function UP(e,t){1&e&&io(0,"td",72)}function OP(e,t){1&e&&io(0,"td",72)}function EP(e,t){if(1&e&&(to(0,"td",70),So(1),qs(2,"number"),no()),2&e){var n=fo().$implicit;zi(1),To(Qs(2,1,n.keyMetrics.deliverableCompletionBaseLastActual,"1.0-0"))}}function LP(e,t){1&e&&oo(0)}function GP(e,t){if(1&e&&(to(0,"td",71),qs(1,"number"),Ya(2,LP,1,0,"ng-container",43),So(3),qs(4,"number"),no()),2&e){var n=fo().$implicit,i=fo(3),r=$a(4);po("title",Qs(1,4,n.keyMetrics.deliverableCompletionCurrentActual,"1.0-0")),zi(2),Xa("ngTemplateOutlet",r)("ngTemplateOutletContext",Gs(10,zA,i.calcLevel(n.deliveryCompletionActual,"percentUnder"))),zi(1),xo(" ",Qs(4,7,100*n.deliveryCompletionActual,"1.0-0")," % ")}}function RP(e,t){1&e&&io(0,"td",70)}function jP(e,t){1&e&&io(0,"td")}function NP(e,t){if(1&e){var n=so();to(0,"tr",63),uo("click",(function(){mn(n);var e=t.$implicit;return fo(3).gotoClickedRow(e)})),to(1,"td",53),So(2),no(),to(3,"td"),So(4),no(),Ya(5,cP,2,1,"td",64),to(6,"td",65),qs(7,"date"),So(8),qs(9,"date"),no(),to(10,"td",66),Ya(11,uP,1,0,"ng-container",43),no(),Ya(12,dP,3,4,"td",67),Ya(13,vP,5,12,"td",68),Ya(14,fP,1,0,"td",67),Ya(15,pP,1,0,"td",29),Ya(16,gP,3,4,"td",67),Ya(17,bP,5,12,"td",68),Ya(18,yP,1,0,"td",67),Ya(19,kP,1,0,"td",29),Ya(20,CP,3,4,"td",67),Ya(21,wP,5,12,"td",68),Ya(22,AP,3,4,"td",67),Ya(23,PP,1,0,"td",69),Ya(24,DP,3,4,"td",67),Ya(25,IP,5,12,"td",68),Ya(26,SP,1,0,"td",67),Ya(27,TP,1,0,"td",69),Ya(28,xP,4,7,"td",69),Ya(29,_P,4,7,"td",69),Ya(30,UP,1,0,"td",69),Ya(31,OP,1,0,"td",69),Ya(32,EP,3,4,"td",67),Ya(33,GP,5,12,"td",68),Ya(34,RP,1,0,"td",67),Ya(35,jP,1,0,"td",29),no()}if(2&e){var i=t.$implicit,r=t.index,a=fo(3),o=$a(6);zi(2),To(r+1),zi(2),To(i.name),zi(1),Xa("ngIf",a.hasVariant),zi(1),po("title",Qs(7,32,i.timestamp,"dd.MM.yy HH:MM")),zi(2),To(Qs(9,35,i.timestamp,"dd.MM.yy")),zi(2),po("title",i.ampelErlaeuterung),zi(1),Xa("ngTemplateOutlet",o)("ngTemplateOutletContext",Gs(38,zA,i.ampelStatus)),zi(1),Xa("ngIf",a.selectedMetric("ActualCost")&&i.keyMetrics),zi(1),Xa("ngIf",a.selectedMetric("ActualCost")&&i.keyMetrics),zi(1),Xa("ngIf",a.selectedMetric("Cost")&&!i.keyMetrics),zi(1),Xa("ngIf",a.selectedMetric("Cost")&&!i.keyMetrics),zi(1),Xa("ngIf",a.selectedMetric("Cost")&&i.keyMetrics),zi(1),Xa("ngIf",a.selectedMetric("Cost")&&i.keyMetrics),zi(1),Xa("ngIf",a.selectedMetric("Cost")&&!i.keyMetrics),zi(1),Xa("ngIf",a.selectedMetric("Cost")&&!i.keyMetrics),zi(1),Xa("ngIf",a.selectedMetric("EndDate")&&i.keyMetrics),zi(1),Xa("ngIf",a.selectedMetric("EndDate")&&i.keyMetrics),zi(1),Xa("ngIf",a.selectedMetric("EndDate")&&!i.keyMetrics),zi(1),Xa("ngIf",a.selectedMetric("EndDate")&&!i.keyMetrics),zi(1),Xa("ngIf",a.selectedMetric("Deadline")&&i.keyMetrics),zi(1),Xa("ngIf",a.selectedMetric("Deadline")&&i.keyMetrics),zi(1),Xa("ngIf",a.selectedMetric("Deadline")&&!i.keyMetrics),zi(1),Xa("ngIf",a.selectedMetric("Deadline")&&!i.keyMetrics),zi(1),Xa("ngIf",a.selectedMetric("DeadlineUnFinishedDelay")&&i.keyMetrics),zi(1),Xa("ngIf",a.selectedMetric("DeadlineFinishedDelay")&&i.keyMetrics),zi(1),Xa("ngIf",a.selectedMetric("DeadlineUnFinishedDelay")&&!i.keyMetrics),zi(1),Xa("ngIf",a.selectedMetric("DeadlineFinishedDelay")&&!i.keyMetrics),zi(1),Xa("ngIf",a.selectedMetric("Delivery")&&i.keyMetrics),zi(1),Xa("ngIf",a.selectedMetric("Delivery")&&i.keyMetrics),zi(1),Xa("ngIf",a.selectedMetric("Delivery")&&!i.keyMetrics),zi(1),Xa("ngIf",a.selectedMetric("Delivery")&&!i.keyMetrics)}}function FP(e,t){if(1&e){var n=so();to(0,"div",50),to(1,"div",51),to(2,"table",52),to(3,"thead"),to(4,"tr"),to(5,"th",53),So(6),qs(7,"translate"),no(),to(8,"th",54),uo("click",(function(){return mn(n),fo(2).sortKeyMetricsTable(1)})),So(9),qs(10,"translate"),no(),Ya(11,YA,3,3,"th",55),to(12,"th",56),uo("click",(function(){return mn(n),fo(2).sortKeyMetricsTable(13)})),So(13),qs(14,"translate"),no(),to(15,"th",54),uo("click",(function(){return mn(n),fo(2).sortKeyMetricsTable(14)})),So(16),qs(17,"translate"),no(),Ya(18,$A,3,3,"th",57),Ya(19,ZA,2,1,"th",58),Ya(20,XA,3,3,"th",57),Ya(21,eP,2,1,"th",58),Ya(22,tP,3,3,"th",57),Ya(23,nP,2,1,"th",58),Ya(24,iP,3,3,"th",57),Ya(25,rP,2,1,"th",58),Ya(26,aP,2,1,"th",58),Ya(27,oP,2,1,"th",58),Ya(28,sP,3,3,"th",57),Ya(29,lP,2,1,"th",58),no(),no(),to(30,"tbody"),Ya(31,NP,36,40,"tr",59),no(),no(),no(),no()}if(2&e){var i=fo(2);zi(6),To(zs(7,18,"compViewBubble.lbl.nr")),zi(3),To(zs(10,20,"compViewBubble.lbl.project")),zi(2),Xa("ngIf",i.hasVariant),zi(2),To(zs(14,22,"compViewBubble.lbl.timestamp")),zi(3),To(zs(17,24,"keyMetrics.lbl.trafficLight")),zi(2),Xa("ngIf",i.selectedMetric("ActualCost")),zi(1),Xa("ngIf",i.selectedMetric("ActualCost")),zi(1),Xa("ngIf",i.selectedMetric("Cost")),zi(1),Xa("ngIf",i.selectedMetric("Cost")),zi(1),Xa("ngIf",i.selectedMetric("EndDate")),zi(1),Xa("ngIf",i.selectedMetric("EndDate")),zi(1),Xa("ngIf",i.selectedMetric("Deadline")),zi(1),Xa("ngIf",i.selectedMetric("Deadline")),zi(1),Xa("ngIf",i.selectedMetric("DeadlineUnFinishedDelay")),zi(1),Xa("ngIf",i.selectedMetric("DeadlineFinishedDelay")),zi(1),Xa("ngIf",i.selectedMetric("Delivery")),zi(1),Xa("ngIf",i.selectedMetric("Delivery")),zi(2),Xa("ngForOf",i.visbokeymetrics)}}function BP(e,t){1&e&&(to(0,"div"),to(1,"h3",73),So(2),qs(3,"translate"),no(),no()),2&e&&(zi(2),xo(" ",zs(3,1,"compViewBubble.msg.noVersions")," "))}function HP(e,t){if(1&e){var n=so();to(0,"div",22),uo("resized",(function(e){return mn(n),fo().onResized(e)})),to(1,"div",23),to(2,"div",24),Ya(3,FA,21,11,"div",25),Ya(4,BA,7,4,"div",26),no(),Ya(5,QA,35,46,"div",27),no(),to(6,"div"),Ya(7,JA,2,1,"div",26),Ya(8,FP,32,26,"div",28),no(),Ya(9,BP,4,3,"div",29),no()}if(2&e){var i=fo();zi(3),Xa("ngIf",i.metricListFiltered&&i.metricListFiltered.length>=2&&!i.getPreView()),zi(1),Xa("ngIf",i.filter||!i.getPreView()),zi(1),Xa("ngIf",i.visbokeymetrics.length>0&&i.hasKMCost),zi(2),Xa("ngIf",i.chart),zi(1),Xa("ngIf",0==i.chart),zi(1),Xa("ngIf",0==i.visbokeymetrics.length)}}function KP(e,t){if(1&e&&(to(0,"div",45),to(1,"div",48),qs(2,"translate"),So(3),qs(4,"translate"),no(),to(5,"div",47),So(6),no(),no()),2&e){var n=t.label,i=t.title,r=t.value;zi(1),po("title",zs(2,3,i)),zi(2),xo(" ",zs(4,5,n)," "),zi(3),xo(" ",r," ")}}var qP=function(e,t,n){return{"fa-check-circle text-success":e,"fa-exclamation-triangle text-warning":t,"fa-exclamation-circle text-danger":n}};function zP(e,t){if(1&e&&io(0,"i",74),2&e){var n=t.level;Xa("ngClass",js(1,qP,1==n,2==n,3==n))}}var QP=function(e,t,n,i){return{"text-secondary":e,"text-success":t,"text-warning":n,"text-danger":i}};function WP(e,t){if(1&e&&io(0,"i",75),2&e){var n=t.level;Xa("ngClass",Ns(1,QP,0==n,1==n,2==n,3==n))}}function JP(e,t){if(1&e&&(to(0,"option",76),So(1),no()),2&e){var n=t.$implicit;po("value",n.metric),zi(1),To(n.name)}}function YP(e,t){if(1&e&&(to(0,"option",76),So(1),no()),2&e){var n=t.$implicit;po("value",n.metric),zi(1),To(n.name)}}var $P,ZP,XP=((ZP=function(){function e(t,n,i,r,a){p(this,e),this.messageService=t,this.alertService=n,this.route=i,this.router=r,this.translate=a,this.visbokeymetrics=[],this.colorMetric=[{name:"Critical",color:"red"},{name:"Warning",color:"yellow"},{name:"Good",color:"green"}],this.hasKMCost=!1,this.hasKMDelivery=!1,this.hasKMDeadline=!1,this.hasKMEndDate=!1,this.hasKMDeadlineDelay=!1,this.hasKMDeliveryDelay=!1,this.estimateAtCompletion=0,this.budgetAtCompletion=0,this.chart=!0,this.parentThis=this,this.graphBubbleData=[],this.graphBubbleOptions={width:"100%",vAxis:{baseline:0,minValue:20,maxValue:200,direction:-1,format:"",title:"Change in End Date (weeks)",baselineColor:"blue"},hAxis:{minValue:20,maxValue:200,baseline:1,direction:-1,format:"# '%'",title:"Total Cost",baselineColor:"blue"},sizeAxis:{minValue:20,maxValue:200},explorer:{actions:["dragToZoom","rightClickToReset"],maxZoomIn:.01},bubble:{textStyle:{auraColor:"none",fontSize:13}},tooltip:{showColorCode:!1},series:{Critical:{color:this.colorMetric[0].color},Warning:{color:this.colorMetric[1].color},Good:{color:this.colorMetric[2].color}}},this.sortColumn=6,this.permVC=uy,this.permVP=dy}return m(e,[{key:"ngOnInit",value:function(){this.currentLang=this.translate.currentLang,this.log("Init KeyMetrics"),this.metricList=[{name:this.translate.instant("compViewBubble.metric.costName"),metric:"Cost",axis:this.translate.instant("compViewBubble.metric.costAxis"),bubble:this.translate.instant("compViewBubble.metric.costBubble"),table:this.translate.instant("compViewBubble.metric.costTable")},{name:this.translate.instant("compViewBubble.metric.endDateName"),metric:"EndDate",axis:this.translate.instant("compViewBubble.metric.endDateAxis"),bubble:this.translate.instant("compViewBubble.metric.endDateBubble"),table:this.translate.instant("compViewBubble.metric.endDateTable")},{name:this.translate.instant("compViewBubble.metric.costActualName"),metric:"ActualCost",axis:this.translate.instant("compViewBubble.metric.costActualAxis"),bubble:this.translate.instant("compViewBubble.metric.costActualBubble"),table:this.translate.instant("compViewBubble.metric.costActualTable")},{name:this.translate.instant("compViewBubble.metric.deadlineName"),metric:"Deadline",axis:this.translate.instant("compViewBubble.metric.deadlineAxis"),bubble:this.translate.instant("compViewBubble.metric.deadlineBubble"),table:this.translate.instant("compViewBubble.metric.deadlineTable")},{name:this.translate.instant("compViewBubble.metric.deadlineFinishedDelayName"),metric:"DeadlineFinishedDelay",axis:this.translate.instant("compViewBubble.metric.deadlineFinishedDelayAxis"),bubble:this.translate.instant("compViewBubble.metric.deadlineFinishedDelayBubble"),table:this.translate.instant("compViewBubble.metric.deadlineFinishedDelayTable")},{name:this.translate.instant("compViewBubble.metric.deadlineUnFinishedDelayName"),metric:"DeadlineUnFinishedDelay",axis:this.translate.instant("compViewBubble.metric.deadlineUnFinishedDelayAxis"),bubble:this.translate.instant("compViewBubble.metric.deadlineUnFinishedDelayBubble"),table:this.translate.instant("compViewBubble.metric.deadlineUnFinishedDelayTable")},{name:this.translate.instant("compViewBubble.metric.deliveryName"),metric:"Delivery",axis:this.translate.instant("compViewBubble.metric.deliveryAxis"),bubble:this.translate.instant("compViewBubble.metric.deliveryBubble"),table:this.translate.instant("compViewBubble.metric.deliveryTable")},{name:this.translate.instant("compViewBubble.metric.deliveryFinishedDelayName"),metric:"DeliveryFinishedDelay",axis:this.translate.instant("compViewBubble.metric.deliveryFinishedDelayAxis"),bubble:this.translate.instant("compViewBubble.metric.deliveryFinishedDelayBubble"),table:this.translate.instant("compViewBubble.metric.deliveryFinishedDelayTable")},{name:this.translate.instant("compViewBubble.metric.deliveryUnFinishedDelayName"),metric:"DeliveryUnFinishedDelay",axis:this.translate.instant("compViewBubble.metric.deliveryUnFinishedDelayAxis"),bubble:this.translate.instant("compViewBubble.metric.deliveryUnFinishedDelayBubble"),table:this.translate.instant("compViewBubble.metric.deliveryUnFinishedDelayTable")}],this.initSetting(),this.chart!=this.bubbleMode&&this.toggleVisboChart(),this.visboKeyMetricsCalc()}},{key:"ngOnChanges",value:function(e){this.log("Delivery on Changes  ".concat(this.activeID,", Changes: ").concat(JSON.stringify(e))),this.metricList&&(this.initSetting(),this.visboKeyMetricsCalc())}},{key:"onResized",value:function(e){var t=this;e||this.log("No event in Resize"),this.timeoutID&&clearTimeout(this.timeoutID),this.timeoutID=setTimeout((function(){t.visboKeyMetricsCalc(),t.timeoutID=void 0}),500)}},{key:"initSetting",value:function(){this.activeID=this.route.snapshot.paramMap.get("id");var e=this.route.snapshot.queryParams.refDate,t=this.route.snapshot.queryParams.filter||void 0,n=this.route.snapshot.queryParams.metricX||void 0,i=this.route.snapshot.queryParams.metricY||void 0;n===i&&(i=void 0),this.metricX=this.getMetric(n,i,!1).metric,this.metricY=this.getMetric(i,this.metricX,!1).metric,this.refDate=e?new Date(e):new Date,t&&(this.filter=t)}},{key:"hasVPPerm",value:function(e){return void 0!==this.combinedPerm&&(this.combinedPerm.vp&e)>0}},{key:"filterKeyBoardEvent",value:function(e){e||this.log("No Keyboard Event"),this.updateUrlParam("filter",this.filter),this.visboKeyMetricsCalc()}},{key:"updateUrlParam",value:function(e,t){var n=this.route.snapshot.url.join("/");void 0===t&&(t=null);var i=new xw;"filter"==e?(i.filter=t,localStorage.setItem("vpfFilter",t||"")):"metricX"!=e&&"metricY"!=e||(i.metricX=this.metricX,i.metricY=this.metricY),this.router.navigate([n],{queryParams:i,replaceUrl:!0,queryParamsHandling:"merge"})}},{key:"visboKeyMetricsCalc",value:function(){if(this.visbokeymetrics=[],this.countKM=0,this.budgetAtCompletion=0,this.estimateAtCompletion=0,this.hasKMCost=!1,this.hasKMDelivery=!1,this.hasKMDeadline=!1,this.hasKMDeadlineDelay=!1,this.hasKMDeliveryDelay=!1,this.hasKMEndDate=!1,this.hasVariant=!1,this.visboprojectversions){for(var e=(this.filter||"").toLowerCase(),t=0;t<this.visboprojectversions.length;t++)if(!e||this.visboprojectversions[t].name.toLowerCase().indexOf(e)>=0||(this.visboprojectversions[t].VorlagenName||"").toLowerCase().indexOf(e)>=0||(this.visboprojectversions[t].businessUnit||"").toLowerCase().indexOf(e)>=0||(this.visboprojectversions[t].leadPerson||"").toLowerCase().indexOf(e)>=0||(this.visboprojectversions[t].description||"").toLowerCase().indexOf(e)>=0||(this.visboprojectversions[t].status||"").toLowerCase().indexOf(e)>=0){var n=new _w;if(n.name=this.visboprojectversions[t].name,n.variantName=this.visboprojectversions[t].variantName,n.ampelStatus=this.visboprojectversions[t].ampelStatus,n.ampelErlaeuterung=this.visboprojectversions[t].ampelErlaeuterung,n._id=this.visboprojectversions[t]._id,n.vpid=this.visboprojectversions[t].vpid,n.timestamp=this.visboprojectversions[t].timestamp,this.visboprojectversions[t].keyMetrics){this.countKM+=1,n.keyMetrics=this.visboprojectversions[t].keyMetrics,this.hasKMCost=this.hasKMCost||n.keyMetrics.costBaseLastTotal>=0,this.hasKMDelivery=this.hasKMDelivery||n.keyMetrics.deliverableCompletionBaseLastTotal>0,this.hasKMDeadline=this.hasKMDeadline||n.keyMetrics.timeCompletionBaseLastTotal>1,this.hasKMDeadlineDelay=(this.hasKMDeadline||n.keyMetrics.timeCompletionBaseLastTotal>1)&&(this.hasKMDeadlineDelay||null!=n.keyMetrics.timeDelayFinished||null!=n.keyMetrics.timeDelayUnFinished),this.hasKMDeliveryDelay=this.hasKMDeliveryDelay||null!=n.keyMetrics.deliverableDelayFinished||null!=n.keyMetrics.deliverableDelayUnFinished,this.hasKMEndDate=this.hasKMEndDate||n.keyMetrics.endDateBaseLast.toString().length>0,this.budgetAtCompletion+=n.keyMetrics.costBaseLastTotal||0,this.estimateAtCompletion+=n.keyMetrics.costCurrentTotal||0,n.savingCostTotal=n.keyMetrics.costBaseLastTotal>0?(n.keyMetrics.costCurrentTotal||0)/n.keyMetrics.costBaseLastTotal:1,n.savingCostActual=n.keyMetrics.costBaseLastActual>0?(n.keyMetrics.costCurrentActual||0)/n.keyMetrics.costBaseLastActual:1,n.keyMetrics.endDateCurrent&&n.keyMetrics.endDateBaseLast?(n.savingEndDate=this.helperDateDiff(new Date(n.keyMetrics.endDateCurrent).toISOString(),new Date(n.keyMetrics.endDateBaseLast).toISOString(),"d")||0,n.savingEndDate=Math.round(n.savingEndDate/7*10)/10):n.savingEndDate=0;var i=n.keyMetrics;n.timeCompletionTotal=this.calcPercent(i.timeCompletionCurrentTotal,n.keyMetrics.timeCompletionBaseLastTotal),n.timeCompletionActual=this.calcPercent(i.timeCompletionCurrentActual,n.keyMetrics.timeCompletionBaseLastActual),n.deliveryCompletionTotal=this.calcPercent(i.deliverableCompletionCurrentTotal,i.deliverableCompletionBaseLastTotal),n.deliveryCompletionActual=this.calcPercent(i.deliverableCompletionCurrentActual,i.deliverableCompletionBaseLastActual)}this.visbokeymetrics.push(n),this.visboprojectversions[t].variantName&&(this.hasVariant=!0)}this.sortKeyMetricsTable(void 0),this.thinDownMetricList(),this.visboKeyMetricsCalcBubble()}}},{key:"thinDownMetricList",value:function(){var e=this;if(!this.metricListFiltered){if(this.metricListFiltered=[],this.hasKMCost){var t=this.metricList.find((function(e){return"Cost"===e.metric}));this.metricListFiltered.push(t),t=this.metricList.find((function(e){return"ActualCost"===e.metric})),this.metricListFiltered.push(t)}if(this.hasKMEndDate){var n=this.metricList.find((function(e){return"EndDate"===e.metric}));this.metricListFiltered.push(n)}if(this.hasKMDelivery){var i=this.metricList.find((function(e){return"Delivery"===e.metric}));this.metricListFiltered.push(i)}if(this.hasKMDeadline){var r=this.metricList.find((function(e){return"Deadline"===e.metric}));this.metricListFiltered.push(r)}if(this.hasKMDeadlineDelay){var a=this.metricList&&this.metricList.find((function(e){return"DeadlineFinishedDelay"===e.metric}));this.metricListFiltered.push(a),a=this.metricList&&this.metricList.find((function(e){return"DeadlineUnFinishedDelay"===e.metric})),this.metricListFiltered.push(a)}if(this.hasKMDeliveryDelay){var o=this.metricList&&this.metricList.find((function(e){return"DeliveryFinishedDelay"===e.metric}));this.metricListFiltered.push(o),o=this.metricList&&this.metricList.find((function(e){return"DeliveryUnFinishedDelay"===e.metric})),this.metricListFiltered.push(o)}this.metricListFiltered.length<2&&(this.chart=!1),this.metricListSorted=[],this.metricListFiltered.forEach((function(t){return e.metricListSorted.push(t)})),this.metricListSorted.sort((function(e,t){return qv(e.name,t.name)})),this.metricX=this.getMetric(this.metricX,this.metricY,!0).metric,this.metricY=this.getMetric(this.metricY,this.metricX,!0).metric}}},{key:"getMetric",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=n?this.metricListFiltered:this.metricList;if(!i)return this.metricList[0];var r=i.find((function(n){return n.metric===e&&n.metric!==t}));return r||(r=i.find((function(e){return e.metric!==t}))),r||(r=i[0]),r}},{key:"calcPercent",value:function(e,t){return void 0===t?void 0:0===t?1:(e||0)/t}},{key:"toggleVisboChart",value:function(){this.chart=!this.chart}},{key:"changeChart",value:function(){this.log("Switch Chart to ".concat(this.metricX," vs  ").concat(this.metricY)),this.metricY=this.getMetric(this.metricY,this.metricX,!1).metric,this.updateUrlParam("metricX",void 0),this.visboKeyMetricsCalc()}},{key:"calcLevel",value:function(e,t){var n=0;return"percentOver"==t?n=e<=1?1:e>1.05?3:2:"percentUnder"==t?n=e>=1?1:e<.8?3:2:"delay"==t&&(n=e<=0?1:e>4?3:2),n}},{key:"visboKeyMetricsCalcBubble",value:function(){this.graphBubbleAxis();var e=[];if(this.visbokeymetrics){this.visbokeymetrics.length>10&&(this.graphBubbleOptions.bubble.textStyle.fontSize=1),e.push(["ID",this.getMetric(this.metricX).bubble,this.getMetric(this.metricY).bubble,"Key Metrics Status","Total Cost (Base Line) in k\u20ac"]);for(var t=0;t<this.visbokeymetrics.length;t++)if(this.visbokeymetrics[t].keyMetrics){var n=void 0,i=void 0,r=0;switch(this.metricX){case"Cost":r+=(n=Math.round(100*this.visbokeymetrics[t].savingCostTotal))<=100?1:0;break;case"ActualCost":r+=(n=Math.round(100*this.visbokeymetrics[t].savingCostActual))<=100?1:0;break;case"EndDate":r+=(n=Math.round(this.visbokeymetrics[t].savingEndDate/7*10)/10)<=0?1:0;break;case"Deadline":r+=(n=Math.round(100*this.visbokeymetrics[t].timeCompletionActual))>=100?1:0;break;case"DeadlineFinishedDelay":r+=(n=Math.round((this.visbokeymetrics[t].keyMetrics.timeDelayFinished||0)/7*10)/10)<=0?1:0;break;case"DeadlineUnFinishedDelay":r+=(n=Math.round((this.visbokeymetrics[t].keyMetrics.timeDelayUnFinished||0)/7*10)/10)<=0?1:0;break;case"Delivery":r+=(n=Math.round(100*this.visbokeymetrics[t].deliveryCompletionActual))>=100?1:0}switch(this.metricY){case"Cost":r+=(i=Math.round(100*this.visbokeymetrics[t].savingCostTotal))<=100?1:0;break;case"ActualCost":r+=(i=Math.round(100*this.visbokeymetrics[t].savingCostActual))<=100?1:0;break;case"EndDate":r+=(i=Math.round(this.visbokeymetrics[t].savingEndDate/7*10)/10)<=0?1:0;break;case"Deadline":r+=(i=Math.round(100*this.visbokeymetrics[t].timeCompletionActual))>=100?1:0;break;case"DeadlineFinishedDelay":r+=(i=Math.round((this.visbokeymetrics[t].keyMetrics.timeDelayFinished||0)/7*10)/10)<=0?1:0;break;case"DeadlineUnFinishedDelay":r+=(i=Math.round((this.visbokeymetrics[t].keyMetrics.timeDelayUnFinished||0)/7*10)/10)<=0?1:0;break;case"Delivery":r+=(i=Math.round(100*this.visbokeymetrics[t].deliveryCompletionActual))>=100?1:0}e.push([this.combineName(this.visbokeymetrics[t].name,this.visbokeymetrics[t].variantName),n,i,this.colorMetric[r].name,Math.round(this.visbokeymetrics[t].keyMetrics.costBaseLastTotal||1)])}this.calcRangeAxis(),this.graphBubbleData=e}}},{key:"calcRangeAxis",value:function(){for(var e=0,t=1/0,n=0,i=0;i<this.visbokeymetrics.length;i++)if(this.visbokeymetrics[i].keyMetrics)switch(t=Math.min(t,this.visbokeymetrics[i].keyMetrics.costBaseLastTotal),n=Math.max(n,this.visbokeymetrics[i].keyMetrics.costBaseLastTotal),this.metricX){case"Cost":e=Math.max(e,Math.abs(100*(this.visbokeymetrics[i].savingCostTotal-1)));break;case"ActualCost":e=Math.max(e,Math.abs(100*(this.visbokeymetrics[i].savingCostActual-1)));break;case"EndDate":e=Math.max(e,Math.abs(this.visbokeymetrics[i].savingEndDate)/7);break;case"Deadline":e=Math.max(e,Math.abs(100*(this.visbokeymetrics[i].timeCompletionActual-1)));break;case"DeadlineFinishedDelay":e=Math.max(e,Math.abs((this.visbokeymetrics[i].keyMetrics.timeDelayFinished||0)/7));break;case"DeadlineUnFinishedDelay":e=Math.max(e,Math.abs((this.visbokeymetrics[i].keyMetrics.timeDelayUnFinished||0)/7));break;case"Delivery":e=Math.max(e,Math.abs(100*(this.visbokeymetrics[i].deliveryCompletionActual-1)))}t*=.8,n*=1.2,this.graphBubbleOptions.sizeAxis.minValue=t,this.graphBubbleOptions.sizeAxis.maxValue=n,"EndDate"===this.metricX||"DeadlineFinishedDelay"===this.metricX||"DeadlineUnFinishedDelay"===this.metricX?(e*=1.1,this.graphBubbleOptions.hAxis.minValue=-e,this.graphBubbleOptions.hAxis.maxValue=e):(e*=1.1,this.graphBubbleOptions.hAxis.minValue=100-e,this.graphBubbleOptions.hAxis.maxValue=100+e),e=0;for(var r=0;r<this.visbokeymetrics.length;r++)if(this.visbokeymetrics[r].keyMetrics)switch(this.metricY){case"Cost":e=Math.max(e,Math.abs(100*(this.visbokeymetrics[r].savingCostTotal-1)));break;case"ActualCost":e=Math.max(e,Math.abs(100*(this.visbokeymetrics[r].savingCostActual-1)));break;case"EndDate":e=Math.max(e,Math.abs(this.visbokeymetrics[r].savingEndDate)/7);break;case"Deadline":e=Math.max(e,Math.abs(100*(this.visbokeymetrics[r].timeCompletionActual-1)));break;case"DeadlineFinishedDelay":e=Math.max(e,Math.abs((this.visbokeymetrics[r].keyMetrics.timeDelayFinished||0)/7));break;case"DeadlineUnFinishedDelay":e=Math.max(e,Math.abs((this.visbokeymetrics[r].keyMetrics.timeDelayUnFinished||0)/7));break;case"Delivery":e=Math.max(e,Math.abs(100*(this.visbokeymetrics[r].deliveryCompletionActual-1)))}"EndDate"===this.metricY||"DeadlineFinishedDelay"===this.metricY||"DeadlineUnFinishedDelay"===this.metricY?(e*=1.1,this.graphBubbleOptions.vAxis.minValue=-e,this.graphBubbleOptions.vAxis.maxValue=e):(e*=1.1,this.graphBubbleOptions.vAxis.minValue=100-e,this.graphBubbleOptions.vAxis.maxValue=100+e)}},{key:"graphBubbleAxis",value:function(){if(this.chart){var e="# "+this.translate.instant("compViewBubble.lbl.weeks");switch(this.graphBubbleOptions.hAxis.title=this.getMetric(this.metricX).axis,this.metricX){case"Cost":case"ActualCost":this.graphBubbleOptions.hAxis.baseline=100,this.graphBubbleOptions.hAxis.direction=-1,this.graphBubbleOptions.hAxis.format="# '%'";break;case"EndDate":this.graphBubbleOptions.hAxis.baseline=0,this.graphBubbleOptions.hAxis.direction=-1,this.graphBubbleOptions.hAxis.format=e;break;case"Deadline":this.graphBubbleOptions.hAxis.baseline=100,this.graphBubbleOptions.hAxis.direction=1,this.graphBubbleOptions.hAxis.format="# '%'";break;case"DeadlineFinishedDelay":case"DeadlineUnFinishedDelay":this.graphBubbleOptions.hAxis.baseline=0,this.graphBubbleOptions.hAxis.direction=-1,this.graphBubbleOptions.hAxis.format=e;break;case"Delivery":this.graphBubbleOptions.hAxis.baseline=100,this.graphBubbleOptions.hAxis.direction=1,this.graphBubbleOptions.hAxis.format="# '%'"}switch(this.graphBubbleOptions.vAxis.title=this.getMetric(this.metricY).axis,this.metricY){case"Cost":case"ActualCost":this.graphBubbleOptions.vAxis.baseline=100,this.graphBubbleOptions.vAxis.direction=-1,this.graphBubbleOptions.vAxis.format="# '%'";break;case"EndDate":this.graphBubbleOptions.vAxis.baseline=0,this.graphBubbleOptions.vAxis.direction=-1,this.graphBubbleOptions.vAxis.format=e;break;case"Deadline":this.graphBubbleOptions.vAxis.baseline=100,this.graphBubbleOptions.vAxis.direction=1,this.graphBubbleOptions.vAxis.format="# '%'";break;case"DeadlineFinishedDelay":case"DeadlineUnFinishedDelay":this.graphBubbleOptions.vAxis.baseline=0,this.graphBubbleOptions.vAxis.direction=-1,this.graphBubbleOptions.vAxis.format=e;break;case"Delivery":this.graphBubbleOptions.vAxis.baseline=100,this.graphBubbleOptions.vAxis.direction=1,this.graphBubbleOptions.vAxis.format="# '%'"}}}},{key:"gotoClickedRow",value:function(e){this.log("goto VP ".concat(e.name," (").concat(e.vpid,") Deleted? ").concat(this.deleted));var t=new ck;this.deleted&&(t.deleted="1"),e.variantName&&(t.variantName=e.variantName),this.refDate&&!Jv(this.refDate)&&(t.refDate=this.refDate.toISOString()),this.router.navigate(["vpKeyMetrics/".concat(e.vpid)],{queryParams:t})}},{key:"chartSelectRow",value:function(e,t){this.log("Bubble Chart: ".concat(e," ").concat(t," ").concat(this.visbokeymetrics[e].name));var n=this.visbokeymetrics.find((function(e){return e.name===t}));if(!n){var i=t.lastIndexOf(" ( ");if(i){var r=t.substr(0,i);n=this.visbokeymetrics.find((function(e){return e.name===r}))}}n?this.gotoClickedRow(n):this.log("VP not found "+t)}},{key:"selectedMetric",value:function(e){var t=!1;return this.metricX!==e&&this.metricY!==e||(t=!0),t}},{key:"getLevel",value:function(e,t){var n=1;return t&&(n=e/t),n<=1?1:n<=1.05?2:3}},{key:"combineName",value:function(e,t){var n=e||"";return t&&(n=n.concat(" ( ",t," ) ")),n}},{key:"helperDateDiff",value:function(e,t,n){var i=new Date(e),r=new Date(t),a=i.getTime()-r.getTime();return"w"===n?a=a/1e3/60/60/24/7:"d"===n?a=a/1e3/60/60/24:a/=1e3,a}},{key:"sortKeyMetricsTable",value:function(e){this.visbokeymetrics&&(void 0!==e?(e!==this.sortColumn&&(this.sortColumn=e,this.sortAscending=void 0),this.sortAscending=void 0===this.sortAscending?1===e:!this.sortAscending):(this.sortColumn=1,this.sortAscending=!0),1===this.sortColumn?this.visbokeymetrics.sort((function(e,t){return qv(e.name,t.name)})):2===this.sortColumn?this.visbokeymetrics.sort((function(e,t){return e.savingCostTotal-t.savingCostTotal})):3===this.sortColumn?this.visbokeymetrics.sort((function(e,t){var n,i;return((null===(n=e.keyMetrics)||void 0===n?void 0:n.costBaseLastTotal)||0)-((null===(i=t.keyMetrics)||void 0===i?void 0:i.costBaseLastTotal)||0)})):4===this.sortColumn?this.visbokeymetrics.sort((function(e,t){return e.savingEndDate-t.savingEndDate})):5===this.sortColumn?this.visbokeymetrics.sort((function(e,t){var n,i;return zv(null===(n=e.keyMetrics)||void 0===n?void 0:n.endDateBaseLast,null===(i=t.keyMetrics)||void 0===i?void 0:i.endDateBaseLast)})):6===this.sortColumn?this.visbokeymetrics.sort((function(e,t){return e.timeCompletionActual-t.timeCompletionActual})):7===this.sortColumn?this.visbokeymetrics.sort((function(e,t){var n,i;return((null===(n=e.keyMetrics)||void 0===n?void 0:n.timeCompletionBaseLastActual)||0)-((null===(i=t.keyMetrics)||void 0===i?void 0:i.timeCompletionBaseLastActual)||0)})):8===this.sortColumn?this.visbokeymetrics.sort((function(e,t){return e.deliveryCompletionActual-t.deliveryCompletionActual})):9===this.sortColumn?this.visbokeymetrics.sort((function(e,t){var n,i;return((null===(n=e.keyMetrics)||void 0===n?void 0:n.deliverableCompletionBaseLastActual)||0)-((null===(i=t.keyMetrics)||void 0===i?void 0:i.deliverableCompletionBaseLastActual)||0)})):10===this.sortColumn?this.visbokeymetrics.sort((function(e,t){var n,i;return((null===(n=e.keyMetrics)||void 0===n?void 0:n.timeDelayFinished)||0)-((null===(i=t.keyMetrics)||void 0===i?void 0:i.timeDelayFinished)||0)})):11===this.sortColumn?this.visbokeymetrics.sort((function(e,t){var n,i;return((null===(n=e.keyMetrics)||void 0===n?void 0:n.timeDelayUnFinished)||0)-((null===(i=t.keyMetrics)||void 0===i?void 0:i.timeDelayUnFinished)||0)})):12===this.sortColumn?this.visbokeymetrics.sort((function(e,t){return qv(e.variantName,t.variantName)})):13===this.sortColumn?this.visbokeymetrics.sort((function(e,t){return zv(e.timestamp,t.timestamp)})):14===this.sortColumn?this.visbokeymetrics.sort((function(e,t){return(e.ampelStatus||0)-(t.ampelStatus||0)})):15===this.sortColumn?this.visbokeymetrics.sort((function(e,t){return e.savingCostActual-t.savingCostActual})):16===this.sortColumn&&this.visbokeymetrics.sort((function(e,t){var n,i;return((null===(n=e.keyMetrics)||void 0===n?void 0:n.costBaseLastActual)||0)-((null===(i=t.keyMetrics)||void 0===i?void 0:i.costBaseLastActual)||0)})),this.sortAscending||this.visbokeymetrics.reverse())}},{key:"getPreView",value:function(){return Xv()}},{key:"log",value:function(e){this.messageService.add("CompViewKeyMetrics: "+e)}}]),e}()).\u0275fac=function(e){return new(e||ZP)(Za(tf),Za(Zm),Za(sg),Za(Am),Za(Rb))},ZP.\u0275cmp=wt({type:ZP,selectors:[["app-comp-viewbubble"]],inputs:{visboprojectversions:"visboprojectversions",bubbleMode:"bubbleMode",combinedPerm:"combinedPerm"},features:[Qt],decls:36,vars:17,consts:[["class","well",3,"resized",4,"ngIf"],["cardRow",""],["indicator",""],["trafficLight",""],["id","VpfMetricSelector","tabindex","-1","role","dialog","aria-labelledby","VpfMetricSelectorTitle","aria-hidden","true",1,"modal","fade"],["role","document",1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header"],["id","VpfMetricSelectorTitle",1,"modal-title"],["type","button","data-dismiss","modal","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],["novalidate",""],["f","ngForm"],[1,"form-group"],["for","XLabel",1,"col-form-label"],["id","XLabel","name","metricX",1,"form-control",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["for","YLabel",1,"col-form-label"],["id","YLabel","name","metricY",1,"form-control",3,"ngModel","ngModelChange"],[1,"modal-footer","align-items-end"],["type","submit","data-dismiss","modal",1,"btn","btn-primary",3,"click"],[1,"well",3,"resized"],[1,"row","row-cols-1","row-cols-lg-2"],[1,"col","col-sm-12","col-lg-8"],["class","container-fluid d-print-none",4,"ngIf"],["class","container-fluid",4,"ngIf"],["class","col-sm-12 col-md-10 col-lg-4 card align-right px-0",4,"ngIf"],["class","mt-3 container-fluid",4,"ngIf"],[4,"ngIf"],[1,"container-fluid","d-print-none"],[1,"row","text-dark","hidden-print"],[1,"my-1","pl-0","col-11"],[1,"font-weight-bold"],["data-toggle","modal","data-target","#VpfMetricSelector"],[1,"ml-2"],["aria-hidden","true",1,"fa","fa-cog"],[1,"container-fluid"],[1,"row","text-dark"],["type","text","placeholder","Filter",1,"ml-2",3,"ngModel","keyup","ngModelChange"],[1,"col-sm-12","col-md-10","col-lg-4","card","align-right","px-0"],[1,"card-header","p-2"],[1,"mr-1"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"card-body","p-2"],[1,"row"],[1,"col","col-sm-8"],[1,"col","col-sm-4","text-right"],[1,"col","col-sm-8",3,"title"],[3,"graphData","graphOptions","parentThis","language"],[1,"mt-3","container-fluid"],[1,"panel-body"],[1,"table","table-hover","table-sortable"],[1,"d-none","d-lg-table-cell"],[3,"click"],["class","d-none d-lg-table-cell",3,"click",4,"ngIf"],[1,"d-none","d-xl-table-cell",3,"click"],["class","text-right d-none d-md-table-cell",3,"click",4,"ngIf"],["class","text-right",3,"click",4,"ngIf"],["data-toggle","modal","data-target","#ProjectDetail",3,"click",4,"ngFor","ngForOf"],[1,"d-none","d-lg-table-cell",3,"click"],[1,"text-right","d-none","d-md-table-cell",3,"click"],[1,"text-right",3,"click"],["data-toggle","modal","data-target","#ProjectDetail",3,"click"],["class","d-none d-lg-table-cell",4,"ngIf"],[1,"d-none","d-xl-table-cell",3,"title"],[3,"title"],["class","text-right d-none d-md-table-cell",4,"ngIf"],["class","text-right",3,"title",4,"ngIf"],["class","text-right",4,"ngIf"],[1,"text-right","d-none","d-md-table-cell"],[1,"text-right",3,"title"],[1,"text-right"],[1,"d-flex","justify-content-center"],[1,"fa",3,"ngClass"],[1,"fas","fa-lightbulb",3,"ngClass"],[3,"value"]],template:function(e,t){1&e&&(Ya(0,HP,10,6,"div",0),Ya(1,KP,7,7,"ng-template",null,1,$s),Ya(3,zP,1,5,"ng-template",null,2,$s),Ya(5,WP,1,6,"ng-template",null,3,$s),to(7,"div",4),to(8,"div",5),to(9,"div",6),to(10,"div",7),to(11,"h5",8),So(12),qs(13,"translate"),no(),to(14,"button",9),uo("click",(function(){return t.changeChart()})),to(15,"span",10),So(16,"\xd7"),no(),no(),no(),to(17,"div",11),to(18,"form",12,13),to(20,"div",14),to(21,"label",15),So(22),qs(23,"translate"),no(),to(24,"select",16),uo("ngModelChange",(function(e){return t.metricX=e})),Ya(25,JP,2,2,"option",17),no(),no(),to(26,"div",14),to(27,"label",18),So(28),qs(29,"translate"),no(),to(30,"select",19),uo("ngModelChange",(function(e){return t.metricY=e})),Ya(31,YP,2,2,"option",17),no(),no(),to(32,"div",20),to(33,"button",21),uo("click",(function(){return t.changeChart()})),So(34),qs(35,"translate"),no(),no(),no(),no(),no(),no(),no()),2&e&&(Xa("ngIf",t.visbokeymetrics),zi(12),To(zs(13,9,"compViewBubble.titleChange")),zi(10),xo("",zs(23,11,"compViewBubble.lbl.xAxis"),":"),zi(2),Xa("ngModel",t.metricX),zi(1),Xa("ngForOf",t.metricListSorted),zi(3),xo("",zs(29,13,"compViewBubble.lbl.yAxis"),":"),zi(2),Xa("ngModel",t.metricY),zi(1),Xa("ngForOf",t.metricListSorted),zi(3),To(zs(35,15,"compViewBubble.btn.change")))},directives:[su,Fh,xd,Gh,rh,Td,Nh,au,Nw,Ad,vu,NA,iu,ah,dh],pipes:[jb,Vu,Cu],encapsulation:2}),ZP),eD=(($P=function(){function e(t){p(this,e),this.gChartService=t}return m(e,[{key:"ngOnInit",value:function(){this.language||(this.language="de"),this.gLib=this.gChartService.getGoogle(),this.gLib.charts.load("current",{packages:["timeline"],language:this.language}),this.gLib.charts.setOnLoadCallback(this.drawChart.bind(this))}},{key:"ngOnChanges",value:function(){this.initialised&&this.drawChart()}},{key:"drawChart",value:function(){var e=new this.gLib.visualization.Timeline(document.getElementById("divTimelineChart")),t=new this.gLib.visualization.arrayToDataTable(this.graphData),n=this.parentThis;this.gLib.visualization.events.addListener(e,"select",(function(){var t=e.getSelection();if(t&&0!==t.length){var i=t[0];if(void 0===n)console.log("Chart Timeline: The user clicked and this is undefined");else if(i){var r=i.row;r>=0&&n.timelineSelectRow(r)}}else console.log("Chart Timeline: chartGetSelection is undefined",t||t.length)})),e.draw(t,this.graphOptions||{title:"Timeline Chart",height:400}),this.initialised=!0}}]),e}()).\u0275fac=function(e){return new(e||$P)(Za(Hw))},$P.\u0275cmp=wt({type:$P,selectors:[["app-timeline-chart"]],inputs:{graphData:"graphData",language:"language",graphOptions:"graphOptions",parentThis:"parentThis"},features:[Qt],decls:1,vars:0,consts:[["id","divTimelineChart"]],template:function(e,t){1&e&&io(0,"div",0)},styles:["#divTimelineChart[_ngcontent-%COMP%]{width:100%}"]}),$P);function tD(e,t){if(1&e){var n=so();to(0,"div",5),to(1,"div",6),to(2,"span"),So(3),qs(4,"translate"),no(),to(5,"span"),So(6),qs(7,"translate"),no(),to(8,"input",7),uo("keyup",(function(e){return mn(n),fo(2).filterKeyBoardEvent(e)}))("ngModelChange",(function(e){return mn(n),fo(2).filter=e})),no(),no(),no()}if(2&e){var i=fo(2);zi(3),xo("",zs(4,3,"compViewBoard.lbl.timeline"),", "),zi(3),xo(" ",zs(7,5,"compViewBoard.lbl.filter"),":"),zi(2),Xa("ngModel",i.filter)}}function nD(e,t){if(1&e&&(to(0,"div",3),Ya(1,tD,9,7,"div",4),no()),2&e){var n=fo();zi(1),Xa("ngIf",n.filter||!n.getPreView())}}function iD(e,t){if(1&e&&(to(0,"div",8),io(1,"app-timeline-chart",9),no()),2&e){var n=fo();zi(1),Xa("graphData",n.graphDataTimeline)("graphOptions",n.graphOptionsTimeline)("parentThis",n.parentThis)("language",n.currentLang)}}function rD(e,t){1&e&&(to(0,"h5",8),So(1),qs(2,"translate"),no()),2&e&&(zi(1),xo(" ",zs(2,1,"compViewBoard.msg.errorNoMatchingProjects")," "))}var aD,oD=((aD=function(){function e(t,n,i,r,a){p(this,e),this.messageService=t,this.alertService=n,this.route=i,this.router=r,this.translate=a,this.parentThis=this,this.graphDataTimeline=[],this.graphOptionsTimeline={width:"100%",height:500,timeline:{showBarLabels:!0},tooltip:{isHtml:!0},animation:{startup:!0,duration:200}}}return m(e,[{key:"ngOnInit",value:function(){this.currentLang=this.translate.currentLang,this.log("ProjectBoard Init  ".concat(this.refDate.toISOString()," ")),this.initSetting(),this.visboViewBoardOverTime()}},{key:"ngOnChanges",value:function(e){var t;this.log("ProjectBoard Changes  ".concat(null===(t=this.refDate)||void 0===t?void 0:t.toISOString(),", Changes ").concat(JSON.stringify(e))),this.initSetting(),this.visboViewBoardOverTime()}},{key:"onResized",value:function(e){var t=this;e||this.log("No event in Resize"),this.timeoutID&&clearTimeout(this.timeoutID),this.timeoutID=setTimeout((function(){t.visboViewBoardOverTime(),t.timeoutID=void 0}),500)}},{key:"initSetting",value:function(){this.activeID=this.route.snapshot.paramMap.get("id");var e=this.route.snapshot.queryParams.refDate,t=this.route.snapshot.queryParams.filter||void 0;this.refDate=e?new Date(e):new Date,this.filter=t}},{key:"filterKeyBoardEvent",value:function(e){e||this.log("No Keyboard Event"),this.updateUrlParam("filter",this.filter),this.visboViewBoardOverTime()}},{key:"updateUrlParam",value:function(e,t){var n=this.route.snapshot.url.join("/");void 0===t&&(t=null);var i=new xw;"filter"==e&&(i.filter=t,localStorage.setItem("vpfFilter",t||"")),this.router.navigate([n],{queryParams:i,replaceUrl:!0,queryParamsHandling:"merge"})}},{key:"visboViewBoardOverTime",value:function(){var e,t,n,i,r=[];if(this.vps&&0!==this.vps.length){this.vps.sort((function(e,t){return qv(t.name.toLowerCase(),e.name.toLowerCase())}));for(var a=this.filter?this.filter.toLowerCase():void 0,o=0;o<this.vps.length;o++)if(!a||this.vps[o].name.toLowerCase().indexOf(a)>=0||(null===(e=this.vps[o].businessUnit)||void 0===e?void 0:e.toLowerCase().indexOf(a))>=0||(null===(t=this.vps[o].leadPerson)||void 0===t?void 0:t.toLowerCase().indexOf(a))>=0||(null===(n=this.vps[o].VorlagenName)||void 0===n?void 0:n.toLowerCase().indexOf(a))>=0||(null===(i=this.vps[o].status)||void 0===i?void 0:i.toLowerCase().indexOf(a))>=0){var s=this.vps[o].startDate,l=this.vps[o].endDate;s&&l&&s<=l&&r.push([(this.vps.length-o).toString(),this.combineName(this.vps[o].name,this.vps[o].variantName),this.createCustomHTMLContent(this.vps[o]),new Date(this.vps[o].startDate),new Date(this.vps[o].endDate)])}this.graphOptionsTimeline.height=50+41*r.length;var c=this.translate.instant("compViewBoard.lbl.project"),u=this.translate.instant("compViewBoard.lbl.startDate"),d=this.translate.instant("compViewBoard.lbl.endDate");r.push(["ID",c,{type:"string",role:"tooltip",p:{html:!0}},u,d]),r.reverse(),this.graphDataTimeline=r}else this.graphDataTimeline=[]}},{key:"createCustomHTMLContent",value:function(e){var t=Qv(new Date(e.startDate),"fullDate",this.currentLang),n=Qv(new Date(e.endDate),"fullDate",this.currentLang),i='<div style="padding:5px 5px 5px 5px;"><div><b>'+this.combineName(e.name,e.variantName)+"</b></div><div><table>",r=this.translate.instant("compViewBoard.lbl.bu"),a=this.translate.instant("compViewBoard.lbl.lead"),o=this.translate.instant("compViewBoard.lbl.template"),s=this.translate.instant("compViewBoard.lbl.startDate"),l=this.translate.instant("compViewBoard.lbl.endDate");return e.businessUnit&&(i=i+"<tr><td>"+r+":</td><td><b>"+e.businessUnit+"</b></td></tr>"),e.leadPerson&&(i=i+"<tr><td>"+a+":</td><td><b>"+e.leadPerson+"</b></td></tr>"),e.VorlagenName&&(i=i+"<tr><td>"+o+":</td><td><b>"+e.VorlagenName+"</b></td></tr>"),i=(i=i+"<tr><td>"+s+":</td><td><b>"+t+"</b></td></tr>")+"<tr><td>"+l+":</td><td><b>"+n+"</b></td></tr>",i+="</table></div></div>"}},{key:"timelineSelectRow",value:function(e){this.log("timeline Select Row ".concat(e," ").concat(JSON.stringify(this.graphDataTimeline[e+1])," "));var t=this.graphDataTimeline[e+1][1],n=this.findProject(t);if(n){this.log("Navigate to: ".concat(n.vpid," ").concat(n.name," ").concat(n.variantName));var i=new ck;i.variantName=n.variantName||null,this.refDate&&!Jv(this.refDate)&&(i.refDate=this.refDate.toISOString()),this.router.navigate(["vpKeyMetrics/".concat(n.vpid)],{queryParams:i})}else this.log("VP not found: "+t)}},{key:"getvps",value:function(){return JSON.stringify(this.vps)}},{key:"combineName",value:function(e,t){var n=e||"";return t&&(n=n.concat(" ( ",t," ) ")),n}},{key:"findProject",value:function(e){var t=this.vps.find((function(t){return t.name===e}));if(!t&&e.lastIndexOf(" ) ")===e.length-3){var n=e.lastIndexOf(" ( "),i=e.substring(0,n),r=e.substring(n+3,e.length-3);t=this.vps.find((function(e){return e.name===i&&e.variantName===r}))}return t}},{key:"getPreView",value:function(){return Xv()}},{key:"log",value:function(e){this.messageService.add("CompVisboViewBoard: "+e)}}]),e}()).\u0275fac=function(e){return new(e||aD)(Za(tf),Za(Zm),Za(sg),Za(Am),Za(Rb))},aD.\u0275cmp=wt({type:aD,selectors:[["app-comp-viewboard"]],inputs:{vps:"vps"},features:[Qt],decls:4,vars:3,consts:[[1,"well",3,"resized"],["class","container-fluid",4,"ngIf"],["class","mt-2",4,"ngIf"],[1,"container-fluid"],["class","row text-dark d-print-none",4,"ngIf"],[1,"row","text-dark","d-print-none"],[1,"my-1","pl-0","col-11"],["type","text","placeholder","Filter",1,"ml-2",3,"ngModel","keyup","ngModelChange"],[1,"mt-2"],[3,"graphData","graphOptions","parentThis","language"]],template:function(e,t){1&e&&(to(0,"div",0),uo("resized",(function(e){return t.onResized(e)})),Ya(1,nD,2,1,"div",1),Ya(2,iD,2,4,"div",2),Ya(3,rD,3,3,"h5",2),no()),2&e&&(zi(1),Xa("ngIf",t.graphDataTimeline.length>0),zi(1),Xa("ngIf",t.graphDataTimeline.length>1),zi(1),Xa("ngIf",1==t.graphDataTimeline.length))},directives:[Nw,su,Ad,Td,Nh,eD],pipes:[jb],encapsulation:2}),aD);function sD(e,t){1&e&&(to(0,"h2",33),So(1),qs(2,"translate"),no()),2&e&&(zi(1),xo(" ",zs(2,1,"vp.title")," "))}function lD(e,t){if(1&e){var n=so();to(0,"h2",33),So(1),qs(2,"translate"),to(3,"a",34),uo("click",(function(){mn(n);var e=fo(2);return e.gotoVCDetail(e.vcActive)})),So(4),no(),no()}if(2&e){var i=fo(2);zi(1),xo(" ",zs(2,2,"vp.titleVC"),": "),zi(3),To(i.vcActive.name)}}function cD(e,t){if(1&e){var n=so();to(0,"i",37),uo("click",(function(){return mn(n),fo(3).toggleVisboChart()})),no()}}function uD(e,t){if(1&e){var n=so();to(0,"i",38),uo("click",(function(){return mn(n),fo(3).toggleVisboChart()})),no()}}function dD(e,t){if(1&e&&(to(0,"div"),Ya(1,cD,1,0,"i",35),Ya(2,uD,1,0,"i",36),no()),2&e){var n=fo(2);zi(1),Xa("ngIf",!n.chart),zi(1),Xa("ngIf",n.chart)}}function hD(e,t){if(1&e){var n=so();to(0,"button",41),uo("click",(function(){return mn(n),fo(3).toggleVisboProjects()})),So(1),qs(2,"translate"),no()}2&e&&(zi(1),To(zs(2,1,"vp.btn.showDeleted")))}function vD(e,t){if(1&e){var n=so();to(0,"button",42),uo("click",(function(){return mn(n),fo(3).toggleVisboProjects()})),So(1),qs(2,"translate"),no()}2&e&&(zi(1),To(zs(2,1,"vp.btn.showExisting")))}function fD(e,t){if(1&e&&(to(0,"div"),Ya(1,hD,3,3,"button",39),Ya(2,vD,3,3,"button",40),no()),2&e){var n=fo(2);zi(1),Xa("ngIf",!n.deleted),zi(1),Xa("ngIf",n.deleted)}}function pD(e,t){1&e&&(to(0,"div"),to(1,"button",43),So(2),qs(3,"translate"),no(),no()),2&e&&(zi(2),To(zs(3,1,"vp.btn.create")))}function gD(e,t){if(1&e){var n=so();to(0,"button",47),uo("click",(function(){return mn(n),fo(3).changeView("Capacity")})),So(1),qs(2,"translate"),no()}2&e&&(zi(1),To(zs(2,1,"vp.btn.viewCapacity")))}function mD(e,t){if(1&e){var n=so();to(0,"div",44),to(1,"button",45),uo("click",(function(){return mn(n),fo(2).changeView("KeyMetric")})),So(2),qs(3,"translate"),no(),to(4,"button",45),uo("click",(function(){return mn(n),fo(2).changeView("List")})),So(5),qs(6,"translate"),no(),Ya(7,gD,3,3,"button",46),to(8,"button",45),uo("click",(function(){return mn(n),fo(2).changeView("ProjectBoard")})),So(9),qs(10,"translate"),no(),no()}if(2&e){var i=fo(2);zi(2),To(zs(3,4,"vp.btn.viewKeyMetrics")),zi(3),To(zs(6,6,"vp.btn.viewList")),zi(2),Xa("ngIf",i.hasVCPerm(i.permVC.ViewAudit+i.permVC.Modify)&&i.hasOrga),zi(2),To(zs(10,8,"vp.btn.viewProjectBoard"))}}function bD(e,t){if(1&e&&(to(0,"td",68),So(1),no()),2&e){var n=fo().$implicit;zi(1),To(n.vc.name)}}function yD(e,t){1&e&&io(0,"td",68)}function kD(e,t){if(1&e){var n=so();to(0,"tr",34),uo("click",(function(){mn(n);var e=t.$implicit;return fo(4).gotoClickedRow(e)})),to(1,"td",51),So(2),no(),to(3,"td",60),to(4,"a"),So(5),no(),no(),to(6,"td",61),So(7),no(),to(8,"td",62),So(9),qs(10,"date"),no(),to(11,"td",63),So(12),qs(13,"date"),no(),to(14,"td",64),So(15),no(),Ya(16,bD,2,1,"td",65),Ya(17,yD,1,0,"td",65),to(18,"td",66),to(19,"button",67),uo("click",(function(){mn(n);var e=t.$implicit;return fo(4).gotoDetail(e)})),So(20,"i"),no(),no(),no()}if(2&e){var i=t.$implicit,r=t.index,a=fo(4);zi(2),To(r+1),zi(3),To(i.name),zi(2),To(a.getVPType(i.vpType)),zi(2),To(Qs(10,8,i.updatedAt,"dd.MM.yyyy HH:mm")),zi(3),To(Qs(13,11,i.updatedAt,"dd.MM.yy")),zi(3),To(i.vpfCount||i.vpvCount),zi(1),Xa("ngIf",i.vc),zi(1),Xa("ngIf",!i.vc)}}function CD(e,t){if(1&e&&(to(0,"tbody",58),Ya(1,kD,21,14,"tr",59),no()),2&e){var n=fo(3);zi(1),Xa("ngForOf",n.visboprojects)}}function VD(e,t){1&e&&(to(0,"div"),to(1,"h3",69),So(2),qs(3,"translate"),no(),no()),2&e&&(zi(2),xo(" ",zs(3,1,"vp.msg.noVP")," "))}function wD(e,t){if(1&e){var n=so();to(0,"div",48),to(1,"table",49),to(2,"thead",50),to(3,"tr"),to(4,"th",51),So(5),qs(6,"translate"),no(),to(7,"th",52),uo("click",(function(){return mn(n),fo(2).sortVPTable(1)})),So(8),qs(9,"translate"),no(),to(10,"th",53),uo("click",(function(){return mn(n),fo(2).sortVPTable(5)})),So(11),qs(12,"translate"),no(),to(13,"th",54),uo("click",(function(){return mn(n),fo(2).sortVPTable(2)})),So(14),qs(15,"translate"),no(),to(16,"th",55),uo("click",(function(){return mn(n),fo(2).sortVPTable(4)})),So(17),qs(18,"translate"),no(),to(19,"th",56),uo("click",(function(){return mn(n),fo(2).sortVPTable(3)})),So(20),qs(21,"translate"),no(),to(22,"th"),So(23,"Info"),no(),no(),no(),Ya(24,CD,2,1,"tbody",57),no(),Ya(25,VD,4,3,"div",6),no()}if(2&e){var i=fo(2);zi(5),To(zs(6,8,"vp.lbl.nr")),zi(3),To(zs(9,10,"vp.lbl.name")),zi(3),To(zs(12,12,"vp.lbl.type")),zi(3),To(zs(15,14,"vp.lbl.modified")),zi(3),To(zs(18,16,"vp.lbl.versions")),zi(3),To(zs(21,18,"vp.lbl.vc")),zi(4),Xa("ngIf",i.visboprojects.length>0),zi(1),Xa("ngIf",0==i.visboprojects.length)}}function AD(e,t){if(1&e&&(to(0,"div"),io(1,"app-comp-viewcapacity",70),no()),2&e){var n=fo(3);zi(1),Xa("vcActive",n.vcActive)("combinedPerm",n.combinedPerm)}}function PD(e,t){if(1&e&&(to(0,"div"),io(1,"app-comp-viewbubble",71),no()),2&e){var n=fo(3);zi(1),Xa("bubbleMode",!0)("visboprojectversions",n.visboprojectversions)("combinedPerm",n.combinedPerm)}}function DD(e,t){if(1&e&&(to(0,"div"),io(1,"app-comp-viewbubble",71),no()),2&e){var n=fo(3);zi(1),Xa("bubbleMode",!1)("visboprojectversions",n.visboprojectversions)("combinedPerm",n.combinedPerm)}}function MD(e,t){if(1&e&&(to(0,"div"),io(1,"app-comp-viewboard",72),no()),2&e){var n=fo(3);zi(1),Xa("vps",n.visboprojectversions)}}function ID(e,t){if(1&e&&(to(0,"div"),io(1,"hr"),Ya(2,AD,2,2,"div",6),Ya(3,PD,2,3,"div",6),Ya(4,DD,2,3,"div",6),Ya(5,MD,2,1,"div",6),no()),2&e){var n=fo(2);zi(2),Xa("ngIf","Capacity"==n.currentView&&n.vcActive),zi(1),Xa("ngIf","KeyMetrics"==n.currentView&&n.visboprojectversions&&n.vcActive),zi(1),Xa("ngIf","List"==n.currentView&&n.visboprojectversions),zi(1),Xa("ngIf","ProjectBoard"==n.currentView&&n.visboprojectversions)}}function SD(e,t){if(1&e){var n=so();to(0,"div",19),to(1,"label",73),So(2),qs(3,"translate"),no(),to(4,"select",74),uo("ngModelChange",(function(e){return mn(n),fo(2).vpType=e})),to(5,"option",75),So(6),qs(7,"translate"),no(),to(8,"option",76),So(9),qs(10,"translate"),no(),no(),no()}if(2&e){var i=fo(2);zi(2),xo("",zs(3,4,"vp.lbl.type"),":"),zi(2),Xa("ngModel",i.vpType),zi(2),To(zs(7,6,"vp.type.vpType0")),zi(3),To(zs(10,8,"vp.type.vpType1"))}}function TD(e,t){if(1&e){var n=so();to(0,"div",1),to(1,"div",2),to(2,"div",3),Ya(3,sD,3,3,"h2",4),Ya(4,lD,5,4,"h2",4),no(),to(5,"div",5),Ya(6,dD,3,2,"div",6),Ya(7,fD,3,2,"div",6),Ya(8,pD,4,3,"div",6),no(),io(9,"div",7),Ya(10,mD,11,10,"div",8),no(),Ya(11,wD,26,20,"div",9),Ya(12,ID,6,4,"div",6),to(13,"div",10),to(14,"div",11),to(15,"div",12),to(16,"div",13),to(17,"h5",14),So(18),qs(19,"translate"),no(),to(20,"button",15),to(21,"span",16),So(22,"\xd7"),no(),no(),no(),to(23,"div",17),to(24,"form"),Ya(25,SD,11,10,"div",18),to(26,"div",19),to(27,"label",20),So(28),qs(29,"translate"),no(),io(30,"input",21,22),no(),to(32,"div",19),to(33,"label",23),So(34),qs(35,"translate"),no(),io(36,"textarea",24,25),no(),no(),no(),to(38,"div",26),to(39,"button",27),So(40),qs(41,"translate"),no(),to(42,"button",28),uo("click",(function(){mn(n);var e=$a(31),t=$a(37),i=fo();return i.addproject(e.value,i.vcActive._id,t.value,i.vpType),e.value="",t.value=""})),So(43),qs(44,"translate"),no(),no(),no(),no(),no(),to(45,"div",29),to(46,"div",11),to(47,"div",12),to(48,"div",13),to(49,"h5",30),So(50),qs(51,"translate"),no(),to(52,"button",15),to(53,"span",16),So(54,"\xd7"),no(),no(),no(),io(55,"div",17),to(56,"div",26),to(57,"button",31),So(58),qs(59,"translate"),no(),to(60,"button",32),So(61),qs(62,"translate"),no(),no(),no(),no(),no(),no()}if(2&e){var i=fo();zi(3),Xa("ngIf",!i.vcActive),zi(1),Xa("ngIf",i.vcActive),zi(2),Xa("ngIf",i.vcActive&&i.visboprojects.length>0),zi(1),Xa("ngIf",i.hasVPPerm(i.permVP.DeleteVP)),zi(1),Xa("ngIf",i.vcActive&&i.hasVCPerm(i.permVC.CreateVP)),zi(2),Xa("ngIf",i.chart),zi(1),Xa("ngIf",!i.chart),zi(1),Xa("ngIf",i.chart),zi(6),To(zs(19,17,"vp.titleCreate")),zi(7),Xa("ngIf",i.hasVCPerm(i.permVC.Modify)),zi(3),xo("",zs(29,19,"vp.lbl.name"),":"),zi(6),xo("",zs(35,21,"vp.lbl.description"),":"),zi(6),To(zs(41,23,"vp.btn.cancel")),zi(3),xo(" ",zs(44,25,"vp.btn.save")," "),zi(7),To(zs(51,27,"vp.titleCreateVPFList")),zi(8),To(zs(59,29,"vp.btn.cancel")),zi(3),xo(" ",zs(62,31,"vp.btn.save")," ")}}var xD,_D=((xD=function(){function e(t,n,i,r,a,o,s,l,c,u){p(this,e),this.messageService=t,this.alertService=n,this.visbocenterService=i,this.visbosettingService=r,this.visboprojectService=a,this.visboprojectversionService=o,this.route=s,this.router=l,this.translate=c,this.titleService=u,this.vpType=0,this.vpvRefDate=new Date,this.hasOrga=!1,this.chart=!1,this.modalChart=!0,this.deleted=!1,this.combinedPerm=void 0,this.permVC=uy,this.permVP=dy}return m(e,[{key:"ngOnInit",value:function(){this.currentLang=this.translate.currentLang,this.titleService.setTitle(this.translate.instant("vp.title")),this.log("Init GetVisboProjects "+JSON.stringify(this.route.snapshot.queryParams)),this.deleted=!!this.route.snapshot.queryParams.deleted;var e=this.route.snapshot.queryParams.view;e&&(this.chart=!0),this.currentView=e||"KeyMetrics",this.log("Init VP View: ".concat(this.currentView," Deleted: ").concat(this.deleted)),this.getVisboProjects(this.deleted)}},{key:"hasVPPerm",value:function(e){return void 0!==this.combinedPerm&&(this.combinedPerm.vp&e)>0}},{key:"hasVCPerm",value:function(e){return void 0!==this.combinedPerm&&(this.combinedPerm.vc&e)>0}},{key:"getVPType",value:function(e){return this.translate.instant("vp.type.vpType"+e)}},{key:"changeView",value:function(e,t){this.currentView="Capacity"===e||"KeyMetrics"===e||"ProjectBoard"===e||"List"===e?e:"KeyMetrics",this.updateUrlParam("view",this.currentView),t&&this.updateUrlParam("filter",t.trim())}},{key:"toggleVisboChart",value:function(){this.chart=!this.chart,this.chart&&!this.visboprojectversions&&this.getVisboProjectKeyMetrics()}},{key:"updateUrlParam",value:function(e,t){var n=this.route.snapshot.url.join("/");void 0===t&&(t=null);var i=new xw;"filter"==e?i.filter=t:"refDate"==e?i.refDate=t:"view"==e&&(i.view=t),this.router.navigate([n],{queryParams:i,replaceUrl:!0,queryParamsHandling:"merge"})}},{key:"toggleVisboProjects",value:function(){this.chart=!1,this.deleted=!this.deleted;var e=this.route.snapshot.url.join("/");this.log("VP toggleVisboProjects ".concat(this.deleted," URL ").concat(e)),this.getVisboProjects(this.deleted),this.router.navigate([e],this.deleted?{queryParams:{deleted:this.deleted}}:{})}},{key:"getVisboProjects",value:function(e){var t=this,n=this.route.snapshot.paramMap.get("id");this.vcSelected=n,n?this.visbocenterService.getVisboCenter(n).subscribe((function(i){t.vcActive=i,t.combinedPerm=i.perm,t.titleService.setTitle(t.translate.instant("vp.titleName",{name:t.vcActive.name})),t.getVisboCenterOrga(),t.visboprojectService.getVisboProjects(n,!1,e).subscribe((function(e){t.visboprojects=e,t.sortVPTable(1),t.chart&&t.getVisboProjectKeyMetrics()}),(function(e){t.log("get VPs failed: error:  ".concat(e.status," message: ").concat(e.error.message)),t.alertService.error(Zv(e))}))}),(function(e){t.log("get VC failed: error:  ".concat(e.status," message: ").concat(e.error.message)),t.alertService.error(Zv(e))})):(this.vcSelected=null,this.vcActive=null,this.visboprojectService.getVisboProjects(null,!1,e).subscribe((function(e){t.visboprojects=e,t.sortVPTable(1)}),(function(e){t.log("get VPs all failed: error:  ".concat(e.status," message: ").concat(e.error.message)),t.alertService.error(Zv(e))})))}},{key:"addproject",value:function(e,t,n,i){var r=this;e=e.trim(),this.log("call create VP ".concat(e," with VCID ").concat(t," Desc ").concat(n," ")),e&&(1!=i&&2!=i&&(i=0),this.visboprojectService.addVisboProject({name:e,description:n,vcid:t,vpType:i}).subscribe((function(e){r.visboprojects.push(e),r.sortVPTable(void 0);var t=r.translate.instant("vp.type.vpType".concat(i.toString())),n=r.translate.instant("vp.msg.createSuccess",{name:e.name,vpType:t});r.alertService.success(n,!0),r.gotoClickedRow(e)}),(function(t){if(r.log("add VP failed: error: ".concat(t.status," messages: ").concat(t.error.message)),403===t.status){var n=r.translate.instant("vp.msg.errorPerm",{name:e});r.alertService.error(n)}else if(409===t.status){var i=r.translate.instant("vp.msg.errorConflict",{name:e});r.alertService.error(i)}else r.alertService.error(Zv(t))})),this.vpType=0)}},{key:"getVisboProjectKeyMetrics",value:function(){var e=this;this.log("get VC keyMetrics ".concat(this.vcActive.name," ").concat(this.vcActive._id)),this.visboprojectversionService.getVisboCenterProjectVersions(this.vcActive._id,this.vpvRefDate).subscribe((function(t){e.visboprojectversions=t,e.calcVPVList(),e.log("get VC Key metrics: Get ".concat(t.length," Project Versions")),0===e.visboprojectversions.length&&(e.chart=!1)}),(function(t){if(e.log("get VPVs failed: error: ".concat(t.status," message: ").concat(t.error.message)),403===t.status){var n=e.translate.instant("vp.msg.errorPermVC");e.alertService.error(n)}else e.alertService.error(Zv(t))}))}},{key:"calcVPVList",value:function(){var e,t;if(null===(e=this.visboprojectversions)||void 0===e?void 0:e.length){this.vpvWithKM=0;for(var n=0;n<this.visboprojectversions.length;n++){var i=this.visboprojectversions[n];i.endDate=(null===(t=i.keyMetrics)||void 0===t?void 0:t.endDateCurrent)||i.endDate,this.vpvWithKM+=this.visboprojectversions[n].keyMetrics?1:0}}}},{key:"getVisboCenterOrga",value:function(){var e=this;this.vcActive&&(this.log("get VC Orga "+this.vcActive._id),this.visbosettingService.getVCOrganisations(this.vcActive._id,!1,void 0,!0).subscribe((function(t){e.hasOrga=t.length>0}),(function(t){if(403===t.status){var n=e.translate.instant("vp.msg.errorPermVC");e.alertService.error(n)}else e.alertService.error(Zv(t))})))}},{key:"gotoClickedRow",value:function(e){var t=!!e.deletedAt;1===e.vpType?(this.log("goto VPF for VP ".concat(e._id," Deleted ").concat(t)),this.router.navigate(["vpf/".concat(e._id)],t?{queryParams:{deleted:t}}:{})):(this.log("goto VPV for VP ".concat(e._id," Deleted ").concat(t)),this.router.navigate(["vpKeyMetrics/".concat(e._id)],t?{queryParams:{deleted:t}}:{}))}},{key:"gotoDetail",value:function(e){var t=!!e.deletedAt;this.log("goto Detail for VP "+e._id),this.router.navigate(["vpDetail/".concat(e._id)],t?{queryParams:{deleted:t}}:{})}},{key:"gotoVCDetail",value:function(e){this.router.navigate(["vcDetail/".concat(e._id)])}},{key:"sortVPTable",value:function(e){if(void 0!==e){if(!this.visboprojects)return;e!==this.sortColumn&&(this.sortColumn=e,this.sortAscending=void 0),this.sortAscending=void 0===this.sortAscending?1===e||3===e:!this.sortAscending}1===this.sortColumn?this.visboprojects.sort((function(e,t){return qv(e.name.toLowerCase(),t.name.toLowerCase())})):2===this.sortColumn?this.visboprojects.sort((function(e,t){return zv(e.updatedAt,t.updatedAt)})):3===this.sortColumn?this.visboprojects.sort((function(e,t){return qv(e.vc.name.toLowerCase(),t.vc.name.toLowerCase())})):4===this.sortColumn?this.visboprojects.sort((function(e,t){return e.vpvCount-t.vpvCount})):5===this.sortColumn&&this.visboprojects.sort((function(e,t){return e.vpType-t.vpType})),this.sortAscending||this.visboprojects.reverse()}},{key:"log",value:function(e){this.messageService.add("VisboProject: "+e)}}]),e}()).\u0275fac=function(e){return new(e||xD)(Za(tf),Za(Zm),Za(my),Za(Sk),Za(dk),Za(Ew),Za(sg),Za(Am),Za(Rb),Za(ud))},xD.\u0275cmp=wt({type:xD,selectors:[["app-visboprojects"]],decls:2,vars:1,consts:[["class","well",4,"ngIf"],[1,"well"],[1,"row"],[1,"col"],["class","panel-heading ml-0",4,"ngIf"],[1,"btn-group"],[4,"ngIf"],[1,"container-fluid"],["class","btn-toolbar",4,"ngIf"],["class","panel-body",4,"ngIf"],["id","VpModalCreate","tabindex","-1","role","dialog","aria-labelledby","VpModalCreateTitle","aria-hidden","true",1,"modal","fade"],["role","document",1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header"],["id","VpModalCenterTitle",1,"modal-title"],["type","button","data-dismiss","modal","aria-label","Close",1,"close"],["aria-hidden","true"],[1,"modal-body"],["class","form-group",4,"ngIf"],[1,"form-group"],["for","vpName",1,"col-form-label"],["id","CreateVPName","type","text",1,"form-control"],["vpName",""],[1,"col-form-label"],["id","CreateVPDesc",1,"form-control"],["vpDescription",""],[1,"modal-footer","align-items-end"],["id","ButtonBack","type","button","data-dismiss","modal",1,"btn","btn-secondary"],["id","CreateVPConfirm","type","button","data-dismiss","modal",1,"btn","btn-primary",3,"click"],["id","VPFListCreate","tabindex","-1","role","dialog","aria-labelledby","VPFListCreateTitle","aria-hidden","true",1,"modal","fade"],["id","VPFListCenterTitle",1,"modal-title"],["id","ButtonVPFBack","type","button","data-dismiss","modal",1,"btn","btn-secondary"],["id","CreateVPFConfirm","type","button","data-dismiss","modal",1,"btn","btn-primary"],[1,"panel-heading","ml-0"],[3,"click"],["class","mt-3 fa fa-signal","aria-hidden","true",3,"click",4,"ngIf"],["class","mt-3 fa fa-list","aria-hidden","true",3,"click",4,"ngIf"],["aria-hidden","true",1,"mt-3","fa","fa-signal",3,"click"],["aria-hidden","true",1,"mt-3","fa","fa-list",3,"click"],["id","DeletedVP","type","button","class","m-2 btn btn-secondary",3,"click",4,"ngIf"],["id","UnDeletedVP","type","button","class","m-2 btn btn-secondary",3,"click",4,"ngIf"],["id","DeletedVP","type","button",1,"m-2","btn","btn-secondary",3,"click"],["id","UnDeletedVP","type","button",1,"m-2","btn","btn-secondary",3,"click"],["id","CreateVP","type","button","data-toggle","modal","data-target","#VpModalCreate",1,"m-2","btn","btn-primary"],[1,"btn-toolbar"],["type","button",1,"ml-2","btn","btn-md","btn-light",3,"click"],["type","button","class","btn btn-md btn-light ml-2",3,"click",4,"ngIf"],["type","button",1,"btn","btn-md","btn-light","ml-2",3,"click"],[1,"panel-body"],[1,"table","table-hover","table-sortable"],["id","VPHead"],[1,"d-none","d-md-table-cell"],["id","SortName",3,"click"],["id","SortType",1,"d-none","d-md-table-cell",3,"click"],["id","SortDate",1,"d-none","d-md-table-cell",3,"click"],["id","SortVersions",1,"d-none","d-md-table-cell",3,"click"],["id","SortVC",1,"d-none","d-lg-table-cell",3,"click"],["id","VPList",4,"ngIf"],["id","VPList"],[3,"click",4,"ngFor","ngForOf"],["id","ColName"],["id","ColType",1,"d-none","d-md-table-cell"],["id","ColDate",1,"d-none","d-lg-table-cell"],["id","ColDate",1,"d-none","d-md-table-cell","d-lg-none"],["id","ColVersions",1,"d-none","d-md-table-cell"],["id","ColVC","class","d-none d-lg-table-cell",4,"ngIf"],["id","ColDetail"],["title","Detail of Visbo Project",1,"Detail",3,"click"],["id","ColVC",1,"d-none","d-lg-table-cell"],[1,"d-flex","justify-content-center"],[3,"vcActive","combinedPerm"],[3,"bubbleMode","visboprojectversions","combinedPerm"],[3,"vps"],["for","type",1,"col-form-label"],["id","vpType","name","vpType",1,"form-control",3,"ngModel","ngModelChange"],["value","0"],["value","1"]],template:function(e,t){1&e&&(io(0,"app-usernavbar"),Ya(1,TD,63,33,"div",0)),2&e&&(zi(1),Xa("ngIf",t.visboprojects))},directives:[pk,su,Fh,xd,Gh,au,jA,XP,oD,rh,Td,Nh,ah,dh],pipes:[jb,Cu],encapsulation:2}),xD);function UD(e,t){if(1&e){var n=so();to(0,"a",1),uo("click",(function(){mn(n);var e=fo(2);return e.gotoVCDetail(e.visboproject)})),So(1),no()}if(2&e){var i=fo(2);zi(1),To(i.visboproject.vc.name)}}function OD(e,t){if(1&e&&(to(0,"span"),So(1),no()),2&e){var n=fo(2);zi(1),To(n.visboproject.vc.name)}}function ED(e,t){if(1&e){var n=so();to(0,"input",73),uo("ngModelChange",(function(e){return mn(n),fo(2).visboproject.name=e})),no()}2&e&&Xa("ngModel",fo(2).visboproject.name)}function LD(e,t){if(1&e&&(to(0,"label",74),So(1),no()),2&e){var n=fo(2);zi(1),xo("",n.visboproject.name," ")}}function GD(e,t){if(1&e){var n=so();to(0,"textarea",78),uo("ngModelChange",(function(e){return mn(n),fo(3).visboproject.description=e})),no()}2&e&&Xa("ngModel",fo(3).visboproject.description)}function RD(e,t){if(1&e&&(to(0,"label",79),So(1),no()),2&e){var n=fo(3);zi(1),xo("",n.visboproject.description," ")}}function jD(e,t){if(1&e&&(to(0,"div",3),to(1,"label",75),So(2),qs(3,"translate"),no(),Ya(4,GD,1,1,"textarea",76),Ya(5,RD,2,1,"label",77),no()),2&e){var n=fo(2);zi(2),xo("",zs(3,3,"vpDetail.lbl.description"),":"),zi(2),Xa("ngIf",n.hasVPPerm(n.permVP.Modify)),zi(1),Xa("ngIf",!n.hasVPPerm(n.permVP.Modify))}}function ND(e,t){if(1&e){var n=so();to(0,"div",3),to(1,"label",80),So(2),qs(3,"translate"),no(),to(4,"label",81),to(5,"a",1),uo("click",(function(){mn(n);var e=fo(2);return e.gotoVPView(e.visboproject)})),So(6),qs(7,"translate"),no(),no(),no()}if(2&e){var i=fo(2);zi(2),xo("",zs(3,4,"vpDetail.lbl.versions"),":"),zi(4),Uo("",i.visboproject.vpvCount," ",zs(7,6,"vpDetail.lbl.ofTotal")," ",i.getVPVersionsTotal(),"")}}function FD(e,t){if(1&e){var n=so();to(0,"button",90),uo("click",(function(){mn(n);var e=fo(3);return e.gotoVPAudit(e.visboproject)})),So(1),qs(2,"translate"),no()}2&e&&(zi(1),To(zs(2,1,"vpDetail.btn.viewAudit")))}function BD(e,t){if(1&e){var n=so();to(0,"button",91),uo("click",(function(){return mn(n),fo(3).toggleView("Group")})),So(1),qs(2,"translate"),no()}2&e&&(zi(1),To(zs(2,1,"vpDetail.btn.viewGroups")))}function HD(e,t){if(1&e){var n=so();to(0,"button",92),uo("click",(function(){return mn(n),fo(3).toggleView("User")})),So(1),qs(2,"translate"),no()}2&e&&(zi(1),To(zs(2,1,"vpDetail.btn.viewUsers")))}function KD(e,t){if(1&e){var n=so();to(0,"button",93),uo("click",(function(){mn(n);var e=fo(3);return e.gotoVPRestriction(e.visboproject)})),So(1),qs(2,"translate"),no()}2&e&&(zi(1),To(zs(2,1,"vpDetail.btn.viewRestriction")))}function qD(e,t){if(1&e){var n=so();to(0,"button",94),uo("click",(function(){return mn(n),fo(3).toggleView("Variant")})),So(1),qs(2,"translate"),no()}2&e&&(zi(1),To(zs(2,1,"vpDetail.btn.viewVariant")))}function zD(e,t){if(1&e){var n=so();to(0,"button",95),uo("click",(function(){return mn(n),fo(3).toggleView("Lock")})),So(1),qs(2,"translate"),no()}2&e&&(zi(1),To(zs(2,1,"vpDetail.btn.viewLock")))}function QD(e,t){1&e&&(to(0,"div",97),to(1,"button",105),So(2),qs(3,"translate"),no(),no()),2&e&&(zi(2),xo(" ",zs(3,1,"vpDetail.btn.addUser")," "))}function WD(e,t){1&e&&(to(0,"th"),So(1),qs(2,"translate"),no()),2&e&&(zi(1),To(zs(2,1,"vpDetail.lbl.delete")))}function JD(e,t){if(1&e){var n=so();to(0,"td"),to(1,"button",108),uo("click",(function(){mn(n);var e=fo().index;return fo(4).helperRemoveUser(e)})),qs(2,"translate"),So(3,"\xd7"),no(),no()}2&e&&(zi(1),po("title",zs(2,1,"vpDetail.lbl.deleteUser")))}function YD(e,t){1&e&&io(0,"td")}function $D(e,t){if(1&e){var n=so();to(0,"tr"),to(1,"td"),So(2),no(),to(3,"td",106),uo("click",(function(){mn(n);var e=t.index;return fo(4).calcCombinedPerm(e)})),to(4,"a"),So(5),no(),no(),to(6,"td",107),uo("click",(function(){return mn(n),fo(4).toggleView("Group")})),to(7,"a"),So(8),no(),no(),to(9,"td",103),So(10),no(),Ya(11,JD,4,3,"td",0),Ya(12,YD,1,0,"td",0),no()}if(2&e){var i=t.$implicit,r=t.index,a=fo(4);zi(2),To(r+1),zi(3),To(i.email),zi(3),To(i.groupName),zi(2),To("VP"==i.groupType?"":"Global"),zi(1),Xa("ngIf",!a.deleted&&a.hasVPPerm(a.permVP.ManagePerm)&&"VP"==i.groupType),zi(1),Xa("ngIf",!(!a.deleted&&a.hasVPPerm(a.permVP.ManagePerm)&&"VP"==i.groupType))}}function ZD(e,t){if(1&e){var n=so();to(0,"div"),to(1,"div"),to(2,"div",96),to(3,"div",97),to(4,"h5",98),So(5),qs(6,"translate"),no(),no(),Ya(7,QD,4,3,"div",99),no(),to(8,"div",100),to(9,"table",101),to(10,"thead",102),to(11,"tr"),to(12,"th"),So(13),qs(14,"translate"),no(),to(15,"th",1),uo("click",(function(){return mn(n),fo(3).sortUserTable(1)})),So(16),qs(17,"translate"),no(),to(18,"th",1),uo("click",(function(){return mn(n),fo(3).sortUserTable(2)})),So(19),qs(20,"translate"),no(),to(21,"th",103),So(22),qs(23,"translate"),no(),Ya(24,WD,3,3,"th",0),no(),no(),to(25,"tbody",104),Ya(26,$D,13,6,"tr",37),no(),no(),no(),no(),no()}if(2&e){var i=fo(3);zi(5),xo(" ",zs(6,8,"vpDetail.titleUsers")," "),zi(2),Xa("ngIf",i.hasVPPerm(i.permVP.ManagePerm)),zi(6),To(zs(14,10,"vpDetail.lbl.nr")),zi(3),To(zs(17,12,"vpDetail.lbl.email")),zi(3),To(zs(20,14,"vpDetail.lbl.group")),zi(3),To(zs(23,16,"vpDetail.lbl.type")),zi(2),Xa("ngIf",!i.deleted&&i.hasVPPerm(i.permVP.ManagePerm)),zi(2),Xa("ngForOf",i.vgUsers)}}function XD(e,t){if(1&e){var n=so();to(0,"div",97),to(1,"button",111),uo("click",(function(){return mn(n),fo(4).initGroup(null)})),So(2),qs(3,"translate"),no(),no()}2&e&&(zi(2),xo(" ",zs(3,1,"vpDetail.btn.addGroup")," "))}function eM(e,t){1&e&&(to(0,"th"),So(1),qs(2,"translate"),no()),2&e&&(zi(1),To(zs(2,1,"vpDetail.lbl.delete")))}function tM(e,t){1&e&&(to(0,"td",116),So(1),qs(2,"translate"),no()),2&e&&(zi(1),To(zs(2,1,"vpDetail.lbl.global")))}function nM(e,t){1&e&&io(0,"td",116)}function iM(e,t){if(1&e){var n=so();to(0,"td"),to(1,"button",117),uo("click",(function(){mn(n);var e=fo().index;return fo(4).helperRemoveGroup(e)})),qs(2,"translate"),So(3,"\xd7"),no(),no()}2&e&&(zi(1),po("title",zs(2,1,"vpDetail.msg.removeGroup")))}function rM(e,t){1&e&&io(0,"td")}function aM(e,t){if(1&e){var n=so();to(0,"tr"),to(1,"td"),So(2),no(),to(3,"td",112),uo("click",(function(){mn(n);var e=t.$implicit;return fo(4).initGroup(e)})),to(4,"a"),So(5),no(),no(),to(6,"td",113),uo("click",(function(){return mn(n),fo(4).toggleView("User")})),to(7,"a"),So(8),no(),no(),Ya(9,tM,3,3,"td",114),Ya(10,nM,1,0,"td",114),Ya(11,iM,4,3,"td",0),Ya(12,rM,1,0,"td",0),to(13,"td"),to(14,"button",115),uo("click",(function(){mn(n);var e=t.$implicit;return fo(4).initGroup(e)})),qs(15,"translate"),So(16,"i"),no(),no(),no()}if(2&e){var i=t.$implicit,r=t.index,a=fo(4);zi(2),To(r+1),zi(3),To(i.name),zi(3),To(i.users.length),zi(1),Xa("ngIf",i.global),zi(1),Xa("ngIf",!i.global),zi(1),Xa("ngIf",!a.deleted&&a.hasVPPerm(a.permVP.ManagePerm)&&"VP"==i.groupType),zi(1),Xa("ngIf",!(!a.deleted&&a.hasVPPerm(a.permVP.ManagePerm)&&"VP"==i.groupType)),zi(2),po("title",zs(15,8,"vpDetail.msg.detailGroup"))}}function oM(e,t){if(1&e){var n=so();to(0,"div"),to(1,"div"),to(2,"div",96),to(3,"div",97),to(4,"h5",98),So(5),qs(6,"translate"),no(),no(),Ya(7,XD,4,3,"div",99),no(),to(8,"div",100),to(9,"table",101),to(10,"thead",109),to(11,"tr"),to(12,"th"),So(13),qs(14,"translate"),no(),to(15,"th",1),uo("click",(function(){return mn(n),fo(3).sortGroupTable(1)})),So(16),qs(17,"translate"),no(),to(18,"th",1),uo("click",(function(){return mn(n),fo(3).sortGroupTable(2)})),So(19),qs(20,"translate"),no(),to(21,"th",103),So(22),qs(23,"translate"),no(),Ya(24,eM,3,3,"th",0),to(25,"th"),So(26),qs(27,"translate"),no(),no(),no(),to(28,"tbody",110),Ya(29,aM,17,10,"tr",37),no(),no(),no(),no(),no()}if(2&e){var i=fo(3);zi(5),xo(" ",zs(6,9,"vpDetail.titleGroups")," "),zi(2),Xa("ngIf",i.hasVPPerm(i.permVP.ManagePerm)),zi(6),To(zs(14,11,"vpDetail.lbl.nr")),zi(3),To(zs(17,13,"vpDetail.lbl.group")),zi(3),To(zs(20,15,"vpDetail.lbl.members")),zi(3),To(zs(23,17,"vpDetail.lbl.type")),zi(2),Xa("ngIf",!i.deleted&&i.hasVPPerm(i.permVP.ManagePerm)),zi(2),To(zs(27,19,"vpDetail.lbl.info")),zi(3),Xa("ngForOf",i.vgGroups)}}function sM(e,t){1&e&&(to(0,"div",97),to(1,"button",121),So(2),qs(3,"translate"),no(),no()),2&e&&(zi(2),xo(" ",zs(3,1,"vpDetail.btn.addVariant")," "))}function lM(e,t){1&e&&(to(0,"th"),So(1),qs(2,"translate"),no()),2&e&&(zi(1),To(zs(2,1,"vpDetail.lbl.delete")))}function cM(e,t){1&e&&oo(0)}function uM(e,t){if(1&e){var n=so();to(0,"button",127),uo("click",(function(){mn(n);var e=fo().index;return fo(4).helperRemoveVariant(e)})),qs(1,"translate"),So(2,"\xd7 "),no()}2&e&&po("title",zs(1,1,"vpDetail.lbl.deleteVariant"))}function dM(e,t){if(1&e){var n=so();to(0,"button",127),uo("click",(function(){mn(n);var e=fo().index;return fo(4).helperRemoveVariant(e)})),qs(1,"translate"),So(2,"\xd7 "),no()}2&e&&po("title",zs(1,1,"vpDetail.lbl.deleteVariant"))}var hM=function(e){return{level:e}};function vM(e,t){if(1&e&&(to(0,"tr"),to(1,"td"),So(2),no(),to(3,"td",122),So(4),no(),to(5,"td",123),So(6),no(),to(7,"td",124),qs(8,"date"),So(9),qs(10,"date"),no(),to(11,"td",103),So(12),no(),to(13,"td",103),Ya(14,cM,1,0,"ng-container",125),no(),to(15,"td"),Ya(16,uM,3,3,"button",126),Ya(17,dM,3,3,"button",126),no(),no()),2&e){var n=t.$implicit,i=t.index;fo(2);var r=$a(12),a=fo(2);zi(2),To(i+1),zi(2),To(n.variantName),zi(2),To(n.email),zi(1),po("title",Qs(8,10,n.createdAt,"dd.MM.yyyy HH:mm:ss")),zi(2),To(Qs(10,13,n.createdAt,"dd.MM.yy")),zi(3),To(n.vpvCount),zi(2),Xa("ngTemplateOutlet",r)("ngTemplateOutletContext",Gs(16,hM,a.getLockStatus(i))),zi(2),Xa("ngIf",!n.vpvCount&&a.hasVPPerm(a.permVP.Modify)&&a.getLockStatus(i)<=1),zi(1),Xa("ngIf",!n.vpvCount&&!a.hasVPPerm(a.permVP.Modify)&&a.hasVPPerm(a.permVP.CreateVariant)&&a.getLockStatus(i)<=1&&n.email==a.currentUser.email)}}function fM(e,t){if(1&e){var n=so();to(0,"div"),to(1,"div"),to(2,"div",96),to(3,"div",97),to(4,"h5",98),So(5),qs(6,"translate"),no(),no(),Ya(7,sM,4,3,"div",99),no(),to(8,"div",100),to(9,"table",101),to(10,"thead",118),to(11,"tr"),to(12,"th"),So(13),qs(14,"translate"),no(),to(15,"th",1),uo("click",(function(){return mn(n),fo(3).sortVariantTable(1)})),So(16),qs(17,"translate"),no(),to(18,"th",1),uo("click",(function(){return mn(n),fo(3).sortVariantTable(2)})),So(19),qs(20,"translate"),no(),to(21,"th",119),uo("click",(function(){return mn(n),fo(3).sortVariantTable(3)})),So(22),qs(23,"translate"),no(),to(24,"th",119),uo("click",(function(){return mn(n),fo(3).sortVariantTable(4)})),So(25),qs(26,"translate"),no(),to(27,"th",103),So(28),qs(29,"translate"),no(),Ya(30,lM,3,3,"th",0),no(),no(),to(31,"tbody",120),Ya(32,vM,18,18,"tr",37),no(),no(),no(),no(),no()}if(2&e){var i=fo(3);zi(5),xo(" ",zs(6,10,"vpDetail.titleVariants")," "),zi(2),Xa("ngIf",i.hasVPPerm(i.permVP.Modify+i.permVP.CreateVariant)),zi(6),To(zs(14,12,"vpDetail.lbl.nr")),zi(3),To(zs(17,14,"vpDetail.lbl.variant")),zi(3),To(zs(20,16,"vpDetail.lbl.email")),zi(3),To(zs(23,18,"vpDetail.lbl.createdAt")),zi(3),To(zs(26,20,"vpDetail.lbl.versions")),zi(3),To(zs(29,22,"vpDetail.lbl.lock")),zi(2),Xa("ngIf",i.hasVPPerm(i.permVP.Modify+i.permVP.CreateVariant)),zi(2),Xa("ngForOf",i.visboproject.variant)}}var pM=function(e,t){return{"fa-check-circle text-success":e,"fa-ban text-danger":t}};function gM(e,t){if(1&e&&io(0,"i",128),2&e){var n=t.level;Xa("ngClass",Rs(1,pM,1==n,2==n))}}function mM(e,t){if(1&e){var n=so();to(0,"td"),to(1,"button",131),uo("click",(function(){mn(n);var e=fo().index;return fo(4).unlockVP(e)})),qs(2,"translate"),So(3,"\xd7"),no(),no()}2&e&&(zi(1),po("title",zs(2,1,"vpDetail.lbl.unlock")))}function bM(e,t){if(1&e&&(to(0,"tr"),to(1,"td"),So(2),no(),to(3,"td"),So(4),qs(5,"date"),no(),to(6,"td"),So(7),no(),Ya(8,mM,4,3,"td",0),no()),2&e){var n=t.index,i=fo(4);zi(2),To(i.visboproject.lock[n].email),zi(2),To(Qs(5,4,i.visboproject.lock[n].expiresAt,"dd.MM HH:mm")),zi(3),To(i.visboproject.lock[n].variantName),zi(1),Xa("ngIf",!i.deleted&&i.hasVPPerm(i.permVP.Modify))}}function yM(e,t){if(1&e&&(to(0,"div"),to(1,"div",129),to(2,"div",97),to(3,"h5",130),So(4),qs(5,"translate"),no(),no(),no(),to(6,"div",100),to(7,"table",101),to(8,"thead"),to(9,"tr"),to(10,"th"),So(11),qs(12,"translate"),no(),to(13,"th"),So(14),qs(15,"translate"),no(),to(16,"th"),So(17),qs(18,"translate"),no(),to(19,"th"),So(20),qs(21,"translate"),no(),no(),no(),to(22,"tbody"),Ya(23,bM,9,7,"tr",37),no(),no(),no(),no()),2&e){var n=fo(3);zi(4),xo(" ",zs(5,6,"vpDetail.titleProjectLocks")," "),zi(7),To(zs(12,8,"vpDetail.lbl.email")),zi(3),To(zs(15,10,"vpDetail.lbl.expires")),zi(3),To(zs(18,12,"vpDetail.lbl.variant")),zi(3),To(zs(21,14,"vpDetail.lbl.delete")),zi(3),Xa("ngForOf",n.visboproject.lock)}}function kM(e,t){if(1&e&&(to(0,"div"),to(1,"div",82),Ya(2,FD,3,3,"button",83),Ya(3,BD,3,3,"button",84),Ya(4,HD,3,3,"button",85),Ya(5,KD,3,3,"button",86),Ya(6,qD,3,3,"button",87),Ya(7,zD,3,3,"button",88),no(),Ya(8,ZD,27,18,"div",0),Ya(9,oM,30,21,"div",0),Ya(10,fM,33,24,"div",0),Ya(11,gM,1,4,"ng-template",null,89,$s),Ya(13,yM,24,16,"div",0),no()),2&e){var n=fo(2);zi(2),Xa("ngIf",n.hasVPPerm(n.permVP.ViewAudit)),zi(1),Xa("ngIf","Group"!=n.actView),zi(1),Xa("ngIf","User"!=n.actView),zi(1),Xa("ngIf",n.viewRestriction()),zi(1),Xa("ngIf","Variant"!=n.actView&&n.hasVPPerm(n.permVP.Modify+n.permVP.CreateVariant)),zi(1),Xa("ngIf","Lock"!=n.actView&&n.hasVPPerm(n.permVP.Modify)&&n.visboproject.lock.length&&n.hasVPPerm(n.permVP.Modify+n.permVP.CreateVariant)),zi(1),Xa("ngIf","User"==n.actView),zi(1),Xa("ngIf","Group"==n.actView),zi(1),Xa("ngIf","Variant"==n.actView),zi(3),Xa("ngIf","Lock"==n.actView)}}function CM(e,t){if(1&e){var n=so();to(0,"button",132),uo("click",(function(){return mn(n),fo(2).save()})),So(1),qs(2,"translate"),no()}2&e&&(zi(1),To(zs(2,1,"vpDetail.btn.save")))}function VM(e,t){if(1&e){var n=so();to(0,"button",133),uo("click",(function(){return mn(n),fo(2).save()})),So(1),qs(2,"translate"),no()}2&e&&(zi(1),To(zs(2,1,"vpDetail.btn.restore")))}function wM(e,t){1&e&&(to(0,"button",134),qs(1,"translate"),So(2),qs(3,"translate"),no()),2&e&&(po("title",zs(1,2,"vpDetail.titleDeleteProject")),zi(2),To(zs(3,4,"vpDetail.btn.delete")))}function AM(e,t){1&e&&(to(0,"button",135),qs(1,"translate"),So(2),qs(3,"translate"),no()),2&e&&(po("title",zs(1,2,"vpDetail.titleDeleteProject")),zi(2),To(zs(3,4,"vpDetail.btn.destroy")))}function PM(e,t){1&e&&(to(0,"div",136),So(1),qs(2,"translate"),no()),2&e&&(zi(1),To(zs(2,1,"vpDetail.msg.emailRequired")))}function DM(e,t){if(1&e&&(to(0,"option"),So(1),no()),2&e){var n=t.$implicit;zi(1),To(n.name)}}function MM(e,t){1&e&&(to(0,"div",136),So(1),qs(2,"translate"),no()),2&e&&(zi(1),To(zs(2,1,"vpDetail.msg.groupRequired")))}function IM(e,t){1&e&&(to(0,"div",136),So(1),qs(2,"translate"),no()),2&e&&(zi(1),To(zs(2,1,"vpDetail.msg.invalidMessage")))}function SM(e,t){1&e&&(to(0,"button",137),So(1),qs(2,"translate"),no()),2&e&&(zi(1),To(zs(2,1,"vpDetail.btn.invite")))}function TM(e,t){if(1&e){var n=so();to(0,"button",138),uo("click",(function(){return mn(n),fo(2).addNewVPUser()})),So(1),qs(2,"translate"),no()}2&e&&(zi(1),To(zs(2,1,"vpDetail.btn.invite")))}function xM(e,t){if(1&e){var n=so();to(0,"div",20),to(1,"div",21),to(2,"div",22),to(3,"h5",139),So(4),qs(5,"translate"),no(),to(6,"button",24),to(7,"span",25),So(8,"\xd7"),no(),no(),no(),to(9,"div",26),to(10,"div"),to(11,"label",140),So(12),qs(13,"translate"),no(),no(),to(14,"form"),to(15,"div",54),to(16,"label",141),So(17),qs(18,"translate"),no(),to(19,"label",56),So(20),no(),no(),to(21,"div",54),to(22,"label",141),So(23),qs(24,"translate"),no(),to(25,"label",56),So(26),no(),no(),to(27,"div",54),to(28,"label",141),So(29),qs(30,"translate"),no(),to(31,"label",56),So(32),no(),no(),no(),no(),to(33,"div",41),to(34,"button",59),So(35),qs(36,"translate"),no(),to(37,"button",142),uo("click",(function(){mn(n);var e=fo(2);return e.removeVPUser(e.vgUsers[e.userIndex],e.visboproject._id)})),So(38),qs(39,"translate"),no(),no(),no(),no()}if(2&e){var i=fo(2);zi(4),To(zs(5,10,"vpDetail.titleRemoveUser")),zi(8),To(zs(13,12,"vpDetail.msg.removeUserConfirm")),zi(5),xo("",zs(18,14,"vpDetail.lbl.vp"),":"),zi(3),xo("",i.visboproject.name," "),zi(3),xo("",zs(24,16,"vpDetail.lbl.user"),":"),zi(3),To(i.vgUsers[i.userIndex].email),zi(3),xo("",zs(30,18,"vpDetail.lbl.group"),":"),zi(3),To(i.vgUsers[i.userIndex].groupName),zi(3),To(zs(36,20,"vpDetail.btn.back")),zi(3),To(zs(39,22,"vpDetail.btn.delete"))}}function _M(e,t){1&e&&(to(0,"h5",172),So(1),qs(2,"translate"),no()),2&e&&(zi(1),To(zs(2,1,"vpDetail.titleModifyGroup")))}function UM(e,t){1&e&&(to(0,"h5",172),So(1),qs(2,"translate"),no()),2&e&&(zi(1),To(zs(2,1,"vpDetail.titleViewGroup")))}function OM(e,t){1&e&&(to(0,"h5",172),So(1),qs(2,"translate"),no()),2&e&&(zi(1),To(zs(2,1,"vpDetail.titleAddGroup")))}function EM(e,t){if(1&e&&(to(0,"div",54),to(1,"label",173),So(2),qs(3,"translate"),no(),to(4,"label",141),So(5),no(),no()),2&e){var n=fo(3);zi(2),xo("",zs(3,2,"vpDetail.lbl.name"),":"),zi(3),To(n.actGroup.name)}}function LM(e,t){1&e&&(to(0,"div",136),So(1),qs(2,"translate"),no()),2&e&&(zi(1),To(zs(2,1,"vpDetail.msg.groupNameRequired")))}var GM=function(e){return{"has-error":e}};function RM(e,t){if(1&e){var n=so();to(0,"div",29),to(1,"label",174),So(2),qs(3,"translate"),no(),to(4,"input",175,176),uo("ngModelChange",(function(e){return mn(n),fo(3).actGroup.name=e})),no(),Ya(6,LM,3,3,"div",33),no()}if(2&e){var i=$a(5);fo();var r=$a(10),a=fo(2);Xa("ngClass",Gs(6,GM,r.submitted&&!i.valid)),zi(2),xo("",zs(3,4,"vpDetail.lbl.name"),":"),zi(2),Xa("ngModel",a.actGroup.name),zi(2),Xa("ngIf",r.submitted&&!a.actGroup.name.trim())}}function jM(e,t){if(1&e){var n=so();to(0,"div",181),to(1,"a",182),uo("click",(function(){mn(n);var e=fo().$implicit;return fo(4).activateUser(e)})),So(2),no(),no()}if(2&e){var i=fo().$implicit;zi(2),To(i.email)}}function NM(e,t){if(1&e&&(ro(0,96),Ya(1,jM,3,1,"div",180),ao()),2&e){var n=t.$implicit,i=fo(4);zi(1),Xa("ngIf",n.groupId==i.actGroup._id)}}function FM(e,t){if(1&e&&(to(0,"div",177),to(1,"label",178),So(2),qs(3,"translate"),no(),Ya(4,NM,2,1,"ng-container",179),no()),2&e){var n=fo(3);zi(2),To(zs(3,2,"perm.lblGroupMembers")),zi(2),Xa("ngForOf",n.vgUsers)}}function BM(e,t){1&e&&(to(0,"div",177),to(1,"label",178),So(2),qs(3,"translate"),no(),no()),2&e&&(zi(2),To(zs(3,1,"perm.lblNoGroupMembers")))}function HM(e,t){if(1&e&&(to(0,"button",185),So(1),no()),2&e){var n=fo(4);zi(1),To(n.confirm)}}function KM(e,t){if(1&e){var n=so();to(0,"button",186),uo("click",(function(){return mn(n),fo(4).addModifyVPGroup()})),So(1),no()}if(2&e){var i=fo(4);zi(1),To(i.confirm)}}function qM(e,t){if(1&e&&(to(0,"div"),Ya(1,HM,2,1,"button",183),Ya(2,KM,2,1,"button",184),no()),2&e){fo();var n=$a(10);zi(1),Xa("ngIf",!n.form.valid),zi(1),Xa("ngIf",n.form.valid)}}function zM(e,t){if(1&e){var n=so();to(0,"div",21),to(1,"div",22),Ya(2,_M,3,3,"h5",143),Ya(3,UM,3,3,"h5",143),Ya(4,OM,3,3,"h5",143),to(5,"button",24),to(6,"span",25),So(7,"\xd7"),no(),no(),no(),to(8,"div",26),to(9,"form",144,145),Ya(11,EM,6,4,"div",146),Ya(12,RM,7,8,"div",147),to(13,"div"),So(14),qs(15,"translate"),no(),to(16,"div",148),to(17,"input",149,150),uo("ngModelChange",(function(e){return mn(n),fo(2).actGroup.checkedVPViewRestricted=e})),no(),to(19,"label",151),So(20),qs(21,"translate"),no(),no(),to(22,"div",148),to(23,"input",152,153),uo("ngModelChange",(function(e){return mn(n),fo(2).actGroup.checkedVPView=e})),no(),to(25,"label",154),So(26),qs(27,"translate"),no(),no(),to(28,"div",148),to(29,"input",155,156),uo("ngModelChange",(function(e){return mn(n),fo(2).actGroup.checkedVPViewAudit=e})),no(),to(31,"label",157),So(32),qs(33,"translate"),no(),no(),to(34,"div",148),to(35,"input",158,159),uo("ngModelChange",(function(e){return mn(n),fo(2).actGroup.checkedVPModify=e})),no(),to(37,"label",160),So(38),qs(39,"translate"),no(),no(),to(40,"div",148),to(41,"input",161,162),uo("ngModelChange",(function(e){return mn(n),fo(2).actGroup.checkedCreateVariant=e})),no(),to(43,"label",163),So(44),qs(45,"translate"),no(),no(),to(46,"div",148),to(47,"input",164,165),uo("ngModelChange",(function(e){return mn(n),fo(2).actGroup.checkedVPManagePerm=e})),no(),to(49,"label",166),So(50),qs(51,"translate"),no(),no(),to(52,"div",148),to(53,"input",167,168),uo("ngModelChange",(function(e){return mn(n),fo(2).actGroup.checkedVPDelete=e})),no(),to(55,"label",169),So(56),qs(57,"translate"),no(),no(),Ya(58,FM,5,4,"div",170),Ya(59,BM,4,3,"div",170),to(60,"div",41),to(61,"button",171),So(62),qs(63,"translate"),no(),Ya(64,qM,3,2,"div",0),no(),no(),no(),no()}if(2&e){var i=fo(2);zi(2),Xa("ngIf","Modify"==i.confirm),zi(1),Xa("ngIf","View"==i.confirm),zi(1),Xa("ngIf",!i.actGroup._id),zi(7),Xa("ngIf",i.actGroup.internal),zi(1),Xa("ngIf",!i.actGroup.internal),zi(2),To(zs(15,24,"perm.titleVPPerm")),zi(3),Xa("ngModel",i.actGroup.checkedVPViewRestricted),zi(3),To(zs(21,26,"perm.vpViewRestricted")),zi(3),Xa("ngModel",i.actGroup.checkedVPView),zi(3),To(zs(27,28,"perm.vpView")),zi(3),Xa("ngModel",i.actGroup.checkedVPViewAudit),zi(3),To(zs(33,30,"perm.vpViewAudit")),zi(3),Xa("ngModel",i.actGroup.checkedVPModify),zi(3),To(zs(39,32,"perm.vpModify")),zi(3),Xa("ngModel",i.actGroup.checkedCreateVariant),zi(3),To(zs(45,34,"perm.vpCreateVariant")),zi(3),Xa("ngModel",i.actGroup.checkedVPManagePerm),zi(3),To(zs(51,36,"perm.vpManagePerm")),zi(3),Xa("ngModel",i.actGroup.checkedVPDelete),zi(3),To(zs(57,38,"perm.vpDelete")),zi(2),Xa("ngIf",i.helperUsersPerGroup(i.actGroup._id)),zi(1),Xa("ngIf",!i.helperUsersPerGroup(i.actGroup._id)),zi(3),To(zs(63,40,"vpDetail.btn.back")),zi(2),Xa("ngIf",i.hasVPPerm(i.permVP.ManagePerm)&&!i.actGroup.global&&!i.deleted)}}function QM(e,t){if(1&e){var n=so();to(0,"div",20),to(1,"div",21),to(2,"div",22),to(3,"h5",139),So(4),qs(5,"translate"),no(),to(6,"button",24),to(7,"span",25),So(8,"\xd7"),no(),no(),no(),to(9,"div",26),to(10,"div"),to(11,"label",140),So(12),qs(13,"translate"),no(),no(),to(14,"form"),to(15,"div",54),to(16,"label",187),So(17),qs(18,"translate"),no(),to(19,"label",56),So(20),no(),no(),to(21,"div",54),to(22,"label",141),So(23),qs(24,"translate"),no(),to(25,"label",56),So(26),no(),no(),to(27,"div",54),to(28,"label",141),So(29),qs(30,"translate"),no(),to(31,"label",56),So(32),no(),no(),no(),no(),to(33,"div",41),to(34,"button",59),So(35),qs(36,"translate"),no(),to(37,"button",188),uo("click",(function(){mn(n);var e=fo(2);return e.removeVPGroup(e.vgGroups[e.groupIndex],e.visboproject._id)})),So(38),qs(39,"translate"),no(),no(),no(),no()}if(2&e){var i=fo(2);zi(4),To(zs(5,10,"vpDetail.titleDeleteGroup")),zi(8),To(zs(13,12,"vpDetail.msg.removeGroupConfirm")),zi(5),xo("",zs(18,14,"vpDetail.lbl.vp"),":"),zi(3),xo("",i.visboproject.name," "),zi(3),xo("",zs(24,16,"vpDetail.lbl.group"),":"),zi(3),To(i.vgGroups[i.groupIndex].name),zi(3),xo("",zs(30,18,"vpDetail.lbl.members"),":"),zi(3),To(i.vgGroups[i.groupIndex].users.length),zi(3),To(zs(36,20,"vpDetail.btn.back")),zi(3),To(zs(39,22,"vpDetail.btn.delete"))}}function WM(e,t){1&e&&(to(0,"label",140),So(1),qs(2,"translate"),no()),2&e&&(zi(1),To(zs(2,1,"vpDetail.msg.removeProjectConfirm")))}function JM(e,t){1&e&&(to(0,"label",189),So(1),qs(2,"translate"),no()),2&e&&(zi(1),To(zs(2,1,"vpDetail.msg.destroyProjectConfirm")))}function YM(e,t){if(1&e){var n=so();to(0,"button",190),uo("click",(function(){mn(n);var e=fo(2);return e.delete(e.visboproject)})),So(1),qs(2,"translate"),no()}2&e&&(zi(1),To(zs(2,1,"vpDetail.btn.delete")))}function $M(e,t){if(1&e){var n=so();to(0,"button",191),uo("click",(function(){mn(n);var e=fo(2);return e.delete(e.visboproject)})),So(1),qs(2,"translate"),no()}2&e&&(zi(1),To(zs(2,1,"vpDetail.btn.destroy")))}function ZM(e,t){1&e&&io(0,"input",211)}function XM(e,t){1&e&&io(0,"input",212)}function eI(e,t){1&e&&io(0,"input",213)}function tI(e,t){1&e&&io(0,"input",214)}function nI(e,t){1&e&&io(0,"input",215)}function iI(e,t){1&e&&io(0,"input",216)}function rI(e,t){1&e&&io(0,"input",217)}function aI(e,t){1&e&&io(0,"input",218)}function oI(e,t){1&e&&io(0,"input",219)}function sI(e,t){1&e&&io(0,"input",220)}function lI(e,t){1&e&&io(0,"input",221)}function cI(e,t){1&e&&io(0,"input",222)}function uI(e,t){1&e&&io(0,"input",223)}function dI(e,t){1&e&&io(0,"input",224)}function hI(e,t){if(1&e){var n=so();to(0,"div",181),to(1,"a",225),uo("click",(function(){mn(n);var e=fo().$implicit;return fo(3).activateGroup(e)})),So(2),no(),no()}if(2&e){var i=fo().$implicit;zi(2),To(i.groupName)}}function vI(e,t){if(1&e&&(ro(0,96),Ya(1,hI,3,1,"div",180),ao()),2&e){var n=t.$implicit,i=fo(3);zi(1),Xa("ngIf",n.email==i.vgUsers[i.userIndex].email)}}var fI=function(e){return{name:e}};function pI(e,t){if(1&e&&(to(0,"div",192),to(1,"div",193),to(2,"div",21),to(3,"div",22),to(4,"h5",194),So(5),qs(6,"translate"),no(),to(7,"button",24),to(8,"span",25),So(9,"\xd7"),no(),no(),no(),to(10,"div",26),to(11,"div"),So(12),qs(13,"translate"),no(),to(14,"div",148),Ya(15,ZM,1,0,"input",195),Ya(16,XM,1,0,"input",196),to(17,"label",154),So(18),qs(19,"translate"),no(),no(),to(20,"div",148),Ya(21,eI,1,0,"input",197),Ya(22,tI,1,0,"input",198),to(23,"label",154),So(24),qs(25,"translate"),no(),no(),to(26,"div",148),Ya(27,nI,1,0,"input",199),Ya(28,iI,1,0,"input",200),to(29,"label",157),So(30),qs(31,"translate"),no(),no(),to(32,"div",148),Ya(33,rI,1,0,"input",201),Ya(34,aI,1,0,"input",202),to(35,"label",160),So(36),qs(37,"translate"),no(),no(),to(38,"div",148),Ya(39,oI,1,0,"input",203),Ya(40,sI,1,0,"input",204),to(41,"label",163),So(42),qs(43,"translate"),no(),no(),to(44,"div",148),Ya(45,lI,1,0,"input",205),Ya(46,cI,1,0,"input",206),to(47,"label",166),So(48),qs(49,"translate"),no(),no(),to(50,"div",148),Ya(51,uI,1,0,"input",207),Ya(52,dI,1,0,"input",208),to(53,"label",169),So(54),qs(55,"translate"),no(),no(),to(56,"label",209),So(57),qs(58,"translate"),no(),Ya(59,vI,2,1,"ng-container",179),to(60,"div",41),to(61,"button",210),So(62),qs(63,"translate"),no(),no(),no(),no(),no(),no()),2&e){var n=fo(2);zi(5),To(Qs(6,26,"vpDetail.titlePermUser",Gs(49,fI,n.vgUsers[n.userIndex].email))),zi(7),To(zs(13,29,"perm.titleVPPerm")),zi(3),Xa("ngIf",n.hasUserVPPerm(n.permVP.ViewRestricted)),zi(1),Xa("ngIf",!n.hasUserVPPerm(n.permVP.ViewRestricted)),zi(2),To(zs(19,31,"perm.vpViewRestricted")),zi(3),Xa("ngIf",n.hasUserVPPerm(n.permVP.View)),zi(1),Xa("ngIf",!n.hasUserVPPerm(n.permVP.View)),zi(2),To(zs(25,33,"perm.vpView")),zi(3),Xa("ngIf",n.hasUserVPPerm(n.permVP.ViewAudit)),zi(1),Xa("ngIf",!n.hasUserVPPerm(n.permVP.ViewAudit)),zi(2),To(zs(31,35,"perm.vpViewAudit")),zi(3),Xa("ngIf",n.hasUserVPPerm(n.permVP.Modify)),zi(1),Xa("ngIf",!n.hasUserVPPerm(n.permVP.Modify)),zi(2),To(zs(37,37,"perm.vpModify")),zi(3),Xa("ngIf",n.hasUserVPPerm(n.permVP.CreateVariant)),zi(1),Xa("ngIf",!n.hasUserVPPerm(n.permVP.CreateVariant)),zi(2),To(zs(43,39,"perm.vpCreateVariant")),zi(3),Xa("ngIf",n.hasUserVPPerm(n.permVP.ManagePerm)),zi(1),Xa("ngIf",!n.hasUserVPPerm(n.permVP.ManagePerm)),zi(2),To(zs(49,41,"perm.vpManagePerm")),zi(3),Xa("ngIf",n.hasUserVPPerm(n.permVP.DeleteVP)),zi(1),Xa("ngIf",!n.hasUserVPPerm(n.permVP.DeleteVP)),zi(2),To(zs(55,43,"perm.vpDelete")),zi(3),To(zs(58,45,"perm.lblGroupMembership")),zi(2),Xa("ngForOf",n.vgUsers),zi(3),To(zs(63,47,"vpDetail.btn.back"))}}function gI(e,t){1&e&&(to(0,"div",136),So(1),qs(2,"translate"),no()),2&e&&(zi(1),To(zs(2,1,"vpDetail.msg.variantRequired")))}function mI(e,t){1&e&&(to(0,"button",226),So(1),qs(2,"translate"),no()),2&e&&(zi(1),To(zs(2,1,"vpDetail.btn.createVariant")))}function bI(e,t){if(1&e){var n=so();to(0,"button",227),uo("click",(function(){return mn(n),fo(2).addNewVPVariant()})),So(1),qs(2,"translate"),no()}2&e&&(zi(1),To(zs(2,1,"vpDetail.btn.createVariant")))}function yI(e,t){if(1&e){var n=so();to(0,"div",20),to(1,"div",21),to(2,"div",22),to(3,"h5",228),So(4),qs(5,"translate"),no(),to(6,"button",24),to(7,"span",25),So(8,"\xd7"),no(),no(),no(),to(9,"div",26),to(10,"div"),to(11,"label",140),So(12),qs(13,"translate"),no(),no(),to(14,"form"),to(15,"div",54),to(16,"label",229),So(17),qs(18,"translate"),no(),to(19,"label",230),So(20),no(),no(),to(21,"div",54),to(22,"label",229),So(23),qs(24,"translate"),no(),to(25,"label",230),So(26),no(),no(),to(27,"div",54),to(28,"label",229),So(29),qs(30,"translate"),no(),to(31,"label",230),So(32),no(),no(),no(),no(),to(33,"div",41),to(34,"button",59),So(35),qs(36,"translate"),no(),to(37,"button",231),uo("click",(function(){mn(n);var e=fo(2);return e.removeVariant(e.variantIndex,e.visboproject)})),So(38),qs(39,"translate"),no(),no(),no(),no()}if(2&e){var i=fo(2);zi(4),To(zs(5,10,"vpDetail.titleRemoveVariant")),zi(8),To(zs(13,12,"vpDetail.msg.removeVariantConfirm")),zi(5),xo("",zs(18,14,"vpDetail.lbl.vp"),":"),zi(3),xo("",i.visboproject.name," "),zi(3),xo("",zs(24,16,"vpDetail.lbl.variant"),":"),zi(3),To(i.visboproject.variant[i.variantIndex].variantName),zi(3),xo("",zs(30,18,"vpDetail.lbl.user"),":"),zi(3),To(i.visboproject.variant[i.variantIndex].email),zi(3),To(zs(36,20,"vpDetail.btn.back")),zi(3),To(zs(39,22,"vpDetail.btn.delete"))}}function kI(e,t){if(1&e){var n=so();to(0,"div"),to(1,"h3"),So(2),qs(3,"translate"),to(4,"a",1),uo("click",(function(){mn(n);var e=fo();return e.gotoVP(e.visboproject)})),So(5),qs(6,"uppercase"),no(),no(),to(7,"h5"),So(8),qs(9,"translate"),Ya(10,UD,2,1,"a",2),Ya(11,OD,2,1,"span",0),no(),to(12,"form"),to(13,"div",3),to(14,"label",4),So(15),qs(16,"translate"),no(),Ya(17,ED,1,1,"input",5),Ya(18,LD,2,1,"label",6),no(),Ya(19,jD,6,5,"div",7),to(20,"div",3),to(21,"label",8),So(22),qs(23,"translate"),no(),to(24,"label",9),So(25),no(),no(),Ya(26,ND,8,8,"div",7),to(27,"div",10),to(28,"label",11),So(29),qs(30,"translate"),no(),to(31,"label",12),So(32),qs(33,"date"),no(),to(34,"label",13),So(35),qs(36,"date"),no(),no(),no(),Ya(37,kM,14,10,"div",0),to(38,"div",14),Ya(39,CM,3,3,"button",15),Ya(40,VM,3,3,"button",16),to(41,"button",1),uo("click",(function(){return mn(n),fo().goBack()})),So(42),qs(43,"translate"),no(),Ya(44,wM,4,6,"button",17),Ya(45,AM,4,6,"button",18),no(),to(46,"div",19),to(47,"div",20),to(48,"div",21),to(49,"div",22),to(50,"h5",23),So(51),qs(52,"translate"),no(),to(53,"button",24),to(54,"span",25),So(55,"\xd7"),no(),no(),no(),to(56,"div",26),to(57,"form",27,28),to(59,"div",29),to(60,"label",30),So(61),qs(62,"translate"),no(),to(63,"input",31,32),uo("ngModelChange",(function(e){return mn(n),fo().newUserInvite.email=e})),no(),Ya(65,PM,3,3,"div",33),no(),to(66,"div",29),to(67,"label",34),So(68),qs(69,"translate"),no(),to(70,"select",35,36),uo("ngModelChange",(function(e){return mn(n),fo().newUserInvite.groupName=e})),io(72,"option"),Ya(73,DM,2,1,"option",37),no(),Ya(74,MM,3,3,"div",33),no(),to(75,"div",29),to(76,"label",38),So(77),qs(78,"translate"),no(),to(79,"textarea",39,40),uo("ngModelChange",(function(e){return mn(n),fo().newUserInvite.inviteMessage=e})),So(81," "),no(),no(),Ya(82,IM,3,3,"div",33),to(83,"div",41),to(84,"button",42),So(85),qs(86,"translate"),no(),Ya(87,SM,3,3,"button",43),Ya(88,TM,3,3,"button",44),no(),no(),no(),no(),no(),no(),to(89,"div",45),Ya(90,xM,40,24,"div",46),no(),to(91,"div",47),to(92,"div",20),Ya(93,zM,65,42,"div",48),no(),no(),to(94,"div",49),Ya(95,QM,40,24,"div",46),no(),to(96,"div",50),to(97,"div",20),to(98,"div",21),to(99,"div",22),to(100,"h5",51),So(101),qs(102,"translate"),no(),to(103,"button",24),to(104,"span",25),So(105,"\xd7"),no(),no(),no(),to(106,"div",26),to(107,"div"),Ya(108,WM,3,3,"label",52),Ya(109,JM,3,3,"label",53),no(),to(110,"form"),to(111,"div",54),to(112,"label",55),So(113),qs(114,"translate"),no(),to(115,"label",56),So(116),no(),no(),to(117,"div",54),to(118,"label",57),So(119),qs(120,"translate"),no(),to(121,"label",56),So(122),no(),no(),to(123,"div",54),to(124,"label",58),So(125),qs(126,"translate"),no(),to(127,"label",56),So(128),no(),no(),no(),no(),to(129,"div",41),to(130,"button",59),So(131),qs(132,"translate"),no(),Ya(133,YM,3,3,"button",60),Ya(134,$M,3,3,"button",61),no(),no(),no(),no(),Ya(135,pI,64,51,"div",62),to(136,"div",63),to(137,"div",20),to(138,"div",21),to(139,"div",22),to(140,"h5",64),So(141),qs(142,"translate"),no(),to(143,"button",24),to(144,"span",25),So(145,"\xd7"),no(),no(),no(),to(146,"div",26),to(147,"form",65,66),to(149,"div",29),to(150,"label",67),So(151),qs(152,"translate"),no(),to(153,"input",68,69),uo("ngModelChange",(function(e){return mn(n),fo().newVariant=e})),no(),Ya(155,gI,3,3,"div",33),no(),to(156,"div",41),to(157,"button",42),So(158),qs(159,"translate"),no(),Ya(160,mI,3,3,"button",70),Ya(161,bI,3,3,"button",71),no(),no(),no(),no(),no(),no(),to(162,"div",72),Ya(163,yI,40,24,"div",46),no(),no()}if(2&e){var i=$a(58),r=$a(64),a=$a(71),o=$a(80),s=$a(148),l=$a(154),c=fo();zi(2),xo("",zs(3,63,"vpDetail.title"),": "),zi(3),To(zs(6,65,c.visboproject.name)),zi(3),xo("",zs(9,67,"vpDetail.titleVC"),": "),zi(2),Xa("ngIf",c.hasVCPerm(c.permVC.View)),zi(1),Xa("ngIf",!c.hasVCPerm(c.permVC.View)),zi(4),xo("",zs(16,69,"vpDetail.lbl.name"),":"),zi(2),Xa("ngIf",c.hasVPPerm(c.permVP.Modify)),zi(1),Xa("ngIf",!c.hasVPPerm(c.permVP.Modify)),zi(1),Xa("ngIf",c.hasVPPerm(c.permVP.Modify)||c.visboproject.description),zi(3),xo("",zs(23,71,"vpDetail.lbl.type"),":"),zi(3),xo("",c.getVPType(c.visboproject.vpType)," "),zi(1),Xa("ngIf",c.hasVPPerm(c.permVP.Modify+c.permVP.CreateVariant)),zi(3),xo("",zs(30,73,"vpDetail.lbl.createdUpdated"),":"),zi(3),xo("",Qs(33,75,c.visboproject.createdAt,"dd.MM.yyyy HH:mm:ss")," "),zi(3),xo("",Qs(36,78,c.visboproject.updatedAt,"dd.MM.yyyy HH:mm:ss")," "),zi(2),Xa("ngIf",c.getVPPerm()!=c.permVP.View),zi(2),Xa("ngIf",!c.deleted&&c.hasVPPerm(c.permVP.Modify)),zi(1),Xa("ngIf",c.deleted&&c.hasVPPerm(c.permVP.DeleteVP)),zi(2),To(zs(43,81,"vpDetail.btn.back")),zi(2),Xa("ngIf",!c.deleted&&c.hasVPPerm(c.permVP.DeleteVP)),zi(1),Xa("ngIf",c.deleted&&c.hasVPPerm(c.permVP.DeleteVP)),zi(6),To(zs(52,83,"vpDetail.titleAddUser")),zi(8),Xa("ngClass",Gs(109,GM,i.submitted&&!r.valid)),zi(2),xo("",zs(62,85,"vpDetail.lbl.email"),":"),zi(2),Xa("ngModel",c.newUserInvite.email),zi(2),Xa("ngIf",i.submitted&&!r.valid),zi(1),Xa("ngClass",Gs(111,GM,i.submitted&&!a.valid)),zi(2),xo("",zs(69,87,"vpDetail.lbl.group"),":"),zi(2),Xa("ngModel",c.newUserInvite.groupName),zi(3),Xa("ngForOf",c.vgGroupsInvite),zi(1),Xa("ngIf",i.submitted&&!a.valid),zi(1),Xa("ngClass",Gs(113,GM,i.submitted&&!o.valid)),zi(2),xo("",zs(78,89,"vpDetail.lbl.message"),":"),zi(2),Xa("ngModel",c.newUserInvite.inviteMessage),zi(3),Xa("ngIf",i.submitted&&!o.valid),zi(3),To(zs(86,91,"vpDetail.btn.cancel")),zi(2),Xa("ngIf",!(r.valid&&a.valid)),zi(1),Xa("ngIf",r.valid&&a.valid),zi(2),Xa("ngIf",c.userIndex>=0&&c.userIndex<c.vgUsers.length),zi(3),Xa("ngIf",c.actGroup),zi(2),Xa("ngIf",c.groupIndex>=0&&c.groupIndex<c.vgGroups.length),zi(6),To(zs(102,93,"vpDetail.titleDeleteProject")),zi(7),Xa("ngIf",!c.deleted),zi(1),Xa("ngIf",c.deleted),zi(4),xo("",zs(114,95,"vpDetail.lbl.vp"),":"),zi(3),xo("",c.visboproject.name," "),zi(3),xo("",zs(120,97,"vpDetail.lbl.description"),":"),zi(3),xo("",c.visboproject.description," "),zi(3),xo("",zs(126,99,"vpDetail.lbl.versions"),":"),zi(3),xo("",c.visboproject.vpvCount," "),zi(3),To(zs(132,101,"vpDetail.btn.back")),zi(2),Xa("ngIf",!c.deleted),zi(1),Xa("ngIf",c.deleted),zi(1),Xa("ngIf",c.vgUsers&&c.userIndex>=0),zi(6),To(zs(142,103,"vpDetail.titleAddVariant")),zi(8),Xa("ngClass",Gs(115,GM,s.submitted&&!l.valid)),zi(2),xo("",zs(152,105,"vpDetail.lbl.variant"),":"),zi(2),Xa("ngModel",c.newVariant),zi(2),Xa("ngIf",s.submitted&&!l.valid),zi(3),To(zs(159,107,"vpDetail.btn.cancel")),zi(2),Xa("ngIf",!l.valid),zi(1),Xa("ngIf",l.valid),zi(2),Xa("ngIf",c.variantIndex>=0&&c.variantIndex<c.visboproject.variant.length)}}var CI,VI=((CI=function(){function e(t,n,i,r,a,o,s,l){p(this,e),this.messageService=t,this.route=n,this.visboprojectService=i,this.location=r,this.router=a,this.alertService=o,this.translate=s,this.titleService=l,this.newUserInvite=new pf,this.actGroup=new vy,this.actView="User",this.combinedPerm=void 0,this.combinedUserPerm=void 0,this.permVC=uy,this.permVP=dy,this.deleted=!1,this.sortUserColumn=1,this.sortUserAscending=!0,this.sortGroupColumn=1,this.sortGroupAscending=!0,this.sortVariantColumn=1,this.sortVariantAscending=!0}return m(e,[{key:"ngOnInit",value:function(){this.deleted=!!this.route.snapshot.queryParams.deleted,this.currentUser=JSON.parse(localStorage.getItem("currentUser")),this.getVisboProject(),this.getVisboProjectUsers()}},{key:"getVisboProject",value:function(){var e=this,t=this.route.snapshot.paramMap.get("id");this.log("VisboProject Detail of: "+t),this.visboprojectService.getVisboProject(t,!1,this.deleted).subscribe((function(n){e.visboproject=n,e.combinedPerm=n.perm,e.titleService.setTitle(e.translate.instant("vpDetail.titleName",{name:n.name})),e.log("Get VisboProject for VP ".concat(t," Perm ").concat(JSON.stringify(e.combinedPerm)," "))}),(function(t){if(e.log("get VPs failed: error: ".concat(t.status," message: ").concat(t.error.message)),403===t.status){var n=e.translate.instant("vpDetail.msg.errorPerm");e.alertService.error(n)}else e.alertService.error(Zv(t))}))}},{key:"hasVCPerm",value:function(e){return void 0!==this.combinedPerm&&(this.combinedPerm.vc&e)>0}},{key:"hasVPPerm",value:function(e){return void 0!==this.combinedPerm&&(this.combinedPerm.vp&e)>0}},{key:"hasUserVPPerm",value:function(e){return void 0!==this.combinedUserPerm&&(this.combinedUserPerm.vp&e)>0}},{key:"getVPPerm",value:function(){return void 0===this.combinedPerm?0:this.combinedPerm.vp}},{key:"viewRestriction",value:function(){if(!this.visboproject.restrict||!this.visboproject.restrict.length)return!1;var e=this.combinedPerm.vp||0;return(e&=this.permVP.Modify+this.permVP.ManagePerm+this.permVP.DeleteVP)>0}},{key:"getVPType",value:function(e){return this.translate.instant("vp.type.vpType"+e)}},{key:"toggleView",value:function(e){this.actView=e}},{key:"getVisboProjectUsers",value:function(){var e=this,t=this.route.snapshot.paramMap.get("id");this.log("VisboProject UserList of: ".concat(t," Deleted ").concat(this.deleted)),this.visboprojectService.getVPUsers(t,!1,this.deleted).subscribe((function(t){e.vgUsers=t.users,e.vgGroups=t.groups,e.vgGroupsInvite=e.vgGroups.filter((function(e){return"VP"===e.groupType})),e.log("fetched Users ".concat(e.vgUsers.length,", Groups ").concat(e.vgGroups.length,", Invite Groups ").concat(e.vgGroupsInvite.length)),e.sortUserTable(),e.sortGroupTable()}),(function(t){if(e.log("Get VP Users failed: error: ".concat(t.status," message: ").concat(t.error.message)),403===t.status){var n=e.translate.instant("vpDetail.msg.errorPerm");e.alertService.error(n)}else e.alertService.error(Zv(t))}))}},{key:"goBack",value:function(){this.location.back()}},{key:"delete",value:function(e){var t=this;this.visboprojectService.deleteVisboProject(e,this.deleted).subscribe((function(){var n=t.translate.instant("vpDetail.msg.removeProjectSuccess",{name:t.visboproject.name});t.alertService.success(n,!0),t.log("delete VP success"),t.router.navigate(["vp/".concat(e.vcid)],t.deleted?{queryParams:{deleted:t.deleted}}:{})}),(function(n){if(t.log("delete VP failed: error: ".concat(n.status," message: ").concat(n.error.message)),403===n.status){var i=t.translate.instant("vpDetail.msg.errorPermVP",{name:e.name});t.alertService.error(i)}else t.alertService.error(Zv(n))}))}},{key:"gotoVPRestriction",value:function(e){this.log("goto VP Restriction: ".concat(e._id," Deleted ").concat(this.deleted)),this.router.navigate(["vpRestrict/".concat(e._id)],this.deleted?{queryParams:{deleted:this.deleted}}:{})}},{key:"gotoVPAudit",value:function(e){this.log("goto VP Audit: ".concat(e._id," Deleted ").concat(this.deleted)),this.router.navigate(["vpAudit/".concat(e._id)],this.deleted?{queryParams:{deleted:this.deleted}}:{})}},{key:"gotoVCDetail",value:function(e){this.router.navigate(["vcDetail/".concat(e.vcid)])}},{key:"gotoVPList",value:function(e){this.log("goto VP List: ".concat(e._id," Deleted ").concat(this.deleted)),this.router.navigate(["vp/".concat(e.vcid)],this.deleted?{queryParams:{deleted:this.deleted}}:{})}},{key:"gotoVP",value:function(e){this.log("goto VP: ".concat(e._id," Deleted ").concat(this.deleted));var t="vpKeyMetrics/";e.vpType===sk.Portfolio&&(t="vpf/"),this.router.navigate([t.concat(e._id)],this.deleted?{queryParams:{deleted:this.deleted}}:{})}},{key:"gotoVPView",value:function(e){this.log("goto VP List: ".concat(e._id," Deleted ").concat(this.deleted)),this.router.navigate(["vpv/".concat(e._id)],this.deleted?{queryParams:{deleted:this.deleted}}:{})}},{key:"save",value:function(){var e=this;this.visboprojectService.updateVisboProject(this.visboproject,this.deleted).subscribe((function(){var t=e.translate.instant("vpDetail.msg.updateProjectSuccess",{name:e.visboproject.name});e.alertService.success(t,!0),e.goBack()}),(function(t){if(e.log("save VP failed: error: ".concat(t.status," message: ").concat(t.error.message)),403===t.status){var n=e.translate.instant("vpDetail.msg.errorPermVP",{name:e.visboproject.name});e.alertService.error(n)}else if(409===t.status){var i=e.translate.instant("vpDetail.msg.errorVPConflict",{name:e.visboproject.name});e.alertService.error(i)}else e.alertService.error(Zv(t))}))}},{key:"addNewVPUser",value:function(){var e=this,t=this.newUserInvite.email.trim(),n=this.newUserInvite.groupName.trim(),i=this.vgGroups.filter((function(e){return e.name===n}))[0],r=i._id,a="";this.newUserInvite.inviteMessage&&(a=this.newUserInvite.inviteMessage.trim());var o=this.visboproject._id;this.log("Add VisboProject User: ".concat(t," Group: ").concat(n,"/").concat(r," VP: ").concat(o)),t&&r&&this.visboprojectService.addVPUser(t,r,a,o).subscribe((function(n){var r=new fy;r.userId=n.users.filter((function(e){return e.email===t}))[0].userId,r.email=t,r.groupId=n._id,r.groupName=n.name,r.groupType=i.groupType,r.internal=i.internal,e.log("Add VisboCenter User Push: "+JSON.stringify(r)),e.vgUsers.push(r),e.sortUserTable();for(var a=0;a<e.vgGroups.length;a++)if(e.vgGroups[a]._id===n._id){e.vgGroups[a]=n;break}var o=e.translate.instant("vpDetail.msg.addUserSuccess",{name:t});e.alertService.success(o)}),(function(t){if(e.log("Add VisboProject User error: "+t.error.message),403===t.status){var n=e.translate.instant("vpDetail.msg.errorAddUserPerm");e.alertService.error(n)}else e.log("Error during add VP user "+t.error.message),e.alertService.error(Zv(t))}))}},{key:"addNewVPVariant",value:function(){var e=this;this.newVariant&&this.newVariant.trim()&&(this.newVariant=this.newVariant.trim(),this.visboprojectService.createVariant(this.newVariant,this.visboproject._id).subscribe((function(t){e.visboproject.variant.push(t);var n=e.translate.instant("vpDetail.msg.createVariantSuccess",{name:t.variantName});e.alertService.success(n)}),(function(t){if(e.log("Create Variant error: "+t.error.message),403===t.status){var n=e.translate.instant("vpDetail.msg.errorCreateVariantPerm");e.alertService.error(n)}else if(409===t.status){var i=e.translate.instant("vpDetail.msg.errorVariantConflict",{name:e.newVariant});e.alertService.error(i)}else e.log("Error during creating Variant "+t.error.message),e.alertService.error(Zv(t))})))}},{key:"calcCombinedPerm",value:function(e){this.userIndex=e,this.combinedUserPerm={system:0,vc:0,vp:0},this.vgUsers.forEach(this.addUserPerm,this),this.log("Combined Permission for ".concat(this.vgUsers[e].email,"  ").concat(JSON.stringify(this.combinedUserPerm)))}},{key:"addUserPerm",value:function(e){if(e.email===this.vgUsers[this.userIndex].email){this.log("Add User Permission for "+e.groupName);var t=this.vgGroups.findIndex((function(t){return t.name===e.groupName}));t>=0?this.vgGroups[t].permission?this.combinedUserPerm.vp=this.combinedUserPerm.vp|(this.vgGroups[t].permission.vp||0):this.log("Permission for Group not set "+e.groupName):this.log("Group not found "+e.groupName)}}},{key:"helperRemoveUser",value:function(e){this.userIndex=e}},{key:"helperRemoveGroup",value:function(e){this.groupIndex=e}},{key:"helperRemoveVariant",value:function(e){this.variantIndex=e}},{key:"helperUsersPerGroup",value:function(e){var t=this.vgGroups&&this.vgGroups.find((function(t){return t._id===e}));return t?t.users.length:0}},{key:"removeVPUser",value:function(e,t){var n=this;this.log("Remove VisboProject User: ".concat(e.email,"/").concat(e.userId," Group: ").concat(e.groupName," VP: ").concat(t)),this.visboprojectService.deleteVPUser(e,t).subscribe((function(){n.vgUsers=n.vgUsers.filter((function(t){return t!==e}));for(var t=0;t<n.vgGroups.length;t++)if(n.vgGroups[t]._id===e.groupId){for(var i=0;i<n.vgGroups[t].users.length;i++)if(n.vgGroups[t].users[i].userId===e.userId){n.vgGroups[t].users.splice(i,1);break}break}var r=n.translate.instant("vpDetail.msg.removeUserSuccess",{name:e.email});n.alertService.success(r)}),(function(e){if(n.log("Remove VisboProject User error: "+e.error.message),403===e.status){var t=n.translate.instant("vpDetail.msg.errorRemoveUserPerm");n.alertService.error(t)}else n.log("Error during remove User from VP user "+e.error.message),n.alertService.error(Zv(e))}))}},{key:"removeVariant",value:function(e,t){var n=this;this.log("Remove VisboProject Variant: ".concat(t.variant[e].variantName," VP: ").concat(t._id)),this.visboprojectService.deleteVariant(t.variant[e]._id,t._id).subscribe((function(){var i=n.translate.instant("vpDetail.msg.removeVariantSuccess",{name:t.variant[e].variantName});n.visboproject.variant.splice(e,1),n.alertService.success(i)}),(function(i){if(n.log("Remove VisboProject Variant error: "+i.error.message),403===i.status){var r=n.translate.instant("vpDetail.msg.errorRemoveVariantPerm",{name:t.variant[e].variantName});n.alertService.error(r)}else if(409===i.status){var a=n.translate.instant("vpDetail.msg.errorRemoveVariantConflict",{name:t.variant[e].variantName});n.alertService.error(a)}else n.log("Error during remove Variant from VP "+i.error.message),n.alertService.error(Zv(i))}))}},{key:"helperVPPerm",value:function(e){var t=0;return e.checkedVPViewRestricted&&(t+=this.permVP.ViewRestricted),e.checkedVPView&&(t+=this.permVP.View),e.checkedVPViewAudit&&(t+=this.permVP.ViewAudit),e.checkedVPModify&&(t+=this.permVP.Modify),e.checkedCreateVariant&&(t+=this.permVP.CreateVariant),e.checkedVPManagePerm&&(t+=this.permVP.ManagePerm),e.checkedVPDelete&&(t+=this.permVP.DeleteVP),t}},{key:"activateGroup",value:function(e){this.log("Activate Group : "+e.groupName);var t=this.vgGroups.find((function(t){return t.name==e.groupName}));this.initGroup(t)}},{key:"activateUser",value:function(e){this.log("Activate User : "+e.email);var t=this.vgUsers.findIndex((function(t){return t.email==e.email}));t>=0&&this.calcCombinedPerm(t)}},{key:"initGroup",value:function(e){this.actGroup=new vy,e?(this.confirm="VP"===e.groupType?"Modify":"View",this.actGroup._id=e._id,this.log("Init Group Set GroupID : ".concat(this.actGroup._id," ID ").concat(e._id)),this.actGroup.name=e.name,this.actGroup.groupType=e.groupType,this.actGroup.internal=e.internal,this.actGroup.global=e.global,this.actGroup.checkedView=(e.permission.vc&this.permVC.View)>0,this.actGroup.checkedViewAudit=(e.permission.vc&this.permVC.ViewAudit)>0,this.actGroup.checkedModify=(e.permission.vc&this.permVC.Modify)>0,this.actGroup.checkedCreateVP=(e.permission.vc&this.permVC.CreateVP)>0,this.actGroup.checkedManagePerm=(e.permission.vc&this.permVC.ManagePerm)>0,this.actGroup.checkedVPViewRestricted=(e.permission.vp&this.permVP.ViewRestricted)>0,this.actGroup.checkedVPView=(e.permission.vp&this.permVP.View)>0,this.actGroup.checkedVPViewAudit=(e.permission.vp&this.permVP.ViewAudit)>0,this.actGroup.checkedVPModify=(e.permission.vp&this.permVP.Modify)>0,this.actGroup.checkedCreateVariant=(e.permission.vp&this.permVP.CreateVariant)>0,this.actGroup.checkedVPManagePerm=(e.permission.vp&this.permVP.ManagePerm)>0,this.actGroup.checkedVPDelete=(e.permission.vp&this.permVP.DeleteVP)>0):(this.confirm="Add",this.actGroup._id=void 0,this.actGroup.name="",this.actGroup.groupType="VP",this.actGroup.internal=!1,this.actGroup.global=!1,this.actGroup.checkedView=!0),this.log("Init Group for Creation / Modification: ".concat(this.actGroup.name," ID ").concat(this.actGroup._id," Action ").concat(this.confirm," "))}},{key:"addModifyVPGroup",value:function(){var e=this,t=new hy;!this.actGroup.global&&this.hasVPPerm(this.permVP.ManagePerm)&&(this.log("Modify VisboProject Group: Group: ".concat(this.actGroup.name," VC: ").concat(this.visboproject.vcid," VP: ").concat(this.visboproject._id," }")),t.name=this.actGroup.name.trim(),t.global=!1,t.vcid=this.visboproject.vcid,t.vpids=[],t.vpids.push(this.visboproject._id),t.permission=new ly,t.permission.vp=this.helperVPPerm(this.actGroup),this.actGroup._id?(this.log("Modify VisboProject Group: Group: ".concat(t.name," VC: ").concat(t.vcid," Perm: ").concat(JSON.stringify(t.permission))),t._id=this.actGroup._id,this.visboprojectService.modifyVPGroup(t).subscribe((function(n){e.log("Modify VisboProject Group Push: "+JSON.stringify(n)),e.vgGroups=e.vgGroups.filter((function(e){return e._id!==t._id})),e.vgGroups.push(n),e.vgGroupsInvite=e.vgGroups.filter((function(e){return"VP"===e.groupType}));for(var i=0;i<e.vgUsers.length;i++)e.vgUsers[i].groupId===t._id&&(e.vgUsers[i].groupName=n.name);e.sortUserTable(),e.sortGroupTable();var r=e.translate.instant("vpDetail.msg.changeGroupSuccess",{name:n.name});e.alertService.success(r)}),(function(t){if(e.log("Modify VisboProject Group error: "+t.error.message),403===t.status){var n=e.translate.instant("vpDetail.msg.errorChangeGroupPerm");e.alertService.error(n)}else e.log("Error during modify VP Group "+t.error.message),e.alertService.error(Zv(t))}))):(this.log("Add VisboProject Group: Group: ".concat(t.name," VP: ").concat(t.vpids[0]," Perm: ").concat(JSON.stringify(t.permission))),this.visboprojectService.addVPGroup(t).subscribe((function(t){e.vgGroups.push(t),e.vgGroupsInvite=e.vgGroups.filter((function(e){return"VP"===e.groupType}));var n=e.translate.instant("vpDetail.msg.createGroupSuccess",{name:t.name});e.alertService.success(n)}),(function(t){if(e.log("Add VisboProject Group error: "+t.error.message),403===t.status){var n=e.translate.instant("vpDetail.msg.errorCreateGroupPerm");e.alertService.error(n)}else e.log("Error during add VP Group "+t.error.message),e.alertService.error(Zv(t))}))))}},{key:"removeVPGroup",value:function(e,t){var n=this;this.log("Remove VisboProject Group: ".concat(e.name,"/").concat(e._id," VP: ").concat(t)),this.visboprojectService.deleteVPGroup(e,t).subscribe((function(t){n.log("Remove VisboProject Group result: "+JSON.stringify(t)),n.vgGroups=n.vgGroups.filter((function(t){return t!==e})),n.vgUsers=n.vgUsers.filter((function(t){return t.groupId!==e._id})),n.vgGroupsInvite=n.vgGroups.filter((function(e){return"VP"===e.groupType}));var i=n.translate.instant("vpDetail.msg.removeGroupSuccess",{name:e.name});n.alertService.success(i)}),(function(e){if(n.log("Remove VisboProject Group error: "+e.error.message),403===e.status){var t=n.translate.instant("vpDetail.msg.errorRemoveGroupPerm");n.alertService.error(t)}else n.log("Error during remove Group from VP user "+e.error.message),n.alertService.error(Zv(e))}))}},{key:"getLockStatus",value:function(e){var t=0,n=this.visboproject.variant[e].variantName,i=this.visboproject.lock.find((function(e){return e.variantName==n}));return i&&(t=i.email==this.currentUser.email?1:2),t}},{key:"unlockVP",value:function(e){var t=this,n=this.visboproject._id,i=this.visboproject.lock[e].variantName,r=this.visboproject.variant.find((function(e){return e.variantName==i})),a=r?r._id.toString():"";this.log("Remove VisboProject Lock: ".concat(this.visboproject.name," Variant ").concat(i," ").concat(this.visboproject.lock[e].expiresAt," VPID: ").concat(n)),this.visboprojectService.unlockVP(a,n).subscribe((function(e){t.log("Remove VisboProject Lock result: "+JSON.stringify(e));for(var n=0;n<t.visboproject.lock.length;n++)if(t.visboproject.lock[n].variantName===i){t.visboproject.lock.splice(n,1);break}var r=t.translate.instant("vpDetail.msg.removeLockSuccess");t.alertService.success(r)}),(function(e){if(t.log("Remove VisboProject Lock error: "+e.error.message),403===e.status){var n=t.translate.instant("vpDetail.msg.errorRemoveLockPerm");t.alertService.error(n)}else t.log("Error during remove Lock from VP  "+e.error.message),t.alertService.error(Zv(e))}))}},{key:"getVPVersionsTotal",value:function(){var e=this.visboproject.vpvCount||0;return this.visboproject.variant&&this.visboproject.variant.forEach((function(t){return e+=t.vpvCount||0})),e}},{key:"sortUserTable",value:function(e){this.vgUsers&&(void 0===e&&void 0!==this.sortUserColumn||(e!==this.sortUserColumn&&(this.sortUserColumn=e,this.sortUserAscending=void 0),this.sortUserAscending=void 0===this.sortUserAscending?1===e||2===e:!this.sortUserAscending),1===this.sortUserColumn?this.vgUsers.sort((function(e,t){return qv(e.email,t.email)})):2===this.sortUserColumn&&this.vgUsers.sort((function(e,t){return qv(e.groupName.toLowerCase(),t.groupName.toLowerCase())})),this.sortUserAscending||this.vgUsers.reverse())}},{key:"sortGroupTable",value:function(e){this.vgGroups&&(void 0===e&&void 0!==this.sortGroupColumn||(e!==this.sortGroupColumn&&(this.sortGroupColumn=e,this.sortGroupAscending=void 0),this.sortGroupAscending=void 0===this.sortGroupAscending?1===e:!this.sortGroupAscending),1===this.sortGroupColumn?this.vgGroups.sort((function(e,t){return qv(e.name.toLowerCase(),t.name.toLowerCase())})):2===this.sortGroupColumn&&this.vgGroups.sort((function(e,t){return t.users.length-e.users.length})),this.sortGroupAscending||this.vgGroups.reverse())}},{key:"sortVariantTable",value:function(e){if(this.visboproject.variant){var t=this.visboproject.variant;void 0===e&&void 0!==this.sortVariantColumn||(e!==this.sortVariantColumn&&(this.sortVariantColumn=e,this.sortVariantAscending=void 0),this.sortVariantAscending=void 0===this.sortVariantAscending?1===e||2===e:!this.sortVariantAscending),1===this.sortVariantColumn?t.sort((function(e,t){return qv(e.variantName.toLowerCase(),t.variantName.toLowerCase())})):2===this.sortVariantColumn?t.sort((function(e,t){return qv(e.email.toLowerCase(),t.email.toLowerCase())})):3===this.sortVariantColumn?t.sort((function(e,t){return zv(e.createdAt,t.createdAt)})):4===this.sortVariantColumn&&t.sort((function(e,t){return t.vpvCount-e.vpvCount})),this.sortVariantAscending||t.reverse()}}},{key:"log",value:function(e){this.messageService.add("VisboProjectDetail: "+e)}}]),e}()).\u0275fac=function(e){return new(e||CI)(Za(tf),Za(sg),Za(dk),Za(mc),Za(Am),Za(Zm),Za(Rb),Za(ud))},CI.\u0275cmp=wt({type:CI,selectors:[["app-visboproject-detail"]],inputs:{visboproject:"visboproject"},decls:2,vars:1,consts:[[4,"ngIf"],[3,"click"],[3,"click",4,"ngIf"],[1,"form-group","row"],["for","vpName",1,"col-3","col-md-2","col-form-label"],["id","VPName","type","text","name","vpName","class","col-sm-8 form-control","placeholder","Name",3,"ngModel","ngModelChange",4,"ngIf"],["id","VPName","class","col-8 form-control-static",4,"ngIf"],["class","form-group row",4,"ngIf"],["for","vpType",1,"col-3","col-md-2","col-form-label"],["name","vpType",1,"col","form-control-static","col-form-label"],[1,"form-group","row","d-none","d-md-block"],["for","Created",1,"col-3","col-md-2","col-form-label"],["id","VPCreated",1,"col-4","form-control-static","col-form-label"],["id","VPUpdated",1,"col-4","form-control-static","col-form-label"],[1,"mb-3"],["id","Save","class","btn btn-primary mr-1",3,"click",4,"ngIf"],["id","Save","class","btn btn-primary mx-1",3,"click",4,"ngIf"],["id","DeleteVP","class","btn bg-warning mx-1","style","float: right","data-toggle","modal","data-target","#VpDelete",3,"title",4,"ngIf"],["id","DestroyVP","class","btn bg-danger text-white mx-1","style","float: right","data-toggle","modal","data-target","#VpDelete",3,"title",4,"ngIf"],["id","VpUserModalCreate","tabindex","-1","role","dialog","aria-labelledby","VpUserModalCreateTitle","aria-hidden","true",1,"modal","fade"],["role","document",1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header"],["id","VpUserModalCenterTitle",1,"modal-title"],["type","button","data-dismiss","modal","aria-label","Close",1,"close"],["aria-hidden","true"],[1,"modal-body"],["name","newUserInvite","novalidate",""],["f1","ngForm"],[1,"form-group",3,"ngClass"],["for","email",1,"col-form-label"],["id","AddUserName","type","email","name","email","required","","pattern","[^@\\s]+@[^@\\s]+\\.[^@\\s]+","autocomplete","email",1,"form-control",3,"ngModel","ngModelChange"],["email","ngModel"],["class","help-block",4,"ngIf"],["for","group",1,"col-form-label"],["id","AddUserGroupName","name","group","required","",1,"form-control",3,"ngModel","ngModelChange"],["group","ngModel"],[4,"ngFor","ngForOf"],["for","inviteMessage",1,"col-form-label"],["id","AddUserMessage","name","inviteMessage",1,"form-control",3,"ngModel","ngModelChange"],["inviteMessage","ngModel"],[1,"modal-footer","align-items-end"],["type","button","data-dismiss","modal",1,"btn","btn-secondary","mx-1"],["id","AddUserConfirm","type","submit","class","btn btn-primary mx-1",4,"ngIf"],["id","AddUserConfirm","type","submit","class","btn btn-primary mx-1","data-dismiss","modal",3,"click",4,"ngIf"],["id","VpUserRemove","tabindex","-1","role","dialog","aria-labelledby","Remove User","aria-hidden","true",1,"modal","fade"],["class","modal-dialog modal-dialog-centered","role","document",4,"ngIf"],["id","VpGroupModalCreate","tabindex","-1","role","dialog","aria-labelledby","VpGroupModalCreateTitle","aria-hidden","true",1,"modal","fade"],["class","modal-content",4,"ngIf"],["id","VpGroupRemove","tabindex","-1","role","dialog","aria-labelledby","VpGroupModalRemoveTitle","aria-hidden","true",1,"modal","fade"],["id","VpDelete","tabindex","-1","role","dialog","aria-labelledby","Delete Project","aria-hidden","true",1,"modal","fade"],["id","VpDeleteTitle",1,"modal-title"],["class","bg-warning",4,"ngIf"],["class","bg-danger text-white",4,"ngIf"],[1,"form-group"],["for","VpName",1,"col-form-label"],[1,"col-8","form-control-static"],["for","VpDescription",1,"col-form-label"],["for","VpVersions",1,"col-form-label"],["type","button","data-dismiss","modal",1,"btn","btn-secondary"],["id","DeleteVPConfirm","type","button","class","btn btn-warning text-white","data-dismiss","modal",3,"click",4,"ngIf"],["id","DeleteVPConfirm","type","button","class","btn btn-danger text-white","data-dismiss","modal",3,"click",4,"ngIf"],["class","modal fade","id","VPUserDetail","tabindex","-1","role","dialog","aria-labelledby","VPUserDetailTitle","aria-hidden","true",4,"ngIf"],["id","VpVariantModalCreate","tabindex","-1","role","dialog","aria-labelledby","VpVariantModalCreateTitle","aria-hidden","true",1,"modal","fade"],["id","VpVariantModalCreateTitle",1,"modal-title"],["name","newVariant","novalidate",""],["f3","ngForm"],["for","variant",1,"col-form-label"],["id","AddVariant","type","text","name","variant","required","",1,"form-control",3,"ngModel","ngModelChange"],["variant","ngModel"],["id","AddVariantConfirm","type","submit","class","btn btn-primary mx-1",4,"ngIf"],["id","AddVariantConfirm","type","submit","class","btn btn-primary mx-1","data-dismiss","modal",3,"click",4,"ngIf"],["id","VpVariantRemove","tabindex","-1","role","dialog","aria-labelledby","Remove Variant","aria-hidden","true",1,"modal","fade"],["id","VPName","type","text","name","vpName","placeholder","Name",1,"col-sm-8","form-control",3,"ngModel","ngModelChange"],["id","VPName",1,"col-8","form-control-static"],["for","vpDescription",1,"col-3","col-md-2","col-form-label"],["id","VPDesc","name","vpDescription","class","col-8 form-control","placeholder","Type in your description",3,"ngModel","ngModelChange",4,"ngIf"],["id","VPDesc","class","col-8 form-control-static",4,"ngIf"],["id","VPDesc","name","vpDescription","placeholder","Type in your description",1,"col-8","form-control",3,"ngModel","ngModelChange"],["id","VPDesc",1,"col-8","form-control-static"],["for","vpVersion",1,"col-3","col-md-2","col-form-label"],["name","vpVersion",1,"col","form-control-static","col-form-label"],[1,"btn-toolbar"],["id","ViewAudit","type","button","class","btn btn-md btn-light mr-1",3,"click",4,"ngIf"],["id","ViewGroup","type","button","class","btn btn-md btn-light mr-1",3,"click",4,"ngIf"],["id","ViewUser","type","button","class","btn btn-md btn-light mr-1",3,"click",4,"ngIf"],["id","ViewRestrictUser","type","button","class","btn btn-md btn-light mr-1",3,"click",4,"ngIf"],["id","ViewVariant","type","button","class","btn btn-md btn-light mr-1",3,"click",4,"ngIf"],["id","ViewLock","type","button","class","btn btn-md btn-light mr-1",3,"click",4,"ngIf"],["lockIndicator",""],["id","ViewAudit","type","button",1,"btn","btn-md","btn-light","mr-1",3,"click"],["id","ViewGroup","type","button",1,"btn","btn-md","btn-light","mr-1",3,"click"],["id","ViewUser","type","button",1,"btn","btn-md","btn-light","mr-1",3,"click"],["id","ViewRestrictUser","type","button",1,"btn","btn-md","btn-light","mr-1",3,"click"],["id","ViewVariant","type","button",1,"btn","btn-md","btn-light","mr-1",3,"click"],["id","ViewLock","type","button",1,"btn","btn-md","btn-light","mr-1",3,"click"],[1,"row"],[1,"col"],[1,"panel-heading","mt-3"],["class","col",4,"ngIf"],[1,"panel-body"],[1,"table","table-hover"],["id","UserHead"],[1,"d-none","d-md-table-cell"],["id","UserList"],["id","AddUser","type","button","data-toggle","modal","data-target","#VpUserModalCreate",1,"my-1","btn","btn-primary","float-right"],["id","ColUser","data-toggle","modal","data-target","#VPUserDetail",3,"click"],["id","ColGroup",3,"click"],["id","ColDeleteUser","data-toggle","modal","data-target","#VpUserRemove",1,"Detail",3,"title","click"],["id","GroupHead"],["id","GroupList"],["id","AddGroup","type","button","data-toggle","modal","data-target","#VpGroupModalCreate",1,"btn","btn-primary","float-right",3,"click"],["id","ColGroup","data-toggle","modal","data-target","#VpGroupModalCreate",3,"click"],["id","ColMembers",3,"click"],["id","ColGlobal","class","d-none d-md-table-cell",4,"ngIf"],["id","ColDetail","data-toggle","modal","data-target","#VpGroupModalCreate",1,"Detail",3,"title","click"],["id","ColGlobal",1,"d-none","d-md-table-cell"],["id","ColDeleteGroup","data-toggle","modal","data-target","#VpGroupRemove",1,"Detail",3,"title","click"],["id","VariantHead"],[1,"d-none","d-md-table-cell",3,"click"],["id","VariantList"],["id","AddVariant","type","button","data-toggle","modal","data-target","#VpVariantModalCreate",1,"my-1","btn","btn-primary","float-right"],["id","ColName"],["id","ColEmail"],[1,"d-none","d-md-table-cell",3,"title"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["id","ColDeleteVariant","class","Detail","data-toggle","modal","data-target","#VpVariantRemove",3,"title","click",4,"ngIf"],["id","ColDeleteVariant","data-toggle","modal","data-target","#VpVariantRemove",1,"Detail",3,"title","click"],[1,"fa",3,"ngClass"],[1,"row","mt-2"],[1,"panel-heading"],["data-toggle","modal","data-target","#VpUnlock",1,"btn","btn-md",3,"title","click"],["id","Save",1,"btn","btn-primary","mr-1",3,"click"],["id","Save",1,"btn","btn-primary","mx-1",3,"click"],["id","DeleteVP","data-toggle","modal","data-target","#VpDelete",1,"btn","bg-warning","mx-1",2,"float","right",3,"title"],["id","DestroyVP","data-toggle","modal","data-target","#VpDelete",1,"btn","bg-danger","text-white","mx-1",2,"float","right",3,"title"],[1,"help-block"],["id","AddUserConfirm","type","submit",1,"btn","btn-primary","mx-1"],["id","AddUserConfirm","type","submit","data-dismiss","modal",1,"btn","btn-primary","mx-1",3,"click"],["id","VpUserRemoveTitle",1,"modal-title"],[1,"bg-warning"],[1,"col-form-label"],["id","DeleteUserConfirm","type","button","data-dismiss","modal",1,"btn","btn-warning",3,"click"],["class","modal-title","id","VpGroupModalCenterTitle",4,"ngIf"],["name","actGroup","novalidate",""],["f2","ngForm"],["class","form-group",4,"ngIf"],["class","form-group",3,"ngClass",4,"ngIf"],[1,"custom-control","custom-checkbox"],["type","checkbox","id","permVP0","name","checkedVPViewRestricted",1,"custom-control-input",3,"ngModel","ngModelChange"],["checkedVPViewRestricted","ngModel"],["for","permVP0",1,"custom-control-label"],["type","checkbox","id","permVP1","name","checkedVPView",1,"custom-control-input",3,"ngModel","ngModelChange"],["checkedVPView","ngModel"],["for","permVP1",1,"custom-control-label"],["type","checkbox","id","permVP2","name","checkedVPViewAudit",1,"custom-control-input",3,"ngModel","ngModelChange"],["checkedVPViewAudit","ngModel"],["for","permVP2",1,"custom-control-label"],["type","checkbox","id","permVP3","name","checkedVPModify",1,"custom-control-input",3,"ngModel","ngModelChange"],["checkedVPModify","ngModel"],["for","permVP3",1,"custom-control-label"],["type","checkbox","id","permVP4","name","checkedCreateVariant",1,"custom-control-input",3,"ngModel","ngModelChange"],["checkedCreateVariant","ngModel"],["for","permVP4",1,"custom-control-label"],["type","checkbox","id","permVP5","name","checkedVPManagePerm",1,"custom-control-input",3,"ngModel","ngModelChange"],["checkedVPManagePerm","ngModel"],["for","permVP5",1,"custom-control-label"],["type","checkbox","id","permVP6","name","checkedVPDelete",1,"custom-control-input",3,"ngModel","ngModelChange"],["checkedVPDelete","ngModel"],["for","permVP6",1,"custom-control-label"],["class","mt-2",4,"ngIf"],["id","ButtonBack","type","button","data-dismiss","modal",1,"btn","btn-secondary","mx-1"],["id","VpGroupModalCenterTitle",1,"modal-title"],["for","name",1,"col-form-label"],["for","groupName",1,"col-form-label"],["id","AddGroupName","type","text","name","groupName","required","",1,"form-control",3,"ngModel","ngModelChange"],["groupName","ngModel"],[1,"mt-2"],[1,"form-control-static"],["class","row",4,"ngFor","ngForOf"],["class","col-8 ml-3",4,"ngIf"],[1,"col-8","ml-3"],["data-dismiss","modal","data-toggle","modal","data-target","#VPUserDetail",3,"click"],["id","AddGroupConfirm","type","submit","class","btn btn-primary disabled mx-1",4,"ngIf"],["id","AddGroupConfirm","type","submit","class","btn btn-primary mx-1","data-dismiss","modal",3,"click",4,"ngIf"],["id","AddGroupConfirm","type","submit",1,"btn","btn-primary","disabled","mx-1"],["id","AddGroupConfirm","type","submit","data-dismiss","modal",1,"btn","btn-primary","mx-1",3,"click"],["for","VcName",1,"col-form-label"],["id","DeleteGroupConfirm","type","button","data-dismiss","modal",1,"btn","btn-warning",3,"click"],[1,"bg-danger","text-white"],["id","DeleteVPConfirm","type","button","data-dismiss","modal",1,"btn","btn-warning","text-white",3,"click"],["id","DeleteVPConfirm","type","button","data-dismiss","modal",1,"btn","btn-danger","text-white",3,"click"],["id","VPUserDetail","tabindex","-1","role","dialog","aria-labelledby","VPUserDetailTitle","aria-hidden","true",1,"modal","fade"],["role","document",1,"modal-dialog","modal-lg","modal-dialog-centered"],["id","VPUserDetailTitle",1,"modal-title"],["type","checkbox","checked","","disabled","","class","custom-control-input","id","permVP0","name","checkedViewRestricted",4,"ngIf"],["type","checkbox","disabled","","class","custom-control-input","id","permVP0","name","checkedViewRestricted",4,"ngIf"],["type","checkbox","checked","","disabled","","class","custom-control-input","id","permVP1","name","checkedView",4,"ngIf"],["type","checkbox","disabled","","class","custom-control-input","id","permVP1","name","checkedView",4,"ngIf"],["type","checkbox","checked","","disabled","","class","custom-control-input","id","permVP2","name","checkedView",4,"ngIf"],["type","checkbox","disabled","","class","custom-control-input","id","permVP2","name","checkedView",4,"ngIf"],["type","checkbox","checked","","disabled","","class","custom-control-input","id","permVP3","name","checkedView",4,"ngIf"],["type","checkbox","disabled","","class","custom-control-input","id","permVP3","name","checkedView",4,"ngIf"],["type","checkbox","checked","","disabled","","class","custom-control-input","id","permVP4","name","checkedView",4,"ngIf"],["type","checkbox","disabled","","class","custom-control-input","id","permVP4","name","checkedView",4,"ngIf"],["type","checkbox","checked","","disabled","","class","custom-control-input","id","permVP5","name","checkedView",4,"ngIf"],["type","checkbox","disabled","","class","custom-control-input","id","permVP5","name","checkedView",4,"ngIf"],["type","checkbox","checked","","disabled","","class","custom-control-input","id","permVP6","name","checkedView",4,"ngIf"],["type","checkbox","disabled","","class","custom-control-input","id","permVP6","name","checkedView",4,"ngIf"],[1,"form-control-static","mt-2"],["data-dismiss","modal",1,"btn","btn-primary"],["type","checkbox","checked","","disabled","","id","permVP0","name","checkedViewRestricted",1,"custom-control-input"],["type","checkbox","disabled","","id","permVP0","name","checkedViewRestricted",1,"custom-control-input"],["type","checkbox","checked","","disabled","","id","permVP1","name","checkedView",1,"custom-control-input"],["type","checkbox","disabled","","id","permVP1","name","checkedView",1,"custom-control-input"],["type","checkbox","checked","","disabled","","id","permVP2","name","checkedView",1,"custom-control-input"],["type","checkbox","disabled","","id","permVP2","name","checkedView",1,"custom-control-input"],["type","checkbox","checked","","disabled","","id","permVP3","name","checkedView",1,"custom-control-input"],["type","checkbox","disabled","","id","permVP3","name","checkedView",1,"custom-control-input"],["type","checkbox","checked","","disabled","","id","permVP4","name","checkedView",1,"custom-control-input"],["type","checkbox","disabled","","id","permVP4","name","checkedView",1,"custom-control-input"],["type","checkbox","checked","","disabled","","id","permVP5","name","checkedView",1,"custom-control-input"],["type","checkbox","disabled","","id","permVP5","name","checkedView",1,"custom-control-input"],["type","checkbox","checked","","disabled","","id","permVP6","name","checkedView",1,"custom-control-input"],["type","checkbox","disabled","","id","permVP6","name","checkedView",1,"custom-control-input"],["data-dismiss","modal","data-toggle","modal","data-target","#VpGroupModalCreate",3,"click"],["id","AddVariantConfirm","type","submit",1,"btn","btn-primary","mx-1"],["id","AddVariantConfirm","type","submit","data-dismiss","modal",1,"btn","btn-primary","mx-1",3,"click"],["id","VpVariantRemoveTitle",1,"modal-title"],[1,"col-sm-4","col-form-label"],[1,"col-sm-8","form-control-static"],["id","DeleteVariantConfirm","type","button","data-dismiss","modal",1,"btn","btn-warning",3,"click"]],template:function(e,t){1&e&&(io(0,"app-usernavbar"),Ya(1,kI,164,117,"div",0)),2&e&&(zi(1),Xa("ngIf",t.visboproject))},directives:[pk,su,Fh,xd,Gh,iu,Ad,Kh,Yh,Td,Nh,rh,ah,dh,au,vu,Cd],pipes:[jb,ku,Cu],styles:[""]}),CI);function wI(e,t){1&e&&(to(0,"h2"),So(1),qs(2,"translate"),no()),2&e&&(zi(1),xo(" ",zs(2,1,"vpv.title")," "))}function AI(e,t){if(1&e){var n=so();to(0,"h2"),So(1),qs(2,"translate"),to(3,"button",18),uo("click",(function(){mn(n);var e=fo();return e.gotoVPDetail(e.vpActive)})),So(4),no(),no()}if(2&e){var i=fo();zi(1),xo(" ",zs(2,2,"vpv.titleVP"),": "),zi(3),xo(" ",i.vpActive.name," ")}}function PI(e,t){if(1&e){var n=so();to(0,"a",9),uo("click",(function(){mn(n);var e=fo(2);return e.gotoVCDetail(e.vpActive)})),So(1),no()}if(2&e){var i=fo(2);zi(1),To(i.vpActive.vc.name)}}function DI(e,t){if(1&e&&(to(0,"span"),So(1),no()),2&e){var n=fo(2);zi(1),To(n.vpActive.vc.name)}}function MI(e,t){if(1&e&&(to(0,"h5"),So(1),qs(2,"translate"),Ya(3,PI,2,1,"a",12),Ya(4,DI,2,1,"span",2),no()),2&e){var n=fo();zi(1),xo("",zs(2,3,"vpv.titleVC"),": "),zi(2),Xa("ngIf",n.hasVCPerm(n.permVC.View)),zi(1),Xa("ngIf",!n.hasVCPerm(n.permVC.View))}}function II(e,t){if(1&e){var n=so();to(0,"button",21),uo("click",(function(){return mn(n),fo(2).toggleVisboProjectVersions()})),So(1),qs(2,"translate"),no()}2&e&&(zi(1),To(zs(2,1,"vpv.btn.deleted")))}function SI(e,t){if(1&e){var n=so();to(0,"button",21),uo("click",(function(){return mn(n),fo(2).toggleVisboProjectVersions()})),So(1),qs(2,"translate"),no()}2&e&&(zi(1),To(zs(2,1,"vpv.btn.undeleted")))}function TI(e,t){if(1&e&&(to(0,"div",19),Ya(1,II,3,3,"button",20),Ya(2,SI,3,3,"button",20),no()),2&e){var n=fo();zi(1),Xa("ngIf",!n.deleted),zi(1),Xa("ngIf",n.deleted)}}function xI(e,t){if(1&e){var n=so();to(0,"th",9),uo("click",(function(){return mn(n),fo().sortVPVTable(3)})),So(1),qs(2,"translate"),no()}2&e&&(zi(1),To(zs(2,1,"vpv.lbl.trafficlight")))}function _I(e,t){1&e&&(to(0,"th"),So(1),qs(2,"translate"),no()),2&e&&(zi(1),To(zs(2,1,"vpv.lbl.delete")))}function UI(e,t){1&e&&oo(0)}var OI=function(e){return{level:e}};function EI(e,t){if(1&e&&(to(0,"td"),Ya(1,UI,1,0,"ng-container",26),no()),2&e){var n=fo().$implicit;fo();var i=$a(36);zi(1),Xa("ngTemplateOutlet",i)("ngTemplateOutletContext",Gs(2,OI,n.ampelStatus))}}function LI(e,t){if(1&e){var n=so();to(0,"button",27),uo("click",(function(){mn(n);var e=fo().index;return fo().helperSetVPV(e)})),qs(1,"translate"),So(2,"\xd7"),no()}2&e&&po("title",zs(1,1,"vpv.lbl.deleteVersion"))}function GI(e,t){if(1&e){var n=so();to(0,"tr"),to(1,"td",8),So(2),no(),to(3,"td",22),uo("click",(function(){mn(n);var e=t.index;return fo().helperSetVPV(e)})),qs(4,"date"),So(5),qs(6,"date"),no(),to(7,"td",23),uo("click",(function(){mn(n);var e=t.index;return fo().helperSetVPV(e)})),So(8),no(),to(9,"td",23),uo("click",(function(){mn(n);var e=t.index;return fo().helperSetVPV(e)})),So(10),qs(11,"date"),no(),Ya(12,EI,2,4,"td",2),to(13,"td",24),uo("click",(function(){mn(n);var e=t.index;return fo().helperSetVPV(e)})),So(14),no(),to(15,"td",23),uo("click",(function(){mn(n);var e=t.index;return fo().helperSetVPV(e)})),to(16,"span"),So(17),no(),no(),to(18,"td"),Ya(19,LI,3,3,"button",25),no(),no()}if(2&e){var i=t.$implicit,r=t.index,a=fo();zi(2),To(r+1),zi(1),po("title",Qs(4,9,i.timestamp,"dd.MM.yyyy HH:mm")),zi(2),To(Qs(6,12,i.timestamp,"dd.MM.yy")),zi(3),To(i.status),zi(2),To(Qs(11,15,i.endDate,"dd.MM.yy")),zi(2),Xa("ngIf",a.hasVPPerm(a.permVP.ViewAudit)),zi(2),To(i.variantName),zi(3),To(a.checkLocked(i)),zi(2),Xa("ngIf",a.hasVPPerm(a.permVP.DeleteVP)&&!a.checkLocked(i,!0))}}var RI=function(e,t,n,i,r){return{"fas fa-lightbulb":e,"text-secondary":t,"text-success":n,"text-warning":i,"text-danger":r}};function jI(e,t){if(1&e&&io(0,"i",28),2&e){var n=t.level;Xa("ngClass",(i=RI,r=n>=0,a=0==n,o=1==n,s=2==n,l=3==n,c=An()+1,u=pn(),d=qa(u,c,r,a,o,s),Ba(u,c+4,l)||d?Na(u,c+5,i(r,a,o,s,l)):Fa(u,c+5)))}var i,r,a,o,s,l,c,u,d}function NI(e,t){if(1&e&&(to(0,"div",37),to(1,"label",46),So(2),qs(3,"translate"),no(),to(4,"label",39),So(5),no(),no()),2&e){var n=fo(2);zi(2),xo("",zs(3,2,"vpv.lbl.variantName"),":"),zi(3),xo("",n.visboprojectversion.variantName," ")}}function FI(e,t){if(1&e&&(to(0,"div",37),to(1,"label",47),So(2),qs(3,"translate"),no(),to(4,"label",39),So(5),qs(6,"date"),no(),no()),2&e){var n=fo(2);zi(2),xo("",zs(3,2,"vpv.lbl.startDate"),":"),zi(3),xo("",Qs(6,4,n.visboprojectversion.startDate,"dd.MM.yyyy")," ")}}function BI(e,t){if(1&e&&(to(0,"div",37),to(1,"label",48),So(2),qs(3,"translate"),no(),to(4,"label",39),So(5),qs(6,"date"),no(),no()),2&e){var n=fo(2);zi(2),xo("",zs(3,2,"vpv.lbl.endDate"),":"),zi(3),xo("",Qs(6,4,n.visboprojectversion.endDate,"dd.MM.yyyy")," ")}}function HI(e,t){if(1&e&&(to(0,"div",37),to(1,"label",49),So(2),qs(3,"translate"),no(),to(4,"label",39),So(5),no(),no()),2&e){var n=fo(2);zi(2),xo("",zs(3,2,"vpv.lbl.status"),":"),zi(3),xo("",n.visboprojectversion.status," ")}}function KI(e,t){if(1&e&&(to(0,"div",37),to(1,"label",50),So(2),qs(3,"translate"),no(),to(4,"label",39),So(5),no(),no()),2&e){var n=fo(2);zi(2),xo("",zs(3,2,"vpv.lbl.bu"),":"),zi(3),xo("",n.visboprojectversion.businessUnit," ")}}function qI(e,t){if(1&e){var n=so();to(0,"button",51),uo("click",(function(){return mn(n),fo(2).restore()})),So(1),qs(2,"translate"),no()}2&e&&(zi(1),To(zs(2,1,"vpv.btn.restore")))}function zI(e,t){if(1&e&&(to(0,"div",29),to(1,"div",30),to(2,"div",31),to(3,"div",32),to(4,"h5",33),So(5),qs(6,"translate"),no(),to(7,"button",34),to(8,"span",35),So(9,"\xd7"),no(),no(),no(),to(10,"div",36),to(11,"form"),to(12,"div",37),to(13,"label",38),So(14),qs(15,"translate"),no(),to(16,"label",39),So(17),no(),no(),to(18,"div",37),to(19,"label",40),So(20),qs(21,"translate"),no(),to(22,"label",39),So(23),qs(24,"date"),no(),no(),to(25,"div",37),to(26,"label",41),So(27),qs(28,"translate"),no(),to(29,"label",39),So(30),qs(31,"date"),no(),no(),Ya(32,NI,6,4,"div",42),Ya(33,FI,7,7,"div",42),Ya(34,BI,7,7,"div",42),Ya(35,HI,6,4,"div",42),Ya(36,KI,6,4,"div",42),no(),no(),to(37,"div",43),to(38,"button",44),So(39),qs(40,"translate"),no(),Ya(41,qI,3,3,"button",45),no(),no(),no(),no()),2&e){var n=fo();zi(5),To(zs(6,14,"vpv.titleDetailVPV")),zi(9),xo("",zs(15,16,"vpv.lbl.name"),":"),zi(3),xo("",n.visboprojectversion.name," "),zi(3),xo("",zs(21,18,"vpv.lbl.timestamp"),":"),zi(3),xo("",Qs(24,20,n.visboprojectversion.timestamp,"dd.MM.yyyy HH:mm:ss")," "),zi(4),xo("",zs(28,23,"vpv.lbl.updatedAt"),":"),zi(3),xo("",Qs(31,25,n.visboprojectversion.updatedAt,"dd.MM.yyyy HH:mm:ss")," "),zi(2),Xa("ngIf",n.visboprojectversion.variantName),zi(1),Xa("ngIf",n.visboprojectversion.startDate),zi(1),Xa("ngIf",n.visboprojectversion.endDate),zi(1),Xa("ngIf",n.visboprojectversion.status),zi(1),Xa("ngIf",n.visboprojectversion.businessUnit),zi(3),To(zs(40,28,"vpv.btn.back")),zi(2),Xa("ngIf",n.deleted&&n.hasVPPerm(n.permVP.DeleteVP))}}function QI(e,t){1&e&&(to(0,"label",59),So(1),qs(2,"translate"),no()),2&e&&(zi(1),To(zs(2,1,"vpv.msg.confirmDelete")))}function WI(e,t){1&e&&(to(0,"label",60),So(1),qs(2,"translate"),no()),2&e&&(zi(1),To(zs(2,1,"vpv.msg.confirmDestroy")))}function JI(e,t){if(1&e){var n=so();to(0,"button",61),uo("click",(function(){mn(n);var e=fo(2);return e.delete(e.visboprojectversion)})),So(1),qs(2,"translate"),no()}2&e&&(zi(1),To(zs(2,1,"vpv.btn.delete")))}function YI(e,t){if(1&e){var n=so();to(0,"button",62),uo("click",(function(){mn(n);var e=fo(2);return e.delete(e.visboprojectversion)})),So(1),qs(2,"translate"),no()}2&e&&(zi(1),To(zs(2,1,"vpv.btn.destroy")))}function $I(e,t){if(1&e&&(to(0,"div",52),to(1,"div",30),to(2,"div",31),to(3,"div",32),to(4,"h5",33),So(5),qs(6,"translate"),no(),to(7,"button",34),to(8,"span",35),So(9,"\xd7"),no(),no(),no(),to(10,"div",36),to(11,"div"),Ya(12,QI,3,3,"label",53),Ya(13,WI,3,3,"label",54),no(),to(14,"form"),to(15,"div",55),to(16,"label",38),So(17),qs(18,"translate"),no(),to(19,"label",56),So(20),no(),no(),to(21,"div",55),to(22,"label",40),So(23),qs(24,"translate"),no(),to(25,"label",56),So(26),qs(27,"date"),no(),no(),to(28,"div",55),to(29,"label",40),So(30),qs(31,"translate"),no(),to(32,"label",56),So(33),qs(34,"date"),no(),no(),no(),no(),to(35,"div",43),to(36,"button",44),So(37),qs(38,"translate"),no(),Ya(39,JI,3,3,"button",57),Ya(40,YI,3,3,"button",58),no(),no(),no(),no()),2&e){var n=fo();zi(5),To(zs(6,12,"vpv.titleDeleteVPV")),zi(7),Xa("ngIf",!n.deleted),zi(1),Xa("ngIf",n.deleted),zi(4),xo("",zs(18,14,"vpv.lbl.name"),":"),zi(3),xo("",n.visboprojectversion.name," "),zi(3),xo("",zs(24,16,"vpv.lbl.timestamp"),":"),zi(3),xo("",Qs(27,18,n.visboprojectversion.timestamp,"dd.MM.yyyy HH:mm:ss")," "),zi(4),xo("",zs(31,21,"vpv.lbl.updatedAt"),":"),zi(3),xo("",Qs(34,23,n.visboprojectversion.updatedAt,"dd.MM.yyyy HH:mm:ss")," "),zi(4),To(zs(38,26,"vpv.btn.cancel")),zi(2),Xa("ngIf",!n.deleted),zi(1),Xa("ngIf",n.deleted)}}var ZI,XI=((ZI=function(){function e(t,n,i,r,a,o,s){p(this,e),this.visboprojectversionService=t,this.visboprojectService=n,this.messageService=i,this.alertService=r,this.route=a,this.router=o,this.translate=s,this.deleted=!1,this.combinedPerm=void 0,this.permVC=uy,this.permVP=dy}return m(e,[{key:"ngOnInit",value:function(){this.getVisboProjectVersions()}},{key:"hasVPPerm",value:function(e){return void 0!==this.combinedPerm&&0!=(this.combinedPerm.vp&e)}},{key:"hasVCPerm",value:function(e){return void 0!==this.combinedPerm&&0!=(this.combinedPerm.vc&e)}},{key:"getVisboProjectVersions",value:function(){var e=this,t=this.route.snapshot.paramMap.get("id");this.vpSelected=t,this.log("get VP name if ID is used "+t),t?this.visboprojectService.getVisboProject(t).subscribe((function(n){e.vpActive=n,e.combinedPerm=n.perm,e.log("get VP name if ID is used ".concat(e.vpActive.name," Perm ").concat(JSON.stringify(e.combinedPerm))),e.visboprojectversionService.getVisboProjectVersions(t,e.deleted).subscribe((function(t){return e.visboprojectversions=t}),(function(t){if(e.log("get VPVs failed: error: ".concat(t.status," message: ").concat(t.error.message)),403===t.status){var n=e.translate.instant("vpv.msg.errorPermVersion",{name:e.vpActive.name});e.alertService.error(n)}else e.alertService.error(Zv(t))}))}),(function(t){if(e.log("get VPV VP failed: error: ".concat(t.status," message: ").concat(t.error.message)),403===t.status){var n=e.translate.instant("vpv.msg.errorPerm");e.alertService.error(n)}else e.alertService.error(Zv(t))})):(this.vpSelected=null,this.vpActive=null,this.visboprojectversionService.getVisboProjectVersions(null).subscribe((function(t){return e.visboprojectversions=t}),(function(t){if(e.log("get VPVs failed: error: ".concat(t.status," message: ").concat(t.error.message)),403===t.status){var n=e.translate.instant("vpv.msg.errorPerm");e.alertService.error(n)}else e.alertService.error(Zv(t))})))}},{key:"toggleVisboProjectVersions",value:function(){this.deleted=!this.deleted;var e=this.route.snapshot.url.join("/");this.log("VP toggleVisboProjectVersions ".concat(this.deleted," URL ").concat(e)),this.getVisboProjectVersions(),this.router.navigate([e],this.deleted?{queryParams:{deleted:this.deleted}}:{})}},{key:"checkLocked",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.variantName||"",i=this.vpActive.lock.find((function(e){return e.variantName===n})),r=void 0;return i&&(r=t?JSON.parse(localStorage.getItem("currentUser")).email!=i.email?i.email:void 0:i.email),r}},{key:"helperSetVPV",value:function(e){this.visboprojectversion=this.visboprojectversions[e]}},{key:"delete",value:function(e){var t=this;this.log("delete VPV "+e._id),this.visboprojectversionService.deleteVisboProjectVersion(e,this.deleted).subscribe((function(){t.alertService.success("Visbo Project Version ".concat(e._id," deleted successfully"),!0),t.log("delete VPV success");var n=t.visboprojectversions.findIndex((function(t){return t._id===e._id}));n>=0&&t.visboprojectversions.splice(n,1)}),(function(n){if(t.log("delete VPV failed: error: ".concat(n.status," message: ").concat(n.error.message)),403===n.status){var i=t.translate.instant("vpv.msg.errorPermDelete",{name:e.name});t.alertService.error(i)}else if(423===n.status){var r=t.translate.instant("vpv.msg.errorLocked",{name:e.name});t.alertService.error(r)}else t.alertService.error(Zv(n))}))}},{key:"restore",value:function(){var e=this;this.log("update VPV "+this.visboprojectversion._id),this.visboprojectversionService.updateVisboProjectVersion(this.visboprojectversion,this.deleted).subscribe((function(t){e.alertService.success("Visbo Project Version ".concat(t.name," updated successfully"),!0);var n=e.visboprojectversions.findIndex((function(e){return e._id===t._id}));n>=0&&e.visboprojectversions.splice(n,1)}),(function(t){if(e.log("save VPV failed: error: ".concat(t.status," message: ").concat(t.error.message)),403===t.status){var n=e.translate.instant("vpv.msg.errorPermVersion",{name:e.visboprojectversion.name});e.alertService.error(n)}else if(409===t.status){var i=e.translate.instant("vpv.msg.errorConflict",{name:e.visboprojectversion._id});e.alertService.error(i)}else e.alertService.error(t.error.message)}))}},{key:"gotoVPDetail",value:function(e){this.router.navigate(["vpDetail/".concat(e._id)])}},{key:"gotoVCDetail",value:function(e){this.router.navigate(["vcDetail/".concat(e.vcid)])}},{key:"sortVPVTable",value:function(e){this.visboprojectversions&&(void 0!==e&&(e!==this.sortColumn&&(this.sortColumn=e,this.sortAscending=void 0),this.sortAscending=void 0===this.sortAscending?5===e:!this.sortAscending),1===this.sortColumn?this.visboprojectversions.sort((function(e,t){return zv(e.timestamp,t.timestamp)})):2===this.sortColumn?this.visboprojectversions.sort((function(e,t){return zv(e.endDate,t.endDate)})):3===this.sortColumn?this.visboprojectversions.sort((function(e,t){return e.ampelStatus-t.ampelStatus})):4===this.sortColumn?this.visboprojectversions.sort((function(e,t){return e.Erloes-t.Erloes})):5===this.sortColumn&&this.visboprojectversions.sort((function(e,t){return qv(e.variantName.toLowerCase(),t.variantName.toLowerCase())})),this.sortAscending||this.visboprojectversions.reverse())}},{key:"log",value:function(e){this.messageService.add("VisboProjectVersion: "+e)}}]),e}()).\u0275fac=function(e){return new(e||ZI)(Za(Ew),Za(dk),Za(tf),Za(Zm),Za(sg),Za(Am),Za(Rb))},ZI.\u0275cmp=wt({type:ZI,selectors:[["app-visboprojectversions"]],decls:39,vars:27,consts:[[1,"well"],[1,"container"],[4,"ngIf"],[1,"row"],[1,"col","my-2"],["class","btn-group ",4,"ngIf"],[1,"panel-body"],[1,"table","table-hover","table-sortable"],[1,"d-none","d-md-table-cell"],[3,"click"],[1,"d-none","d-lg-table-cell"],[1,"d-none","d-lg-table-cell",3,"click"],[3,"click",4,"ngIf"],[1,"d-none","d-md-table-cell",3,"click"],[4,"ngFor","ngForOf"],["trafficLight",""],["class","modal fade","id","VpvDetails","tabindex","-1","role","dialog","aria-labelledby","Details Project Version","aria-hidden","true",4,"ngIf"],["class","modal fade","id","VpvDelete","tabindex","-1","role","dialog","aria-labelledby","Delete Project Version","aria-hidden","true",4,"ngIf"],[1,"panel-heading","bg-white","btn-white",3,"click"],[1,"btn-group"],["class","btn btn-sm btn-secondary m-2",3,"click",4,"ngIf"],[1,"btn","btn-sm","btn-secondary","m-2",3,"click"],["data-toggle","modal","data-target","#VpvDetails",3,"title","click"],["data-toggle","modal","data-target","#VpvDetails",1,"d-none","d-lg-table-cell",3,"click"],["data-toggle","modal","data-target","#VpvDetails",1,"d-none","d-md-table-cell",3,"click"],["id","ColDeleteVPV","class","Detail","data-toggle","modal","data-target","#VpvDelete",3,"title","click",4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["id","ColDeleteVPV","data-toggle","modal","data-target","#VpvDelete",1,"Detail",3,"title","click"],[3,"ngClass"],["id","VpvDetails","tabindex","-1","role","dialog","aria-labelledby","Details Project Version","aria-hidden","true",1,"modal","fade"],["role","document",1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header"],["id","VpvDeleteTitle",1,"modal-title"],["type","button","data-dismiss","modal","aria-label","Close",1,"close"],["aria-hidden","true"],[1,"modal-body"],[1,"form-group","v_compact_t","row"],["for","VpvName",1,"col-sm-4","col-form-label"],[1,"col-sm-8","form-control-static","pt-2"],["for","VpvVersions",1,"col-sm-4","col-form-label"],["for","VpvUpdated",1,"col-sm-4","col-form-label"],["class","form-group v_compact_t row",4,"ngIf"],[1,"modal-footer","align-items-end"],["type","button","data-dismiss","modal",1,"btn","btn-secondary"],["class","btn btn-primary","data-dismiss","modal",3,"click",4,"ngIf"],["for","VpvVariant",1,"col-sm-4","col-form-label"],["for","VpvStart",1,"col-sm-4","col-form-label"],["for","VpvEnd",1,"col-sm-4","col-form-label"],["for","VpvStatus",1,"col-sm-4","col-form-label"],["for","VpvBU",1,"col-sm-4","col-form-label"],["data-dismiss","modal",1,"btn","btn-primary",3,"click"],["id","VpvDelete","tabindex","-1","role","dialog","aria-labelledby","Delete Project Version","aria-hidden","true",1,"modal","fade"],["class","bg-warning",4,"ngIf"],["class","bg-danger text-white",4,"ngIf"],[1,"form-group","row"],[1,"col-sm-8","form-control-static"],["type","button","class","btn btn-warning text-white","data-dismiss","modal",3,"click",4,"ngIf"],["type","button","class","btn btn-danger text-white","data-dismiss","modal",3,"click",4,"ngIf"],[1,"bg-warning"],[1,"bg-danger","text-white"],["type","button","data-dismiss","modal",1,"btn","btn-warning","text-white",3,"click"],["type","button","data-dismiss","modal",1,"btn","btn-danger","text-white",3,"click"]],template:function(e,t){1&e&&(io(0,"app-usernavbar"),to(1,"div",0),to(2,"div",1),Ya(3,wI,3,3,"h2",2),Ya(4,AI,5,4,"h2",2),to(5,"div",3),to(6,"div",4),Ya(7,MI,5,5,"h5",2),no(),Ya(8,TI,3,2,"div",5),no(),no(),to(9,"div",6),to(10,"table",7),to(11,"thead"),to(12,"tr"),to(13,"th",8),So(14),qs(15,"translate"),no(),to(16,"th",9),uo("click",(function(){return t.sortVPVTable(1)})),So(17),qs(18,"translate"),no(),to(19,"th",10),So(20),qs(21,"translate"),no(),to(22,"th",11),uo("click",(function(){return t.sortVPVTable(2)})),So(23),qs(24,"translate"),no(),Ya(25,xI,3,3,"th",12),to(26,"th",13),uo("click",(function(){return t.sortVPVTable(5)})),So(27),qs(28,"translate"),no(),to(29,"th",10),So(30),qs(31,"translate"),no(),Ya(32,_I,3,3,"th",2),no(),no(),to(33,"tbody"),Ya(34,GI,20,18,"tr",14),no(),no(),no(),no(),Ya(35,jI,1,7,"ng-template",null,15,$s),Ya(37,zI,42,30,"div",16),Ya(38,$I,41,28,"div",17)),2&e&&(zi(3),Xa("ngIf",!t.vpActive),zi(1),Xa("ngIf",t.vpActive),zi(3),Xa("ngIf",t.vpActive),zi(1),Xa("ngIf",t.hasVPPerm(t.permVP.DeleteVP)),zi(6),To(zs(15,15,"vpv.lbl.nr")),zi(3),To(zs(18,17,"vpv.lbl.timestamp")),zi(3),To(zs(21,19,"vpv.lbl.status")),zi(3),To(zs(24,21,"vpv.lbl.endDate")),zi(2),Xa("ngIf",t.hasVPPerm(t.permVP.ViewAudit)),zi(2),To(zs(28,23,"vpv.lbl.variant")),zi(3),To(zs(31,25,"vpv.lbl.locked")),zi(2),Xa("ngIf",t.hasVPPerm(t.permVP.DeleteVP)),zi(2),Xa("ngForOf",t.visboprojectversions),zi(3),Xa("ngIf",t.visboprojectversion),zi(1),Xa("ngIf",t.visboprojectversion))},directives:[pk,su,au,vu,iu,Fh,xd,Gh],pipes:[jb,Cu],styles:[".v_compact_t[_ngcontent-%COMP%]{margin:0;padding-top:0}"]}),ZI);function eS(e,t){if(1&e){var n=so();to(0,"div",19),uo("click",(function(){mn(n);var e=fo().$implicit;return fo(3).switchPFVersion(e.version)})),So(1),no()}if(2&e){var i=fo().$implicit;zi(1),xo("",i.name," ")}}function tS(e,t){if(1&e){var n=so();to(0,"div",20),uo("click",(function(){mn(n);var e=fo().$implicit;return fo(3).switchPFVersion(e.version)})),So(1),no()}if(2&e){var i=fo().$implicit;zi(1),xo("",i.name," ")}}function nS(e,t){if(1&e&&(to(0,"a",16),Ya(1,eS,2,1,"div",17),Ya(2,tS,2,1,"div",18),no()),2&e){var n=t.$implicit,i=fo(3);po("title",n.email),zi(1),Xa("ngIf",i.checkVPFActive(n)),zi(1),Xa("ngIf",!i.checkVPFActive(n))}}function iS(e,t){if(1&e&&(to(0,"span",12),to(1,"a",13),So(2),no(),to(3,"div",14),Ya(4,nS,3,3,"a",15),no(),no()),2&e){var n=fo(2);zi(2),To(n.getVariantName(n.vpfActive,!1,!0)),zi(2),Xa("ngForOf",n.dropDown)}}function rS(e,t){if(1&e){var n=so();to(0,"a",10),uo("click",(function(){mn(n);var e=fo(3);return e.gotoVC(e.vpActive)})),So(1),no()}if(2&e){var i=fo(3);zi(1),To(i.vpActive.vc.name)}}function aS(e,t){if(1&e&&(to(0,"span"),So(1),no()),2&e){var n=fo(3);zi(1),To(n.vpActive.vc.name)}}function oS(e,t){if(1&e&&(to(0,"h5"),So(1),qs(2,"translate"),Ya(3,rS,2,1,"a",21),Ya(4,aS,2,1,"span",4),no()),2&e){var n=fo(2);zi(1),xo("",zs(2,3,"vpfVersion.titleVC"),": "),zi(2),Xa("ngIf",n.hasVCPerm(n.permVC.View)),zi(1),Xa("ngIf",!n.hasVCPerm(n.permVC.View))}}function sS(e,t){if(1&e){var n=so();to(0,"div",8),to(1,"div",9),to(2,"h2"),So(3),qs(4,"translate"),to(5,"a",10),uo("click",(function(){mn(n);var e=fo();return e.gotoVPDetail(e.vpActive)})),So(6),no(),Ya(7,iS,5,2,"span",11),no(),Ya(8,oS,5,5,"h5",4),no(),no()}if(2&e){var i=fo();zi(3),xo(" ",zs(4,4,"vpfVersion.title"),": "),zi(3),xo(" ",i.vpActive.name,""),zi(1),Xa("ngIf",i.dropDown.length>1&&!i.getPreView()),zi(1),Xa("ngIf",i.vpActive)}}var lS=function(e){return{refDate:e}};function cS(e,t){if(1&e){var n=so();to(0,"span",33),uo("click",(function(){return mn(n),fo(3).getNextVersion(-1)})),qs(1,"translate"),qs(2,"date"),no()}if(2&e){var i=fo(3);po("title",Qs(1,1,"vpfVersion.lbl.previousPeriod",Gs(7,lS,Qs(2,4,i.vpvRefDate,"dd.MM."))))}}function uS(e,t){if(1&e){var n=so();to(0,"select",34),uo("ngModelChange",(function(e){return mn(n),fo(3).refDateInterval=e})),to(1,"option",35),So(2),qs(3,"translate"),no(),to(4,"option",36),So(5),qs(6,"translate"),no(),to(7,"option",37),So(8),qs(9,"translate"),no(),to(10,"option",38),So(11),qs(12,"translate"),no(),no()}2&e&&(Xa("ngModel",fo(3).refDateInterval),zi(2),To(zs(3,5,"vpfVersion.lbl.day")),zi(3),To(zs(6,7,"vpfVersion.lbl.week")),zi(3),To(zs(9,9,"vpfVersion.lbl.month")),zi(3),To(zs(12,11,"vpfVersion.lbl.quarter")))}function dS(e,t){if(1&e){var n=so();to(0,"span",39),uo("click",(function(){return mn(n),fo(3).getNextVersion(1)})),qs(1,"translate"),qs(2,"date"),no()}if(2&e){var i=fo(3);po("title",Qs(1,1,"vpfVersion.lbl.nextPeriod",Gs(7,lS,Qs(2,4,i.vpvRefDate,"dd.MM."))))}}function hS(e,t){if(1&e&&(to(0,"div",29),to(1,"div",8),Ya(2,cS,3,9,"span",30),Ya(3,uS,13,13,"select",31),Ya(4,dS,3,9,"span",32),no(),no()),2&e){var n=fo(2);zi(2),Xa("ngIf",n.statusDirection>=0),zi(1),Xa("ngIf",null!=n.statusDirection),zi(1),Xa("ngIf",n.statusDirection<=0)}}function vS(e,t){if(1&e){var n=so();to(0,"button",42),uo("click",(function(){return mn(n),fo(3).changeView("Capacity")})),So(1),qs(2,"translate"),no()}2&e&&(zi(1),To(zs(2,1,"vpfVersion.btn.viewCapacity")))}function fS(e,t){if(1&e){var n=so();to(0,"button",46),uo("click",(function(){mn(n);var e=fo(3);return e.initProjectList(e.vpActive)})),So(1),qs(2,"translate"),no()}2&e&&(zi(1),To(zs(2,1,"vpfVersion.btn.editPFList")))}function pS(e,t){if(1&e){var n=so();to(0,"div",40),to(1,"div",41),to(2,"button",42),uo("click",(function(){return mn(n),fo(2).changeView("KeyMetrics")})),So(3),qs(4,"translate"),no(),to(5,"button",42),uo("click",(function(){return mn(n),fo(2).changeView("List")})),So(6),qs(7,"translate"),no(),Ya(8,vS,3,3,"button",43),to(9,"button",42),uo("click",(function(){return mn(n),fo(2).changeView("ProjectBoard")})),So(10),qs(11,"translate"),no(),no(),to(12,"div",44),Ya(13,fS,3,3,"button",45),no(),no()}if(2&e){var i=fo(2);zi(3),To(zs(4,5,"vpfVersion.btn.viewKeyMetrics")),zi(3),To(zs(7,7,"vpfVersion.btn.viewList")),zi(2),Xa("ngIf",i.hasVPPerm(i.permVP.Modify+i.permVP.ViewAudit)&&i.hasOrga),zi(2),To(zs(11,9,"vpfVersion.btn.viewProjectBoard")),zi(3),Xa("ngIf",i.hasVPPerm(i.permVP.Modify))}}var gS=function(e,t){return{count:e,total:t}};function mS(e,t){if(1&e&&(to(0,"div",47),So(1),qs(2,"translate"),no()),2&e){var n=fo(2);zi(1),xo(" ",Qs(2,1,"vpfVersion.msg.warningVersionMismatch",Rs(4,gS,n.vpvCount,n.vpList.length))," ")}}function bS(e,t){if(1&e&&(to(0,"div",22),to(1,"div",8),to(2,"h3",23),to(3,"div",24),So(4),qs(5,"translate"),qs(6,"date"),no(),to(7,"div",25),So(8),qs(9,"translate"),qs(10,"date"),no(),no(),Ya(11,hS,5,3,"div",26),no(),Ya(12,pS,14,11,"div",27),Ya(13,mS,3,7,"div",28),no()),2&e){var n=fo();zi(4),_o("",zs(5,7,"vpfVersion.titleKM")," ",Qs(6,9,n.vpvRefDate,"dd.MM.yyyy"),""),zi(4),_o("",zs(9,12,"vpfVersion.titleKMShort"),": ",Qs(10,14,n.vpvRefDate,"dd.MM."),""),zi(3),Xa("ngIf",!n.getPreView()),zi(1),Xa("ngIf",!n.getPreView()),zi(1),Xa("ngIf",n.isVersionMismatch())}}function yS(e,t){if(1&e){var n=so();to(0,"div",50),to(1,"button",51),uo("click",(function(){mn(n);var e=fo(2);return e.initProjectList(e.vpActive)})),So(2),qs(3,"translate"),no(),no()}2&e&&(zi(2),To(zs(3,1,"vpfVersion.btn.editPFList")))}function kS(e,t){if(1&e&&(to(0,"div",48),So(1),qs(2,"translate"),Ya(3,yS,4,3,"div",49),no()),2&e){var n=fo();zi(1),xo(" ",zs(2,2,"vpfVersion.msg.noProjectList")," "),zi(2),Xa("ngIf",n.hasVPPerm(n.permVP.Modify))}}function CS(e,t){if(1&e&&(to(0,"div"),io(1,"hr"),io(2,"app-comp-viewcapacity",52),no()),2&e){var n=fo();zi(2),Xa("vpActive",n.vpActive)("vpfActive",n.vpfActive)("refDate",n.vpvRefDate)("combinedPerm",n.combinedPerm)}}function VS(e,t){if(1&e&&(to(0,"div"),io(1,"hr"),io(2,"app-comp-viewbubble",53),no()),2&e){var n=fo();zi(2),Xa("bubbleMode",!0)("visboprojectversions",n.visboprojectversions)("combinedPerm",n.combinedPerm)}}function wS(e,t){if(1&e&&(to(0,"div"),io(1,"hr"),io(2,"app-comp-viewbubble",53),no()),2&e){var n=fo();zi(2),Xa("bubbleMode",!1)("visboprojectversions",n.visboprojectversions)("combinedPerm",n.combinedPerm)}}function AS(e,t){if(1&e&&(to(0,"div"),io(1,"hr"),io(2,"app-comp-viewboard",54),no()),2&e){var n=fo();zi(2),Xa("vps",n.vpList)}}function PS(e,t){if(1&e){var n=so();to(0,"a",20),uo("click",(function(){mn(n);var e=t.$implicit;return fo(3).switchEditVariant(e.version)})),So(1),qs(2,"translate"),no()}if(2&e){var i=t.$implicit;zi(1),To(zs(2,1,i.name||"vpfVersion.lbl.defaultVariant"))}}function DS(e,t){if(1&e&&(to(0,"div",74),So(1),qs(2,"translate"),to(3,"a",13),So(4),no(),to(5,"div",14),Ya(6,PS,3,3,"a",75),no(),no()),2&e){var n=fo(2);zi(1),xo(" ",zs(2,3,"vpfVersion.lbl.variant"),": "),zi(3),To(n.getVariantName(void 0,!0,!1)),zi(2),Xa("ngForOf",n.dropDownVariant)}}function MS(e,t){1&e&&io(0,"td",87)}function IS(e,t){if(1&e&&(to(0,"option"),So(1),no()),2&e){var n=t.$implicit;zi(1),To(n)}}function SS(e,t){if(1&e){var n=so();to(0,"td",87),to(1,"div",8),to(2,"select",90),uo("ngModelChange",(function(e){return mn(n),fo().$implicit.variantName=e})),to(3,"option",91),So(4),qs(5,"translate"),no(),Ya(6,IS,2,1,"option",84),no(),to(7,"span",92),uo("click",(function(){mn(n);var e=fo().index;return fo(3).initVariantChange(e)})),qs(8,"translate"),no(),no(),no()}if(2&e){var i=fo().$implicit,r=fo(3);zi(2),Xa("ngModel",i.variantName),zi(2),To(zs(5,4,"vpfVersion.lbl.defaultVariant")),zi(2),Xa("ngForOf",r.getVariants(i.vp)),zi(1),po("title",zs(8,6,"vpfVersion.lbl.changeVPVariant"))}}function TS(e,t){if(1&e){var n=so();to(0,"tr"),to(1,"td",85),to(2,"input",86),uo("ngModelChange",(function(e){return mn(n),t.$implicit.isChecked=e})),no(),no(),to(3,"td",87),to(4,"a"),So(5),no(),no(),Ya(6,MS,1,0,"td",88),Ya(7,SS,9,8,"td",88),to(8,"td",89),So(9),qs(10,"date"),no(),no()}if(2&e){var i=t.$implicit;zi(2),Xa("ngModel",i.isChecked),zi(3),To(i.vp.name),zi(1),Xa("ngIf",!i.hasVariants),zi(1),Xa("ngIf",i.hasVariants),zi(2),To(Qs(10,5,i.vp.updatedAt,"dd.MM.yy"))}}function xS(e,t){if(1&e){var n=so();to(0,"table",76),to(1,"thead",77),to(2,"tr"),to(3,"th",78),to(4,"input",79),uo("ngModelChange",(function(e){return mn(n),fo(2).isGlobalChecked=e}))("change",(function(){return mn(n),fo(2).globalChecked()})),no(),to(5,"span",10),uo("click",(function(){return mn(n),fo(2).sortVPTable(3)})),So(6),qs(7,"translate"),no(),no(),to(8,"th",80),uo("click",(function(){return mn(n),fo(2).sortVPTable(1)})),So(9),qs(10,"translate"),no(),to(11,"th",81),uo("click",(function(){return mn(n),fo(2).sortVPTable(4)})),So(12),qs(13,"translate"),no(),to(14,"th",82),uo("click",(function(){return mn(n),fo(2).sortVPTable(2)})),So(15),qs(16,"translate"),no(),no(),no(),to(17,"tbody",83),Ya(18,TS,11,8,"tr",84),no(),no()}if(2&e){var i=fo(2);zi(4),Xa("ngModel",i.isGlobalChecked),zi(2),xo(" ",zs(7,6,"vpfVersion.lbl.isChecked"),""),zi(3),To(zs(10,8,"vpfVersion.lbl.name")),zi(3),To(zs(13,10,"vpfVersion.lbl.variant")),zi(3),To(zs(16,12,"vpfVersion.lbl.modified")),zi(3),Xa("ngForOf",i.vpCheckListFiltered)}}function _S(e,t){1&e&&(to(0,"button",93),So(1),qs(2,"translate"),no()),2&e&&(zi(1),To(zs(2,1,"vpfVersion.btn.delete")))}var US=function(e,t){return{name:e,from:t}};function OS(e,t){if(1&e){var n=so();to(0,"div",55),to(1,"div",56),to(2,"div",57),to(3,"div",58),to(4,"h5",59),So(5),qs(6,"translate"),qs(7,"date"),no(),to(8,"button",60),to(9,"span",61),So(10,"\xd7"),no(),no(),no(),to(11,"div",62),to(12,"div",63),Ya(13,DS,7,5,"div",64),to(14,"div",65),to(15,"span"),So(16),qs(17,"translate"),no(),to(18,"input",66),uo("keyup",(function(e){return mn(n),fo().filterKeyBoardEvent(e)}))("ngModelChange",(function(e){return mn(n),fo().vpfListFilter=e})),no(),to(19,"a",67),uo("click",(function(){return mn(n),fo().filterVPList(!0)})),io(20,"i",68),no(),no(),no(),Ya(21,xS,19,14,"table",69),no(),to(22,"div",70),to(23,"button",71),So(24),qs(25,"translate"),no(),Ya(26,_S,3,3,"button",72),to(27,"button",73),uo("click",(function(){return mn(n),fo().updateVPF()})),So(28),no(),no(),no(),no(),no()}if(2&e){var i=fo();zi(5),To(Qs(6,8,"vpfVersion.titleVPList",Rs(18,US,i.vpActive.name,Qs(7,11,i.vpfActive?i.vpfActive.timestamp:i.vpActive.updatedAt,"dd.MM.yyyy")))),zi(8),Xa("ngIf",i.dropDownVariant.length>1),zi(3),xo(" ",zs(17,14,"vpfVersion.lbl.filter"),":"),zi(2),Xa("ngModel",i.vpfListFilter),zi(3),Xa("ngIf",i.vpCheckListFiltered.length>0),zi(3),To(zs(25,16,"vpfVersion.btn.back")),zi(2),Xa("ngIf",i.hasVPPerm(i.permVP.DeleteVP)),zi(2),To(i.saveVPFString())}}function ES(e,t){if(1&e&&(to(0,"div",97),to(1,"label",98),So(2),qs(3,"translate"),no(),to(4,"label",99),So(5),no(),no()),2&e){var n=fo(2);zi(2),xo("",zs(3,2,"vpfVersion.lbl.variant"),":"),zi(3),To(n.vpfActive.variantName)}}function LS(e,t){if(1&e&&(to(0,"div",97),to(1,"label",98),So(2),qs(3,"translate"),no(),to(4,"label",99),So(5),no(),no()),2&e){var n=fo(2);zi(2),xo("",zs(3,2,"vpfVersion.lbl.nrOfItems"),":"),zi(3),To(n.vpfActive.allItems.length)}}function GS(e,t){if(1&e&&(to(0,"div",97),to(1,"label",98),So(2),qs(3,"translate"),no(),to(4,"label",99),So(5),no(),no()),2&e){var n=fo(2);zi(2),xo("",zs(3,2,"vpfVersion.lbl.user"),":"),zi(3),To(n.vpfActive.updatedFrom.email)}}function RS(e,t){if(1&e){var n=so();to(0,"button",102),uo("click",(function(){mn(n);var e=fo(2);return e.deleteVPF(e.vpfActive)})),So(1),qs(2,"translate"),no()}2&e&&(zi(1),To(zs(2,1,"vpfVersion.btn.delete")))}function jS(e,t){if(1&e&&(to(0,"div",94),to(1,"div",56),to(2,"div",57),to(3,"div",58),to(4,"h5",95),So(5),qs(6,"translate"),qs(7,"date"),no(),to(8,"button",60),to(9,"span",61),So(10,"\xd7"),no(),no(),no(),to(11,"div",62),to(12,"div"),to(13,"label",96),So(14),qs(15,"translate"),no(),no(),to(16,"form"),to(17,"div",97),to(18,"label",98),So(19),qs(20,"translate"),no(),to(21,"label",99),So(22),no(),no(),Ya(23,ES,6,4,"div",100),to(24,"div",97),to(25,"label",98),So(26),qs(27,"translate"),no(),to(28,"label",99),So(29),qs(30,"date"),no(),no(),Ya(31,LS,6,4,"div",100),Ya(32,GS,6,4,"div",100),no(),no(),to(33,"div",70),to(34,"button",71),So(35),qs(36,"translate"),no(),Ya(37,RS,3,3,"button",101),no(),no(),no(),no()),2&e){var n=fo();zi(5),To(Qs(6,11,"vpfVersion.titleVPList",Rs(28,US,n.vpfActive.name,Qs(7,14,n.vpfActive.timestamp,"dd.MM.yyyy")))),zi(9),To(zs(15,17,"vpfVersion.msg.removeVPFConfirm")),zi(5),xo("",zs(20,19,"vpfVersion.lbl.name"),":"),zi(3),xo("",n.vpfActive.name," "),zi(1),Xa("ngIf",n.vpfActive.variantName),zi(3),xo("",zs(27,21,"vpfVersion.lbl.from"),":"),zi(3),xo("",Qs(30,23,n.vpfActive.timestamp,"dd.MM.yyyy")," "),zi(2),Xa("ngIf",n.vpfActive.allItems.length>0),zi(1),Xa("ngIf",n.vpfActive.updatedFrom),zi(3),To(zs(36,26,"vpfVersion.btn.back")),zi(2),Xa("ngIf",n.hasVPPerm(n.permVP.DeleteVP))}}var NS=function(e,t){return{name:e,count:t}};function FS(e,t){if(1&e&&(to(0,"label",96),So(1),qs(2,"translate"),no()),2&e){var n=fo(2);zi(1),To(Qs(2,1,"vpfVersion.msg.changeVPVariant",Rs(4,NS,n.switchVariant,n.switchVariantCount)))}}var BS=function(e){return{count:e}};function HS(e,t){if(1&e&&(to(0,"label",96),So(1),qs(2,"translate"),no()),2&e){var n=fo(2);zi(1),To(Qs(2,1,"vpfVersion.msg.changeVPVariantStandard",Gs(4,BS,n.switchVariantCount)))}}var KS=function(e){return{name:e}};function qS(e,t){if(1&e){var n=so();to(0,"div",103),to(1,"div",104),to(2,"div",57),to(3,"div",58),to(4,"h5",105),So(5),qs(6,"translate"),no(),to(7,"button",60),to(8,"span",61),So(9,"\xd7"),no(),no(),no(),to(10,"div",62),to(11,"div"),Ya(12,FS,3,7,"label",106),Ya(13,HS,3,6,"label",106),no(),no(),to(14,"div",70),to(15,"button",107),So(16),qs(17,"translate"),no(),to(18,"button",108),uo("click",(function(){return mn(n),fo().changeVPVariant()})),So(19),qs(20,"translate"),no(),no(),no(),no(),no()}if(2&e){var i=fo();zi(5),To(Qs(6,5,"vpfVersion.titleChangeVPVariant",Gs(12,KS,i.vpfActive.name))),zi(7),Xa("ngIf",i.switchVariant),zi(1),Xa("ngIf",!i.switchVariant),zi(3),To(zs(17,8,"vpfVersion.btn.back")),zi(3),To(zs(20,10,"vpfVersion.btn.update"))}}var zS,QS,WS=function e(){p(this,e)},JS=((QS=function(){function e(t,n,i,r,a,o,s,l,c,u,d){p(this,e),this.visboprojectversionService=t,this.visboprojectService=n,this.visbosettingService=i,this.messageService=r,this.alertService=a,this.route=o,this.authenticationService=s,this.router=l,this.translate=c,this.datePipe=u,this.titleService=d,this.dropDown=[],this.dropDownVariant=[],this.views=["KeyMetrics","Capacity","ProjectBoard","List"],this.vpvRefDate=new Date,this.refDateInterval="month",this.deleted=!1,this.vpCheckListAll=[],this.vpCheckListFiltered=[],this.hasOrga=!1,this.pageParams=new xw,this.isGlobalChecked=!1,this.combinedPerm=void 0,this.permVC=uy,this.permVP=dy}return m(e,[{key:"ngOnInit",value:function(){this.currentLang=this.translate.currentLang,this.user=this.authenticationService.getActiveUser(),this.titleService.setTitle(this.translate.instant("vpfVersion.title")),this.log("Init VPF with Transaltion: "+this.translate.instant("vpfVersion.title")),localStorage.removeItem("vpfFilter");var e=this.route.snapshot.queryParams.refDate,t=this.route.snapshot.queryParams.view||"KeyMetrics",n=this.route.snapshot.queryParams.vpfid||void 0,i=this.route.snapshot.queryParams.filter||null;this.vpfid=n,this.vpvRefDate=Date.parse(e)>0?new Date(e):new Date,this.changeView(t,e?this.vpvRefDate:void 0,i,n,!1),this.getVisboProject()}},{key:"ngOnChanges",value:function(e){this.log("Portfolio Changes "+JSON.stringify(e))}},{key:"hasVPPerm",value:function(e){var t;return((null===(t=this.combinedPerm)||void 0===t?void 0:t.vp)&e)>0}},{key:"hasVCPerm",value:function(e){var t,n=!1;return((null===(t=this.combinedPerm)||void 0===t?void 0:t.vc)&e)>0&&(n=!0),n}},{key:"getVisboProject",value:function(){var e=this,t=this.route.snapshot.paramMap.get("id");this.vpSelected=t,this.log("get VP name if ID is used "+t),this.visboprojectService.getVisboProject(t).subscribe((function(t){e.vpActive=t,e.deleted=!!t.deletedAt,e.combinedPerm=t.perm,e.titleService.setTitle(e.translate.instant("vpfVersion.titleName",{name:t.name})),e.getVisboPortfolioVersions(),e.getVisboCenterOrga()}),(function(t){if(e.log("get Portfolio VP failed: error: ".concat(t.status," message: ").concat(t.error.message)),403===t.status){var n=e.translate.instant("vpfVersion.msg.errorPermVP");e.alertService.error(n)}else e.alertService.error(Zv(t))}))}},{key:"initProjectList",value:function(e){var t=this;this.vpfListFilter=void 0,e||e.vcid?this.visboprojectService.getVisboProjects(e.vcid,!1,!1).subscribe((function(e){t.initVPF(e)}),(function(e){t.log("get VPs failed: error:  ".concat(e.status," message: ").concat(e.error.message)),t.alertService.error(Zv(e))})):this.log("No Portfolio found")}},{key:"getVisboCenterOrga",value:function(){var e=this;this.vpActive&&this.combinedPerm&&(this.combinedPerm.vc&this.permVC.View)>0&&(this.log("get VC Orga "+this.vpActive.vcid),this.visbosettingService.getVCOrganisations(this.vpActive.vcid,!1,void 0,!0).subscribe((function(t){e.hasOrga=t.length>0}),(function(t){if(403===t.status){var n=e.translate.instant("vpfVersion.msg.errorPermVP");e.alertService.error(n)}else e.alertService.error(Zv(t))})))}},{key:"getVisboPortfolioVersions",value:function(){var e=this;this.log("get Portfolio Versions ".concat(this.vpActive.name," Perm ").concat(JSON.stringify(this.combinedPerm))),this.visboprojectversionService.getVisboPortfolioVersions(this.vpActive._id,this.deleted).subscribe((function(t){e.visboportfolioversions=t;var n=0;e.vpfid&&(n=t.findIndex((function(t){return t._id.toString()===e.vpfid})))<0&&(n=0),t.length>0&&(e.vpfActive=t[n],e.dropDownInit(),e.getVisboPortfolioKeyMetrics(),e.log("get VPF Length "+e.visboportfolioversions.length))}),(function(t){if(e.log("get VPVs failed: error: ".concat(t.status," message: ").concat(t.error.message)),403===t.status){var n=e.translate.instant("vpfVersion.msg.errorPermVersion",{name:e.vpActive.name});e.alertService.error(n)}else e.alertService.error(Zv(t))}))}},{key:"getVisboPortfolioKeyMetrics",value:function(){var e=this;this.log("get VPF keyMetrics ".concat(this.vpfActive.name," ").concat(this.vpfActive._id)),this.visboprojectversionService.getVisboPortfolioKeyMetrics(this.vpfActive._id,this.vpvRefDate).subscribe((function(t){var n;e.visboprojectversions=t,e.calcVPList(),e.log("get VPF Key metrics: Get ".concat(t.length," Project Versions")),t.length>0&&e.log("First VPV: ".concat(t[0]._id," ").concat(t[0].timestamp," ").concat(null===(n=t[0].keyMetrics)||void 0===n?void 0:n.endDateCurrent," ")),e.evaluateDirection()}),(function(t){if(e.log("get VPVs failed: error: ".concat(t.status," message: ").concat(t.error.message)),403===t.status){var n=e.translate.instant("vpfVersion.msg.errorPermVP");e.alertService.error(n)}else e.alertService.error(Zv(t))}))}},{key:"getRefDateVersions",value:function(e){this.log("get getRefDateVersions ".concat(this.vpvRefDate.toISOString()," ").concat(this.refDateInterval," ").concat(e));var t=new Date(this.vpvRefDate.getTime()),n=0;switch(this.refDateInterval){case"day":t.setHours(0,0,0,0),(e>0||t.getTime()===this.vpvRefDate.getTime())&&t.setDate(t.getDate()+e);break;case"week":t.setHours(0,0,0,0),t.setDate(t.getDate()+7*e);break;case"month":t.setHours(0,0,0,0),t.setDate(1),(e>0||t.getTime()===this.vpvRefDate.getTime())&&t.setMonth(t.getMonth()+e);break;case"quarter":n=Math.trunc(t.getMonth()/3),e>0&&(n+=e),t.setMonth(3*n),t.setDate(1),t.setHours(0,0,0,0),t.getTime()===this.vpvRefDate.getTime()&&t.setMonth(t.getMonth()+3*e)}var i=new Date;t>i&&(t=i),this.log("get getRefDateVersions "+t.toISOString()),this.vpvRefDate=new Date(t.toISOString()),this.changeView(void 0,this.vpvRefDate),this.getVisboPortfolioKeyMetrics()}},{key:"initVPF",value:function(e){var t=this;this.dropDownVariantSelected=this.vpfActive?this.vpfActive.variantName:"",this.isGlobalChecked=!1,this.vpCheckListAll=[],e.forEach((function(e){if(0==e.vpType){var n=new WS,i=t.getVPFMember(e);i?(n.isChecked=!0,n.variantName=i.variantName):(n.isChecked=!1,n.variantName=""),n.vp=e,t.getVariants(e).length>0&&(n.hasVariants=!0),t.vpCheckListAll.push(n)}})),this.vpCheckListAll.sort((function(e,t){return qv(e.vp.name.toLowerCase(),t.vp.name.toLowerCase())})),this.filterVPList()}},{key:"getVariants",value:function(e){var t=[];return e&&e.variant&&(e.variant.forEach((function(e){"pfv"!=e.variantName&&e.vpvCount>0&&t.push(e.variantName)})),t.sort((function(e,t){return qv(e.toLowerCase(),t.toLowerCase())}))),t}},{key:"getVPFMember",value:function(e){var t;return this.vpfActive&&this.vpfActive.allItems&&(t=this.vpfActive.allItems.find((function(t){return t.vpid.toString()==e._id.toString()}))),t}},{key:"globalChecked",value:function(){var e=this;this.log("Switch Global Check "+this.isGlobalChecked),this.vpCheckListFiltered.forEach((function(t){t.isChecked=e.isGlobalChecked}))}},{key:"filterKeyBoardEvent",value:function(e){e||this.log("No Keyboard Event"),this.filterVPList()}},{key:"filterVPList",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e&&(this.vpfListFilter=void 0);var t=!0,n=[],i=this.vpfListFilter?this.vpfListFilter.toLowerCase():void 0;this.vpCheckListAll.forEach((function(e){(!i||e.vp.name.toLowerCase().indexOf(i)>=0||e.vp.variant.findIndex((function(e){return e.variantName.toLowerCase().indexOf(i)>=0}))>=0)&&(e.isChecked||(t=!1),n.push(e))})),this.vpCheckListFiltered=n,this.isGlobalChecked=t}},{key:"initVariantChange",value:function(e){var t=this;if(this.log("init Change Variant of VPs "+e),e>=0&&e<this.vpCheckListFiltered.length){var n=this.vpCheckListFiltered[e];this.vpFilterIndex=e,this.log("Found VP ".concat(n.vp.name," Variant Selected ").concat(n.variantName)),this.switchVariantCount=0,this.switchVariant=n.variantName||"",n.variantName?(this.vpCheckListFiltered.forEach((function(e){e.vp&&e.vp.variant&&e.vp.variant.length>0&&e.vp.variant.forEach((function(e){e.variantName==n.variantName&&e.vpvCount>0&&(t.switchVariantCount+=1)}))})),this.log("Change to Variant ".concat(n.variantName," for count ").concat(this.switchVariantCount," VPs"))):(this.vpCheckListFiltered.forEach((function(e){e.variantName&&(t.switchVariantCount+=1)})),this.log("Change to Standard for count ".concat(this.switchVariantCount," VPs")))}}},{key:"changeVPVariant",value:function(){var e=this;this.log("Change Variant ".concat(this.switchVariant||"Standard"," of ").concat(this.switchVariantCount," VPs")),this.vpCheckListFiltered.forEach(this.switchVariant?function(t){t.vp&&t.vp.variant&&t.vp.variant.length>0&&t.vp.variant.forEach((function(n){n.variantName==e.switchVariant&&(t.variantName=e.switchVariant)}))}:function(e){e.variantName&&(e.variantName="")})}},{key:"checkUpdateVPF",value:function(){var e,t=!1;return this.vpfActive&&this.vpfActive.variantName==this.dropDownVariantSelected&&this.user._id==(null===(e=this.vpfActive.updatedFrom)||void 0===e?void 0:e.userId)&&Jv(new Date(this.vpfActive.timestamp))&&(t=!0),t}},{key:"saveVPFString",value:function(){return this.checkUpdateVPF()?this.translate.instant("vpfVersion.btn.update"):this.translate.instant("vpfVersion.btn.create")}},{key:"updateVPF",value:function(){var e=this;this.log("init VPF Item List");var t=new Tw;t.allItems=[new Sw],t.allItems.pop();var n=0;this.vpCheckListAll.forEach((function(e){if(e.isChecked){var i=new Sw;i.vpid=e.vp._id,i.name=e.vp.name,i.variantName=e.variantName,i.show=!0,i.zeile=++n,t.allItems.push(i)}})),t.variantName=this.dropDownVariantSelected,this.checkUpdateVPF()?(this.log("update VPF List "+this.vpCheckListAll.length),t._id=this.vpfActive._id,this.visboprojectversionService.updateVisboPortfolioVersion(this.vpActive,t).subscribe((function(t){console.log("update VPF %s with ID %s VPF Len %s",t.name,t._id,t.allItems.length);var n=e.translate.instant("vpfVersion.msg.createVPFSuccess",{name:e.vpActive.name});e.alertService.success(n,!0),e.visboportfolioversions.findIndex((function(e){return e._id==t._id}))>=0&&(e.vpfActive=t,e.getVisboPortfolioKeyMetrics())}),(function(t){if(e.log("add VPF failed: error: ".concat(t.status," messages: ").concat(t.error.message)),403===t.status){var n=e.translate.instant("vpfVersion.msg.errorVPFPerm",{name:name});e.alertService.error(n)}else e.alertService.error(Zv(t))}))):(this.log("create VPF List "+this.vpCheckListAll.length),this.visboprojectversionService.addVisboPortfolioVersion(this.vpActive,t).subscribe((function(t){console.log("add VPF %s with ID %s VPF Len %s",t.name,t._id,t.allItems.length);var n=e.translate.instant("vpfVersion.msg.createVPFSuccess",{name:e.vpActive.name});e.alertService.success(n,!0),e.visboportfolioversions.push(t),e.vpfActive=t,e.dropDownInit(),e.getVisboPortfolioKeyMetrics()}),(function(t){if(e.log("add VPF failed: error: ".concat(t.status," messages: ").concat(t.error.message)),403===t.status){var n=e.translate.instant("vpfVersion.msg.errorVPFPerm",{name:name});e.alertService.error(n)}else e.alertService.error(Zv(t))})))}},{key:"deleteVPF",value:function(e){var t=this;this.log("Remove VisboPortfolioVersion: ".concat(e.name," from:  ").concat(e.timestamp)),this.visboprojectversionService.deleteVisboPortfolioVersion(e).subscribe((function(){var n=t.datePipe.transform(e.timestamp,"dd.MM.yy"),i=t.translate.instant("vpfVersion.msg.removeVPFSuccess",{name:e.name,from:n}),r=t.visboportfolioversions.findIndex((function(t){return t._id==e._id}));t.visboportfolioversions.splice(r,1),r>=t.visboportfolioversions.length&&(r=t.visboportfolioversions.length-1),r>=0&&(t.dropDownInit(),t.switchPFVersion(r)),t.alertService.success(i)}),(function(n){if(t.log("Remove VisboPortfolioVersion error: "+n.error.message),403===n.status){var i=t.translate.instant("vpfVersion.msg.errorPerm",{name:e.name});t.alertService.error(i)}else t.log("Error during VisboPortfolioVersion "+n.error.message),t.alertService.error(Zv(n))}))}},{key:"getVariantName",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i="";return""==(i=e?e.variantName||"":this.dropDownVariantSelected||"")&&t&&(i=this.translate.instant("vpfVersion.lbl.defaultVariant")),i&&n&&(i="(".concat(i,")")),i}},{key:"evaluateDirection",value:function(){this.statusDirection=0===this.visboprojectversions.length?Yv(this.vpvRefDate,new Date)?void 0:-1:Yv(this.vpvRefDate,new Date)?1:0}},{key:"changeView",value:function(e,t,n,i){var r=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];e&&(this.views.findIndex((function(t){return t===e}))<0&&(e=this.views[0]),this.pageParams.view=e),n?this.pageParams.filter=n.trim():null===n?delete this.pageParams.filter:this.pageParams.filter=localStorage.getItem("vpfFilter")||void 0,t&&(this.pageParams.refDate=Jv(t)?void 0:t.toISOString()),i&&(this.pageParams.vpfid=i),r&&this.updateUrlParam()}},{key:"updateUrlParam",value:function(){var e=this.route.snapshot.url.join("/"),t=new xw;t.filter=this.pageParams.filter||null,t.vpfid=this.pageParams.vpfid||null,t.vpfid=this.pageParams.vpfid||null,t.refDate=this.pageParams.refDate||null,t.view=this.pageParams.view||null,this.router.navigate([e],{queryParams:t,replaceUrl:!0,queryParamsHandling:"merge"})}},{key:"isVersionMismatch",value:function(){var e=!1;return this.vpList&&this.vpfActive&&this.vpfActive.allItems?(this.vpfActive.allItems.length!==this.vpvCount&&(e=!0),e):e}},{key:"calcVPList",value:function(){var e,t=this;if(this.vpfActive||this.vpfActive.allItems){this.vpList=[],this.vpvCount=0;for(var n=function(n){var i=new Uw,r=t.vpfActive.allItems[n];i.vpid=r.vpid,i.name=r.name,i.variantName=r.variantName;var a=t.visboprojectversions.findIndex((function(e){return e.vpid===i.vpid}));a>=0&&(i.timestamp=new Date(t.visboprojectversions[a].timestamp),i.startDate=t.visboprojectversions[a].startDate,i.endDate=(null===(e=t.visboprojectversions[a].keyMetrics)||void 0===e?void 0:e.endDateCurrent)||t.visboprojectversions[a].endDate,i.leadPerson=t.visboprojectversions[a].leadPerson,i.VorlagenName=t.visboprojectversions[a].VorlagenName,i.businessUnit=t.visboprojectversions[a].businessUnit,i.status=t.visboprojectversions[a].status,i.ampelStatus=t.visboprojectversions[a].ampelStatus,i.ampelErlaeuterung=t.visboprojectversions[a].ampelErlaeuterung,i.keyMetrics=t.visboprojectversions[a].keyMetrics,t.vpvCount+=1),t.vpList.push(i)},i=0;i<this.vpfActive.allItems.length;i++)n(i)}}},{key:"getNextVersion",value:function(e){this.getRefDateVersions(e),this.changeView(void 0,this.vpvRefDate)}},{key:"gotoVPDetail",value:function(e){var t=!!e.deletedAt;this.log("goto Detail for VP "+e._id),this.router.navigate(["vpDetail/".concat(e._id)],t?{queryParams:{deleted:t}}:{})}},{key:"gotoVC",value:function(e){this.router.navigate(["vp/".concat(e.vcid)])}},{key:"dropDownInit",value:function(){this.log("Init Drop Down List "+this.visboportfolioversions.length),this.dropDown=[];for(var e=this.visboportfolioversions.length,t=0;t<e;t++){var n=new Date(this.visboportfolioversions[t].timestamp),i="Version ".concat("from ",Qv(new Date(n),"fullDate",this.currentLang));this.visboportfolioversions[t].variantName&&(i=i.concat(" ( ",this.visboportfolioversions[t].variantName," )")),this.dropDown.push({name:i,version:t,variantName:this.visboportfolioversions[t].variantName,timestamp:n,email:this.visboportfolioversions[t].updatedFrom&&this.visboportfolioversions[t].updatedFrom.email||""})}this.dropDown.sort((function(e,t){return t.timestamp.getTime()-e.timestamp.getTime()})),e>0&&(this.dropDownSelected=this.dropDown[0].name),this.dropDownVariantInit()}},{key:"checkVPFActive",value:function(e){var t=!1;return this.vpfActive&&e.variantName==this.vpfActive.variantName&&e.timestamp.getTime()==new Date(this.vpfActive.timestamp).getTime()&&(t=!0),t}},{key:"dropDownVariantInit",value:function(){var e=this;this.log("Init Variant Drop Down List "+this.vpActive.variant.length),this.dropDownVariant=[];var t=1;if(this.vpActive.variant.forEach((function(n){"pfv"!=n.variantName&&e.dropDownVariant.push({name:n.variantName,variantName:n.variantName,version:t++,timestamp:void 0,email:void 0})})),this.dropDownVariant.splice(0,0,{name:"",variantName:"",version:0,timestamp:void 0,email:void 0}),t=0,this.vpfActive.variantName){var n=this.dropDownVariant.findIndex((function(t){return t.name===e.vpfActive.variantName}));n>=0&&(t=n)}this.dropDownVariantSelected=this.dropDownVariant[t].name}},{key:"switchEditVariant",value:function(e){this.log("Change Variant Drop Down ".concat(e," ")),e>=0&&e<this.dropDownVariant.length&&(this.dropDownVariantSelected=this.dropDownVariant[e].name)}},{key:"switchPFVersion",value:function(e){this.log("Change Drop Down ".concat(e," ")),this.vpfActive=this.visboportfolioversions[e],this.dropDownVariantSelected=this.vpfActive.variantName,this.getVisboPortfolioKeyMetrics(),this.changeView(void 0,void 0,void 0,this.vpfActive._id)}},{key:"sortVPTable",value:function(e){if(void 0!==e){if(!this.vpCheckListAll)return;e!==this.sortColumn&&(this.sortColumn=e,this.sortAscending=void 0),this.sortAscending=void 0===this.sortAscending?1===e||3===e:!this.sortAscending}1===this.sortColumn?this.vpCheckListFiltered.sort((function(e,t){return qv(e.vp.name.toLowerCase(),t.vp.name.toLowerCase())})):2===this.sortColumn?this.vpCheckListFiltered.sort((function(e,t){return zv(e.vp.updatedAt,t.vp.updatedAt)})):3===this.sortColumn?this.vpCheckListFiltered.sort((function(e,t){return(e.isChecked?0:1)-(t.isChecked?0:1)})):4===this.sortColumn&&this.vpCheckListFiltered.sort((function(e,t){var n=(t.hasVariants?"1":"0")+(t.variantName||"");return qv(((e.hasVariants?"1":"0")+(e.variantName||"")).toLowerCase(),n.toLowerCase())})),this.sortAscending||this.vpCheckListFiltered.reverse()}},{key:"getPreView",value:function(){return Xv()}},{key:"log",value:function(e){this.messageService.add("VisboPortfolioVersion: "+e)}}]),e}()).\u0275fac=function(e){return new(e||QS)(Za(Ew),Za(dk),Za(Sk),Za(tf),Za(Zm),Za(sg),Za(Af),Za(Am),Za(Rb),Za(Cu),Za(ud))},QS.\u0275cmp=wt({type:QS,selectors:[["app-visboportfolio-versions"]],features:[Qt],decls:12,vars:10,consts:[[1,"well"],["class","row",4,"ngIf"],["class","container-fluid",4,"ngIf"],["class","container-fluid text-danger",4,"ngIf"],[4,"ngIf"],["class","modal fade","id","VPFList","role","dialog","aria-labelledby","VPFListTitle","aria-hidden","true",4,"ngIf"],["class","modal fade","id","DeleteVPFList","role","dialog","aria-labelledby","DeleteVPFListTitle","aria-hidden","true",4,"ngIf"],["class","modal fade","id","ChangeVPVariant","role","dialog","aria-labelledby","ChangeVPVariantTitle","aria-hidden","true",4,"ngIf"],[1,"row"],[1,"col"],[3,"click"],["class","dropdown ml-2 d-print-none",4,"ngIf"],[1,"dropdown","ml-2","d-print-none"],["data-toggle","dropdown",1,"dropdown-toggle"],[1,"dropdown-menu"],[3,"title",4,"ngFor","ngForOf"],[3,"title"],["class","dropdown-item font-weight-bold",3,"click",4,"ngIf"],["class","dropdown-item",3,"click",4,"ngIf"],[1,"dropdown-item","font-weight-bold",3,"click"],[1,"dropdown-item",3,"click"],[3,"click",4,"ngIf"],[1,"container-fluid"],[1,"col-6","px-0"],[1,"d-none","d-lg-block"],[1,"d-block","d-lg-none"],["class","col-4 d-print-none",4,"ngIf"],["class","row d-print-none",4,"ngIf"],["class","align-items-end text-warning text-right",4,"ngIf"],[1,"col-4","d-print-none"],["style","font-size: 2.2em","class","mx-1 fas fa-caret-square-left",3,"title","click",4,"ngIf"],["class","col-4 form-control","name","refDateInterval",3,"ngModel","ngModelChange",4,"ngIf"],["style","font-size: 2.2em","class","mx-1 fas fa-caret-square-right",3,"title","click",4,"ngIf"],[1,"mx-1","fas","fa-caret-square-left",2,"font-size","2.2em",3,"title","click"],["name","refDateInterval",1,"col-4","form-control",3,"ngModel","ngModelChange"],["value","day"],["value","week"],["value","month"],["value","quarter"],[1,"mx-1","fas","fa-caret-square-right",2,"font-size","2.2em",3,"title","click"],[1,"row","d-print-none"],[1,"col","btn-toolbar",2,"padding","unset"],["type","button",1,"btn","btn-md","btn-light","mr-1",3,"click"],["type","button","class","btn btn-md btn-light mr-1",3,"click",4,"ngIf"],[1,"align-items-end","btn-toolbar",2,"padding","unset"],["type","button","class","align-items-end btn btn-md btn-primary","data-toggle","modal","data-target","#VPFList",3,"click",4,"ngIf"],["type","button","data-toggle","modal","data-target","#VPFList",1,"align-items-end","btn","btn-md","btn-primary",3,"click"],[1,"align-items-end","text-warning","text-right"],[1,"container-fluid","text-danger"],["class","btn-toolbar my-3","style","padding: unset;",4,"ngIf"],[1,"btn-toolbar","my-3",2,"padding","unset"],["type","button","data-toggle","modal","data-target","#VPFList",1,"btn","btn-primary",3,"click"],[3,"vpActive","vpfActive","refDate","combinedPerm"],[3,"bubbleMode","visboprojectversions","combinedPerm"],[3,"vps"],["id","VPFList","role","dialog","aria-labelledby","VPFListTitle","aria-hidden","true",1,"modal","fade"],["role","document",1,"modal-dialog","modal-lg","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header"],["id","VPFListTitle",1,"modal-title"],["type","button","data-dismiss","modal","aria-label","Close",1,"close"],["aria-hidden","true"],[1,"modal-body"],[1,"d-flex"],["class","dropdown","class","ml-2",4,"ngIf"],[1,"ml-auto"],["type","text","placeholder","Filter",1,"mb-2","ml-2",3,"ngModel","keyup","ngModelChange"],[1,"ml-2",3,"click"],[1,"far","fa-times-circle"],["class","table table-hover table-sortable",4,"ngIf"],[1,"modal-footer","align-items-end"],["data-dismiss","modal",1,"btn","btn-secondary"],["id","Delete","type","submit","class","btn btn-warning mx-1","data-dismiss","modal","data-toggle","modal","id","DeleteVPFListID","data-target","#DeleteVPFList",4,"ngIf"],["id","Save","type","submit","data-dismiss","modal",1,"btn","btn-primary","mx-1",3,"click"],[1,"ml-2"],["class","dropdown-item",3,"click",4,"ngFor","ngForOf"],[1,"table","table-hover","table-sortable"],["id","VPHead"],["id","SorChecked"],["type","checkbox",3,"ngModel","ngModelChange","change"],["id","SortName",3,"click"],["id","SortVariant",3,"click"],["id","SortDate",1,"d-none","d-md-table-cell",3,"click"],["id","VPList"],[4,"ngFor","ngForOf"],["id","ColChecked"],["type","checkbox",3,"ngModel","ngModelChange"],["id","ColName"],["id","ColName",4,"ngIf"],["id","ColDate"],["name","variantName",1,"form-select",2,"border-width","0px",3,"ngModel","ngModelChange"],["value",""],["data-dismiss","modal","data-toggle","modal","data-target","#ChangeVPVariant",1,"mx-1","fas","fa-cog",2,"font-size","1em",3,"title","click"],["id","Delete","type","submit","data-dismiss","modal","data-toggle","modal","id","DeleteVPFListID","data-target","#DeleteVPFList",1,"btn","btn-warning","mx-1"],["id","DeleteVPFList","role","dialog","aria-labelledby","DeleteVPFListTitle","aria-hidden","true",1,"modal","fade"],["id","DeleteVPFListTitle",1,"modal-title"],[1,"bg-warning","text-dark"],[1,"form-group"],[1,"col-sm-4","col-form-label"],[1,"col-sm-8","form-control-static","text-dark"],["class","form-group",4,"ngIf"],["id","Delete","type","submit","class","btn btn-warning mx-1","data-dismiss","modal",3,"click",4,"ngIf"],["id","Delete","type","submit","data-dismiss","modal",1,"btn","btn-warning","mx-1",3,"click"],["id","ChangeVPVariant","role","dialog","aria-labelledby","ChangeVPVariantTitle","aria-hidden","true",1,"modal","fade"],["role","document",1,"modal-dialog","modal-md","modal-dialog-centered"],["id","ChangeVPVariantTitle",1,"modal-title"],["class","bg-warning text-dark",4,"ngIf"],["data-dismiss","modal","data-toggle","modal","data-target","#VPFList",1,"btn","btn-secondary"],["id","Change","type","submit","data-dismiss","modal","data-toggle","modal","data-target","#VPFList",1,"btn","btn-warning","mx-1",3,"click"]],template:function(e,t){1&e&&(io(0,"app-usernavbar"),to(1,"div",0),Ya(2,sS,9,6,"div",1),Ya(3,bS,14,17,"div",2),Ya(4,kS,4,4,"div",3),Ya(5,CS,3,4,"div",4),Ya(6,VS,3,3,"div",4),Ya(7,wS,3,3,"div",4),Ya(8,AS,3,1,"div",4),Ya(9,OS,29,21,"div",5),Ya(10,jS,38,31,"div",6),Ya(11,qS,21,14,"div",7),no()),2&e&&(zi(2),Xa("ngIf",t.vpActive),zi(1),Xa("ngIf",t.vpfActive),zi(1),Xa("ngIf",!t.vpfActive),zi(1),Xa("ngIf","Capacity"==t.pageParams.view&&t.vpActive&&t.vpfActive),zi(1),Xa("ngIf","KeyMetrics"==t.pageParams.view&&t.visboprojectversions),zi(1),Xa("ngIf","List"==t.pageParams.view&&t.vpList),zi(1),Xa("ngIf","ProjectBoard"==t.pageParams.view&&t.vpList),zi(1),Xa("ngIf",t.vpActive),zi(1),Xa("ngIf",t.vpfActive),zi(1),Xa("ngIf",t.vpfActive))},directives:[pk,su,au,rh,Td,Nh,ah,dh,jA,XP,oD,Ad,Cd,Fh,xd,Gh],pipes:[jb,Cu],styles:[".modal[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]{overflow-y:auto;max-height:75vH}"]}),QS),YS=((zS=function(){function e(t){p(this,e),this.gChartService=t}return m(e,[{key:"ngOnInit",value:function(){this.language||(this.language="de"),this.gLib=this.gChartService.getGoogle(),this.gLib.charts.load("current",{packages:["corechart","table"],language:this.language}),this.gLib.charts.setOnLoadCallback(this.drawChart.bind(this))}},{key:"ngOnChanges",value:function(){this.initialised&&this.drawChart()}},{key:"drawChart",value:function(){var e=new this.gLib.visualization.LineChart(document.getElementById("divLineChart")),t=new this.gLib.visualization.arrayToDataTable(this.graphData),n=this.parentThis;this.gLib.visualization.events.addListener(e,"select",(function(){var i=e.getSelection();if(i&&0!==i.length){var r=i[0];if(void 0===n)console.log("Chart Line: The user clicked and this is undefined");else if(r){var a=r.row,o=r.column;if(null!=a&&a>=0){var s=t.getValue(a,0);n.chartSelectRow(a,o,s)}}}else console.log("Chart Line: chartGetSelection is undefined",i||i.length)})),e.draw(t,this.graphOptions||{title:"Line Chart"}),this.initialised=!0}}]),e}()).\u0275fac=function(e){return new(e||zS)(Za(Hw))},zS.\u0275cmp=wt({type:zS,selectors:[["app-line-chart"]],inputs:{graphData:"graphData",language:"language",graphOptions:"graphOptions",parentThis:"parentThis"},features:[Qt],decls:1,vars:0,consts:[["id","divLineChart"]],template:function(e,t){1&e&&io(0,"div",0)},styles:["#divLineChart[_ngcontent-%COMP%]{width:100%;height:500px}"]}),zS);function $S(e,t){1&e&&(to(0,"th",15),So(1),qs(2,"translate"),no()),2&e&&(zi(1),To(zs(2,1,"vpKeyMetric.lbl.trend")))}function ZS(e,t){1&e&&oo(0)}function XS(e,t){1&e&&oo(0)}function eT(e,t){1&e&&oo(0)}function tT(e,t){if(1&e){var n=so();to(0,"td",20),to(1,"a"),to(2,"button",21),uo("click",(function(){return mn(n),fo(3).switchToHistory("Cost")})),So(3,"i"),no(),no(),no()}if(2&e){var i=fo(3);zi(2),po("title",i.historyButton)}}var nT=function(e,t){return{selected:e,text:t}},iT=function(e){return{level:e}};function rT(e,t){if(1&e){var n=so();to(0,"tr"),to(1,"td",16),uo("click",(function(){return mn(n),fo(2).switchView("Cost",!0)})),to(2,"a"),Ya(3,ZS,1,0,"ng-container",17),qs(4,"translate"),no(),no(),to(5,"td",18),uo("click",(function(){return mn(n),fo(2).switchView("Cost",!0)})),qs(6,"translate"),qs(7,"number"),qs(8,"number"),to(9,"a"),Ya(10,XS,1,0,"ng-container",17),to(11,"span"),So(12),qs(13,"number"),qs(14,"number"),no(),no(),no(),to(15,"td",18),uo("click",(function(){return mn(n),fo(2).switchView("Cost",!0)})),qs(16,"translate"),qs(17,"number"),qs(18,"number"),to(19,"a"),Ya(20,eT,1,0,"ng-container",17),to(21,"span"),So(22),qs(23,"number"),qs(24,"number"),no(),no(),no(),Ya(25,tT,4,1,"td",19),no()}if(2&e){var i=fo(2),r=$a(10),a=$a(6);zi(3),Xa("ngTemplateOutlet",r)("ngTemplateOutletContext",Rs(47,nT,"Cost"==i.typeMetricChart,zs(4,17,"vpKeyMetric.lbl.metricCost"))),zi(2),bo("title","",zs(6,19,"vpKeyMetric.lbl.actualCost"),": ",Qs(7,21,i.vpvKeyMetricActive.keyMetrics.costCurrentActual,"1.0-0")," T\u20ac / ",Qs(8,24,i.vpvKeyMetricActive.keyMetrics.costBaseLastActual,"1.0-0")," T\u20ac"),zi(5),Xa("ngTemplateOutlet",a)("ngTemplateOutletContext",Gs(50,iT,i.qualityCost)),zi(2),_o(" ",Qs(13,27,i.vpvKeyMetricActive.keyMetrics.costCurrentActual,"1.0-0")," T\u20ac (",Qs(14,30,100-i.vpvKeyMetricActive.savingCostActual,"1.0-0")," %) "),zi(3),bo("title","",zs(16,33,"vpKeyMetric.lbl.totalCost"),": ",Qs(17,35,i.vpvKeyMetricActive.keyMetrics.costCurrentTotal,"1.0-0")," T\u20ac / ",Qs(18,38,i.vpvKeyMetricActive.keyMetrics.costBaseLastTotal,"1.0-0")," T\u20ac"),zi(5),Xa("ngTemplateOutlet",a)("ngTemplateOutletContext",Gs(52,iT,i.qualityTotalCost)),zi(2),_o(" ",Qs(23,41,i.vpvKeyMetricActive.keyMetrics.costCurrentTotal,"1.0-0")," T\u20ac (",Qs(24,44,100-i.vpvKeyMetricActive.savingCostTotal,"1.0-0")," %) "),zi(3),Xa("ngIf",!i.getPreView())}}function aT(e,t){1&e&&oo(0)}function oT(e,t){1&e&&oo(0)}function sT(e,t){if(1&e&&(to(0,"span",23),So(1),qs(2,"number"),no()),2&e){var n=fo(3);zi(1),xo("(",Qs(2,1,n.qualityEndDiffWeeks,"1.1-1")," W)")}}function lT(e,t){if(1&e){var n=so();to(0,"td",20),to(1,"button",21),uo("click",(function(){return mn(n),fo(3).switchToHistory("EndDate")})),So(2,"i"),no(),no()}if(2&e){var i=fo(3);zi(1),po("title",i.historyButton)}}function cT(e,t){if(1&e){var n=so();to(0,"tr"),to(1,"td",16),uo("click",(function(){return mn(n),fo(2).switchToHistory("EndDate")})),to(2,"a"),Ya(3,aT,1,0,"ng-container",17),qs(4,"translate"),no(),no(),io(5,"td"),to(6,"td",22),qs(7,"translate"),qs(8,"date"),to(9,"a",16),uo("click",(function(){return mn(n),fo(2).switchToHistory("EndDate")})),Ya(10,oT,1,0,"ng-container",17),to(11,"span",23),So(12),qs(13,"date"),no(),Ya(14,sT,3,4,"span",24),no(),no(),Ya(15,lT,3,1,"td",19),no()}if(2&e){var i=fo(2),r=$a(10),a=$a(6);zi(3),Xa("ngTemplateOutlet",r)("ngTemplateOutletContext",Rs(19,nT,"EndDate"==i.typeMetricChart,zs(4,9,"vpKeyMetric.lbl.metricEndDate"))),zi(3),mo("title","",zs(7,11,"vpKeyMetric.lbl.baselineEndDate"),": ",Qs(8,13,i.vpvKeyMetricActive.keyMetrics.endDateBaseLast,"dd.MM.yy"),""),zi(4),Xa("ngTemplateOutlet",a)("ngTemplateOutletContext",Gs(22,iT,i.qualityEndDate)),zi(2),xo("",Qs(13,16,i.vpvKeyMetricActive.keyMetrics.endDateCurrent,"dd.MM.yy")," "),zi(2),Xa("ngIf",i.qualityEndDiffWeeks),zi(1),Xa("ngIf",!i.getPreView())}}function uT(e,t){1&e&&oo(0)}function dT(e,t){1&e&&oo(0)}function hT(e,t){if(1&e&&(to(0,"span",26),So(1),qs(2,"number"),qs(3,"translate"),no()),2&e){var n=fo(3);zi(1),_o(" (",Qs(2,2,n.vpvKeyMetricActive.keyMetrics.timeCompletionBaseLastTotal-n.vpvKeyMetricActive.keyMetrics.timeCompletionCurrentTotal,"1.0-0")," ",zs(3,5,"vpKeyMetric.lbl.missing"),") ")}}function vT(e,t){if(1&e){var n=so();to(0,"td",20),to(1,"button",21),uo("click",(function(){return mn(n),fo(3).switchToHistory("Deadline")})),So(2,"i"),no(),no()}if(2&e){var i=fo(3);zi(1),po("title",i.historyButton)}}function fT(e,t){if(1&e){var n=so();to(0,"tr"),to(1,"td",16),uo("click",(function(){return mn(n),fo(2).switchView("Deadline",!0)})),to(2,"a"),Ya(3,uT,1,0,"ng-container",17),qs(4,"translate"),no(),no(),to(5,"td",16),uo("click",(function(){return mn(n),fo(2).switchView("Deadline",!0)})),to(6,"a",22),qs(7,"translate"),Ya(8,dT,1,0,"ng-container",17),to(9,"span"),So(10),qs(11,"number"),qs(12,"translate"),qs(13,"number"),qs(14,"number"),no(),no(),no(),to(15,"td",16),uo("click",(function(){return mn(n),fo(2).switchView("Deadline",!0)})),to(16,"a"),to(17,"span"),So(18),qs(19,"number"),no(),Ya(20,hT,4,7,"span",25),no(),no(),Ya(21,vT,3,1,"td",19),no()}if(2&e){var i=fo(2),r=$a(10),a=$a(6);zi(3),Xa("ngTemplateOutlet",r)("ngTemplateOutletContext",Rs(30,nT,"Deadline"==i.typeMetricChart,zs(4,12,"vpKeyMetric.lbl.metricDeadline"))),zi(3),po("title",zs(7,14,"vpKeyMetric.lbl.actualDeadline")),zi(2),Xa("ngTemplateOutlet",a)("ngTemplateOutletContext",Gs(33,iT,i.qualityDeadline)),zi(2),Oo(" ",Qs(11,16,i.vpvKeyMetricActive.keyMetrics.timeCompletionCurrentActual,"1.0-0")," ",zs(12,19,"vpKeyMetric.lbl.of")," ",Qs(13,21,i.vpvKeyMetricActive.keyMetrics.timeCompletionBaseLastActual,"1.0-0")," (",Qs(14,24,i.vpvKeyMetricActive.timeCompletionActual,"1.0-0")," %) "),zi(8),xo(" ",Qs(19,27,i.vpvKeyMetricActive.keyMetrics.timeCompletionCurrentTotal,"1.0-0")," "),zi(2),Xa("ngIf",i.vpvKeyMetricActive.keyMetrics.timeCompletionCurrentTotal<i.vpvKeyMetricActive.keyMetrics.timeCompletionBaseLastTotal),zi(1),Xa("ngIf",!i.getPreView())}}function pT(e,t){1&e&&oo(0)}function gT(e,t){1&e&&oo(0)}function mT(e,t){if(1&e&&(to(0,"span",26),So(1),qs(2,"number"),no()),2&e){var n=fo(3);zi(1),xo("(",Qs(2,1,n.vpvKeyMetricActive.keyMetrics.deliverableCompletionBaseLastTotal-n.vpvKeyMetricActive.keyMetrics.deliverableCompletionCurrentTotal,"1.0-2")," Missing)")}}function bT(e,t){if(1&e){var n=so();to(0,"td",20),to(1,"button",21),uo("click",(function(){return mn(n),fo(3).switchToHistory("Delivery")})),So(2,"i"),no(),no()}if(2&e){var i=fo(3);zi(1),po("title",i.historyButton)}}function yT(e,t){if(1&e){var n=so();to(0,"tr"),to(1,"td",16),uo("click",(function(){return mn(n),fo(2).switchView("Delivery",!0)})),to(2,"a"),Ya(3,pT,1,0,"ng-container",17),qs(4,"translate"),no(),no(),to(5,"td",18),uo("click",(function(){return mn(n),fo(2).switchView("Delivery",!0)})),qs(6,"translate"),to(7,"a"),Ya(8,gT,1,0,"ng-container",17),to(9,"span"),So(10),qs(11,"number"),qs(12,"translate"),qs(13,"number"),qs(14,"number"),no(),no(),no(),to(15,"td",16),uo("click",(function(){return mn(n),fo(2).switchView("Delivery",!0)})),to(16,"a"),to(17,"span"),So(18),qs(19,"number"),no(),Ya(20,mT,3,4,"span",25),no(),no(),Ya(21,bT,3,1,"td",19),no()}if(2&e){var i=fo(2),r=$a(10),a=$a(6);zi(3),Xa("ngTemplateOutlet",r)("ngTemplateOutletContext",Rs(30,nT,"Delivery"==i.typeMetricChart,zs(4,12,"vpKeyMetric.lbl.metricDelivery"))),zi(2),po("title",zs(6,14,"vpKeyMetric.lbl.actualDelivery")),zi(3),Xa("ngTemplateOutlet",a)("ngTemplateOutletContext",Gs(33,iT,i.qualityDelivery)),zi(2),Oo(" ",Qs(11,16,i.vpvKeyMetricActive.keyMetrics.deliverableCompletionCurrentActual,"1.0-0")," ",zs(12,19,"vpKeyMetric.lbl.of")," ",Qs(13,21,i.vpvKeyMetricActive.keyMetrics.deliverableCompletionBaseLastActual,"1.0-0")," (",Qs(14,24,i.vpvKeyMetricActive.deliveryCompletionActual,"1.0-0")," %) "),zi(8),xo("",Qs(19,27,i.vpvKeyMetricActive.keyMetrics.deliverableCompletionCurrentTotal,"1.0-0")," "),zi(2),Xa("ngIf",i.vpvKeyMetricActive.keyMetrics.deliverableCompletionCurrentTotal<i.vpvKeyMetricActive.keyMetrics.deliverableCompletionBaseLastTotal),zi(1),Xa("ngIf",!i.getPreView())}}function kT(e,t){1&e&&io(0,"th",20)}function CT(e,t){if(1&e&&(to(0,"tr"),io(1,"th"),to(2,"th"),So(3),qs(4,"translate"),no(),to(5,"th"),So(6),qs(7,"translate"),no(),Ya(8,kT,1,0,"th",19),no()),2&e){var n=fo(2);zi(3),To(zs(4,3,"vpKeyMetric.lbl.finished")),zi(3),To(zs(7,5,"vpKeyMetric.lbl.unfinished")),zi(2),Xa("ngIf",!n.getPreView())}}function VT(e,t){1&e&&oo(0)}function wT(e,t){1&e&&oo(0)}function AT(e,t){if(1&e&&(to(0,"div"),Ya(1,wT,1,0,"ng-container",17),to(2,"span"),So(3),qs(4,"number"),qs(5,"translate"),no(),no()),2&e){var n=fo(3),i=$a(6);zi(1),Xa("ngTemplateOutlet",i)("ngTemplateOutletContext",Gs(9,iT,n.delayActualDeadline)),zi(2),_o(" ",Qs(4,4,n.vpvKeyMetricActive.keyMetrics.timeDelayFinished,"1.0-0")," ",zs(5,7,"vpKeyMetric.lbl.unitsDelay"),"")}}function PT(e,t){1&e&&oo(0)}function DT(e,t){if(1&e&&(to(0,"div"),Ya(1,PT,1,0,"ng-container",17),to(2,"span"),So(3),qs(4,"number"),qs(5,"translate"),no(),no()),2&e){var n=fo(3),i=$a(6);zi(1),Xa("ngTemplateOutlet",i)("ngTemplateOutletContext",Gs(9,iT,n.delayTotalDeadline)),zi(2),_o(" ",Qs(4,4,n.vpvKeyMetricActive.keyMetrics.timeDelayUnFinished,"1.0-0")," ",zs(5,7,"vpKeyMetric.lbl.unitsDelay"),"")}}function MT(e,t){if(1&e){var n=so();to(0,"td",20),to(1,"button",21),uo("click",(function(){return mn(n),fo(3).switchToHistory("DeadlineDelay")})),So(2,"i"),no(),no()}if(2&e){var i=fo(3);zi(1),po("title",i.historyButton)}}function IT(e,t){if(1&e){var n=so();to(0,"tr"),to(1,"td",16),uo("click",(function(){return mn(n),fo(2).switchView("Deadline",!0)})),to(2,"a"),Ya(3,VT,1,0,"ng-container",17),qs(4,"translate"),no(),no(),to(5,"td",18),uo("click",(function(){return mn(n),fo(2).switchView("Deadline",!0)})),qs(6,"translate"),to(7,"a"),Ya(8,AT,6,11,"div",2),no(),no(),to(9,"td",18),uo("click",(function(){return mn(n),fo(2).switchView("Deadline",!0)})),qs(10,"translate"),to(11,"a"),Ya(12,DT,6,11,"div",2),no(),no(),Ya(13,MT,3,1,"td",19),no()}if(2&e){var i=fo(2),r=$a(10);zi(3),Xa("ngTemplateOutlet",r)("ngTemplateOutletContext",Rs(13,nT,"DeadlineDelay"==i.typeMetricChart,zs(4,7,"vpKeyMetric.lbl.metricDeadlineDelay"))),zi(2),po("title",zs(6,9,"vpKeyMetric.lbl.finishedDeadlineDelay")),zi(3),Xa("ngIf",null!=i.vpvKeyMetricActive.keyMetrics.timeDelayFinished),zi(1),po("title",zs(10,11,"vpKeyMetric.lbl.unfinishedDeadlineDelay")),zi(3),Xa("ngIf",null!=i.vpvKeyMetricActive.keyMetrics.timeDelayUnFinished),zi(1),Xa("ngIf",!i.getPreView())}}function ST(e,t){1&e&&oo(0)}function TT(e,t){1&e&&oo(0)}function xT(e,t){if(1&e&&(to(0,"div"),Ya(1,TT,1,0,"ng-container",17),to(2,"span"),So(3),qs(4,"number"),qs(5,"translate"),no(),no()),2&e){var n=fo(3),i=$a(6);zi(1),Xa("ngTemplateOutlet",i)("ngTemplateOutletContext",Gs(9,iT,n.delayActualDelivery)),zi(2),_o(" ",Qs(4,4,n.vpvKeyMetricActive.keyMetrics.deliverableDelayFinished,"1.0-0")," ",zs(5,7,"vpKeyMetric.lbl.unitsDelay"),"")}}function _T(e,t){1&e&&oo(0)}function UT(e,t){if(1&e&&(to(0,"div"),Ya(1,_T,1,0,"ng-container",17),to(2,"span"),So(3),qs(4,"number"),qs(5,"translate"),no(),no()),2&e){var n=fo(3),i=$a(6);zi(1),Xa("ngTemplateOutlet",i)("ngTemplateOutletContext",Gs(9,iT,n.delayTotalDelivery)),zi(2),_o(" ",Qs(4,4,n.vpvKeyMetricActive.keyMetrics.deliverableDelayUnFinished,"1.0-0")," ",zs(5,7,"vpKeyMetric.lbl.unitsDelay"),"")}}function OT(e,t){if(1&e){var n=so();to(0,"td",20),to(1,"button",21),uo("click",(function(){return mn(n),fo(3).switchToHistory("DeliveryDelay")})),So(2,"i"),no(),no()}if(2&e){var i=fo(3);zi(1),po("title",i.historyButton)}}function ET(e,t){if(1&e){var n=so();to(0,"tr"),to(1,"td",16),uo("click",(function(){return mn(n),fo(2).switchView("Delivery",!0)})),to(2,"a"),Ya(3,ST,1,0,"ng-container",17),qs(4,"translate"),no(),no(),to(5,"td",18),uo("click",(function(){return mn(n),fo(2).switchView("Delivery",!0)})),qs(6,"translate"),to(7,"a"),Ya(8,xT,6,11,"div",2),no(),no(),to(9,"td",18),uo("click",(function(){return mn(n),fo(2).switchView("Deadline",!0)})),qs(10,"translate"),to(11,"a"),Ya(12,UT,6,11,"div",2),no(),no(),Ya(13,OT,3,1,"td",19),no()}if(2&e){var i=fo(2),r=$a(10);zi(3),Xa("ngTemplateOutlet",r)("ngTemplateOutletContext",Rs(13,nT,"DeliveryDelay"==i.typeMetricChart,zs(4,7,"vpKeyMetric.lbl.metricDeliveryDelay"))),zi(2),po("title",zs(6,9,"vpKeyMetric.lbl.finishedDeliveryDelay")),zi(3),Xa("ngIf",null!=i.vpvKeyMetricActive.keyMetrics.timeDelayFinished),zi(1),po("title",zs(10,11,"vpKeyMetric.lbl.unfinishedDeliveryDelay")),zi(3),Xa("ngIf",null!=i.vpvKeyMetricActive.keyMetrics.timeDelayUnFinished),zi(1),Xa("ngIf",!i.getPreView())}}function LT(e,t){if(1&e&&(to(0,"table",13),to(1,"thead"),to(2,"tr"),to(3,"th"),So(4),qs(5,"translate"),no(),to(6,"th"),So(7),qs(8,"translate"),no(),to(9,"th"),So(10),qs(11,"translate"),no(),Ya(12,$S,3,3,"th",14),no(),no(),to(13,"tbody"),Ya(14,rT,26,54,"tr",2),Ya(15,cT,16,24,"tr",2),Ya(16,fT,22,35,"tr",2),Ya(17,yT,22,35,"tr",2),Ya(18,CT,9,7,"tr",2),Ya(19,IT,14,16,"tr",2),Ya(20,ET,14,16,"tr",2),no(),no()),2&e){var n=fo();zi(4),To(zs(5,11,"vpKeyMetric.lbl.keyMetric")),zi(3),To(zs(8,13,"vpKeyMetric.lbl.planToDate")),zi(3),To(zs(11,15,"vpKeyMetric.lbl.total")),zi(2),Xa("ngIf",!n.getPreView()),zi(2),Xa("ngIf",n.hasKM(n.vpvKeyMetricActive.keyMetrics,"Cost")),zi(1),Xa("ngIf",null!=n.vpvKeyMetricActive.keyMetrics.endDateBaseLast),zi(1),Xa("ngIf",n.hasKM(n.vpvKeyMetricActive.keyMetrics,"Deadline")),zi(1),Xa("ngIf",n.hasKM(n.vpvKeyMetricActive.keyMetrics,"Delivery")),zi(1),Xa("ngIf",n.hasKM(n.vpvKeyMetricActive.keyMetrics,"DeadlineDelay")||n.hasKM(n.vpvKeyMetricActive.keyMetrics,"DeliveryDelay")),zi(1),Xa("ngIf",n.hasKM(n.vpvKeyMetricActive.keyMetrics,"DeadlineDelay")),zi(1),Xa("ngIf",n.hasKM(n.vpvKeyMetricActive.keyMetrics,"DeliveryDelay"))}}function GT(e,t){1&e&&(to(0,"h3"),So(1),qs(2,"translate"),no()),2&e&&(zi(1),xo(" ",zs(2,1,"vpKeyMetric.msg.noKeyMetric")," "))}var RT=function(e,t,n){return{"fa-check-circle text-success":e,"fa-exclamation-triangle text-warning":t,"fa-exclamation-circle text-danger":n}};function jT(e,t){if(1&e&&io(0,"i",27),2&e){var n=t.level;Xa("ngClass",js(1,RT,1==n,2==n,3==n))}}var NT=function(e,t,n,i){return{"text-secondary":e,"text-success":t,"text-warning":n,"text-danger":i}};function FT(e,t){if(1&e&&io(0,"i",28),2&e){var n=t.level;Xa("ngClass",Ns(1,NT,0==n,1==n,2==n,3==n))}}var BT=function(e,t){return{"font-weight-bold":e,"font-weight-normal":t}};function HT(e,t){if(1&e&&(to(0,"span",29),So(1),no()),2&e){var n=t.selected,i=t.text;Xa("ngClass",Rs(2,BT,1==n,0==n)),zi(1),To(i)}}function KT(e,t){if(1&e){var n=so();to(0,"button",35),uo("click",(function(){return mn(n),fo(2).gotoVisboProjectVersions()})),So(1),qs(2,"translate"),no()}2&e&&(zi(1),To(zs(2,1,"vpKeyMetric.btn.allVersions")))}function qT(e,t){if(1&e&&(to(0,"div"),io(1,"app-line-chart",37),no()),2&e){var n=fo(3);zi(1),Xa("graphData",n.graphDataLineChart)("graphOptions",n.graphOptionsLineChart)("parentThis",n.parentThis)("language",n.currentLang)}}function zT(e,t){if(1&e&&(to(0,"div"),io(1,"app-line-chart",37),no()),2&e){var n=fo(3);zi(1),Xa("graphData",n.graphDataLineChart)("graphOptions",n.graphOptionsLineChartEndDate)("parentThis",n.parentThis)("language",n.currentLang)}}function QT(e,t){if(1&e&&(to(0,"div"),io(1,"app-line-chart",37),no()),2&e){var n=fo(3);zi(1),Xa("graphData",n.graphDataLineChart)("graphOptions",n.graphOptionsLineChart)("parentThis",n.parentThis)("language",n.currentLang)}}function WT(e,t){if(1&e&&(to(0,"div"),io(1,"app-line-chart",37),no()),2&e){var n=fo(3);zi(1),Xa("graphData",n.graphDataLineChart)("graphOptions",n.graphOptionsLineChart)("parentThis",n.parentThis)("language",n.currentLang)}}function JT(e,t){if(1&e&&(to(0,"div"),io(1,"app-line-chart",37),no()),2&e){var n=fo(3);zi(1),Xa("graphData",n.graphDataLineChart)("graphOptions",n.graphOptionsLineChart)("parentThis",n.parentThis)("language",n.currentLang)}}function YT(e,t){if(1&e&&(to(0,"div",36),Ya(1,qT,2,4,"div",2),Ya(2,zT,2,4,"div",2),Ya(3,QT,2,4,"div",2),Ya(4,WT,2,4,"div",2),Ya(5,JT,2,4,"div",2),no()),2&e){var n=fo(2);zi(1),Xa("ngIf","Cost"==n.typeMetricChart),zi(1),Xa("ngIf","EndDate"==n.typeMetricChart),zi(1),Xa("ngIf","Deadline"==n.typeMetricChart),zi(1),Xa("ngIf","DeadlineDelay"==n.typeMetricChart),zi(1),Xa("ngIf","Delivery"==n.typeMetricChart)}}function $T(e,t){1&e&&oo(0)}function ZT(e,t){1&e&&oo(0)}function XT(e,t){if(1&e){var n=so();to(0,"tr",42),uo("click",(function(){mn(n);var e=t.$implicit;return fo(4).listSelectRow(e)})),to(1,"td"),to(2,"a"),Ya(3,$T,1,0,"ng-container",17),qs(4,"date"),no(),no(),to(5,"td",43),So(6),qs(7,"number"),no(),to(8,"td",44),qs(9,"translate"),qs(10,"number"),So(11),qs(12,"number"),no(),to(13,"td",43),So(14),qs(15,"number"),no(),to(16,"td",44),qs(17,"translate"),qs(18,"number"),So(19),qs(20,"number"),no(),to(21,"td",44),Ya(22,ZT,1,0,"ng-container",17),no(),no()}if(2&e){var i=t.$implicit,r=fo(4),a=$a(10),o=$a(8);zi(3),Xa("ngTemplateOutlet",a)("ngTemplateOutletContext",Rs(38,nT,i.timestamp==r.vpvKeyMetricActive.timestamp,Qs(4,13,i.timestamp,"dd.MM.yyyy HH:mm"))),zi(3),xo("",Qs(7,16,i.keyMetrics.costCurrentActual,"1.0-0")," k\u20ac"),zi(2),mo("title","",zs(9,19,"keyMetrics.shortPV"),": ",Qs(10,21,i.keyMetrics.costBaseLastActual,"1.0-0")," k\u20ac"),zi(3),xo("",Qs(12,24,100-i.savingCostActual,"1.0-0")," %"),zi(3),xo("",Qs(15,27,i.keyMetrics.costCurrentTotal,"1.0-0")," k\u20ac"),zi(2),mo("title","",zs(17,30,"keyMetrics.shortBAC"),": ",Qs(18,32,i.keyMetrics.costBaseLastTotal,"1.0-0")," k\u20ac"),zi(3),xo("",Qs(20,35,100-i.savingCostTotal,"1.0-0")," %"),zi(2),po("title",i.ampelErlaeuterung),zi(1),Xa("ngTemplateOutlet",o)("ngTemplateOutletContext",Gs(41,iT,i.ampelStatus))}}function ex(e,t){if(1&e){var n=so();to(0,"table",13),to(1,"thead"),to(2,"tr"),to(3,"th",16),uo("click",(function(){return mn(n),fo(3).sortKeyMetricsTable(1)})),So(4),qs(5,"translate"),no(),to(6,"th",38),uo("click",(function(){return mn(n),fo(3).sortKeyMetricsTable(7)})),qs(7,"translate"),So(8),qs(9,"translate"),no(),to(10,"th",39),uo("click",(function(){return mn(n),fo(3).sortKeyMetricsTable(2)})),qs(11,"translate"),So(12),qs(13,"translate"),no(),to(14,"th",38),uo("click",(function(){return mn(n),fo(3).sortKeyMetricsTable(8)})),qs(15,"translate"),So(16),qs(17,"translate"),no(),to(18,"th",39),uo("click",(function(){return mn(n),fo(3).sortKeyMetricsTable(5)})),qs(19,"translate"),So(20),qs(21,"translate"),no(),to(22,"th",40),uo("click",(function(){return mn(n),fo(3).sortKeyMetricsTable(6)})),So(23),qs(24,"translate"),no(),no(),no(),to(25,"tbody"),Ya(26,XT,23,43,"tr",41),no(),no()}if(2&e){var i=fo(3);zi(4),To(zs(5,11,"keyMetrics.lbl.timeStamp")),zi(2),po("title",zs(7,13,"keyMetrics.longAC")),zi(2),To(zs(9,15,"keyMetrics.shortAC")),zi(2),po("title",zs(11,17,"keyMetrics.longPV")),zi(2),To(zs(13,19,"keyMetrics.relativPV")),zi(2),po("title",zs(15,21,"keyMetrics.longEAC")),zi(2),To(zs(17,23,"keyMetrics.shortEAC")),zi(2),po("title",zs(19,25,"keyMetrics.longBAC")),zi(2),To(zs(21,27,"keyMetrics.baselineBAC")),zi(3),To(zs(24,29,"keyMetrics.lbl.trafficLight")),zi(3),Xa("ngForOf",i.visbokeymetrics)}}function tx(e,t){1&e&&oo(0)}function nx(e,t){1&e&&oo(0)}function ix(e,t){if(1&e){var n=so();to(0,"tr",42),uo("click",(function(){mn(n);var e=t.$implicit;return fo(4).listSelectRow(e)})),to(1,"td"),to(2,"a"),Ya(3,tx,1,0,"ng-container",17),qs(4,"date"),no(),no(),to(5,"td",43),So(6),qs(7,"date"),no(),to(8,"td",43),So(9),qs(10,"date"),no(),to(11,"td",43),So(12),qs(13,"number"),no(),to(14,"td",44),Ya(15,nx,1,0,"ng-container",17),no(),no()}if(2&e){var i=t.$implicit,r=fo(4),a=$a(10),o=$a(8);zi(3),Xa("ngTemplateOutlet",a)("ngTemplateOutletContext",Rs(20,nT,i.timestamp==r.vpvKeyMetricActive.timestamp,Qs(4,8,i.timestamp,"dd.MM.yyyy HH:mm"))),zi(3),To(Qs(7,11,i.keyMetrics.endDateCurrent,"dd.MM.yyyy")),zi(3),To(Qs(10,14,i.keyMetrics.endDateBaseLast,"dd.MM.yyyy")),zi(3),xo("",Qs(13,17,i.savingEndDate,"1.0-1")," W"),zi(2),po("title",i.ampelErlaeuterung),zi(1),Xa("ngTemplateOutlet",o)("ngTemplateOutletContext",Gs(23,iT,i.ampelStatus))}}function rx(e,t){if(1&e){var n=so();to(0,"table",13),to(1,"thead"),to(2,"tr"),to(3,"th",16),uo("click",(function(){return mn(n),fo(3).sortKeyMetricsTable(1)})),So(4),qs(5,"translate"),no(),to(6,"th",38),uo("click",(function(){return mn(n),fo(3).sortKeyMetricsTable(31)})),qs(7,"translate"),So(8),qs(9,"translate"),no(),to(10,"th",38),uo("click",(function(){return mn(n),fo(3).sortKeyMetricsTable(32)})),qs(11,"translate"),So(12),qs(13,"translate"),no(),to(14,"th",45),uo("click",(function(){return mn(n),fo(3).sortKeyMetricsTable(33)})),So(15),qs(16,"translate"),no(),to(17,"th",40),uo("click",(function(){return mn(n),fo(3).sortKeyMetricsTable(6)})),So(18),qs(19,"translate"),no(),no(),no(),to(20,"tbody"),Ya(21,ix,16,25,"tr",41),no(),no()}if(2&e){var i=fo(3);zi(4),To(zs(5,8,"keyMetrics.lbl.timeStamp")),zi(2),po("title",zs(7,10,"keyMetrics.longEED")),zi(2),To(zs(9,12,"keyMetrics.shortEED")),zi(2),po("title",zs(11,14,"keyMetrics.longBED")),zi(2),To(zs(13,16,"keyMetrics.shortBED")),zi(3),To(zs(16,18,"vpKeyMetric.lbl.savingED")),zi(3),To(zs(19,20,"keyMetrics.lbl.trafficLight")),zi(3),Xa("ngForOf",i.visbokeymetrics)}}function ax(e,t){if(1&e){var n=so();to(0,"th",40),uo("click",(function(){return mn(n),fo(4).sortKeyMetricsTable(13)})),So(1),qs(2,"translate"),no()}2&e&&(zi(1),To(zs(2,1,"keyMetrics.lbl.actualDelay")))}function ox(e,t){if(1&e){var n=so();to(0,"th",40),uo("click",(function(){return mn(n),fo(4).sortKeyMetricsTable(14)})),So(1),qs(2,"translate"),no()}2&e&&(zi(1),To(zs(2,1,"keyMetrics.lbl.totalDelay")))}function sx(e,t){1&e&&oo(0)}function lx(e,t){if(1&e&&(to(0,"td",43),So(1),qs(2,"number"),no()),2&e){var n=fo().$implicit;zi(1),To(Qs(2,1,n.keyMetrics.timeDelayFinished,"1.0-0"))}}function cx(e,t){if(1&e&&(to(0,"td",43),So(1),qs(2,"number"),no()),2&e){var n=fo().$implicit;zi(1),To(Qs(2,1,n.keyMetrics.timeDelayUnFinished,"1.0-0"))}}function ux(e,t){1&e&&oo(0)}function dx(e,t){if(1&e){var n=so();to(0,"tr",42),uo("click",(function(){mn(n);var e=t.$implicit;return fo(4).listSelectRow(e)})),to(1,"td"),to(2,"a"),Ya(3,sx,1,0,"ng-container",17),qs(4,"date"),no(),no(),to(5,"td",43),So(6),qs(7,"number"),no(),to(8,"td",44),qs(9,"translate"),qs(10,"number"),So(11),qs(12,"number"),no(),to(13,"td",43),So(14),qs(15,"number"),no(),to(16,"td",44),qs(17,"translate"),qs(18,"number"),So(19),qs(20,"number"),no(),Ya(21,lx,3,4,"td",47),Ya(22,cx,3,4,"td",47),to(23,"td",44),Ya(24,ux,1,0,"ng-container",17),no(),no()}if(2&e){var i=t.$implicit,r=fo(4),a=$a(10),o=$a(8);zi(3),Xa("ngTemplateOutlet",a)("ngTemplateOutletContext",Rs(40,nT,i.timestamp==r.vpvKeyMetricActive.timestamp,Qs(4,15,i.timestamp,"dd.MM.yyyy HH:mm"))),zi(3),To(Qs(7,18,i.keyMetrics.timeCompletionCurrentActual,"1.0-1")),zi(2),mo("title","",zs(9,21,"keyMetrics.shortPD"),": ",Qs(10,23,i.keyMetrics.timeCompletionBaseLastActual,"1.0-0"),""),zi(3),xo("",Qs(12,26,i.timeCompletionActual,"1.0-0")," %"),zi(3),To(Qs(15,29,i.keyMetrics.timeCompletionCurrentTotal,"1.0-1")),zi(2),mo("title","",zs(17,32,"keyMetrics.shortDAC"),": ",Qs(18,34,i.keyMetrics.timeCompletionBaseLastTotal,"1.0-0"),""),zi(3),xo("",Qs(20,37,i.timeCompletionTotal,"1.0-0")," %"),zi(2),Xa("ngIf",r.hasKM(r.vpvKeyMetricActive.keyMetrics,"DeadlineDelay")),zi(1),Xa("ngIf",r.hasKM(r.vpvKeyMetricActive.keyMetrics,"DeadlineDelay")),zi(1),po("title",i.ampelErlaeuterung),zi(1),Xa("ngTemplateOutlet",o)("ngTemplateOutletContext",Gs(43,iT,i.ampelStatus))}}function hx(e,t){if(1&e){var n=so();to(0,"table",13),to(1,"thead"),to(2,"tr"),to(3,"th",16),uo("click",(function(){return mn(n),fo(3).sortKeyMetricsTable(1)})),So(4),qs(5,"translate"),no(),to(6,"th",38),uo("click",(function(){return mn(n),fo(3).sortKeyMetricsTable(10)})),qs(7,"translate"),So(8),qs(9,"translate"),no(),to(10,"th",38),uo("click",(function(){return mn(n),fo(3).sortKeyMetricsTable(11)})),qs(11,"translate"),So(12),qs(13,"translate"),no(),to(14,"th",39),uo("click",(function(){return mn(n),fo(3).sortKeyMetricsTable(12)})),qs(15,"translate"),So(16),qs(17,"translate"),no(),to(18,"th",39),uo("click",(function(){return mn(n),fo(3).sortKeyMetricsTable(12)})),qs(19,"translate"),So(20),qs(21,"translate"),no(),Ya(22,ax,3,3,"th",46),Ya(23,ox,3,3,"th",46),to(24,"th",40),uo("click",(function(){return mn(n),fo(3).sortKeyMetricsTable(6)})),So(25),qs(26,"translate"),no(),no(),no(),to(27,"tbody"),Ya(28,dx,25,45,"tr",41),no(),no()}if(2&e){var i=fo(3);zi(4),To(zs(5,13,"keyMetrics.lbl.timeStamp")),zi(2),po("title",zs(7,15,"keyMetrics.longAD")),zi(2),To(zs(9,17,"keyMetrics.shortAD")),zi(2),po("title",zs(11,19,"keyMetrics.longPD")),zi(2),To(zs(13,21,"keyMetrics.shortPD")),zi(2),po("title",zs(15,23,"keyMetrics.longEDC")),zi(2),To(zs(17,25,"keyMetrics.shortEDC")),zi(2),po("title",zs(19,27,"keyMetrics.longDAC")),zi(2),To(zs(21,29,"keyMetrics.shortDAC")),zi(2),Xa("ngIf",i.hasKM(i.vpvKeyMetricActive.keyMetrics,"DeadlineDelay")),zi(1),Xa("ngIf",i.hasKM(i.vpvKeyMetricActive.keyMetrics,"DeadlineDelay")),zi(2),To(zs(26,31,"keyMetrics.lbl.trafficLight")),zi(3),Xa("ngForOf",i.visbokeymetrics)}}function vx(e,t){1&e&&oo(0)}function fx(e,t){1&e&&oo(0)}function px(e,t){if(1&e){var n=so();to(0,"tr",42),uo("click",(function(){mn(n);var e=t.$implicit;return fo(4).listSelectRow(e)})),to(1,"td"),to(2,"a"),Ya(3,vx,1,0,"ng-container",17),qs(4,"date"),no(),no(),to(5,"td",43),So(6),qs(7,"number"),no(),to(8,"td",44),qs(9,"translate"),qs(10,"number"),So(11),qs(12,"number"),no(),to(13,"td",43),So(14),qs(15,"number"),no(),to(16,"td",44),qs(17,"translate"),qs(18,"number"),So(19),qs(20,"number"),no(),to(21,"td",44),Ya(22,fx,1,0,"ng-container",17),no(),no()}if(2&e){var i=t.$implicit,r=fo(4),a=$a(10),o=$a(8);zi(3),Xa("ngTemplateOutlet",a)("ngTemplateOutletContext",Rs(38,nT,i.timestamp==r.vpvKeyMetricActive.timestamp,Qs(4,13,i.timestamp,"dd.MM.yyyy HH:mm"))),zi(3),To(Qs(7,16,i.keyMetrics.deliverableCompletionCurrentActual,"1.0-1")),zi(2),mo("title","",zs(9,19,"keyMetrics.shortPDV"),": ",Qs(10,21,i.keyMetrics.deliverableCompletionBaseLastActual,"1.0-0"),""),zi(3),xo("",Qs(12,24,i.deliveryCompletionActual,"1.0-0")," %"),zi(3),To(Qs(15,27,i.keyMetrics.deliverableCompletionCurrentTotal,"1.0-1")),zi(2),mo("title","",zs(17,30,"keyMetrics.shortDVAC"),": ",Qs(18,32,i.keyMetrics.deliverableCompletionBaseLastTotal,"1.0-0"),""),zi(3),xo("",Qs(20,35,i.deliveryCompletionTotal,"1.0-0")," %"),zi(2),po("title",i.ampelErlaeuterung),zi(1),Xa("ngTemplateOutlet",o)("ngTemplateOutletContext",Gs(41,iT,i.ampelStatus))}}function gx(e,t){if(1&e){var n=so();to(0,"table",13),to(1,"thead"),to(2,"tr"),to(3,"th",16),uo("click",(function(){return mn(n),fo(3).sortKeyMetricsTable(1)})),So(4),qs(5,"translate"),no(),to(6,"th",38),uo("click",(function(){return mn(n),fo(3).sortKeyMetricsTable(21)})),qs(7,"translate"),So(8),qs(9,"translate"),no(),to(10,"th",38),uo("click",(function(){return mn(n),fo(3).sortKeyMetricsTable(20)})),qs(11,"translate"),So(12),qs(13,"translate"),no(),to(14,"th",39),uo("click",(function(){return mn(n),fo(3).sortKeyMetricsTable(26)})),qs(15,"translate"),So(16),qs(17,"translate"),no(),to(18,"th",39),uo("click",(function(){return mn(n),fo(3).sortKeyMetricsTable(22)})),qs(19,"translate"),So(20),qs(21,"translate"),no(),to(22,"th",40),uo("click",(function(){return mn(n),fo(3).sortKeyMetricsTable(6)})),So(23),qs(24,"translate"),no(),no(),no(),to(25,"tbody"),Ya(26,px,23,43,"tr",41),no(),no()}if(2&e){var i=fo(3);zi(4),To(zs(5,11,"keyMetrics.lbl.timeStamp")),zi(2),po("title",zs(7,13,"keyMetrics.longADV")),zi(2),To(zs(9,15,"keyMetrics.shortADV")),zi(2),po("title",zs(11,17,"keyMetrics.longPDV")),zi(2),To(zs(13,19,"keyMetrics.shortPDV")),zi(2),po("title",zs(15,21,"keyMetrics.longEDVC")),zi(2),To(zs(17,23,"keyMetrics.shortEDVC")),zi(2),po("title",zs(19,25,"keyMetrics.longDVAC")),zi(2),To(zs(21,27,"keyMetrics.shortDVAC")),zi(3),To(zs(24,29,"keyMetrics.lbl.trafficLight")),zi(3),Xa("ngForOf",i.visbokeymetrics)}}function mx(e,t){if(1&e&&(to(0,"div"),Ya(1,ex,27,31,"table",1),Ya(2,rx,22,22,"table",1),Ya(3,hx,29,33,"table",1),Ya(4,gx,27,31,"table",1),no()),2&e){var n=fo(2);zi(1),Xa("ngIf","Cost"==n.typeMetricChart),zi(1),Xa("ngIf","EndDate"==n.typeMetricChart),zi(1),Xa("ngIf","Deadline"==n.typeMetricChart||"DeadlineDelay"==n.typeMetricChart),zi(1),Xa("ngIf","Delivery"==n.typeMetricChart)}}function bx(e,t){if(1&e){var n=so();to(0,"div"),to(1,"div",30),to(2,"button",31),uo("click",(function(){return mn(n),fo().switchChart()})),So(3),no(),Ya(4,KT,3,3,"button",32),io(5,"h3",33),qs(6,"translate"),no(),Ya(7,YT,6,5,"div",34),Ya(8,mx,5,4,"div",2),no()}if(2&e){var i=fo();zi(3),To(i.chartButton),zi(1),Xa("ngIf",!i.chart),zi(1),po("title",zs(6,5,"keyMetrics.lbl.showLegend")),zi(2),Xa("ngIf",i.chart&&i.graphDataLineChart.length>0),zi(1),Xa("ngIf",!i.chart&&i.graphDataLineChart.length>0)}}function yx(e,t){1&e&&(to(0,"tbody"),to(1,"tr"),to(2,"td"),So(3),qs(4,"translate"),no(),to(5,"td"),So(6),qs(7,"translate"),no(),no(),to(8,"tr"),to(9,"td"),So(10),qs(11,"translate"),no(),to(12,"td"),So(13),qs(14,"translate"),no(),no(),to(15,"tr"),to(16,"td"),So(17),qs(18,"translate"),no(),to(19,"td"),So(20),qs(21,"translate"),no(),no(),to(22,"tr"),to(23,"td"),So(24),qs(25,"translate"),no(),to(26,"td"),So(27),qs(28,"translate"),no(),no(),no()),2&e&&(zi(3),To(zs(4,8,"keyMetrics.shortAC")),zi(3),To(zs(7,10,"keyMetrics.longAC")),zi(4),To(zs(11,12,"keyMetrics.shortPV")),zi(3),To(zs(14,14,"keyMetrics.longPV")),zi(4),To(zs(18,16,"keyMetrics.shortEAC")),zi(3),To(zs(21,18,"keyMetrics.longEAC")),zi(4),To(zs(25,20,"keyMetrics.shortBAC")),zi(3),To(zs(28,22,"keyMetrics.longBAC")))}function kx(e,t){1&e&&(to(0,"tbody"),to(1,"tr"),to(2,"td"),So(3),qs(4,"translate"),no(),to(5,"td"),So(6),qs(7,"translate"),no(),no(),to(8,"tr"),to(9,"td"),So(10),qs(11,"translate"),no(),to(12,"td"),So(13),qs(14,"translate"),no(),no(),to(15,"tr"),to(16,"td"),So(17),qs(18,"translate"),no(),to(19,"td"),So(20),qs(21,"translate"),no(),no(),to(22,"tr"),to(23,"td"),So(24),qs(25,"translate"),no(),to(26,"td"),So(27),qs(28,"translate"),no(),no(),no()),2&e&&(zi(3),To(zs(4,8,"keyMetrics.shortAD")),zi(3),To(zs(7,10,"keyMetrics.longAD")),zi(4),To(zs(11,12,"keyMetrics.shortPD")),zi(3),To(zs(14,14,"keyMetrics.longPD")),zi(4),To(zs(18,16,"keyMetrics.shortEDC")),zi(3),To(zs(21,18,"keyMetrics.longEDC")),zi(4),To(zs(25,20,"keyMetrics.shortDAC")),zi(3),To(zs(28,22,"keyMetrics.longDAC")))}function Cx(e,t){1&e&&(to(0,"tbody"),to(1,"tr"),to(2,"td"),So(3),qs(4,"translate"),no(),to(5,"td"),So(6),qs(7,"translate"),no(),no(),to(8,"tr"),to(9,"td"),So(10),qs(11,"translate"),no(),to(12,"td"),So(13),qs(14,"translate"),no(),no(),no()),2&e&&(zi(3),To(zs(4,4,"keyMetrics.finishedDeadline")),zi(3),To(zs(7,6,"keyMetrics.longFinishedDeadline")),zi(4),To(zs(11,8,"keyMetrics.unfinishedDeadline")),zi(3),To(zs(14,10,"keyMetrics.longUnfinishedDeadline")))}function Vx(e,t){1&e&&(to(0,"tbody"),to(1,"tr"),to(2,"td"),So(3),qs(4,"translate"),no(),to(5,"td"),So(6),qs(7,"translate"),no(),no(),to(8,"tr"),to(9,"td"),So(10),qs(11,"translate"),no(),to(12,"td"),So(13),qs(14,"translate"),no(),no(),to(15,"tr"),to(16,"td"),So(17),qs(18,"translate"),no(),to(19,"td"),So(20),qs(21,"translate"),no(),no(),to(22,"tr"),to(23,"td"),So(24),qs(25,"translate"),no(),to(26,"td"),So(27),qs(28,"translate"),no(),no(),no()),2&e&&(zi(3),To(zs(4,8,"keyMetrics.shortADV")),zi(3),To(zs(7,10,"keyMetrics.longADV")),zi(4),To(zs(11,12,"keyMetrics.shortPDV")),zi(3),To(zs(14,14,"keyMetrics.longPDV")),zi(4),To(zs(18,16,"keyMetrics.shortEDVC")),zi(3),To(zs(21,18,"keyMetrics.longEDVC")),zi(4),To(zs(25,20,"keyMetrics.shortDVAC")),zi(3),To(zs(28,22,"keyMetrics.longDVAC")))}var wx,Ax=((wx=function(){function e(t,n,i,r,a,o){p(this,e),this.visboprojectversionService=t,this.messageService=n,this.alertService=i,this.route=r,this.router=a,this.translate=o,this.switchViewChild=new Ys,this.visbokeymetrics=[],this.allViews=["KeyMetrics","Capacity","Cost","Deadline","Delivery","All"],this.currentView="KeyMetrics",this.currentViewKM=!1,this.refDate=new Date,this.chart=!0,this.history=!1,this.parentThis=this,this.typeMetricList=[{name:"Total & Actual Cost",metric:"Cost"},{name:"Delivery Completion",metric:"Delivery"},{name:"Reached Deadlines",metric:"Deadline"},{name:"Ahead/Delay Deadlines",metric:"DeadlineDelay"},{name:"Ahead/Delay Deliveries",metric:"DeliveryDelay"},{name:"Project End Date",metric:"EndDate"}],this.typeMetric=this.typeMetricList[0].name,this.colors=[],this.colorsDefault=["#458CCB","#F7941E","#458CCB","#F7941E","#996600","#996600"],this.colorsDelay=["#BDBDBD","#458CCB"],this.colorsEndDate=["#458CCB","#F7941E"],this.seriesDefault={0:{lineWidth:4,pointShape:"star",lineDashStyle:void 0,pointSize:void 0},1:{lineWidth:4,pointShape:"triangle",lineDashStyle:void 0,pointSize:void 0},2:{lineWidth:4,pointShape:"star",lineDashStyle:[4,8,8,4],pointSize:void 0},3:{lineWidth:4,pointShape:"triangle",lineDashStyle:[8,4,4,8],pointSize:void 0},4:{lineWidth:1,pointShape:"circle",lineDashStyle:void 0,pointSize:4},5:{lineWidth:1,pointShape:"circle",lineDashStyle:[8,4,4,8],pointSize:4}},this.seriesEndDate={0:{lineWidth:4,pointShape:"star",lineDashStyle:[4,8,8,4],pointSize:void 0},1:{lineWidth:4,pointShape:"triangle",lineDashStyle:[8,4,4,8],pointSize:void 0}},this.graphDataLineChart=[],this.graphOptionsLineChart={width:"100%",title:"Comparison: plan-to-date vs. baseline",animation:{startup:!0,duration:200},legend:{position:"top"},explorer:{actions:["dragToZoom","rightClickToReset"],maxZoomIn:.01},tooltip:{isHtml:!0},vAxis:{minValue:void 0,maxValue:void 0,direction:1,title:"KeyMetrics",minorGridlines:{count:0,color:"none"},ticks:void 0},hAxis:{format:"MMM yy",gridlines:{count:-1},minorGridlines:{count:0,color:"none"}},pointSize:14,curveType:"function",series:this.seriesDefault,colors:this.colorsDefault},this.graphOptionsLineChartEndDate={width:"100%",title:"Comparison: plan-to-date vs. baseline",animation:{startup:!0,duration:200},legend:{position:"top"},explorer:{actions:["dragToZoom","rightClickToReset"],maxZoomIn:.01},tooltip:{isHtml:!0},vAxis:{minValue:void 0,maxValue:void 0,direction:1,title:"KeyMetrics",minorGridlines:{count:0,color:"none"},ticks:void 0},hAxis:{format:"MMM yy",gridlines:{count:-1},minorGridlines:{count:0,color:"none"}},pointSize:14,curveType:"function",series:this.seriesEndDate,colors:this.colorsEndDate},this.sortAscending=!1,this.sortColumn=1,this.permVC=uy,this.permVP=dy}return m(e,[{key:"ngOnInit",value:function(){this.currentLang=this.translate.currentLang,this.chartButton=this.translate.instant("vpKeyMetric.lbl.viewList"),this.historyButton=this.translate.instant("vpKeyMetric.lbl.showTrend"),this.initSettings(),this.visboKeyMetricsCalc()}},{key:"ngOnChanges",value:function(){this.log("KeyMetrics Changes  "+this.vpvid),this.initSettings(),this.visboKeyMetricsCalc()}},{key:"initSettings",value:function(){this.route.snapshot.queryParams.refDate&&(this.refDate=new Date(this.route.snapshot.queryParams.refDate));var e=this.route.snapshot.queryParams.variantID;e!=this.variantID&&(this.typeMetricChart=void 0,this.variantID=e)}},{key:"hasKM",value:function(e,t){var n=!1;return!!e&&("Cost"==t?n=e.costCurrentTotal>0||e.costBaseLastTotal>0:"Deadline"==t?n=e.timeCompletionCurrentTotal>1||e.timeCompletionBaseLastTotal>1:"EndDate"==t?n=null!=e.endDateCurrent||null!=e.endDateBaseLast:"DeadlineDelay"===t?(e.timeCompletionCurrentTotal>1||e.timeCompletionBaseLastTotal>1)&&(n=void 0!==e.timeDelayFinished||void 0!==e.timeDelayUnFinished):"Delivery"==t?n=e.deliverableCompletionCurrentTotal>0||e.deliverableCompletionBaseLastTotal>0:"DeliveryDelay"===t&&(n=void 0!==e.deliverableDelayFinished||void 0!==e.deliverableDelayUnFinished),n)}},{key:"visboKeyMetricsCalc",value:function(){if(this.visbokeymetrics=[],this.visboprojectversions){this.log("calc keyMetrics LEN "+this.visboprojectversions.length);for(var e=0;e<this.visboprojectversions.length;e++)if(this.visboprojectversions[e].keyMetrics){var t=new _w;t.name=this.visboprojectversions[e].name,t._id=this.visboprojectversions[e]._id,t.timestamp=this.visboprojectversions[e].timestamp,t.vpid=this.visboprojectversions[e].vpid,t.variantName=this.visboprojectversions[e].variantName,t.startDate=this.visboprojectversions[e].startDate,t.Risiko=this.visboprojectversions[e].Risiko,t.StrategicFit=this.visboprojectversions[e].StrategicFit,t.leadPerson=this.visboprojectversions[e].leadPerson,t.status=this.visboprojectversions[e].status,t.ampelStatus=this.visboprojectversions[e].ampelStatus,t.ampelErlaeuterung=this.visboprojectversions[e].ampelErlaeuterung,t.VorlagenName=this.visboprojectversions[e].VorlagenName,t.complexity=this.visboprojectversions[e].complexity,t.description=this.visboprojectversions[e].description,t.businessUnit=this.visboprojectversions[e].businessUnit,t.keyMetrics=this.visboprojectversions[e].keyMetrics,t.savingCostTotal=Math.round(100*(1-(t.keyMetrics.costCurrentTotal||0)/(t.keyMetrics.costBaseLastTotal||1)))||0,t.savingCostTotal=Math.round(t.savingCostTotal),t.savingCostActual=100*(1-(t.keyMetrics.costCurrentActual||0)/(t.keyMetrics.costBaseLastActual||1))||0,t.keyMetrics.endDateBaseLast&&t.keyMetrics.endDateCurrent&&(t.savingEndDate=this.helperDateDiff(new Date(t.keyMetrics.endDateBaseLast).toISOString(),new Date(t.keyMetrics.endDateCurrent).toISOString(),"w")||0,t.savingEndDate=Math.round(10*t.savingEndDate)/10),t.deliveryCompletionTotal=t.keyMetrics.deliverableCompletionBaseLastTotal?Math.round((t.keyMetrics.deliverableCompletionCurrentTotal||0)/t.keyMetrics.deliverableCompletionBaseLastTotal*100):100,t.deliveryCompletionActual=t.keyMetrics.deliverableCompletionBaseLastActual?Math.round((t.keyMetrics.deliverableCompletionCurrentActual||0)/t.keyMetrics.deliverableCompletionBaseLastActual*100):100,t.timeCompletionTotal=t.keyMetrics.timeCompletionBaseLastTotal?Math.round((t.keyMetrics.timeCompletionCurrentTotal||0)/t.keyMetrics.timeCompletionBaseLastTotal*100):100,t.timeCompletionActual=t.keyMetrics.timeCompletionBaseLastActual?Math.round((t.keyMetrics.timeCompletionCurrentActual||0)/t.keyMetrics.timeCompletionBaseLastActual*100):100,this.visbokeymetrics.push(t)}if(this.log("calc keyMetrics Result LEN "+this.visbokeymetrics.length),this.visbokeymetrics.length>0){this.sortKeyMetricsTable(void 0);var n=0;if(this.refDate){for(;n<this.visbokeymetrics.length&&!(zv(this.refDate,new Date(this.visbokeymetrics[n].timestamp))>=0);n++);n>=this.visbokeymetrics.length&&(n=this.visbokeymetrics.length-1)}this.setVpvActive(this.visbokeymetrics[n])}else this.switchView("All")}}},{key:"sameDay",value:function(e,t){var n=new Date(e),i=new Date(t);return n.setHours(0,0,0,0),i.setHours(0,0,0,0),n.getTime()===i.getTime()}},{key:"visboKeyMetricsCostOverTime",value:function(){this.graphOptionsLineChart.title=this.translate.instant("keyMetrics.chart.titleCostTrend"),this.graphOptionsLineChart.vAxis.title=this.translate.instant("keyMetrics.chart.yAxisCostTrend"),this.graphOptionsLineChart.colors=this.colorsDefault;var e=[];if(this.visboprojectversions){for(var t=0;t<this.visboprojectversions.length;t++)this.visboprojectversions[t].keyMetrics&&(t<this.visboprojectversions.length-1&&this.sameDay(this.visboprojectversions[t].timestamp,this.visboprojectversions[t+1].timestamp)?this.log("visboKeyMetrics Skip Same Day ".concat(this.visboprojectversions[t].timestamp,"  ").concat(this.visboprojectversions[t+1].timestamp)):e.push([new Date(this.visboprojectversions[t].timestamp),Math.round(this.visboprojectversions[t].keyMetrics.costCurrentActual||0),Math.round(this.visboprojectversions[t].keyMetrics.costBaseLastActual||0),Math.round(this.visboprojectversions[t].keyMetrics.costCurrentTotal||0),Math.round(this.visboprojectversions[t].keyMetrics.costBaseLastTotal||0)]));if(0===e.length&&(this.log("keyMetricsCost empty"),e.push([new Date,0,0,0,0])),e.sort((function(e,t){return e[0]-t[0]})),1===e.length){var n=new Date(e[0][0]);n.setMonth(n.getMonth()+1),e.push([n,void 0,void 0,void 0,void 0])}e.push(["Timestamp",this.translate.instant("keyMetrics.shortAC"),this.translate.instant("keyMetrics.shortPV"),this.translate.instant("keyMetrics.shortEAC"),this.translate.instant("keyMetrics.shortBAC")]),e.reverse(),this.graphDataLineChart=e}}},{key:"visboKeyMetricsEndDateOverTime",value:function(){this.graphOptionsLineChartEndDate.title=this.translate.instant("keyMetrics.chart.titleEndDateTrend"),this.graphOptionsLineChartEndDate.vAxis.title=this.translate.instant("keyMetrics.chart.yAxisEndDateTrend"),this.graphOptionsLineChartEndDate.colors=this.colorsEndDate;var e=[];if(this.visboprojectversions){for(var t=Number.MAX_VALUE,n=Number.MIN_VALUE,i=0;i<this.visboprojectversions.length;i++)if(this.visboprojectversions[i].keyMetrics)if(i<this.visboprojectversions.length-1&&this.sameDay(this.visboprojectversions[i].timestamp,this.visboprojectversions[i+1].timestamp))this.log("visboKeyMetrics Skip Same Day ".concat(this.visboprojectversions[i].timestamp,"  ").concat(this.visboprojectversions[i+1].timestamp));else{var r=new Date(this.visboprojectversions[i].keyMetrics.endDateCurrent).getTime()||0,a=new Date(this.visboprojectversions[i].keyMetrics.endDateBaseLast).getTime()||0;t=Math.min(t,r),t=Math.min(t,a),n=Math.max(n,r),n=Math.max(n,a);var o=Qv(new Date(this.visboprojectversions[i].timestamp),"fullDateTime",this.currentLang),s=Qv(new Date(this.visboprojectversions[i].keyMetrics.endDateCurrent),"fullDate",this.currentLang),l=Qv(new Date(this.visboprojectversions[i].keyMetrics.endDateBaseLast),"fullDate",this.currentLang);e.push([new Date(this.visboprojectversions[i].timestamp),r,this.createCustomHTMLContent(o,s,l),a,this.createCustomHTMLContent(o,s,l)])}if(0===e.length&&(this.log("keyMetricsEndDate empty"),e.push([new Date,void 0,void 0,void 0,void 0])),e.sort((function(e,t){return e[0]-t[0]})),1===e.length){var c=new Date(e[0][0]);c.setMonth(c.getMonth()+1),e.push([c,void 0,void 0,void 0,void 0])}var u=new Date(t);u.setDate(1),u.setHours(0,0,0,0),u.setMonth(u.getMonth()-1);var d=new Date(n);for(d.setDate(1),d.setHours(0,0,0,0),d.setMonth(d.getMonth()+2),t=u.getTime(),n=d.getTime(),this.graphOptionsLineChartEndDate.vAxis.ticks=[];u.getTime()<=d.getTime();)this.graphOptionsLineChartEndDate.vAxis.ticks.push({v:u.getTime(),f:Qv(u,"shortDate",this.currentLang)}),u.setMonth(u.getMonth()+1);e.unshift(["Timestamp",this.translate.instant("keyMetrics.shortEED"),{type:"string",role:"tooltip",p:{html:!0}},this.translate.instant("keyMetrics.shortBED"),{type:"string",role:"tooltip",p:{html:!0}}]),this.graphDataLineChart=e}}},{key:"createCustomHTMLContent",value:function(e,t,n){var i='<div style="padding:5px 5px 5px 5px;color:black;width:180px;"><div><b>'+e+"</b></div><div><table>";return i=(i=i+"<tr><td>"+this.translate.instant("keyMetrics.longEED")+':</td><td align="right"><b>'+t+"</b></td></tr>")+"<tr><td>"+this.translate.instant("keyMetrics.longBED")+':</td><td align="right"><b>'+n+"</b></td></tr>",i+="</table></div></div>"}},{key:"visboKeyMetricsDeliveryOverTime",value:function(){this.graphOptionsLineChart.title=this.translate.instant("keyMetrics.chart.titleDeliveryTrend"),this.graphOptionsLineChart.vAxis.title=this.translate.instant("keyMetrics.chart.yAxisDeliveryTrend"),this.graphOptionsLineChart.colors=this.colorsDefault;var e=[];if(this.visboprojectversions){for(var t=0;t<this.visboprojectversions.length;t++)this.visboprojectversions[t].keyMetrics&&(t<this.visboprojectversions.length-1&&this.sameDay(this.visboprojectversions[t].timestamp,this.visboprojectversions[t+1].timestamp)||e.push([new Date(this.visboprojectversions[t].timestamp),Math.round(100*(this.visboprojectversions[t].keyMetrics.deliverableCompletionCurrentActual||0))/100,Math.round(100*(this.visboprojectversions[t].keyMetrics.deliverableCompletionBaseLastActual||0))/100,Math.round(100*(this.visboprojectversions[t].keyMetrics.deliverableCompletionCurrentTotal||0))/100,Math.round(100*(this.visboprojectversions[t].keyMetrics.deliverableCompletionBaseLastTotal||0))/100]));if(0===e.length&&(this.log("visboKeyMetrics empty"),e.push([new Date,0,0,0,0])),e.sort((function(e,t){return e[0]-t[0]})),1===e.length){var n=new Date(e[0][0]);n.setMonth(n.getMonth()+1),e.push([n,void 0,void 0,void 0,void 0])}var i=this.calcRangeAxis(e,"Delivery");this.graphOptionsLineChart.vAxis.maxValue=i,this.graphOptionsLineChart.vAxis.minValue=-i,e.push(["Timestamp",this.translate.instant("keyMetrics.shortADV"),this.translate.instant("keyMetrics.shortPDV"),this.translate.instant("keyMetrics.shortEDVC"),this.translate.instant("keyMetrics.shortDVAC")]),e.reverse(),this.log("visboKeyMetrics VP Delivery Completion  "+JSON.stringify(this.graphOptionsLineChart)),this.graphDataLineChart=e}}},{key:"visboKeyMetricsDeadlineOverTime",value:function(){this.graphOptionsLineChart.title=this.translate.instant("keyMetrics.chart.titleDeadlineTrend"),this.graphOptionsLineChart.vAxis.title=this.translate.instant("keyMetrics.chart.yAxisDeadlineTrend"),this.graphOptionsLineChart.colors=this.colorsDefault;var e=[];if(this.visboprojectversions){for(var t=0;t<this.visboprojectversions.length;t++)this.visboprojectversions[t].keyMetrics&&(t<this.visboprojectversions.length-1&&this.sameDay(this.visboprojectversions[t].timestamp,this.visboprojectversions[t+1].timestamp)?this.log("visboKeyMetrics Skip Same Day  ".concat(this.visboprojectversions[t].timestamp," ").concat(this.visboprojectversions[t+1].timestamp)):e.push([new Date(this.visboprojectversions[t].timestamp),Math.round(100*(this.visboprojectversions[t].keyMetrics.timeCompletionCurrentActual||0))/100,Math.round(100*(this.visboprojectversions[t].keyMetrics.timeCompletionBaseLastActual||0))/100,Math.round(100*(this.visboprojectversions[t].keyMetrics.timeCompletionCurrentTotal||0))/100,Math.round(100*(this.visboprojectversions[t].keyMetrics.timeCompletionBaseLastTotal||0))/100]));0===e.length&&(this.log("visboKeyMetrics empty"),e.push([new Date,0,0,0,0])),e.sort((function(e,t){return e[0]-t[0]}));var n=e.length;if(this.log("visboKeyMetrics duplicate ".concat(n-1," ").concat(JSON.stringify(this.visboprojectversions[n-1]))),1===n){var i=new Date(e[0][0]);i.setMonth(i.getMonth()+1),e.push([i,void 0,void 0,void 0,void 0])}var r=this.calcRangeAxis(e,"Deadline");this.graphOptionsLineChart.vAxis.maxValue=r,this.graphOptionsLineChart.vAxis.minValue=-r,e.push(["Timestamp",this.translate.instant("keyMetrics.shortAD"),this.translate.instant("keyMetrics.shortPD"),this.translate.instant("keyMetrics.shortEDC"),this.translate.instant("keyMetrics.shortDAC")]),e.reverse(),this.graphDataLineChart=e}}},{key:"visboKeyMetricsDeadlineDelayOverTime",value:function(){this.graphOptionsLineChart.title=this.translate.instant("keyMetrics.chart.titleDeadlineDelayTrend"),this.graphOptionsLineChart.vAxis.title=this.translate.instant("keyMetrics.chart.yAxisDeadlineDelayTrend"),this.graphOptionsLineChart.vAxis.direction=-1,this.graphOptionsLineChart.colors=this.colorsDelay;var e=[];if(this.visboprojectversions){for(var t=0;t<this.visboprojectversions.length;t++)this.visboprojectversions[t].keyMetrics&&(t<this.visboprojectversions.length-1&&this.sameDay(this.visboprojectversions[t].timestamp,this.visboprojectversions[t+1].timestamp)?this.log("visboKeyMetrics Skip Same Day  ".concat(this.visboprojectversions[t].timestamp," ").concat(this.visboprojectversions[t+1].timestamp)):e.push([new Date(this.visboprojectversions[t].timestamp),this.visboprojectversions[t].keyMetrics.timeDelayFinished,this.visboprojectversions[t].keyMetrics.timeDelayUnFinished]));0===e.length&&(this.log("visboKeyMetrics empty"),e.push([new Date,0,0])),e.sort((function(e,t){return e[0]-t[0]}));var n=e.length;if(this.log("visboKeyMetrics duplicate ".concat(n-1," ").concat(JSON.stringify(this.visboprojectversions[n-1]))),1===n){var i=new Date(e[0][0]);i.setMonth(i.getMonth()+1),e.push([i,void 0,void 0])}var r=this.calcRangeAxis(e,"Delay");this.graphOptionsLineChart.vAxis.maxValue=r,this.graphOptionsLineChart.vAxis.minValue=-r,e.push(["Timestamp",this.translate.instant("keyMetrics.finishedDeadlineDelay"),this.translate.instant("keyMetrics.unfinishedDeadlineDelay")]),e.reverse(),this.graphDataLineChart=e}}},{key:"visboKeyMetricsDeliveryDelayOverTime",value:function(){this.graphOptionsLineChart.title=this.translate.instant("keyMetrics.chart.titleDeliveryDelayTrend"),this.graphOptionsLineChart.vAxis.title=this.translate.instant("keyMetrics.chart.yAxisDeliveryDelayTrend"),this.graphOptionsLineChart.vAxis.direction=-1,this.graphOptionsLineChart.colors=this.colorsDelay;var e=[];if(this.visboprojectversions){for(var t=0;t<this.visboprojectversions.length;t++)this.visboprojectversions[t].keyMetrics&&(t<this.visboprojectversions.length-1&&this.sameDay(this.visboprojectversions[t].timestamp,this.visboprojectversions[t+1].timestamp)?this.log("visboKeyMetrics Skip Same Day  ".concat(this.visboprojectversions[t].timestamp," ").concat(this.visboprojectversions[t+1].timestamp)):e.push([new Date(this.visboprojectversions[t].timestamp),this.visboprojectversions[t].keyMetrics.deliverableDelayFinished,this.visboprojectversions[t].keyMetrics.deliverableDelayUnFinished]));0===e.length&&(this.log("visboKeyMetrics empty"),e.push([new Date,0,0])),e.sort((function(e,t){return e[0]-t[0]}));var n=e.length;if(this.log("visboKeyMetrics duplicate ".concat(n-1," ").concat(JSON.stringify(this.visboprojectversions[n-1]))),1===n){var i=new Date(e[0][0]);i.setMonth(i.getMonth()+1),e.push([i,void 0,void 0])}var r=this.calcRangeAxis(e,"Delay");this.graphOptionsLineChart.vAxis.maxValue=r,this.graphOptionsLineChart.vAxis.minValue=-r,e.push(["Timestamp",this.translate.instant("keyMetrics.finishedDeliveryDelay"),this.translate.instant("keyMetrics.unfinishedDeliveryDelay")]),e.reverse(),this.graphDataLineChart=e}}},{key:"calcRangeAxis",value:function(e,t){var n=0;n=0;for(var i=0;i<e.length;i++)switch(t){case"Delivery":case"Deadline":n=Math.max(n,Math.abs(e[i][1]))}return n*=1.1,this.log("RangeAxis for ".concat(t,": ").concat(n)),n}},{key:"switchChart",value:function(){this.chart=!this.chart,this.chartButton=this.translate.instant(this.chart?"vpKeyMetric.lbl.viewList":"vpKeyMetric.lbl.viewChart")}},{key:"showHistory",value:function(e){this.history=e,this.historyButton=this.translate.instant(this.history?"vpKeyMetric.lbl.hideTrend":"vpKeyMetric.lbl.showTrend")}},{key:"switchView",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];(e=this.allViews.find((function(t){return t===e})))?this.typeMetricChart=e:e=this.allViews[0],this.currentView=e,this.currentViewKM=t,this.showHistory(!1),this.updateUrlParam(t?"viewKM":"view",e)}},{key:"switchToHistory",value:function(e){if(this.log("Switch Chart from ".concat(this.typeMetricChart," to ").concat(e," ")),this.currentView="KeyMetrics",this.updateUrlParam("view",this.currentView),this.typeMetricChart!==e){var t=this.typeMetricList.find((function(t){return t.metric===e})).name;if(t)switch(this.typeMetricChart=e,this.typeMetric=t,this.showHistory(!0),e){case"Cost":this.visboKeyMetricsCostOverTime();break;case"EndDate":this.visboKeyMetricsEndDateOverTime();break;case"Deadline":this.visboKeyMetricsDeadlineOverTime();break;case"DeadlineDelay":this.visboKeyMetricsDeadlineDelayOverTime();break;case"DeliveryDelay":this.visboKeyMetricsDeliveryDelayOverTime();break;case"Delivery":this.visboKeyMetricsDeliveryOverTime()}}else this.showHistory(!this.history)}},{key:"gotoVisboProjectVersions",value:function(){var e;this.log("goto VPV All Versions"),this.vpvKeyMetricActive&&(e=this.vpvKeyMetricActive.vpid),e&&this.router.navigate(["vpv/".concat(e)],{})}},{key:"updateUrlParam",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=this.route.snapshot.url.join("/");void 0===t&&(t=null);var r=new ck;"view"==e?r.view=t:"viewKM"==e?r.viewKM=t:"refDate"==e&&(r.refDate=t),this.switchViewChild.emit(r),this.router.navigate([i],{queryParams:r,replaceUrl:!n,queryParamsHandling:"merge"})}},{key:"chartSelectRow",value:function(e,t,n){this.log("Line Chart: User selected row ".concat(e," col ").concat(t," Label ").concat(n," Len ").concat(this.graphDataLineChart.length));var i=new Date(n),r=this.visbokeymetrics.findIndex((function(e){return e.timestamp.toString()===i.toISOString()}));r<0&&(r=0),this.setVpvActive(this.visbokeymetrics[r],!0),this.log("Line Chart: User selected ".concat(e," ").concat(t," ").concat(this.vpvKeyMetricActive._id," ").concat(this.vpvKeyMetricActive.timestamp))}},{key:"listSelectRow",value:function(e){this.log("List: User selected ".concat(e._id," ").concat(e.name)),this.setVpvActive(e,!0)}},{key:"setVpvActive",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e){this.refDate=new Date(e.timestamp);var n,i=e.keyMetrics;if(this.vpvKeyMetricActive=e,this.log("VPV Active: vpv: ".concat(e._id," ").concat(this.vpvKeyMetricActive._id," ").concat(this.vpvKeyMetricActive.timestamp)),t&&this.updateUrlParam("refDate",e.timestamp.toString()),n=i.costCurrentActual/(i.costBaseLastActual||1),this.qualityCost=n<1.001?1:n<1.05?2:3,n=i.costCurrentTotal/(i.costBaseLastTotal||1),this.qualityTotalCost=n<1.001?1:n<1.05?2:3,i.endDateBaseLast){var r=i.endDateCurrent?new Date(i.endDateCurrent):new Date,a=new Date(i.endDateBaseLast);n=(r.getTime()-a.getTime())/1e3/3600/24/7,this.qualityEndDiffWeeks=n}else n=void 0;this.qualityEndDate=n<=0?1:n<=4?2:n>4?3:void 0,n=i.timeCompletionBaseLastActual?i.timeCompletionCurrentActual/i.timeCompletionBaseLastActual:1,this.qualityDeadline=n>.999?1:n>.95?2:3,n=i.deliverableCompletionBaseLastActual?i.deliverableCompletionCurrentActual/i.deliverableCompletionBaseLastActual:1,this.qualityDelivery=n>.999?1:n>.95?2:3,n=i.deliverableDelayFinished||0,this.delayActualDelivery=n<=0?1:n>7?2:3,n=i.deliverableDelayUnFinished||0,this.delayTotalDelivery=n<=0?1:n>7?2:3,n=i.timeDelayFinished||0,this.delayActualDeadline=n<=0?1:n<=7?2:3,n=i.timeDelayUnFinished||0,this.delayTotalDeadline=n<=0?1:n<=7?2:3,n=new Date(i.endDateCurrent).getTime()-new Date(i.endDateBaseLast).getTime(),this.delayEndDate=Math.round(n/1e3/60/60/24)/7,this.log("Quality End Date ".concat(i.endDateCurrent," Cost ").concat(this.qualityCost," Del. ").concat(this.qualityDelivery," Dead. ").concat(this.qualityDeadline," EndDate ").concat(this.delayEndDate,", Delay Deadline ").concat(this.delayActualDeadline," / ").concat(this.delayTotalDeadline," Delay Delivery ").concat(this.delayActualDelivery," / ").concat(this.delayTotalDelivery," "))}}},{key:"helperDateDiff",value:function(e,t,n){var i=new Date(e),r=new Date(t),a=i.getTime()-r.getTime();return"w"===n?a=a/1e3/60/60/24/7:"d"===n?a=a/1e3/60/60/24:a/=1e3,a}},{key:"hasVPPerm",value:function(e){return void 0!==this.combinedPerm&&(this.combinedPerm.vp&e)>0}},{key:"sortKeyMetricsTable",value:function(e){this.visbokeymetrics&&(void 0!==e?(e!==this.sortColumn&&(this.sortColumn=e,this.sortAscending=void 0),this.sortAscending=void 0===this.sortAscending?1===e:!this.sortAscending):(this.sortColumn=1,this.sortAscending=!1),this.log("Sort Key Metrics: Col ".concat(e," Asc ").concat(this.sortAscending)),1===this.sortColumn?this.visbokeymetrics.sort((function(e,t){return zv(e.timestamp,t.timestamp)})):2===this.sortColumn?this.visbokeymetrics.sort((function(e,t){return e.savingCostActual-t.savingCostActual})):3===this.sortColumn?this.visbokeymetrics.sort((function(e,t){return e.savingCostTotal-t.savingCostTotal})):4===this.sortColumn?this.visbokeymetrics.sort((function(e,t){var n,i;return((null===(n=e.keyMetrics)||void 0===n?void 0:n.costBaseLastActual)||0)-((null===(i=t.keyMetrics)||void 0===i?void 0:i.costBaseLastActual)||0)})):5===this.sortColumn?this.visbokeymetrics.sort((function(e,t){var n,i;return((null===(n=e.keyMetrics)||void 0===n?void 0:n.costBaseLastTotal)||0)-((null===(i=t.keyMetrics)||void 0===i?void 0:i.costBaseLastTotal)||0)})):6===this.sortColumn?this.visbokeymetrics.sort((function(e,t){return e.ampelStatus-t.ampelStatus})):7===this.sortColumn?this.visbokeymetrics.sort((function(e,t){var n,i;return((null===(n=e.keyMetrics)||void 0===n?void 0:n.costCurrentActual)||0)-((null===(i=t.keyMetrics)||void 0===i?void 0:i.costCurrentActual)||0)})):8===this.sortColumn?this.visbokeymetrics.sort((function(e,t){var n,i;return((null===(n=e.keyMetrics)||void 0===n?void 0:n.costCurrentTotal)||0)-((null===(i=t.keyMetrics)||void 0===i?void 0:i.costCurrentTotal)||0)})):10===this.sortColumn?this.visbokeymetrics.sort((function(e,t){var n,i;return((null===(n=e.keyMetrics)||void 0===n?void 0:n.timeCompletionCurrentActual)||0)-((null===(i=t.keyMetrics)||void 0===i?void 0:i.timeCompletionCurrentActual)||0)})):11===this.sortColumn?this.visbokeymetrics.sort((function(e,t){return e.timeCompletionActual-t.timeCompletionActual})):12===this.sortColumn?this.visbokeymetrics.sort((function(e,t){var n,i;return((null===(n=e.keyMetrics)||void 0===n?void 0:n.timeCompletionBaseLastTotal)||0)-((null===(i=t.keyMetrics)||void 0===i?void 0:i.timeCompletionBaseLastTotal)||0)})):13===this.sortColumn?this.visbokeymetrics.sort((function(e,t){var n,i;return((null===(n=e.keyMetrics)||void 0===n?void 0:n.timeDelayFinished)||0)-((null===(i=t.keyMetrics)||void 0===i?void 0:i.timeDelayFinished)||0)})):14===this.sortColumn?this.visbokeymetrics.sort((function(e,t){var n,i;return((null===(n=e.keyMetrics)||void 0===n?void 0:n.timeDelayUnFinished)||0)-((null===(i=t.keyMetrics)||void 0===i?void 0:i.timeDelayUnFinished)||0)})):20===this.sortColumn?this.visbokeymetrics.sort((function(e,t){return e.deliveryCompletionActual-t.deliveryCompletionActual})):21===this.sortColumn?this.visbokeymetrics.sort((function(e,t){var n,i;return((null===(n=e.keyMetrics)||void 0===n?void 0:n.deliverableCompletionCurrentActual)||0)-((null===(i=t.keyMetrics)||void 0===i?void 0:i.deliverableCompletionCurrentActual)||0)})):22===this.sortColumn?this.visbokeymetrics.sort((function(e,t){var n,i;return((null===(n=e.keyMetrics)||void 0===n?void 0:n.deliverableCompletionCurrentTotal)||0)-((null===(i=t.keyMetrics)||void 0===i?void 0:i.deliverableCompletionCurrentTotal)||0)})):23===this.sortColumn?this.visbokeymetrics.sort((function(e,t){var n,i;return((null===(n=e.keyMetrics)||void 0===n?void 0:n.deliverableDelayFinished)||0)-((null===(i=t.keyMetrics)||void 0===i?void 0:i.deliverableDelayFinished)||0)})):24===this.sortColumn?this.visbokeymetrics.sort((function(e,t){var n,i;return((null===(n=e.keyMetrics)||void 0===n?void 0:n.deliverableDelayUnFinished)||0)-((null===(i=t.keyMetrics)||void 0===i?void 0:i.deliverableDelayUnFinished)||0)})):25===this.sortColumn?this.visbokeymetrics.sort((function(e,t){var n,i;return((null===(n=e.keyMetrics)||void 0===n?void 0:n.deliverableCompletionBaseLastTotal)||0)-((null===(i=t.keyMetrics)||void 0===i?void 0:i.deliverableCompletionBaseLastTotal)||0)})):26===this.sortColumn?this.visbokeymetrics.sort((function(e,t){var n,i;return((null===(n=e.keyMetrics)||void 0===n?void 0:n.deliverableCompletionBaseLastActual)||0)-((null===(i=t.keyMetrics)||void 0===i?void 0:i.deliverableCompletionBaseLastActual)||0)})):31===this.sortColumn?this.visbokeymetrics.sort((function(e,t){var n,i;return zv(null===(n=e.keyMetrics)||void 0===n?void 0:n.endDateCurrent,null===(i=t.keyMetrics)||void 0===i?void 0:i.endDateCurrent)})):32===this.sortColumn?this.visbokeymetrics.sort((function(e,t){var n,i;return zv(null===(n=e.keyMetrics)||void 0===n?void 0:n.endDateBaseLast,null===(i=t.keyMetrics)||void 0===i?void 0:i.endDateBaseLast)})):33===this.sortColumn&&this.visbokeymetrics.sort((function(e,t){return e.savingEndDate-t.savingEndDate})),this.sortAscending||this.visbokeymetrics.reverse())}},{key:"getPreView",value:function(){return Xv()}},{key:"log",value:function(e){this.messageService.add("CompVisboViewCost: "+e)}}]),e}()).\u0275fac=function(e){return new(e||wx)(Za(Ew),Za(tf),Za(Zm),Za(sg),Za(Am),Za(Rb))},wx.\u0275cmp=wt({type:wx,selectors:[["app-comp-viewkeymetrics"]],inputs:{vpvid:"vpvid",visboprojectversions:"visboprojectversions",combinedPerm:"combinedPerm"},outputs:{switchViewChild:"switchViewChild"},features:[Qt],decls:33,vars:16,consts:[[1,"container"],["class","table table-hover table-sortable",4,"ngIf"],[4,"ngIf"],["indicator",""],["trafficLight",""],["highlight",""],["id","VpvLegend","tabindex","-1","role","dialog","aria-labelledby","VpvDetailsTitle","aria-hidden","true",1,"modal","fade"],["role","document",1,"modal-dialog","modal-lg","modal-dialog-centered"],[1,"modal-content"],[1,"modal-body"],[1,"table"],[1,"modal-footer","align-items-end"],["data-dismiss","modal",1,"btn","btn-primary"],[1,"table","table-hover","table-sortable"],["class","d-none d-md-table-cell d-print-none",4,"ngIf"],[1,"d-none","d-md-table-cell","d-print-none"],[3,"click"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"title","click"],["class","d-print-no",4,"ngIf"],[1,"d-print-no"],["type","button",1,"btn",3,"title","click"],[3,"title"],[1,"ml-1"],["class","ml-1",4,"ngIf"],["class","text-danger",4,"ngIf"],[1,"text-danger"],[1,"fa",3,"ngClass"],[1,"fas","fa-lightbulb",3,"ngClass"],[3,"ngClass"],[1,"btn-group","row"],[1,"mx-1",3,"click"],["type","button","class","mx-1",3,"click",4,"ngIf"],["data-toggle","modal","data-target","#VpvLegend",1,"fas","fa-info-circle","mx-2","mt-2","text-secondary",3,"title"],["class","mt-1",4,"ngIf"],["type","button",1,"mx-1",3,"click"],[1,"mt-1"],[3,"graphData","graphOptions","parentThis","language"],[1,"text-right",3,"title","click"],[1,"text-right","d-none","d-md-table-cell",3,"title","click"],[1,"text-right","d-none","d-md-table-cell",3,"click"],["data-toggle","modal","data-target","#ProjectDetail",3,"click",4,"ngFor","ngForOf"],["data-toggle","modal","data-target","#ProjectDetail",3,"click"],[1,"text-right"],[1,"text-right",3,"title"],[1,"text-right",3,"click"],["class","text-right d-none d-md-table-cell",3,"click",4,"ngIf"],["class","text-right",4,"ngIf"]],template:function(e,t){1&e&&(to(0,"form"),to(1,"div",0),Ya(2,LT,21,17,"table",1),Ya(3,GT,3,3,"h3",2),no(),no(),io(4,"hr"),Ya(5,jT,1,5,"ng-template",null,3,$s),Ya(7,FT,1,6,"ng-template",null,4,$s),Ya(9,HT,2,5,"ng-template",null,5,$s),Ya(11,bx,9,7,"div",2),to(12,"div",6),to(13,"div",7),to(14,"div",8),to(15,"div",9),to(16,"table",10),to(17,"thead"),to(18,"tr"),to(19,"th"),So(20),qs(21,"translate"),no(),to(22,"th"),So(23),qs(24,"translate"),no(),no(),no(),Ya(25,yx,29,24,"tbody",2),Ya(26,kx,29,24,"tbody",2),Ya(27,Cx,15,12,"tbody",2),Ya(28,Vx,29,24,"tbody",2),no(),to(29,"div",11),to(30,"button",12),So(31),qs(32,"translate"),no(),no(),no(),no(),no(),no()),2&e&&(zi(2),Xa("ngIf",t.vpvKeyMetricActive),zi(1),Xa("ngIf",!t.vpvKeyMetricActive),zi(8),Xa("ngIf",t.history&&"KeyMetrics"==t.currentView),zi(9),To(zs(21,10,"keyMetrics.lbl.shortcut")),zi(3),To(zs(24,12,"keyMetrics.lbl.explanation")),zi(2),Xa("ngIf","Cost"==t.typeMetricChart),zi(1),Xa("ngIf","Deadline"==t.typeMetricChart),zi(1),Xa("ngIf","DeadlineDelay"==t.typeMetricChart),zi(1),Xa("ngIf","Delivery"==t.typeMetricChart),zi(3),To(zs(32,14,"vpKeyMetric.btn.back")))},directives:[Fh,xd,Gh,su,vu,iu,YS,au],pipes:[jb,Vu,Cu],encapsulation:2}),wx);function Px(e,t){1&e&&oo(0)}function Dx(e,t){1&e&&oo(0)}var Mx=function(e){return{level:e}};function Ix(e,t){if(1&e&&(to(0,"div",16),to(1,"h5",17),to(2,"strong",18),Ya(3,Px,1,0,"ng-container",19),no(),So(4),qs(5,"translate"),no(),to(6,"div",20),to(7,"div",21),to(8,"div",22),So(9),qs(10,"translate"),qs(11,"translate"),no(),to(12,"div",23),to(13,"strong",18),Ya(14,Dx,1,0,"ng-container",19),no(),So(15),qs(16,"number"),no(),no(),to(17,"div",21),to(18,"div",22),So(19),qs(20,"translate"),qs(21,"translate"),no(),to(22,"div",23),So(23),qs(24,"number"),no(),no(),no(),no()),2&e){var n=fo(2),i=$a(2);zi(3),Xa("ngTemplateOutlet",i)("ngTemplateOutletContext",Gs(27,Mx,n.getLevel(n.vpvTotalCostCurrent,n.vpvTotalCostBaseLine))),zi(1),xo(" ",zs(5,11,"compViewCost.titleBox"),""),zi(5),_o(" ",zs(10,13,"keyMetrics.shortEAC")," (",zs(11,15,"keyMetrics.longEAC"),") "),zi(5),Xa("ngTemplateOutlet",i)("ngTemplateOutletContext",Gs(29,Mx,n.getLevel(n.vpvTotalCostCurrent,n.vpvTotalCostBaseLine))),zi(1),xo(" ",Qs(16,17,n.vpvTotalCostCurrent,"1.0-0")," T\u20ac "),zi(4),_o(" ",zs(20,20,"keyMetrics.shortBAC")," (",zs(21,22,"keyMetrics.longBAC"),") "),zi(4),xo(" ",Qs(24,24,n.vpvTotalCostBaseLine,"1.0-0")," T\u20ac ")}}function Sx(e,t){if(1&e&&(to(0,"div"),io(1,"app-combo-chart",24),no()),2&e){var n=fo(2);zi(1),Xa("graphData",n.graphDataComboChart)("graphOptions",n.graphOptionsComboChart)("parentThis",n.parentThis)("language",n.currentLang)}}function Tx(e,t){1&e&&(to(0,"div"),to(1,"h3",25),So(2),qs(3,"translate"),no(),no()),2&e&&(zi(2),xo(" ",zs(3,1,"compViewCost.msg.noCost")," "))}function xx(e,t){if(1&e){var n=so();to(0,"div",9),uo("resized",(function(e){return mn(n),fo().onResized(e)})),to(1,"div",10),to(2,"div",11),io(3,"div",12),no(),Ya(4,Ix,25,31,"div",13),no(),Ya(5,Sx,2,4,"div",14),Ya(6,Tx,4,3,"div",14),io(7,"i",15),qs(8,"translate"),no()}if(2&e){var i=fo();zi(4),Xa("ngIf",i.vpHasCost("")),zi(1),Xa("ngIf",i.graphDataComboChart.length>0),zi(1),Xa("ngIf",!i.vpHasCost("cost")),zi(1),po("title",zs(8,4,"keyMetrics.lbl.showLegend"))}}var _x=function(e,t,n){return{"fa-check-circle text-success":e,"fa-exclamation-triangle text-warning":t,"fa-exclamation-circle text-danger":n}};function Ux(e,t){if(1&e&&(to(0,"strong"),io(1,"i",26),no()),2&e){var n=t.level;zi(1),Xa("ngClass",js(1,_x,1==n,2==n,3==n))}}var Ox,Ex,Lx=((Ex=function(){function e(t,n,i,r,a,o){p(this,e),this.visboprojectversionService=t,this.messageService=n,this.alertService=i,this.route=r,this.router=a,this.translate=o,this.parentThis=this,this.colors=["#F7941E","#BDBDBD","#458CCB"],this.graphDataComboChart=[],this.graphOptionsComboChart={width:"100%",title:"Monthly Cost comparison: plan-to-date vs. baseline",animation:{startup:!0,duration:200},legend:{position:"top"},explorer:{actions:["dragToZoom","rightClickToReset"],maxZoomIn:.01},colors:this.colors,seriesType:"bars",series:{0:{type:"line",lineWidth:4,pointSize:0}},isStacked:!0,tooltip:{isHtml:!0},vAxis:{title:"Monthly Cost",format:"# T\u20ac",minorGridlines:{count:0,color:"none"}},hAxis:{format:"MMM yy",gridlines:{color:"#FFF",count:-1}},minorGridlines:{count:0,color:"none"}},this.permVC=uy,this.permVP=dy}return m(e,[{key:"ngOnInit",value:function(){this.currentLang=this.translate.currentLang,this.visboCostCalc()}},{key:"ngOnChanges",value:function(){this.log("Cost Changes  ".concat(this.vpvActive._id," ").concat(this.vpvActive.timestamp)),this.chartActive=void 0,void 0!==this.currentVpvId&&this.vpvActive._id!==this.currentVpvId&&this.visboCostCalc()}},{key:"onResized",value:function(e){var t=this;e||this.log("No event in Resize");var n=0;this.chartActive&&(n=(new Date).getTime()-this.chartActive.getTime()),n<1e3||(this.timeoutID&&clearTimeout(this.timeoutID),this.timeoutID=setTimeout((function(){t.visboCostCalc(),t.timeoutID=void 0}),500))}},{key:"hasVPPerm",value:function(e){return void 0!==this.combinedPerm&&(this.combinedPerm.vp&e)>0}},{key:"visboCostCalc",value:function(){var e=this;this.vpvActive&&(this.currentVpvId=this.vpvActive._id,this.log("Cost Calc for Version  ".concat(this.vpvActive._id," ").concat(this.vpvActive.timestamp)),this.visboprojectversionService.getCost(this.vpvActive._id).subscribe((function(t){e.log("get VPV Calc: Get ".concat(t.length," vpvs with ").concat(t[0].cost.length," cost entries")),1===t.length&&t[0].cost?(e.log("Store Cost for ".concat(t[0]._id," Len ").concat(t[0].cost.length," Actual ").concat(t[0].actualDataUntil)),e.vpvCost=t[0].cost,e.vpvActualDataUntil=new Date(t[0].actualDataUntil)):(e.log("get VPV Calc: Reset Cost to empty "),e.vpvCost=[]),e.visboViewCostOverTime()}),(function(t){if(e.log("get VPVs failed: error: ".concat(t.status," message: ").concat(t.error.message)),403===t.status){var n=e.translate.instant("compViewCost.msg.errorPermVersion",{name:e.vpvActive.name});e.alertService.error(n)}else e.alertService.error(Zv(t))})))}},{key:"visboViewCostOverTime",value:function(){this.graphOptionsComboChart.title=this.translate.instant("keyMetrics.chart.titleCostOverTime"),this.graphOptionsComboChart.vAxis.title=this.translate.instant("keyMetrics.chart.yAxisCostOverTime");var e=[];if(this.vpvCost){var t=this.vpvCost,n=this.vpvActualDataUntil.getTime();if(this.log("ViewCostOverTime Actual Until "+this.vpvActualDataUntil),0!==t.length){this.vpvTotalCostBaseLine=0,this.vpvTotalCostCurrent=0;for(var i=0;i<t.length;i++)new Date(t[i].currentDate).getTime()<n?e.push([new Date(t[i].currentDate),Math.round(10*t[i].baseLineCost)/10||0,this.createCustomHTMLContent(t[i],!0),Math.round(10*t[i].currentCost)/10||0,this.createCustomHTMLContent(t[i],!0),0,""]):e.push([new Date(t[i].currentDate),Math.round(10*t[i].baseLineCost)/10||0,this.createCustomHTMLContent(t[i],!1),0,"",Math.round(10*t[i].currentCost)/10||0,this.createCustomHTMLContent(t[i],!1)]),this.vpvTotalCostBaseLine+=t[i].baseLineCost||0,this.vpvTotalCostCurrent+=t[i].currentCost||0;0===e.length&&(this.log("ViewCostOverTime Result empty"),e.push([new Date,0,"",0,0]));var r=e.length;if(r<1&&this.log("ViewCostOverTime Empty"),1===r){var a=new Date(e[0][0]);a.setMonth(a.getMonth()+1),e.push([a,void 0,void 0,void 0,void 0,void 0,void 0,void 0])}e.unshift(["Timestamp",this.translate.instant("keyMetrics.baselinePV"),{type:"string",role:"tooltip",p:{html:!0}},this.translate.instant("keyMetrics.planAC"),{type:"string",role:"tooltip",p:{html:!0}},this.translate.instant("keyMetrics.planETC"),{type:"string",role:"tooltip",p:{html:!0}}]),this.graphDataComboChart=e,this.chartActive=new Date}}}},{key:"chartSelectRow",value:function(e,t,n){this.log("chart Select Row ".concat(e," ").concat(t," ").concat(n," "))}},{key:"createCustomHTMLContent",value:function(e,t){var n='<div style="padding:5px 5px 5px 5px;color:black;width:180px;"><div><b>'+Qv(new Date(e.currentDate),"shortDate",this.currentLang)+"</b></div><div><table>",i=this.translate.instant("keyMetrics.baselinePV"),r=this.translate.instant("keyMetrics.planAC"),a=this.translate.instant("keyMetrics.planETC");return n=(n=n+"<tr><td>"+i+':</td><td align="right"><b>'+Math.round(10*e.baseLineCost)/10+" T\u20ac</b></td></tr>")+"<tr><td>"+(t?r:a)+':</td align="right"><td><b>'+Math.round(10*e.currentCost)/10+" T\u20ac</b></td></tr>",n+="</table></div></div>"}},{key:"getLevel",value:function(e,t){var n=1;return t&&(n=e/t),n<=1?1:n<=1.05?2:3}},{key:"vpHasCost",value:function(e){var t=!1;return this.vpvActive?("keyMetric"==e?t=this.vpvActive.keyMetrics&&(this.vpvActive.keyMetrics.costBaseLastTotal>0||this.vpvActive.keyMetrics.costCurrentTotal>0):this.vpvCost&&this.vpvCost.length>0&&(t=!0),t):t}},{key:"log",value:function(e){this.messageService.add("CompVisboViewCost: "+e)}}]),e}()).\u0275fac=function(e){return new(e||Ex)(Za(Ew),Za(tf),Za(Zm),Za(sg),Za(Am),Za(Rb))},Ex.\u0275cmp=wt({type:Ex,selectors:[["app-comp-viewcost"]],inputs:{vpvActive:"vpvActive",combinedPerm:"combinedPerm"},features:[Qt],decls:42,vars:28,consts:[["class","well",3,"resized",4,"ngIf"],["indicator",""],["id","VpvLegend","tabindex","-1","role","dialog","aria-labelledby","VpvDetailsTitle","aria-hidden","true",1,"modal","fade"],["role","document",1,"modal-dialog","modal-lg","modal-dialog-centered"],[1,"modal-content"],[1,"modal-body"],[1,"table","table-hover"],[1,"modal-footer","align-items-end"],["data-dismiss","modal",1,"btn","btn-primary"],[1,"well",3,"resized"],[1,"row","row-cols-1","row-cols-lg-2"],[1,"col","col-sm-12","col-lg-8"],[1,"row","text-dark"],["class","col-sm-12 col-md-10 col-lg-4 card align-right px-0",4,"ngIf"],[4,"ngIf"],["data-toggle","modal","data-target","#VpvLegend",1,"fas","fa-info-circle","fa-lg","mx-2","mt-2","text-secondary",3,"title"],[1,"col-sm-12","col-md-10","col-lg-4","card","align-right","px-0"],[1,"card-header","p-2"],[1,"mr-1"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"card-body","p-2"],[1,"row"],[1,"col","col-sm-8"],[1,"col","col-sm-4","text-right"],[3,"graphData","graphOptions","parentThis","language"],[1,"d-flex","justify-content-center"],[1,"fa",3,"ngClass"]],template:function(e,t){1&e&&(Ya(0,xx,9,6,"div",0),Ya(1,Ux,2,5,"ng-template",null,1,$s),to(3,"div",2),to(4,"div",3),to(5,"div",4),to(6,"div",5),to(7,"table",6),to(8,"thead"),to(9,"tr"),to(10,"th"),So(11),qs(12,"translate"),no(),to(13,"th"),So(14),qs(15,"translate"),no(),no(),no(),to(16,"tbody"),to(17,"tr"),to(18,"td"),So(19),qs(20,"translate"),no(),to(21,"td"),So(22),qs(23,"translate"),no(),no(),to(24,"tr"),to(25,"td"),So(26),qs(27,"translate"),no(),to(28,"td"),So(29),qs(30,"translate"),no(),no(),to(31,"tr"),to(32,"td"),So(33),qs(34,"translate"),no(),to(35,"td"),So(36),qs(37,"translate"),no(),no(),no(),no(),to(38,"div",7),to(39,"button",8),So(40),qs(41,"translate"),no(),no(),no(),no(),no(),no()),2&e&&(Xa("ngIf",t.hasVPPerm(t.permVP.ViewAudit)),zi(11),To(zs(12,10,"keyMetrics.lbl.shortcut")),zi(3),To(zs(15,12,"keyMetrics.lbl.explanation")),zi(5),To(zs(20,14,"keyMetrics.shortPV")),zi(3),To(zs(23,16,"keyMetrics.longPV")),zi(4),To(zs(27,18,"keyMetrics.shortAC")),zi(3),To(zs(30,20,"keyMetrics.longAC")),zi(4),To(zs(34,22,"keyMetrics.shortETC")),zi(3),To(zs(37,24,"keyMetrics.longETC")),zi(4),To(zs(41,26,"compViewCost.btn.back")))},directives:[su,Nw,vu,Kw,iu],pipes:[jb,Vu],encapsulation:2}),Ex),Gx=((Ox=function(){function e(t){p(this,e),this.gChartService=t}return m(e,[{key:"ngOnInit",value:function(){this.language||(this.language="de"),this.gLib=this.gChartService.getGoogle(),this.gLib.charts.load("current",{packages:["corechart","table"],language:this.language}),this.gLib.charts.setOnLoadCallback(this.drawChart.bind(this)),this.elementID&&""!==this.elementID||(this.elementID="divPieChart")}},{key:"ngOnChanges",value:function(){this.initialised&&this.drawChart()}},{key:"drawChart",value:function(){console.log("Google Chart Pie Chart Draw "+this.graphData.length);for(var e=new this.gLib.visualization.PieChart(document.getElementById(this.elementID)),t=new this.gLib.visualization.DataTable,n=new this.gLib.visualization.DataTable,i=this.parentThis,r=0;r<this.graphLegend.length;r++)t.addColumn(this.graphLegend[r][0],this.graphLegend[r][1]);if(t.addRows(this.graphData),this.graphDataBefore&&this.graphDataBefore.length>0){for(var a=0;a<this.graphLegend.length;a++)n.addColumn(this.graphLegend[a][0],this.graphLegend[a][1]);n.addRows(this.graphDataBefore)}var o={title:"Pie Chart Title",sliceVisibilityThreshold:0};function s(){var n=e.getSelection()[0];if(i)if(n){var r=t.getValue(n.row,0),a=t.getValue(n.row,1);i.chartSelectRow&&i.chartSelectRow(n.row,r,a)}else i.chartSelectRow(void 0,void 0,void 0);else console.log("The user clicked and this is undefined")}if(this.graphDataBefore&&0!==this.graphDataBefore.length){var l=e.computeDiff(n,t);this.gLib.visualization.events.addListener(e,"select",s),e.draw(l,this.graphOptions||o)}else this.gLib.visualization.events.addListener(e,"select",s),e.draw(t,this.graphOptions||o);this.initialised=!0}}]),e}()).\u0275fac=function(e){return new(e||Ox)(Za(Hw))},Ox.\u0275cmp=wt({type:Ox,selectors:[["app-pie-chart"]],inputs:{elementID:"elementID",graphData:"graphData",graphDataBefore:"graphDataBefore",language:"language",graphLegend:"graphLegend",graphOptions:"graphOptions",parentThis:"parentThis"},features:[Qt],decls:1,vars:1,consts:[[3,"id"]],template:function(e,t){1&e&&io(0,"div",0),2&e&&po("id",t.elementID)},styles:["#divPieChart[_ngcontent-%COMP%]{width:100%;height:300px}"]}),Ox);function Rx(e,t){if(1&e){var n=so();to(0,"button",31),uo("click",(function(){return mn(n),fo(3).toggleGantt()})),So(1),no()}if(2&e){var i=fo(3);zi(1),To(i.buttonGantt)}}function jx(e,t){if(1&e&&(to(0,"option",32),So(1),no()),2&e){var n=t.$implicit;po("value",n.name),zi(1),To(n.localName)}}function Nx(e,t){if(1&e){var n=so();to(0,"div",26),to(1,"div",27),Ya(2,Rx,2,1,"button",28),to(3,"select",29),uo("ngModelChange",(function(e){return mn(n),fo(2).type=e}))("change",(function(){return mn(n),fo(2).switchView()})),Ya(4,jx,2,2,"option",30),no(),no(),no()}if(2&e){var i=fo(2);zi(2),Xa("ngIf",!i.getPreView()),zi(1),Xa("ngModel",i.type),zi(1),Xa("ngForOf",i.listType)}}function Fx(e,t){if(1&e&&(to(0,"div",34),to(1,"div",35),io(2,"app-pie-chart",36),no(),no()),2&e){var n=fo(3);zi(2),Xa("elementID",n.divAllPieChart)("graphData",n.graphAllDataPieChart)("graphDataBefore",n.graphBeforeAllDataPieChart)("graphLegend",n.graphAllPieLegend)("graphOptions",n.graphAllOptionsPieChart)("parentThis",n.parentThis)("language",n.currentLang)}}function Bx(e,t){if(1&e&&(to(0,"div",26),Ya(1,Fx,3,7,"div",33),no()),2&e){var n=fo(2);zi(1),Xa("ngIf",n.graphAllDataPieChart.length>1)}}function Hx(e,t){if(1&e){var n=so();to(0,"span"),to(1,"a",41),uo("click",(function(){mn(n);var e=t.$implicit,i=t.index;return fo(4).ganttSelectPath(e,i)})),So(2),no(),So(3," / "),no()}if(2&e){var i=t.$implicit;zi(2),To(i)}}function Kx(e,t){if(1&e&&(to(0,"div",39),Ya(1,Hx,4,1,"span",40),no()),2&e){var n=fo(3);zi(1),Xa("ngForOf",n.getBreadCrumb())}}function qx(e,t){if(1&e&&(to(0,"div"),to(1,"div"),io(2,"app-timeline-chart",42),no(),no()),2&e){var n=fo(3);zi(2),Xa("graphData",n.graphDataDeadlinesGantt)("graphOptions",n.graphOptionsDeadlinesGantt)("parentThis",n.parentThis)}}function zx(e,t){if(1&e&&(to(0,"div",26),Ya(1,Kx,2,1,"div",37),Ya(2,qx,3,3,"div",38),no()),2&e){var n=fo(2);zi(1),Xa("ngIf",n.showBreadCrumb()),zi(1),Xa("ngIf",n.graphDataDeadlinesGantt&&n.graphDataDeadlinesGantt.length>1)}}function Qx(e,t){if(1&e){var n=so();to(0,"th",43),uo("click",(function(){return mn(n),fo(2).sortDeadlineTable(7)})),So(1),qs(2,"translate"),no()}2&e&&(zi(1),To(zs(2,1,"compViewDeadline.lbl.endDatePFV")))}function Wx(e,t){if(1&e){var n=so();to(0,"th",44),uo("click",(function(){return mn(n),fo(2).sortDeadlineTable(5)})),So(1),qs(2,"translate"),no()}2&e&&(zi(1),To(zs(2,1,"compViewDeadline.lbl.change")))}function Jx(e,t){1&e&&oo(0)}function Yx(e,t){if(1&e&&(to(0,"td",55),So(1),qs(2,"date"),no()),2&e){var n=fo().$implicit;zi(1),To(Qs(2,1,n.endDatePFV,"dd.MM.yy"))}}function $x(e,t){if(1&e&&(to(0,"td",56),qs(1,"date"),So(2),qs(3,"number"),no()),2&e){var n=fo().$implicit;go("title","",Qs(1,2,n.endDatePFV,"dd.MM.yy")," (baseline)"),zi(2),To(Qs(3,5,n.changeDays/7,"1.0-1"))}}function Zx(e,t){if(1&e&&(to(0,"td",50),So(1),qs(2,"number"),no()),2&e){var n=fo().$implicit;zi(1),xo("",Qs(2,1,100*n.percentDone,"1.0-0")," %")}}function Xx(e,t){if(1&e&&(to(0,"td",57),So(1),qs(2,"number"),no()),2&e){var n=fo().$implicit;zi(1),xo("",Qs(2,1,100*n.percentDone,"1.0-0")," %")}}function e_(e,t){1&e&&oo(0)}var t_=function(e,t){return{level:e,text:t}},n_=function(e){return{level:e}};function i_(e,t){if(1&e){var n=so();to(0,"tr",45),uo("click",(function(){mn(n);var e=t.index;return fo(2).helperDeadline(e)})),to(1,"td",46),Ya(2,Jx,1,0,"ng-container",47),no(),to(3,"td",48),So(4),no(),Ya(5,Yx,3,4,"td",49),to(6,"td",50),So(7),qs(8,"date"),no(),Ya(9,$x,4,8,"td",51),Ya(10,Zx,3,4,"td",52),Ya(11,Xx,3,4,"td",53),to(12,"td",54),Ya(13,e_,1,0,"ng-container",47),no(),no()}if(2&e){var i=t.$implicit;fo();var r=$a(27),a=$a(29),o=fo();zi(1),po("title",o.getFullName(i)),zi(1),Xa("ngTemplateOutlet",r)("ngTemplateOutletContext",Rs(15,t_,o.getStatus(i),o.getShortText(o.getFullName(i),100,"right"))),zi(2),To(i.type),zi(1),Xa("ngIf",o.switchType),zi(2),To(Qs(8,12,i.endDateVPV,"dd.MM.yy")),zi(2),Xa("ngIf",o.switchType),zi(1),Xa("ngIf",o.inFuture(i.endDateVPV)||1==i.percentDone),zi(1),Xa("ngIf",!(o.inFuture(i.endDateVPV)||1==i.percentDone)),zi(1),po("title",i.trafficlightDesc),zi(1),Xa("ngTemplateOutlet",a)("ngTemplateOutletContext",Gs(18,n_,i.trafficlight))}}var r_=function(e,t,n,i,r,a){return{"font-weight-normal":e,"font-weight-bold":t,my_darkgreen:n,my_green:i,my_orange:r,my_red:a}};function a_(e,t){if(1&e&&(to(0,"i",58),So(1),no()),2&e){var n=t.level,i=t.text;Xa("ngClass",Fs(2,r_,-1==n,n>=0,0==n,1==n,2==n,3==n)),zi(1),xo(" ",i," ")}}var o_=function(e,t,n,i){return{"d-none":e,"text-success":t,"text-warning":n,"text-danger":i}};function s_(e,t){if(1&e&&io(0,"i",59),2&e){var n=t.level;Xa("ngClass",Ns(1,o_,0==n,1==n,2==n,3==n))}}function l_(e,t){if(1&e&&(to(0,"div",61),to(1,"label",62),So(2),qs(3,"translate"),no(),to(4,"label",63),So(5),qs(6,"date"),no(),no()),2&e){var n=fo(3);zi(2),xo("",zs(3,2,"compViewDeadline.lbl.endDatePFV"),":"),zi(3),To(Qs(6,4,n.filteredDeadline[n.deadlineIndex].endDatePFV,"dd.MM.yy"))}}function c_(e,t){if(1&e&&(to(0,"div",61),to(1,"label",62),So(2),qs(3,"translate"),no(),to(4,"label",63),So(5),qs(6,"date"),no(),no()),2&e){var n=fo(3);zi(2),xo("",zs(3,2,"compViewDeadline.lbl.endDateVPV"),":"),zi(3),To(Qs(6,4,n.filteredDeadline[n.deadlineIndex].endDateVPV,"dd.MM.yy"))}}function u_(e,t){if(1&e&&(to(0,"div",61),to(1,"label",62),So(2),qs(3,"translate"),no(),to(4,"label",63),So(5),qs(6,"number"),no(),no()),2&e){var n=fo(3);zi(2),xo("",zs(3,2,"compViewDeadline.lbl.done"),":"),zi(3),xo("",Qs(6,4,100*n.filteredDeadline[n.deadlineIndex].percentDone,"1.0-0")," %")}}function d_(e,t){1&e&&oo(0)}function h_(e,t){if(1&e&&(to(0,"div",61),to(1,"label",62),So(2),qs(3,"translate"),no(),to(4,"label",63),to(5,"span",65),Ya(6,d_,1,0,"ng-container",47),no(),to(7,"span",66),So(8),no(),no(),no()),2&e){fo(2);var n=$a(29),i=fo();zi(2),xo("",zs(3,5,"compViewDeadline.lbl.trafficlight"),":"),zi(3),po("title",i.filteredDeadline[i.deadlineIndex].trafficlightDesc),zi(1),Xa("ngTemplateOutlet",n)("ngTemplateOutletContext",Gs(7,n_,i.filteredDeadline[i.deadlineIndex].trafficlight)),zi(2),xo(" ",i.filteredDeadline[i.deadlineIndex].trafficlightDesc," ")}}function v_(e,t){if(1&e&&(to(0,"div",61),to(1,"label",62),So(2),qs(3,"translate"),no(),to(4,"label",63),So(5),no(),no()),2&e){var n=fo(3);zi(2),xo("",zs(3,2,"compViewDeadline.lbl.responsible"),":"),zi(3),To(n.filteredDeadline[n.deadlineIndex].responsible)}}function f_(e,t){if(1&e&&(to(0,"div",60),to(1,"form"),to(2,"div",61),to(3,"label",62),So(4),qs(5,"translate"),no(),to(6,"label",63),So(7),no(),no(),to(8,"div",61),to(9,"label",62),So(10),qs(11,"translate"),no(),to(12,"label",63),So(13),no(),no(),to(14,"div",61),to(15,"label",62),So(16),qs(17,"translate"),no(),to(18,"label",63),So(19),no(),no(),Ya(20,l_,7,7,"div",64),Ya(21,c_,7,7,"div",64),Ya(22,u_,7,7,"div",64),Ya(23,h_,9,9,"div",64),Ya(24,v_,6,4,"div",64),no(),no()),2&e){var n=fo(2);zi(4),xo("",zs(5,11,"compViewDeadline.lbl.vp"),":"),zi(3),xo("",n.vpvActive.name," "),zi(3),xo("",zs(11,13,"compViewDeadline.lbl.planElement"),":"),zi(3),To(n.getElementPath(n.deadlineIndex)),zi(3),xo("",zs(17,15,"compViewDeadline.lbl.type"),":"),zi(3),To(n.filteredDeadline[n.deadlineIndex].type),zi(1),Xa("ngIf",n.filteredDeadline[n.deadlineIndex].endDatePFV),zi(1),Xa("ngIf",n.filteredDeadline[n.deadlineIndex].endDateVPV),zi(1),Xa("ngIf",n.filteredDeadline[n.deadlineIndex].percentDone),zi(1),Xa("ngIf",n.filteredDeadline[n.deadlineIndex].trafficlight||n.filteredDeadline[n.deadlineIndex].trafficlightDesc),zi(1),Xa("ngIf",n.filteredDeadline[n.deadlineIndex].percentDone)}}function p_(e,t){if(1&e){var n=so();to(0,"button",67),uo("click",(function(){mn(n);var e=fo(2);return e.gotoVPRestrict(e.deadlineIndex)})),So(1),qs(2,"translate"),no()}2&e&&(zi(1),To(zs(2,1,"compViewDeadline.btn.detail")))}function g_(e,t){if(1&e){var n=so();to(0,"div",1),uo("resized",(function(e){return mn(n),fo().onResized(e)})),Ya(1,Nx,5,3,"div",2),Ya(2,Bx,2,1,"div",2),Ya(3,zx,3,2,"div",2),to(4,"div",3),to(5,"table",4),to(6,"thead"),to(7,"tr"),to(8,"th",5),uo("click",(function(){return mn(n),fo().sortDeadlineTable(2)})),So(9),qs(10,"translate"),no(),to(11,"th",6),uo("click",(function(){return mn(n),fo().sortDeadlineTable(3)})),So(12),qs(13,"translate"),no(),Ya(14,Qx,3,3,"th",7),to(15,"th",8),uo("click",(function(){return mn(n),fo().sortDeadlineTable(4)})),So(16),qs(17,"translate"),no(),Ya(18,Wx,3,3,"th",9),to(19,"th",8),uo("click",(function(){return mn(n),fo().sortDeadlineTable(6)})),So(20),qs(21,"translate"),no(),to(22,"th",10),io(23,"i",11),no(),no(),no(),to(24,"tbody"),Ya(25,i_,14,20,"tr",12),no(),no(),no(),Ya(26,a_,2,9,"ng-template",null,13,$s),Ya(28,s_,1,6,"ng-template",null,14,$s),to(30,"div",15),to(31,"div",16),to(32,"div",17),to(33,"div",18),to(34,"h5",19),So(35),qs(36,"translate"),no(),to(37,"button",20),to(38,"span",21),So(39,"\xd7"),no(),no(),no(),Ya(40,f_,25,17,"div",22),to(41,"div",23),to(42,"button",24),So(43),qs(44,"translate"),no(),Ya(45,p_,3,3,"button",25),no(),no(),no(),no(),no()}if(2&e){var i=fo();zi(1),Xa("ngIf",i.displaySwitch()),zi(1),Xa("ngIf",i.fullList&&"vpv"!=i.refType),zi(1),Xa("ngIf",i.viewGantt),zi(6),To(zs(10,14,"compViewDeadline.lbl.planElement")),zi(3),To(zs(13,16,"compViewDeadline.lbl.type")),zi(2),Xa("ngIf",i.switchType),zi(2),To(zs(17,18,"compViewDeadline.lbl.endDateVPV")),zi(2),Xa("ngIf",i.switchType),zi(2),To(zs(21,20,"compViewDeadline.lbl.done")),zi(5),Xa("ngForOf",i.filteredDeadline),zi(10),To(zs(36,22,"compViewDeadline.titleDetailDeadline")),zi(5),Xa("ngIf",i.deadlineIndex>=0&&i.deadlineIndex<i.filteredDeadline.length),zi(3),To(zs(44,24,"compViewDeadline.btn.back")),zi(2),Xa("ngIf",i.canSeeRestriction())}}var m_,b_=((m_=function(){function e(t,n,i,r,a,o){p(this,e),this.visboprojectversionService=t,this.messageService=n,this.alertService=i,this.route=r,this.router=a,this.translate=o,this.listType=[{name:"PFV",ref:"pfv",localName:""},{name:"VPV",ref:"vpv",localName:""},{name:"All",ref:void 0,localName:""}],this.type=this.listType[0].name,this.refType=this.listType[0].ref,this.switchType=!0,this.parentThis=this,this.colors=["#005600","green","orange","red"],this.graphAllDataPieChart=[],this.graphBeforeAllDataPieChart=[],this.graphAllPieLegend=[["string",this.translate.instant("compViewDeadline.lbl.status")],["number",this.translate.instant("compViewDeadline.lbl.count")]],this.graphAllOptionsPieChart={title:"View Deadlines",titleTextStyle:{color:"black",fontSize:"16"},tooltip:{trigger:"none"},colors:this.colors},this.divAllPieChart="divAllDeadLinePieChart",this.graphOptionsDeadlinesGantt={width:"100%",timeline:{showRowLabels:!1,showBarLabels:!0},tooltip:{isHtml:!0},animation:{startup:!0,duration:200}},this.graphDataDeadlinesGantt=[],this.permVC=uy,this.permVP=dy,this.sortAscending=!1,this.sortColumn=1,this.sortAscendingDeadline=!1,this.sortColumnDeadline=1}return m(e,[{key:"ngOnInit",value:function(){var e=this;this.currentLang=this.translate.currentLang,this.statusList=[this.translate.instant("keyMetrics.chart.statusDeadlineAhead"),this.translate.instant("keyMetrics.chart.statusDeadlineInTime"),this.translate.instant("keyMetrics.chart.statusDeadlineDelay"),this.translate.instant("keyMetrics.chart.statusDeadlineNotCompleted"),"Unknown"],this.buttonGantt=this.translate.instant("compViewDelivery.btn.buttonGanttOn"),this.listType.forEach((function(t){return t.localName=e.translate.instant("compViewDelivery.lbl.".concat(t.name))})),this.currentVpvId=this.vpvActive._id,this.visboDeadlineCalc(!1)}},{key:"ngOnChanges",value:function(e){this.log("Deadlines on Changes  ".concat(this.vpvActive._id," ").concat(this.vpvActive.timestamp,", Changes: ").concat(JSON.stringify(e))),void 0!==this.currentVpvId&&this.vpvActive._id!==this.currentVpvId&&this.visboDeadlineCalc(!1)}},{key:"onResized",value:function(e){var t=this;e||this.log("No event in Resize"),this.timeoutID&&clearTimeout(this.timeoutID),this.timeoutID=setTimeout((function(){t.visboViewAllDeadlinePie(!1),t.visboViewDeadlineTimeline(),t.timeoutID=void 0}),500)}},{key:"visboDeadlineCalc",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.vpvActive&&(this.fullList=this.hasVPPerm(this.permVP.View),this.fullList||(this.refType=void 0),this.currentVpvId=this.vpvActive._id,this.log("Deadline Calc for Version  ".concat(this.vpvActive._id," ").concat(this.vpvActive.timestamp," Reference ").concat(this.refType)),this.visboprojectversionService.getDeadline(this.vpvActive._id,this.refType).subscribe((function(n){e.log("get VPV Calc: Get ".concat(n.length," vpvs with ").concat(n[0].deadline.length," entries")),1===n.length&&n[0].deadline?(e.log("Get Deadlines for ".concat(n[0]._id," Len ").concat(n[0].deadline.length," Actual ").concat(n[0].actualDataUntil)),e.allDeadline=n[0].deadline,"vpv"!=e.refType&&e.allDeadline&&!e.allDeadline[0].fullPathPFV&&(e.refType="vpv",e.switchType=!1)):(e.log("get VPV Calc: Reset Deadlines to empty "),e.allDeadline=void 0),e.initDeadlines(t),e.visboViewAllDeadlinePie(t)}),(function(t){if(e.log("get VPVs failed: error: ".concat(t.status," message: ").concat(t.error.message)),403===t.status){var n=e.translate.instant("compViewDeadline.msg.errorPermVersion",{name:e.vpvActive.name});e.alertService.error(n)}else e.alertService.error(Zv(t))})))}},{key:"initDeadlines",value:function(e){if(void 0!==this.allDeadline){this.filterPath=["."];for(var t=0;t<this.allDeadline.length;t++)this.allDeadline[t].fullName=this.getFullName(this.allDeadline[t]),this.allDeadline[t].status=this.statusList[this.getStatus(this.allDeadline[t])],this.allDeadline[t].statusID=this.getStatus(this.allDeadline[t]);this.filterDeadlines(e)}else this.hierarchyDeadline=[]}},{key:"filterDeadlines",value:function(e){if(void 0!==this.allDeadline&&0!==this.allDeadline.length){var t=this.filterPath.join(" / "),n=!1;t!==this.filterOldPath&&(n=!0,this.filterStatus=void 0,this.filterOldPath=t),this.hierarchyDeadline=[],this.filteredDeadline=[];for(var i=0;i<this.allDeadline.length;i++)0===this.getFullPath(this.allDeadline[i]).join(" / ").indexOf(t)&&this.hierarchyDeadline.push(this.allDeadline[i]);for(var r=0;r<this.hierarchyDeadline.length;r++)void 0!==this.filterStatus&&this.filterStatus!==this.hierarchyDeadline[r].statusID||this.filteredDeadline.push(this.hierarchyDeadline[r]);this.sortDeadlineTable(),n&&this.visboViewAllDeadlinePie(e),this.visboViewDeadlineTimeline()}}},{key:"helperDeadline",value:function(e){this.deadlineIndex=e}},{key:"getElementPath",value:function(e,t){var n=[];"vpv"!==this.refType&&void 0!==this.refType||(n=this.filteredDeadline[e].fullPathVPV),"pfv"===this.refType&&(n=this.filteredDeadline[e].fullPathPFV);var i="";return i=n.length<=1?this.vpvActive.name:n.slice(1).join(" / "),t>0&&(i=$v(i,t,"right")),i}},{key:"hasVPPerm",value:function(e){return void 0!==this.combinedPerm&&(this.combinedPerm.vp&e)>0}},{key:"canSeeRestriction",value:function(){var e=this.combinedPerm.vp||0;return(e&=this.permVP.Modify+this.permVP.ManagePerm)>0}},{key:"getStatus",value:function(e){var t=this.vpvActive.timestamp,n=0;return e.endDatePFV?e.endDatePFV<=t&&e.percentDone<1?n=3:e.endDatePFV>t&&1===e.percentDone?n=0:e.endDatePFV<=t&&1===e.percentDone||e.endDatePFV>t&&e.percentDone<1?(e.changeDays<0&&(n=0),0===e.changeDays&&(n=1),e.changeDays>0&&(n=2)):n=4:n=-1,n}},{key:"visboViewAllDeadlinePie",value:function(e){this.graphAllOptionsPieChart.title=this.translate.instant("compViewDeadline.titleAllDeadlines");for(var t=[],n=[],i=0;i<this.statusList.length;i++)t[i]=0;for(var r=!1,a=0;a<this.filteredDeadline.length;a++)t[this.getStatus(this.filteredDeadline[a])]+=1,r=!0;for(var o=0;o<t.length;o++)n.push([this.statusList[o],t[o]]);this.log("PIE Chart change "+e),this.graphAllDataPieChart=r?n:[]}},{key:"getPhaseName",value:function(e){if(e){var t=e.phasePFV||e.name;return"."===t&&(t=this.vpvActive.name),t}}},{key:"visboViewDeadlineTimeline",value:function(){for(var e=[],t=0;t<this.hierarchyDeadline.length;t++){var n=this.hierarchyDeadline[t];if("Phase"===n.type){var i=n.startDateVPV?new Date(n.startDateVPV):new Date,r=new Date(n.endDateVPV),a=this.getPhaseName(n),o=this.getFullPath(n);0===o.join(" / ").indexOf(this.filterPath.join(" / "))&&o.length<=this.filterPath.length+1&&e.push([0===t?"Root":"Children",a,this.createCustomHTMLContent(n),i.getTime(),r.getTime()])}}e.reverse(),e.push(["Task ID","Task Name",{type:"string",role:"tooltip",p:{html:!0}},"Start Date","End Date"]),e.reverse(),this.graphDataDeadlinesGantt=e}},{key:"createCustomHTMLContent",value:function(e){var t=Qv(new Date(e.startDateVPV),"fullDate",this.currentLang),n=Qv(new Date(e.endDateVPV),"fullDate",this.currentLang),i=e.fullName;"."===i&&(i=this.vpvActive.name);var r='<div style="padding:5px 5px 5px 5px"><div><b>'+i+"</b></div><div><table>",a=this.translate.instant("compViewDeadline.lbl.startDateVPV"),o=this.translate.instant("compViewDeadline.lbl.endDateVPV"),s=this.translate.instant("compViewDeadline.lbl.percentDone"),l=this.translate.instant("compViewDeadline.lbl.trafficlight"),c=this.translate.instant("compViewDeadline.lbl.trafficlightDesc");return r=(r=(r=r+'<tr><td width="40%">'+a+":</td><td><b>"+t+"</b></td></tr>")+'<tr><td width="40%">'+o+":</td><td><b>"+n+"</b></td></tr>")+'<tr><td width="40%">'+s+":</td><td><b>"+Math.round(100*e.percentDone)+"%</b></td></tr>",e.trafficlight&&(r=r+'<tr><td width="40%">'+l+":</td><td><b>"+e.trafficlight+"</b></td></tr>"),e.trafficlightDesc&&(r=r+"<tr><td>"+c+":</td><td><b>"+e.trafficlightDesc+"</b></td></tr>"),r+="</table></div></div>"}},{key:"chartSelectRow",value:function(e,t,n){if(this.log("chart Select Row ".concat(e," ").concat(t," ").concat(n," for Filter")),void 0===e)this.filterStatus=void 0;else{var i=this.statusList.findIndex((function(e){return e===t}));this.filterStatus=i<0||this.filterStatus===i?void 0:i}this.filterDeadlines(!1)}},{key:"timelineSelectRow",value:function(e){var t=this.graphDataDeadlinesGantt[e+1][1];this.log("timeline Select Row ".concat(e," Phase ").concat(t));var n=this.hierarchyDeadline.findIndex((function(e){return e.name===t}));n<0&&(n=0),this.filterPath=this.getFullPath(this.hierarchyDeadline[n]),this.filterDeadlines(!1)}},{key:"ganttSelectPath",value:function(e,t){this.log("gantt Select Item ".concat(t," ").concat(e," "));var n=this.getFullPath(this.hierarchyDeadline[0]);t>=0&&t<n.length&&(this.filterPath=n.slice(0,t+1)),this.log("gantt Select ".concat(e," Full Path ").concat(this.filterPath.join(" / "))),this.filterDeadlines(!1)}},{key:"getFullName",value:function(e){var t;return e.fullName&&(t=e.fullName),"vpv"===this.refType||void 0===this.refType?(e.fullPathVPV&&e.fullPathVPV.length>1?t=e.fullPathVPV.slice(1).join(" / "):e.fullPathVPV?t=this.vpvActive.name:e.fullPathPFV&&e.fullPathPFV.length>1&&(t=e.fullPathPFV.slice(1).join(" / ")),t):"pfv"===this.refType?t=e.fullPathPFV&&e.fullPathPFV.length>1?e.fullPathPFV.slice(1).join(" / "):this.vpvActive.name:void 0}},{key:"getFullPath",value:function(e){if(e)return"pfv"===this.refType&&e.fullPathPFV||e.fullPathVPV}},{key:"getBreadCrumb",value:function(){var e=this.getFullPath(this.hierarchyDeadline[0]),t=e.slice(0,e.length);return t.length>=0&&(t[0]=this.vpvActive.name),t}},{key:"showBreadCrumb",value:function(){return this.getFullPath(this.hierarchyDeadline[0]).length>0}},{key:"inFuture",value:function(e){return e>this.vpvActive.timestamp.toString()}},{key:"getShortText",value:function(e,t,n){return $v(e,t,n)}},{key:"switchView",value:function(){var e=this;this.log("Switchinig to "+this.type),this.refType=this.listType.find((function(t){return t.name===e.type})).ref,this.visboDeadlineCalc(!1)}},{key:"toggleGantt",value:function(){this.viewGantt=!this.viewGantt,this.buttonGantt=this.translate.instant(this.viewGantt?"compViewDelivery.btn.buttonGanttOff":"compViewDelivery.btn.buttonGanttOn"),this.viewGantt||(this.filterPath=this.getFullPath(this.allDeadline[0]),this.filterDeadlines(!1))}},{key:"hasDeadlines",value:function(){var e=!1;return this.vpvActive&&this.allDeadline&&this.allDeadline.length>0&&(e=!0),e}},{key:"displaySwitch",value:function(){var e=!1;return this.switchType&&this.hasVPPerm(this.permVP.View)&&(e=!0),e}},{key:"gotoVPRestrict",value:function(e){var t=this.getFullPath(this.filteredDeadline[e]),n=this.filteredDeadline[e].nameID;localStorage.setItem("restrict",JSON.stringify({id:n,path:t})),this.log("goto VP Restrict: ".concat(this.vpvActive.vpid," ID ").concat(n," Path ").concat(t.join(" / "))),this.router.navigate(["vpRestrict/".concat(this.vpvActive.vpid)],{queryParams:{id:n}})}},{key:"sortDeadlineTable",value:function(e){this.filteredDeadline&&(void 0!==e?(e!==this.sortColumnDeadline&&(this.sortColumnDeadline=e,this.sortAscendingDeadline=void 0),this.sortAscendingDeadline=void 0===this.sortAscendingDeadline?2===e||3===e||4===e||7===e:!this.sortAscendingDeadline):(this.sortColumnDeadline=2,this.sortAscendingDeadline=!0),2===this.sortColumnDeadline?this.filteredDeadline.sort("pfv"===this.refType?function(e,t){return qv(e.fullPathPFV.join(" / "),t.fullPathPFV.join(" / "))}:function(e,t){return qv(e.fullPathVPV.join(" / "),t.fullPathVPV.join(" / "))}):3===this.sortColumnDeadline?this.filteredDeadline.sort((function(e,t){return qv(e.type.toLowerCase(),t.type.toLowerCase())})):4===this.sortColumnDeadline?this.filteredDeadline.sort((function(e,t){return zv(e.endDateVPV,t.endDateVPV)})):5===this.sortColumnDeadline?this.filteredDeadline.sort((function(e,t){return e.changeDays-t.changeDays})):6===this.sortColumnDeadline?this.filteredDeadline.sort((function(e,t){return e.percentDone-t.percentDone})):7===this.sortColumnDeadline&&this.filteredDeadline.sort((function(e,t){return zv(e.endDatePFV,t.endDatePFV)})),this.sortAscendingDeadline||this.filteredDeadline.reverse())}},{key:"getPreView",value:function(){return Xv()}},{key:"log",value:function(e){this.messageService.add("CompViewDeadline: "+e)}}]),e}()).\u0275fac=function(e){return new(e||m_)(Za(Ew),Za(tf),Za(Zm),Za(sg),Za(Am),Za(Rb))},m_.\u0275cmp=wt({type:m_,selectors:[["app-comp-viewdeadline"]],inputs:{vpvActive:"vpvActive",combinedPerm:"combinedPerm"},features:[Qt],decls:1,vars:1,consts:[["class","well",3,"resized",4,"ngIf"],[1,"well",3,"resized"],["class","container",4,"ngIf"],[1,"panel-body"],[1,"table","table-hover","table-sortable"],[1,"text-left",3,"click"],[1,"d-none","d-lg-table-cell",3,"click"],["class","d-none d-xl-table-cell text-right",3,"click",4,"ngIf"],[1,"d-none","d-md-table-cell","text-right",3,"click"],["class","text-right",3,"click",4,"ngIf"],[1,"d-none","d-md-table-cell"],[1,"fas","fa-lightbulb","text-grey"],["data-toggle","modal","data-target","#detailDeadline",3,"click",4,"ngFor","ngForOf"],["fontStyle",""],["trafficLight",""],["id","detailDeadline","tabindex","-1","role","dialog","aria-labelledby","Detail Deadline","aria-hidden","true",1,"modal","fade"],["role","document",1,"modal-dialog","modal-lg","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header"],["id","detailDeadlineTitle",1,"modal-title"],["type","button","data-dismiss","modal","aria-label","Close",1,"close"],["aria-hidden","true"],["class","modal-body",4,"ngIf"],[1,"modal-footer","align-items-end"],["type","button","data-dismiss","modal",1,"btn","btn-secondary"],["type","button","class","btn btn-primary","data-dismiss","modal",3,"click",4,"ngIf"],[1,"container"],[1,"d-flex","justify-content-center","my-1"],["type","button","class","btn btn-md btn-light mx-2 d-print-none",3,"click",4,"ngIf"],["name","type",1,"col-3","form-control","mx-2",3,"ngModel","ngModelChange","change"],[3,"value",4,"ngFor","ngForOf"],["type","button",1,"btn","btn-md","btn-light","mx-2","d-print-none",3,"click"],[3,"value"],["class","d-flex justify-content-center",4,"ngIf"],[1,"d-flex","justify-content-center"],[1,"align-center"],[3,"elementID","graphData","graphDataBefore","graphLegend","graphOptions","parentThis","language"],["class","mb-2",4,"ngIf"],[4,"ngIf"],[1,"mb-2"],[4,"ngFor","ngForOf"],[3,"click"],[3,"graphData","graphOptions","parentThis"],[1,"d-none","d-xl-table-cell","text-right",3,"click"],[1,"text-right",3,"click"],["data-toggle","modal","data-target","#detailDeadline",3,"click"],[3,"title"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"d-none","d-lg-table-cell"],["class","d-none d-xl-table-cell text-right",4,"ngIf"],[1,"d-none","d-md-table-cell","text-right"],["class","text-right",3,"title",4,"ngIf"],["class","d-none d-md-table-cell text-right",4,"ngIf"],["class","d-none d-md-table-cell text-right my_bg_red",4,"ngIf"],[1,"d-none","d-md-table-cell",3,"title"],[1,"d-none","d-xl-table-cell","text-right"],[1,"text-right",3,"title"],[1,"d-none","d-md-table-cell","text-right","my_bg_red"],[3,"ngClass"],[1,"fas","fa-lightbulb",3,"ngClass"],[1,"modal-body"],[1,"v_compact_t","form-group"],[1,"col-4","col-form-label"],[1,"col-8","form-control-static"],["class","v_compact_t form-group",4,"ngIf"],[1,"mx-2",3,"title"],[1,"mx-1"],["type","button","data-dismiss","modal",1,"btn","btn-primary",3,"click"]],template:function(e,t){1&e&&Ya(0,g_,46,26,"div",0),2&e&&Xa("ngIf",t.hasDeadlines())},directives:[su,Nw,au,rh,Td,Nh,ah,dh,Gx,eD,vu,iu,Fh,xd,Gh],pipes:[jb,Cu,Vu],styles:[".my_darkgreen[_ngcontent-%COMP%]{color:#005600}.my_green[_ngcontent-%COMP%]{color:green}.my_orange[_ngcontent-%COMP%]{color:orange}.my_red[_ngcontent-%COMP%]{color:red}.my_bg_red[_ngcontent-%COMP%]{background-color:red}.v_compact_t[_ngcontent-%COMP%]{margin:0;padding-top:0}"]}),m_);function y_(e,t){if(1&e&&(to(0,"option",29),So(1),no()),2&e){var n=t.$implicit;po("value",n.name),zi(1),To(n.localName)}}function k_(e,t){if(1&e){var n=so();to(0,"div",25),to(1,"div",26),to(2,"select",27),uo("ngModelChange",(function(e){return mn(n),fo(2).type=e}))("change",(function(){return mn(n),fo(2).switchView()})),Ya(3,y_,2,2,"option",28),no(),no(),no()}if(2&e){var i=fo(2);zi(2),Xa("ngModel",i.type),zi(1),Xa("ngForOf",i.listType)}}function C_(e,t){if(1&e&&(to(0,"div",31),to(1,"div",32),io(2,"app-pie-chart",33),no(),no()),2&e){var n=fo(3);zi(2),Xa("elementID",n.divAllPieChart)("graphData",n.graphAllDataPieChart)("graphLegend",n.graphAllPieLegend)("graphOptions",n.graphAllOptionsPieChart)("parentThis",n.parentThis)("language",n.currentLang)}}function V_(e,t){if(1&e&&(to(0,"div",25),Ya(1,C_,3,6,"div",30),no()),2&e){var n=fo(2);zi(1),Xa("ngIf",n.graphAllDataPieChart.length>1)}}function w_(e,t){if(1&e){var n=so();to(0,"th",8),uo("click",(function(){return mn(n),fo(2).sortDeliveryTable(4)})),So(1),qs(2,"translate"),no()}2&e&&(zi(1),To(zs(2,1,"compViewDelivery.lbl.endDatePFV")))}function A_(e,t){if(1&e){var n=so();to(0,"th",34),uo("click",(function(){return mn(n),fo(2).sortDeliveryTable(5)})),So(1),qs(2,"translate"),no()}2&e&&(zi(1),To(zs(2,1,"compViewDelivery.lbl.change")))}function P_(e,t){1&e&&oo(0)}function D_(e,t){if(1&e&&(to(0,"td",40),So(1),qs(2,"date"),no()),2&e){var n=fo().$implicit;zi(1),To(Qs(2,1,n.endDatePFV,"dd.MM.yy"))}}function M_(e,t){if(1&e&&(to(0,"td",44),qs(1,"date"),So(2),qs(3,"number"),no()),2&e){var n=fo().$implicit;go("title","",Qs(1,2,n.endDatePFV,"dd.MM.yy")," (baseline)"),zi(2),To(Qs(3,5,n.changeDays/7,"1.0-1"))}}function I_(e,t){if(1&e&&(to(0,"td",45),So(1),qs(2,"number"),no()),2&e){var n=fo().$implicit;zi(1),xo("",Qs(2,1,100*n.percentDone,"1.0-0")," %")}}function S_(e,t){if(1&e&&(to(0,"td",46),So(1),qs(2,"number"),no()),2&e){var n=fo().$implicit;zi(1),xo("",Qs(2,1,100*n.percentDone,"1.0-0")," %")}}var T_=function(e,t){return{level:e,text:t}};function x_(e,t){if(1&e){var n=so();to(0,"tr",35),uo("click",(function(){mn(n);var e=t.index;return fo(2).helperDelivery(e)})),to(1,"td",36),Ya(2,P_,1,0,"ng-container",37),no(),to(3,"td",38),So(4),no(),Ya(5,D_,3,4,"td",39),to(6,"td",40),So(7),qs(8,"date"),no(),Ya(9,M_,4,8,"td",41),Ya(10,I_,3,4,"td",42),Ya(11,S_,3,4,"td",43),no()}if(2&e){var i=t.$implicit;fo();var r=$a(24),a=fo();zi(1),po("title",i.description),zi(1),Xa("ngTemplateOutlet",r)("ngTemplateOutletContext",Rs(13,T_,a.getStatus(i),a.getShortText(i.description,100))),zi(1),po("title",a.getFullName(i)),zi(1),To(a.getShortText(a.getFullName(i),50,"right")),zi(1),Xa("ngIf",!a.reducedList),zi(2),To(Qs(8,10,i.endDateVPV,"dd.MM.yy")),zi(2),Xa("ngIf",!a.reducedList),zi(1),Xa("ngIf",a.inFuture(i.endDateVPV)||1==i.percentDone),zi(1),Xa("ngIf",!(a.inFuture(i.endDateVPV)||1==i.percentDone))}}var __=function(e,t,n,i,r,a){return{"font-weight-normal":e,"font-weight-bold":t,my_darkgreen:n,my_green:i,my_orange:r,my_red:a}};function U_(e,t){if(1&e&&(to(0,"i",47),So(1),no()),2&e){var n=t.level,i=t.text;Xa("ngClass",Fs(2,__,-1==n,n>=0,0==n,1==n,2==n,3==n)),zi(1),xo(" ",i," ")}}var O_=function(e,t,n,i){return{"d-none":e,"text-success":t,"text-warning":n,"text-danger":i}};function E_(e,t){if(1&e&&io(0,"i",48),2&e){var n=t.level;Xa("ngClass",Ns(1,O_,0==n,1==n,2==n,3==n))}}function L_(e,t){if(1&e&&(to(0,"div",50),to(1,"label",51),So(2),qs(3,"translate"),no(),to(4,"label",52),So(5),qs(6,"date"),no(),no()),2&e){var n=fo(3);zi(2),xo("",zs(3,2,"compViewDelivery.lbl.endDatePFV"),":"),zi(3),To(Qs(6,4,n.filteredDelivery[n.deliveryIndex].endDatePFV,"dd.MM.yy"))}}function G_(e,t){if(1&e&&(to(0,"div",50),to(1,"label",51),So(2),qs(3,"translate"),no(),to(4,"label",52),So(5),qs(6,"date"),no(),no()),2&e){var n=fo(3);zi(2),xo("",zs(3,2,"compViewDelivery.lbl.endDateVPV"),":"),zi(3),To(Qs(6,4,n.filteredDelivery[n.deliveryIndex].endDateVPV,"dd.MM.yy"))}}function R_(e,t){if(1&e&&(to(0,"div",50),to(1,"label",51),So(2),qs(3,"translate"),no(),to(4,"label",52),So(5),qs(6,"number"),no(),no()),2&e){var n=fo(3);zi(2),xo("",zs(3,2,"compViewDelivery.lbl.done"),":"),zi(3),xo("",Qs(6,4,100*n.filteredDelivery[n.deliveryIndex].percentDone,"1.0-0")," %")}}function j_(e,t){if(1&e&&(to(0,"div",49),to(1,"form"),to(2,"div",50),to(3,"label",51),So(4),qs(5,"translate"),no(),to(6,"label",52),So(7),no(),no(),to(8,"div",50),to(9,"label",51),So(10),qs(11,"translate"),no(),to(12,"label",52),So(13),no(),no(),to(14,"div",50),to(15,"label",51),So(16),qs(17,"translate"),no(),to(18,"label",52),So(19),no(),no(),Ya(20,L_,7,7,"div",53),Ya(21,G_,7,7,"div",53),Ya(22,R_,7,7,"div",53),no(),no()),2&e){var n=fo(2);zi(4),xo("",zs(5,9,"compViewDelivery.lbl.vp"),":"),zi(3),xo("",n.vpvActive.name," "),zi(3),xo("",zs(11,11,"compViewDelivery.lbl.planElement"),":"),zi(3),To(n.getElementPath(n.deliveryIndex)),zi(3),xo("",zs(17,13,"compViewDelivery.lbl.description"),":"),zi(3),To(n.filteredDelivery[n.deliveryIndex].description),zi(1),Xa("ngIf",n.filteredDelivery[n.deliveryIndex].endDatePFV),zi(1),Xa("ngIf",n.filteredDelivery[n.deliveryIndex].endDateVPV),zi(1),Xa("ngIf",n.filteredDelivery[n.deliveryIndex].percentDone)}}function N_(e,t){if(1&e){var n=so();to(0,"button",54),uo("click",(function(){mn(n);var e=fo(2);return e.gotoVPRestrict(e.deliveryIndex)})),So(1),qs(2,"translate"),no()}2&e&&(zi(1),To(zs(2,1,"compViewDelivery.btn.detail")))}function F_(e,t){if(1&e){var n=so();to(0,"div",1),uo("resized",(function(e){return mn(n),fo().onResized(e)})),Ya(1,k_,4,2,"div",2),Ya(2,V_,2,1,"div",2),to(3,"div",3),to(4,"table",4),to(5,"thead"),to(6,"tr"),to(7,"th",5),uo("click",(function(){return mn(n),fo().sortDeliveryTable(3)})),So(8),qs(9,"translate"),no(),to(10,"th",6),uo("click",(function(){return mn(n),fo().sortDeliveryTable(2)})),So(11),qs(12,"translate"),no(),Ya(13,w_,3,3,"th",7),to(14,"th",8),uo("click",(function(){return mn(n),fo().sortDeliveryTable(4)})),So(15),qs(16,"translate"),no(),Ya(17,A_,3,3,"th",9),to(18,"th",10),uo("click",(function(){return mn(n),fo().sortDeliveryTable(6)})),So(19),qs(20,"translate"),no(),no(),no(),to(21,"tbody"),Ya(22,x_,12,16,"tr",11),no(),no(),no(),Ya(23,U_,2,9,"ng-template",null,12,$s),Ya(25,E_,1,6,"ng-template",null,13,$s),to(27,"div",14),to(28,"div",15),to(29,"div",16),to(30,"div",17),to(31,"h5",18),So(32),qs(33,"translate"),no(),to(34,"button",19),to(35,"span",20),So(36,"\xd7"),no(),no(),no(),Ya(37,j_,23,15,"div",21),to(38,"div",22),to(39,"button",23),So(40),qs(41,"translate"),no(),Ya(42,N_,3,3,"button",24),no(),no(),no(),no(),no()}if(2&e){var i=fo();zi(1),Xa("ngIf",i.displaySwitch()),zi(1),Xa("ngIf",!i.reducedList),zi(6),To(zs(9,13,"compViewDelivery.lbl.description")),zi(3),To(zs(12,15,"compViewDelivery.lbl.planElement")),zi(2),Xa("ngIf",!i.reducedList),zi(2),To(zs(16,17,"compViewDelivery.lbl.endDateVPV")),zi(2),Xa("ngIf",!i.reducedList),zi(2),To(zs(20,19,"compViewDelivery.lbl.done")),zi(3),Xa("ngForOf",i.filteredDelivery),zi(10),To(zs(33,21,"compViewDelivery.titleDetailDelivery")),zi(5),Xa("ngIf",i.deliveryIndex>=0&&i.deliveryIndex<i.filteredDelivery.length),zi(3),To(zs(41,23,"compViewDelivery.btn.back")),zi(2),Xa("ngIf",i.canSeeRestriction())}}var B_,H_=((B_=function(){function e(t,n,i,r,a,o){p(this,e),this.visboprojectversionService=t,this.messageService=n,this.alertService=i,this.route=r,this.router=a,this.translate=o,this.listType=[{name:"PFV",ref:"pfv",localName:""},{name:"VPV",ref:"vpv",localName:""},{name:"All",ref:void 0,localName:""}],this.type=this.listType[0].name,this.refType=this.listType[0].ref,this.switchType=!0,this.parentThis=this,this.colors=["#005600","green","orange","red"],this.graphAllDataPieChart=[],this.graphAllPieLegend=[["string",this.translate.instant("compViewDelivery.lbl.status")],["number",this.translate.instant("compViewDelivery.lbl.count")]],this.graphAllOptionsPieChart={title:"View Delivery Status",titleTextStyle:{color:"black",fontSize:"16"},pieSliceText:"percentage",tooltip:{trigger:"none"},colors:this.colors},this.divAllPieChart="divAllDeliveryPieChart",this.permVC=uy,this.permVP=dy}return m(e,[{key:"ngOnInit",value:function(){var e=this;this.currentLang=this.translate.currentLang,this.statusList=[this.translate.instant("keyMetrics.chart.statusDeliveryAhead"),this.translate.instant("keyMetrics.chart.statusDeliveryInTime"),this.translate.instant("keyMetrics.chart.statusDeliveryDelay"),this.translate.instant("keyMetrics.chart.statusDeliveryNotCompleted"),"Unknown"],this.listType.forEach((function(t){return t.localName=e.translate.instant("compViewDelivery.lbl.".concat(t.name))})),this.visboDeliveryCalc()}},{key:"ngOnChanges",value:function(e){this.log("Delivery on Changes  ".concat(this.vpvActive._id," ").concat(this.vpvActive.timestamp,", Changes: ").concat(JSON.stringify(e))),void 0!==this.currentVpvId&&this.vpvActive._id!==this.currentVpvId&&this.visboDeliveryCalc()}},{key:"onResized",value:function(e){var t=this;e||this.log("No event in Resize"),this.timeoutID&&clearTimeout(this.timeoutID),this.timeoutID=setTimeout((function(){t.visboViewAllDeliveryPie(),t.timeoutID=void 0}),500)}},{key:"visboDeliveryCalc",value:function(){var e=this;this.vpvActive&&(this.currentVpvId=this.vpvActive._id,this.log("Delivery Calc for Version  ".concat(this.vpvActive._id," ").concat(this.vpvActive.timestamp," Reference ").concat(this.refType)),this.visboprojectversionService.getDelivery(this.vpvActive._id,this.refType).subscribe((function(t){e.log("get VPV Calc: Get ".concat(t.length," vpvs with ").concat(t[0].delivery.length," Delivery entries")),1===t.length&&t[0].delivery?(e.log("Store Delivery for ".concat(t[0]._id," Len ").concat(t[0].delivery.length," Timestamp ").concat(t[0].timestamp)),e.allDelivery=t[0].delivery,"vpv"!=e.refType&&e.allDelivery&&!e.allDelivery[0].fullPathPFV&&(e.refType="vpv",e.switchType=!1)):(e.log("get VPV Calc: Reset Delivery to empty "),e.allDelivery=void 0),e.initDeliveries(),e.visboViewAllDeliveryPie()}),(function(t){if(e.log("get VPV Deliveries failed: error: ".concat(t.status," message: ").concat(t.error.message)),403===t.status){var n=e.translate.instant("compViewDelivery.msg.errorPermVersion",{name:e.vpvActive.name});e.alertService.error(n)}else e.alertService.error(Zv(t))})))}},{key:"initDeliveries",value:function(){if(void 0!==this.allDelivery){for(var e=0;e<this.allDelivery.length;e++){this.allDelivery[e].fullName=this.getFullName(this.allDelivery[e]);var t=this.getStatus(this.allDelivery[e]);this.allDelivery[e].statusID=t,this.allDelivery[e].status=this.statusList[t]}this.filterDeliveries()}}},{key:"filterDeliveries",value:function(){if(this.filteredDelivery=[],this.reducedList=!0,void 0!==this.allDelivery){for(var e=0;e<this.allDelivery.length;e++)this.allDelivery[e].phasePFV&&(this.reducedList=!1),void 0!==this.filterStatus&&this.filterStatus!==this.allDelivery[e].statusID||this.filteredDelivery.push(this.allDelivery[e]);this.sortDeliveryTable(void 0)}}},{key:"helperDelivery",value:function(e){this.deliveryIndex=e}},{key:"getElementPath",value:function(e,t){var n=this.filteredDelivery[e].fullPathVPV,i="";return i=n.length<=1?this.vpvActive.name:n.slice(1).join(" / "),t>0&&(i=$v(i,t,"right")),i}},{key:"hasVPPerm",value:function(e){return void 0!==this.combinedPerm&&(this.combinedPerm.vp&e)>0}},{key:"canSeeRestriction",value:function(){var e=this.combinedPerm.vp||0;return(e&=this.permVP.Modify+this.permVP.ManagePerm)>0}},{key:"getStatus",value:function(e){return e.endDatePFV?e.endDatePFV<=this.vpvActive.timestamp&&e.percentDone<1?3:e.changeDays<0?0:0===e.changeDays?1:2:-1}},{key:"visboViewAllDeliveryPie",value:function(){this.graphAllOptionsPieChart.title=this.translate.instant("compViewDelivery.titleAllDelivery");for(var e=[],t=[],n=0;n<this.statusList.length;n++)e[n]=0;for(var i=!1,r=0;r<this.filteredDelivery.length;r++)e[this.getStatus(this.filteredDelivery[r])]+=1,i=!0;for(var a=0;a<e.length;a++)t.push([this.statusList[a],e[a]]);this.graphAllDataPieChart=i?t:[]}},{key:"chartSelectRow",value:function(e,t,n){if(this.log("chart Select Row ".concat(e," ").concat(t," ").concat(n," for Filter")),void 0===e)this.filterStatus=void 0;else{var i=this.statusList.findIndex((function(e){return e===t}));this.filterStatus=i<0||this.filterStatus===i?void 0:i}this.filterDeliveries()}},{key:"getFullName",value:function(e){var t;return e.fullName&&(t=e.fullName),"vpv"===this.refType||void 0===this.refType?(e.fullPathVPV&&e.fullPathVPV.length>1?t=e.fullPathVPV.slice(1).join(" / "):e.fullPathVPV?t=this.vpvActive.name:e.fullPathPFV&&e.fullPathPFV.length>1&&(t=e.fullPathPFV.slice(1).join(" / ")),t):"pfv"===this.refType?t=e.fullPathPFV&&e.fullPathPFV.length>1?e.fullPathPFV.slice(1).join(" / "):this.vpvActive.name:void 0}},{key:"inFuture",value:function(e){return e>this.vpvActive.timestamp.toString()}},{key:"getShortText",value:function(e,t,n){return $v(e,t,n)}},{key:"switchView",value:function(){var e=this;this.log("Switchinig to "+this.type),this.refType=this.listType.find((function(t){return t.name===e.type})).ref,this.visboDeliveryCalc()}},{key:"displayDelivery",value:function(){var e=!1;return this.vpvActive&&this.allDelivery&&this.allDelivery.length>0&&(e=!0),e}},{key:"displaySwitch",value:function(){var e=!1;return this.switchType&&this.hasVPPerm(this.permVP.View)&&(e=!0),e}},{key:"gotoVPRestrict",value:function(e){var t=this.filteredDelivery[e].fullPathVPV,n=this.filteredDelivery[e].nameID;localStorage.setItem("restrict",JSON.stringify({id:n,path:t})),this.log("goto VP Restrict: ".concat(this.vpvActive.vpid," ID ").concat(n," Path ").concat(t.join(" / "))),this.router.navigate(["vpRestrict/".concat(this.vpvActive.vpid)],{queryParams:{id:n}})}},{key:"sortDeliveryTable",value:function(e){this.filteredDelivery&&(void 0!==e?(e!==this.sortColumnDelivery&&(this.sortColumnDelivery=e,this.sortAscendingDelivery=void 0),this.sortAscendingDelivery=void 0===this.sortAscendingDelivery?2===e||3===e:!this.sortAscendingDelivery):(this.sortColumnDelivery=2,this.sortAscendingDelivery=!0),2===this.sortColumnDelivery?(void 0===this.refType&&this.filteredDelivery.sort((function(e,t){return!e.fullPathVPV&&e.fullPathPFV?qv(e.fullPathPFV.join(" / "),t.fullPathVPV.join(" / ")):!t.fullPathVPV&&t.fullPathPFV?qv(e.fullPathVPV.join(" / "),t.fullPathPFV.join(" / ")):!e.fullPathVPV&&!t.fullPathVPV&&e.fullPathPFV&&t.fullPathPFV?qv(e.fullPathPFV.join(" / "),t.fullPathPFV.join(" / ")):qv(e.fullPathVPV.join(" / "),t.fullPathVPV.join(" / "))})),"vpv"===this.refType&&this.filteredDelivery.sort((function(e,t){return qv(e.fullPathVPV.join(" / "),t.fullPathVPV.join(" / "))})),"pfv"===this.refType&&this.filteredDelivery.sort((function(e,t){return qv(e.fullPathPFV.join(" / "),t.fullPathPFV.join(" / "))}))):3===this.sortColumnDelivery?this.filteredDelivery.sort((function(e,t){return qv(e.description.toLowerCase(),t.description.toLowerCase())})):4===this.sortColumnDelivery?this.filteredDelivery.sort((function(e,t){return zv(e.endDateVPV,t.endDateVPV)})):5===this.sortColumnDelivery?this.filteredDelivery.sort((function(e,t){return e.changeDays-t.changeDays})):6===this.sortColumnDelivery&&this.filteredDelivery.sort((function(e,t){return e.percentDone-t.percentDone})),this.sortAscendingDelivery||this.filteredDelivery.reverse())}},{key:"log",value:function(e){this.messageService.add("CompViewDelivery: "+e)}}]),e}()).\u0275fac=function(e){return new(e||B_)(Za(Ew),Za(tf),Za(Zm),Za(sg),Za(Am),Za(Rb))},B_.\u0275cmp=wt({type:B_,selectors:[["app-comp-viewdelivery"]],inputs:{vpvActive:"vpvActive",combinedPerm:"combinedPerm"},features:[Qt],decls:1,vars:1,consts:[["class","well",3,"resized",4,"ngIf"],[1,"well",3,"resized"],["class","container",4,"ngIf"],[1,"panel-body"],[1,"table","table-hover","table-sortable"],[3,"click"],[1,"d-none","d-md-table-cell",3,"click"],["class","d-none d-lg-table-cell text-right",3,"click",4,"ngIf"],[1,"d-none","d-lg-table-cell","text-right",3,"click"],["class"," text-right",3,"click",4,"ngIf"],[1,"d-none","d-md-table-cell","text-right",3,"click"],["data-toggle","modal","data-target","#detailDelivery",3,"click",4,"ngFor","ngForOf"],["fontStyle",""],["trafficLight",""],["id","detailDelivery","tabindex","-1","role","dialog","aria-labelledby","Detail Delivery","aria-hidden","true",1,"modal","fade"],["role","document",1,"modal-dialog","modal-lg","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header"],["id","detailDeliveryTitle",1,"modal-title"],["type","button","data-dismiss","modal","aria-label","Close",1,"close"],["aria-hidden","true"],["class","modal-body",4,"ngIf"],[1,"modal-footer","align-items-end"],["type","button","data-dismiss","modal",1,"btn","btn-secondary"],["type","button","class","btn btn-primary","data-dismiss","modal",3,"click",4,"ngIf"],[1,"container"],[1,"d-flex","justify-content-left"],["name","type",1,"col-3","form-control","mx-1",3,"ngModel","ngModelChange","change"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["class","d-flex justify-content-center",4,"ngIf"],[1,"d-flex","justify-content-center"],[1,"align-center"],[3,"elementID","graphData","graphLegend","graphOptions","parentThis","language"],[1,"text-right",3,"click"],["data-toggle","modal","data-target","#detailDelivery",3,"click"],[3,"title"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"d-none","d-md-table-cell",3,"title"],["class","d-none d-lg-table-cell text-right",4,"ngIf"],[1,"d-none","d-lg-table-cell","text-right"],["class","text-right",3,"title",4,"ngIf"],["class","d-none d-md-table-cell text-right",4,"ngIf"],["class","d-none d-md-table-cell text-right my_bg_red",4,"ngIf"],[1,"text-right",3,"title"],[1,"d-none","d-md-table-cell","text-right"],[1,"d-none","d-md-table-cell","text-right","my_bg_red"],[3,"ngClass"],[1,"fas","fa-lightbulb",3,"ngClass"],[1,"modal-body"],[1,"v_compact_t","form-group"],[1,"col-4","col-form-label"],[1,"col-8","form-control-static"],["class","v_compact_t form-group",4,"ngIf"],["type","button","data-dismiss","modal",1,"btn","btn-primary",3,"click"]],template:function(e,t){1&e&&Ya(0,F_,43,25,"div",0),2&e&&Xa("ngIf",t.displayDelivery())},directives:[su,Nw,au,rh,Td,Nh,ah,dh,Gx,vu,iu,Fh,xd,Gh],pipes:[jb,Cu,Vu],styles:[".my_darkgreen[_ngcontent-%COMP%]{color:#005600}.my_green[_ngcontent-%COMP%]{color:green}.my_orange[_ngcontent-%COMP%]{color:orange}.my_red[_ngcontent-%COMP%]{color:red}.my_bg_red[_ngcontent-%COMP%]{background-color:red}.v_compact_t[_ngcontent-%COMP%]{margin:0;padding-top:0}"]}),B_);function K_(e,t){if(1&e&&(to(0,"span",16),So(1),no()),2&e){var n=fo(3);zi(1),xo(" (",n.dropDown[n.dropDownIndex],")")}}function q_(e,t){if(1&e){var n=so();to(0,"a",22),uo("click",(function(){mn(n);var e=fo().$implicit;return fo(4).switchVariant(e)})),So(1),no()}if(2&e){var i=fo().$implicit;zi(1),To(i)}}function z_(e,t){if(1&e&&(to(0,"div"),Ya(1,q_,2,1,"a",21),no()),2&e){var n=t.$implicit,i=fo(4);zi(1),Xa("ngIf",!i.isActiveVariant(n))}}function Q_(e,t){if(1&e&&(to(0,"span",17),io(1,"a",18),to(2,"div",19),Ya(3,z_,2,1,"div",20),no(),no()),2&e){var n=fo(3);zi(3),Xa("ngForOf",n.dropDown)}}function W_(e,t){1&e&&oo(0)}var J_=function(e){return{level:e}};function Y_(e,t){if(1&e&&(to(0,"small",23),Ya(1,W_,1,0,"ng-container",24),no()),2&e){var n=fo(3),i=$a(8);po("title",n.vpvActive.ampelErlaeuterung),zi(1),Xa("ngTemplateOutlet",i)("ngTemplateOutletContext",Gs(3,J_,n.vpvActive.ampelStatus))}}function $_(e,t){if(1&e){var n=so();to(0,"h2"),So(1),qs(2,"translate"),to(3,"a",12),uo("click",(function(){mn(n);var e=fo(2);return e.gotoVPDetail(e.vpActive)})),So(4),no(),Ya(5,K_,2,1,"span",13),Ya(6,Q_,4,1,"span",14),Ya(7,Y_,2,5,"small",15),no()}if(2&e){var i=fo(2);zi(1),xo(" ",zs(2,5,"vpKeyMetric.title"),": "),zi(3),To(i.vpActive.name),zi(1),Xa("ngIf",i.dropDownIndex>0),zi(1),Xa("ngIf",i.dropDown.length>1),zi(1),Xa("ngIf",i.vpvActive)}}function Z_(e,t){if(1&e){var n=so();to(0,"a",12),uo("click",(function(){mn(n);var e=fo(2);return e.gotoVC(e.vpActive)})),So(1),no()}if(2&e){var i=fo(2);zi(1),To(i.vpActive.vc.name)}}function X_(e,t){if(1&e&&(to(0,"span"),So(1),no()),2&e){var n=fo(2);zi(1),To(n.vpActive.vc.name)}}function eU(e,t){if(1&e&&(to(0,"div",8),to(1,"div",9),Ya(2,$_,8,7,"h2",10),to(3,"h5"),So(4),qs(5,"translate"),Ya(6,Z_,2,1,"a",11),Ya(7,X_,2,1,"span",10),no(),no(),no()),2&e){var n=fo();zi(2),Xa("ngIf",n.vpActive),zi(2),xo("",zs(5,4,"vpKeyMetric.lbl.vc"),": "),zi(2),Xa("ngIf",n.hasVCPerm(n.permVC.View)),zi(1),Xa("ngIf",!n.hasVCPerm(n.permVC.View))}}function tU(e,t){if(1&e){var n=so();to(0,"span",33),uo("click",(function(){return mn(n),fo(2).getNextVersion(-1)})),qs(1,"date"),no()}2&e&&go("title","Previous Period before ",Qs(1,1,fo(2).refDate,"dd.MM."),"")}function nU(e,t){if(1&e){var n=so();to(0,"select",34),uo("ngModelChange",(function(e){return mn(n),fo(2).refDateInterval=e})),to(1,"option",35),So(2),qs(3,"translate"),no(),to(4,"option",36),So(5),qs(6,"translate"),no(),to(7,"option",37),So(8),qs(9,"translate"),no(),to(10,"option",38),So(11),qs(12,"translate"),no(),no()}2&e&&(Xa("ngModel",fo(2).refDateInterval),zi(2),To(zs(3,5,"vpKeyMetric.lbl.day")),zi(3),To(zs(6,7,"vpKeyMetric.lbl.week")),zi(3),To(zs(9,9,"vpKeyMetric.lbl.month")),zi(3),To(zs(12,11,"vpKeyMetric.lbl.quarter")))}function iU(e,t){if(1&e){var n=so();to(0,"span",39),uo("click",(function(){return mn(n),fo(2).getNextVersion(1)})),qs(1,"date"),no()}2&e&&go("title","Next Period after ",Qs(1,1,fo(2).refDate,"dd.MM."),"")}function rU(e,t){if(1&e&&(to(0,"div",25),to(1,"div",8),to(2,"h4",26),to(3,"div",27),qs(4,"date"),So(5),qs(6,"translate"),qs(7,"date"),no(),to(8,"div",28),So(9),qs(10,"date"),no(),no(),to(11,"div",29),to(12,"div",8),Ya(13,tU,2,4,"span",30),Ya(14,nU,13,13,"select",31),Ya(15,iU,2,4,"span",32),no(),no(),no(),no()),2&e){var n=fo();zi(3),po("title",Qs(4,7,n.vpvActive.timestamp,"dd.MM.yyyy HH:mm")),zi(2),_o("",zs(6,10,"vpKeyMetric.titleVersion"),": ",Qs(7,12,n.vpvActive.timestamp,"dd.MM.yyyy"),""),zi(4),xo("V.: ",Qs(10,15,n.vpvActive.timestamp,"dd.MM."),""),zi(4),Xa("ngIf",n.statusDirection>=0),zi(1),Xa("ngIf",null!=n.statusDirection),zi(1),Xa("ngIf",n.statusDirection<=0)}}function aU(e,t){if(1&e){var n=so();to(0,"button",48),uo("click",(function(){return mn(n),fo(3).switchView("KeyMetrics")})),So(1),qs(2,"translate"),no()}2&e&&(zi(1),To(zs(2,1,"vpKeyMetric.btn.vpKeyMetric")))}function oU(e,t){if(1&e){var n=so();to(0,"button",48),uo("click",(function(){return mn(n),fo(3).switchView("Capacity")})),So(1),qs(2,"translate"),no()}2&e&&(zi(1),To(zs(2,1,"vpKeyMetric.btn.vpCapacity")))}function sU(e,t){if(1&e){var n=so();to(0,"a",22),uo("click",(function(){return mn(n),fo(3).switchView("Cost",!1)})),So(1),qs(2,"translate"),no()}2&e&&(zi(1),To(zs(2,1,"vpKeyMetric.lbl.metricCost")))}function lU(e,t){if(1&e){var n=so();to(0,"a",22),uo("click",(function(){return mn(n),fo(3).switchView("Deadline",!1)})),So(1),qs(2,"translate"),no()}2&e&&(zi(1),To(zs(2,1,"vpKeyMetric.lbl.metricDeadline")))}function cU(e,t){if(1&e){var n=so();to(0,"a",22),uo("click",(function(){return mn(n),fo(3).switchView("Delivery",!1)})),So(1),qs(2,"translate"),no()}2&e&&(zi(1),To(zs(2,1,"vpKeyMetric.lbl.metricDelivery")))}function uU(e,t){if(1&e){var n=so();to(0,"div",42),to(1,"div",43),Ya(2,aU,3,3,"button",44),Ya(3,oU,3,3,"button",44),to(4,"div",45),to(5,"button",46),So(6),qs(7,"translate"),io(8,"span",47),no(),to(9,"div",19),Ya(10,sU,3,3,"a",21),Ya(11,lU,3,3,"a",21),Ya(12,cU,3,3,"a",21),to(13,"a",22),uo("click",(function(){return mn(n),fo(2).switchView("All")})),So(14),qs(15,"translate"),no(),no(),no(),no(),no()}if(2&e){var i=fo(2);zi(2),Xa("ngIf",i.hasVPPerm(i.permVP.View)),zi(1),Xa("ngIf",i.hasVPPerm(i.permVP.Modify+i.permVP.ViewAudit)&&i.hasOrga),zi(3),xo(" ",zs(7,7,"vpKeyMetric.btn.vpView")," "),zi(4),Xa("ngIf",i.hasKM(i.vpvActive.keyMetrics,"Cost")&&i.hasOrga),zi(1),Xa("ngIf",i.hasKM(i.vpvActive.keyMetrics,"Deadline")),zi(1),Xa("ngIf",i.hasKM(i.vpvActive.keyMetrics,"Delivery")),zi(2),To(zs(15,9,"vpKeyMetric.btn.vpViewAll"))}}function dU(e,t){if(1&e){var n=so();to(0,"div"),to(1,"app-comp-viewkeymetrics",49),uo("switchViewChild",(function(e){return mn(n),fo(2).switchViewParent(e)})),no(),no()}if(2&e){var i=fo(2);zi(1),Xa("visboprojectversions",i.visboprojectversions)("vpvid",i.vpvActive._id)("combinedPerm",i.combinedPerm)}}function hU(e,t){if(1&e&&(to(0,"div"),io(1,"app-comp-viewcapacity",50),no()),2&e){var n=fo(2);zi(1),Xa("vpActive",n.vpActive)("vpvActive",n.vpvActive)("combinedPerm",n.combinedPerm)}}function vU(e,t){if(1&e&&(to(0,"div"),io(1,"app-comp-viewcost",51),no()),2&e){var n=fo(2);zi(1),Xa("vpvActive",n.vpvActive)("combinedPerm",n.combinedPerm)}}function fU(e,t){if(1&e&&(to(0,"div"),io(1,"app-comp-viewdeadline",51),no()),2&e){var n=fo(2);zi(1),Xa("vpvActive",n.vpvActive)("combinedPerm",n.combinedPerm)}}function pU(e,t){if(1&e&&(to(0,"div"),io(1,"app-comp-viewdelivery",51),no()),2&e){var n=fo(2);zi(1),Xa("vpvActive",n.vpvActive)("combinedPerm",n.combinedPerm)}}function gU(e,t){if(1&e&&(to(0,"div",53),to(1,"div",54),to(2,"h5",55),to(3,"button",56),So(4),qs(5,"translate"),no(),no(),no(),to(6,"div",57),to(7,"div",58),io(8,"app-comp-viewcost",51),no(),no(),no()),2&e){var n=fo(3);zi(4),xo(" ",zs(5,3,"vpKeyMetric.lbl.metricCost")," "),zi(4),Xa("vpvActive",n.vpvActive)("combinedPerm",n.combinedPerm)}}function mU(e,t){if(1&e&&(to(0,"div",53),to(1,"div",54),to(2,"h5",55),to(3,"button",59),So(4),qs(5,"translate"),no(),no(),no(),to(6,"div",60),to(7,"div",58),io(8,"app-comp-viewdeadline",51),no(),no(),no()),2&e){var n=fo(3);zi(4),xo(" ",zs(5,3,"vpKeyMetric.lbl.metricDeadline")," "),zi(4),Xa("vpvActive",n.vpvActive)("combinedPerm",n.combinedPerm)}}function bU(e,t){if(1&e&&(to(0,"div",53),to(1,"div",61),to(2,"h5",55),to(3,"button",62),So(4),qs(5,"translate"),no(),no(),no(),to(6,"div",63),to(7,"div",58),io(8,"app-comp-viewdelivery",51),no(),no(),no()),2&e){var n=fo(3);zi(4),xo(" ",zs(5,3,"vpKeyMetric.lbl.metricDelivery")," "),zi(4),Xa("vpvActive",n.vpvActive)("combinedPerm",n.combinedPerm)}}function yU(e,t){if(1&e&&(to(0,"div"),Ya(1,gU,9,5,"div",52),Ya(2,mU,9,5,"div",52),Ya(3,bU,9,5,"div",52),no()),2&e){var n=fo(2);zi(1),Xa("ngIf",n.hasVPPerm(n.permVP.ViewAudit)&&n.hasKM(n.vpvActive.keyMetrics,"Cost")&&n.hasOrga),zi(1),Xa("ngIf",n.hasKM(n.vpvActive.keyMetrics,"Deadline")),zi(1),Xa("ngIf",n.hasKM(n.vpvActive.keyMetrics,"Delivery"))}}function kU(e,t){if(1&e&&(to(0,"div",40),Ya(1,uU,16,11,"div",41),io(2,"hr"),Ya(3,dU,2,3,"div",10),Ya(4,hU,2,3,"div",10),Ya(5,vU,2,2,"div",10),Ya(6,fU,2,2,"div",10),Ya(7,pU,2,2,"div",10),Ya(8,yU,4,3,"div",10),no()),2&e){var n=fo();zi(1),Xa("ngIf",!n.getPreView()),zi(2),Xa("ngIf","KeyMetrics"==n.currentView||n.currentViewKM),zi(1),Xa("ngIf","Capacity"==n.currentView),zi(1),Xa("ngIf","Cost"==n.currentView),zi(1),Xa("ngIf","Deadline"==n.currentView),zi(1),Xa("ngIf","Delivery"==n.currentView),zi(1),Xa("ngIf","All"==n.currentView)}}var CU=function(e,t,n){return{"fa-check-circle text-success":e,"fa-exclamation-triangle text-warning":t,"fa-exclamation-circle text-danger":n}};function VU(e,t){if(1&e&&io(0,"i",64),2&e){var n=t.level;Xa("ngClass",js(1,CU,1==n,2==n,3==n))}}var wU=function(e,t,n,i){return{"text-secondary":e,"text-success":t,"text-warning":n,"text-danger":i}};function AU(e,t){if(1&e&&io(0,"i",65),2&e){var n=t.level;Xa("ngClass",Ns(1,wU,0==n,1==n,2==n,3==n))}}var PU=function(e,t){return{"font-weight-bold":e,"font-weight-normal":t}};function DU(e,t){if(1&e&&(to(0,"span",66),So(1),no()),2&e){var n=t.selected,i=t.text;Xa("ngClass",Rs(2,PU,1==n,0==n)),zi(1),To(i)}}function MU(e,t){if(1&e&&(to(0,"tr"),to(1,"td"),So(2),qs(3,"translate"),no(),to(4,"td"),So(5),qs(6,"date"),no(),io(7,"td",82),no()),2&e){var n=fo(3);zi(2),To(zs(3,2,"vpKeyMetric.lbl.startDate")),zi(3),To(Qs(6,4,n.vpvActive.startDate,"dd.MM.yyyy"))}}function IU(e,t){1&e&&io(0,"span",87)}function SU(e,t){1&e&&io(0,"span",88)}function TU(e,t){if(1&e&&(to(0,"span",89),So(1),qs(2,"number"),qs(3,"translate"),no()),2&e){var n=fo(4);zi(1),_o(" ",Qs(2,2,n.delayEndDate,"1.1-1")," ",zs(3,5,"vpKeyMetric.lbl.weeksDelay"),"")}}function xU(e,t){if(1&e&&(to(0,"span",90),So(1),qs(2,"number"),qs(3,"translate"),no()),2&e){var n=fo(4);zi(1),_o(" ",Qs(2,2,-n.delayEndDate,"1.1-1")," ",zs(3,5,"vpKeyMetric.lbl.weeksAhead"),"")}}function _U(e,t){1&e&&(to(0,"span"),So(1),qs(2,"translate"),no()),2&e&&(zi(1),xo(" ",zs(2,1,"vpKeyMetric.lbl.inTime"),""))}function UU(e,t){if(1&e&&(to(0,"tr"),to(1,"td"),So(2),qs(3,"translate"),no(),to(4,"td"),Ya(5,IU,1,0,"span",83),Ya(6,SU,1,0,"span",84),to(7,"span"),So(8),qs(9,"date"),no(),no(),to(10,"td",82),Ya(11,TU,4,7,"span",85),Ya(12,xU,4,7,"span",86),Ya(13,_U,3,3,"span",10),no(),no()),2&e){var n=fo(3);zi(2),To(zs(3,7,"vpKeyMetric.lbl.endDate")),zi(3),Xa("ngIf",n.delayEndDate>0),zi(1),Xa("ngIf",n.delayEndDate<=0),zi(2),xo(" ",Qs(9,9,n.vpvActive.keyMetrics.endDateCurrent,"dd.MM.yyyy"),""),zi(3),Xa("ngIf",n.delayEndDate>0),zi(1),Xa("ngIf",n.delayEndDate<0),zi(1),Xa("ngIf",0==n.delayEndDate)}}function OU(e,t){if(1&e&&(to(0,"tr"),to(1,"td"),So(2),qs(3,"translate"),no(),to(4,"td"),to(5,"span"),So(6),qs(7,"date"),no(),no(),io(8,"td",82),no()),2&e){var n=fo(3);zi(2),To(zs(3,2,"vpKeyMetric.lbl.endDate")),zi(4),xo(" ",Qs(7,4,n.vpvActive.endDate,"dd.MM.yyyy"),"")}}function EU(e,t){if(1&e&&(to(0,"tr"),to(1,"td",80),qs(2,"translate"),So(3),qs(4,"translate"),no(),to(5,"td"),So(6),qs(7,"number"),no(),io(8,"td"),no()),2&e){var n=fo(3);zi(1),po("title",zs(2,3,"keyMetrics.longRAC")),zi(2),To(zs(4,5,"keyMetrics.shortRAC")),zi(3),xo(" ",Qs(7,7,n.vpvActive.Erloes,"1.0-0")," T\u20ac ")}}function LU(e,t){if(1&e&&(to(0,"tr"),to(1,"td"),So(2),qs(3,"translate"),no(),to(4,"td",80),So(5),no(),io(6,"td"),no()),2&e){var n=fo(3);zi(2),To(zs(3,3,"vpKeyMetric.lbl.status")),zi(2),po("title",n.vpvActive.status),zi(1),xo(" ",n.getShortText(n.vpvActive.status,20)," ")}}function GU(e,t){1&e&&oo(0)}function RU(e,t){if(1&e&&(to(0,"tr"),to(1,"td"),So(2),qs(3,"translate"),no(),to(4,"td",80),So(5),no(),io(6,"td"),no()),2&e){var n=fo(3);zi(2),To(zs(3,3,"vpKeyMetric.lbl.leadPerson")),zi(2),po("title",n.vpvActive.leadPerson),zi(1),xo(" ",n.getShortText(n.vpvActive.leadPerson,20)," ")}}function jU(e,t){if(1&e&&(to(0,"tr"),to(1,"td"),So(2),qs(3,"translate"),no(),io(4,"td"),to(5,"td",80),So(6),no(),no()),2&e){var n=fo(3);zi(2),To(zs(3,3,"vpKeyMetric.lbl.description")),zi(3),po("title",n.vpvActive.description),zi(1),xo(" ",n.vpvActive.description," ")}}function NU(e,t){if(1&e&&(to(0,"tr"),to(1,"td"),So(2),qs(3,"translate"),no(),to(4,"td",80),So(5),no(),io(6,"td"),no()),2&e){var n=fo(3);zi(2),To(zs(3,3,"vpKeyMetric.lbl.template")),zi(2),po("title",n.vpvActive.VorlagenName),zi(1),xo(" ",n.getShortText(n.vpvActive.VorlagenName,20)," ")}}function FU(e,t){if(1&e&&(to(0,"tr"),to(1,"td"),So(2),qs(3,"translate"),no(),to(4,"td",80),So(5),no(),io(6,"td"),no()),2&e){var n=fo(3);zi(2),To(zs(3,3,"vpKeyMetric.lbl.bu")),zi(2),po("title",n.vpvActive.businessUnit),zi(1),xo(" ",n.getShortText(n.vpvActive.businessUnit,20)," ")}}function BU(e,t){if(1&e&&(to(0,"table",79),to(1,"thead"),to(2,"tr"),to(3,"th"),So(4),qs(5,"translate"),no(),to(6,"th"),So(7),qs(8,"translate"),no(),to(9,"th"),So(10),qs(11,"translate"),no(),no(),no(),to(12,"tbody"),Ya(13,MU,8,7,"tr",10),Ya(14,UU,14,12,"tr",10),Ya(15,OU,9,7,"tr",10),Ya(16,EU,9,10,"tr",10),Ya(17,LU,7,5,"tr",10),to(18,"tr"),to(19,"td"),So(20),qs(21,"translate"),no(),to(22,"td",80),Ya(23,GU,1,0,"ng-container",24),no(),to(24,"td",81),So(25),no(),no(),Ya(26,RU,7,5,"tr",10),Ya(27,jU,7,5,"tr",10),Ya(28,NU,7,5,"tr",10),Ya(29,FU,7,5,"tr",10),no(),no()),2&e){var n=fo(2),i=$a(8);zi(4),To(zs(5,18,"vpKeyMetric.lbl.name")),zi(3),To(zs(8,20,"vpKeyMetric.lbl.value")),zi(3),To(zs(11,22,"vpKeyMetric.lbl.info")),zi(3),Xa("ngIf",n.vpvActive.startDate),zi(1),Xa("ngIf",n.vpvActive.keyMetrics&&n.vpvActive.keyMetrics.endDateCurrent),zi(1),Xa("ngIf",!(n.vpvActive.keyMetrics&&n.vpvActive.keyMetrics.endDateCurrent)&&n.vpvActive.endDate),zi(1),Xa("ngIf",n.vpvActive.Erloes),zi(1),Xa("ngIf",n.vpvActive.status),zi(3),To(zs(21,24,"keyMetrics.lbl.trafficLight")),zi(2),po("title",n.vpvActive.ampelErlaeuterung),zi(1),Xa("ngTemplateOutlet",i)("ngTemplateOutletContext",Gs(26,J_,n.vpvActive.ampelStatus)),zi(1),po("title",n.vpvActive.ampelErlaeuterung),zi(1),xo(" ",n.vpvActive.ampelErlaeuterung," "),zi(1),Xa("ngIf",n.vpvActive.leadPerson),zi(1),Xa("ngIf",n.vpvActive.description),zi(1),Xa("ngIf",n.vpvActive.VorlagenName),zi(1),Xa("ngIf",n.vpvActive.businessUnit)}}function HU(e,t){if(1&e&&(to(0,"div",67),to(1,"div",68),to(2,"div",69),to(3,"div",70),to(4,"h5",71),So(5),qs(6,"translate"),qs(7,"date"),no(),to(8,"button",72),to(9,"span",73),So(10,"\xd7"),no(),no(),no(),to(11,"div",74),to(12,"form",75),Ya(13,BU,30,28,"table",76),to(14,"div",77),to(15,"button",78),So(16),qs(17,"translate"),no(),no(),no(),no(),no(),no(),no()),2&e){var n=fo();zi(5),_o("",zs(6,4,"vpKeyMetric.titleDetailVersion"),": ",Qs(7,6,n.vpvActive.timestamp,"dd.MM.yy HH:mm")," "),zi(8),Xa("ngIf",n.vpvActive),zi(3),To(zs(17,9,"vpKeyMetric.btn.back"))}}var KU,qU=((KU=function(){function e(t,n,i,r,a,o,s,l,c){p(this,e),this.visboprojectversionService=t,this.visboprojectService=n,this.visbosettingService=i,this.messageService=r,this.alertService=a,this.route=o,this.router=s,this.translate=l,this.titleService=c,this.dropDown=[],this.deleted=!1,this.currentView="KeyMetrics",this.currentViewKM=!1,this.refDate=new Date,this.refDateInterval="month",this.allViews=["KeyMetrics","Capacity","Cost","Deadline","Delivery","All"],this.hasOrga=!1,this.sortAscending=!1,this.sortColumn=1,this.permVC=uy,this.permVP=dy}return m(e,[{key:"ngOnInit",value:function(){this.currentLang=this.translate.currentLang,this.variantID=this.route.snapshot.queryParams.variantID,this.variantName=this.route.snapshot.queryParams.variantName,this.defaultVariant=this.translate.instant("vpKeyMetric.lbl.defaultVariant");var e=this.route.snapshot.queryParams.view;if(!e)switch(this.route.snapshot.url[0].toString()){case"vpViewCost":e="Cost";break;case"vpViewDeadlines":e="Deadline";break;case"vpViewDeliveries":e="Delivery";break;case"vpView":e="All"}this.allViews.find((function(t){return t===e}))&&(this.currentView=e),this.route.snapshot.queryParams.refDate&&(this.refDate=new Date(this.route.snapshot.queryParams.refDate)),this.getVisboProjectVersions()}},{key:"ngOnChanges",value:function(e){this.log("VP KeyMetrics Changes "+JSON.stringify(e)),this.findVPV(new Date(this.refDate))}},{key:"switchViewParent",value:function(e){e&&(e.refDate&&this.findVPV(new Date(e.refDate)),e.view&&(this.currentView=e.view),e.viewKM&&(this.currentView=e.viewKM,this.currentViewKM=!0))}},{key:"hasVCPerm",value:function(e){return void 0!==this.combinedPerm&&(this.combinedPerm.vc&e)>0}},{key:"hasVPPerm",value:function(e){return void 0!==this.combinedPerm&&(this.combinedPerm.vp&e)>0}},{key:"dropDownInit",value:function(){var e=this;if(this.variantID){var t=this.vpActive.variant.findIndex((function(t){return t._id.toString()===e.variantID}));t>=0?this.variantName=this.vpActive.variant[t].variantName:this.variantID=void 0}else if(this.variantName){var n=this.vpActive.variant.findIndex((function(t){return t.variantName===e.variantName}));n>=0?(this.variantName=this.vpActive.variant[n].variantName,this.variantID=this.vpActive.variant[n]._id):this.variantName=void 0}this.log("Init Drop Down List ".concat(this.vpActive.variant.length+1," Variant ").concat(this.variantID,"/").concat(this.variantName)),this.dropDown=[],this.dropDownIndex=void 0;for(var i=this.vpActive.variant.length,r=0;r<i;r++)"pfv"!==this.vpActive.variant[r].variantName&&this.vpActive.variant[r].vpvCount>0&&this.dropDown.push(this.vpActive.variant[r].variantName);this.dropDown.length>0&&(this.dropDown.splice(0,0,this.defaultVariant),this.dropDownIndex=0),this.variantName&&(this.dropDownIndex=this.dropDown.findIndex((function(t){return t===e.variantName})))}},{key:"findVPV",value:function(e){if(this.visboprojectversions.length>0){var t=0;if(e){for(;t<this.visboprojectversions.length&&!(e.toISOString()>=new Date(this.visboprojectversions[t].timestamp).toISOString());t++);t>=this.visboprojectversions.length&&(t=this.visboprojectversions.length-1)}this.vpvActive=this.visboprojectversions[t],this.evaluateDirection(t)}}},{key:"evaluateDirection",value:function(e){this.statusDirection=1===this.visboprojectversions.length?void 0:e<=0?1:e>=this.visboprojectversions.length-1?-1:0}},{key:"switchView",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];(e=this.allViews.find((function(t){return t===e})))||(e=this.allViews[0]),this.currentView=e,this.currentViewKM=t,this.updateUrlParam("view",e)}},{key:"switchVariant",value:function(e){var t=this.dropDown.findIndex((function(t){return t===e}));if(this.dropDownIndex=t<=0?void 0:t,this.log("switch Variant ".concat(e," index ").concat(this.dropDownIndex)),this.dropDownIndex>=0){var n=this.vpActive.variant.find((function(t){return t.variantName==e}));n?(this.variantName=n.variantName,this.variantID=n._id):(this.variantName=void 0,this.variantID=void 0),this.updateUrlParam("variantID",n&&n._id)}else this.variantName=void 0,this.variantID=void 0,this.updateUrlParam("variantID",null);this.getVisboProjectVersions()}},{key:"isActiveVariant",value:function(e){var t=!1;return null==this.variantName&&e==this.defaultVariant&&(t=!0),this.variantName===e&&(t=!0),t}},{key:"updateUrlParam",value:function(e,t){var n=this.route.snapshot.url.join("/");void 0===t&&(t=null);var i=new ck;"variantID"==e?(i.variantID=t,i.variantName=null):"refDate"==e?i.refDate=t:"view"==e&&(i.view=t),this.router.navigate([n],{queryParams:i,replaceUrl:!0,queryParamsHandling:"merge"})}},{key:"hasKM",value:function(e,t){var n=!1;return!e||("Cost"==t?n=e.costCurrentTotal>0||e.costBaseLastTotal>0:"Deadline"==t?n=e.timeCompletionCurrentTotal>1||e.timeCompletionBaseLastTotal>1:"EndDate"==t?n=null!=e.endDateCurrent||null!=e.endDateBaseLast:"DeadlineDelay"===t?(e.timeCompletionCurrentTotal>1||e.timeCompletionBaseLastTotal>1)&&(n=void 0!==e.timeDelayFinished&&void 0!==e.timeDelayUnFinished):"Delivery"==t?n=e.deliverableCompletionCurrentTotal>0||e.deliverableCompletionBaseLastTotal>0:"DeliveryDelay"===t&&(n=void 0!==e.timeDelayFinished&&void 0!==e.timeDelayUnFinished),n)}},{key:"getVisboProjectVersions",value:function(){var e=this,t=this.route.snapshot.paramMap.get("id");this.vpSelected=t,this.log("get VP name if ID is used "+t),t?this.visboprojectService.getVisboProject(t).subscribe((function(n){e.vpActive&&e.vpActive._id===n._id||(e.vpActive=n,e.combinedPerm=n.perm,e.titleService.setTitle(e.translate.instant("vpKeyMetric.titleName",{name:n.name})),e.dropDownInit(),e.getVisboCenterOrga());var i=e.dropDownIndex>0?e.dropDown[e.dropDownIndex]:"",r="";if(i){var a=e.vpActive.variant.find((function(e){return e.variantName===i}));r=a?a._id.toString():""}e.log("get VP name if ID is used ".concat(e.vpActive.name," Variant: ").concat(i,"/").concat(r," Perm ").concat(JSON.stringify(e.combinedPerm))),e.visboprojectversionService.getVisboProjectVersions(t,e.deleted,r,!0).subscribe((function(t){e.visboprojectversions=t,e.visboprojectversions.sort((function(e,t){return zv(t.timestamp,e.timestamp)})),e.log("get VPV Key metrics: Get ".concat(t.length," Project Versions")),e.findVPV(e.refDate)}),(function(t){if(e.log("get VPVs failed: error: ".concat(t.status," message: ").concat(t.error.message)),403===t.status){var n=e.translate.instant("vpKeyMetric.msg.errorPermVersion",{name:e.vpActive.name});e.alertService.error(n)}else e.alertService.error(Zv(t))}))}),(function(t){if(e.log("get VPV VP failed: error: ".concat(t.status," message: ").concat(t.error.message)),403===t.status){var n=e.translate.instant("vpKeyMetric.msg.errorPerm");e.alertService.error(n)}else e.alertService.error(Zv(t))})):this.gotoRoot()}},{key:"sameDay",value:function(e,t){var n=new Date(e),i=new Date(t);return n.setHours(0,0,0,0),i.setHours(0,0,0,0),n.getTime()===i.getTime()}},{key:"getRefDateVersions",value:function(e){this.log("get getRefDateVersions current ".concat(this.refDate," ").concat(e," ").concat(this.refDateInterval));var t,n=new Date(this.refDate),i=0,r=0;switch(this.refDateInterval){case"day":n.setHours(0,0,0,0),(e>0||n.getTime()===this.refDate.getTime())&&n.setDate(n.getDate()+e);break;case"week":n.setHours(0,0,0,0),n.setDate(n.getDate()+7*e);break;case"month":n.setHours(0,0,0,0),n.setDate(1),(e>0||n.getTime()===this.refDate.getTime())&&n.setMonth(n.getMonth()+e);break;case"quarter":r=Math.trunc(n.getMonth()/3),e>0&&(r+=e),n.setMonth(3*r),n.setDate(1),n.setHours(0,0,0,0),n.getTime()===this.refDate.getTime()&&n.setMonth(n.getMonth()+3*e)}if(this.log("get getRefDateVersions new ".concat(n.toISOString()," ").concat(this.refDate.toISOString())),this.refDate=n,e>0){var a=new Date(this.visboprojectversions[0].timestamp);n.getTime()>=a.getTime()&&(t=0,this.refDate=new Date)}else{var o=new Date(this.visboprojectversions[this.visboprojectversions.length-1].timestamp);n.getTime()<=o.getTime()&&(t=this.visboprojectversions.length-1,this.refDate.setTime(o.getTime()))}if(void 0===t){for(this.log("get getRefDateVersions normalised "+new Date(n).toISOString()),i=0;i<this.visboprojectversions.length&&!(new Date(this.visboprojectversions[i].timestamp).getTime()<=n.getTime());i++);t=i}this.log("get getRefDateVersions vpv timestamp "+this.visboprojectversions[t].timestamp),this.setVpvActive(this.visboprojectversions[t]),this.evaluateDirection(t)}},{key:"getNextVersion",value:function(e){this.getRefDateVersions(e),Jv(this.refDate)?this.updateUrlParam("refDate",void 0):this.updateUrlParam("refDate",this.refDate.toISOString())}},{key:"gotoRoot",value:function(){this.log("goto Root as no id is specified"),this.router.navigate(["/"],{})}},{key:"getVisboCenterOrga",value:function(){var e=this;this.vpActive&&this.combinedPerm&&(this.combinedPerm.vc&this.permVC.View)>0&&(this.log("get VC Orga "+this.vpActive.vcid),this.visbosettingService.getVCOrganisations(this.vpActive.vcid,!1,void 0,!0).subscribe((function(t){e.hasOrga=t.length>0}),(function(t){if(403===t.status){var n=e.translate.instant("vpKeyMetric.msg.errorPerm");e.alertService.error(n)}else e.alertService.error(Zv(t))})))}},{key:"setVpvActive",value:function(e){var t=e.keyMetrics,n=0;t&&t.endDateCurrent&&t.endDateBaseLast&&(n=new Date(t.endDateCurrent).getTime()-new Date(t.endDateBaseLast).getTime()),this.delayEndDate=Math.round(n/1e3/60/60/24)/7,this.vpvActive=e,this.log("VPV Active: vpv: ".concat(e._id," ").concat(e.timestamp))}},{key:"gotoVPDetail",value:function(e){this.router.navigate(["vpDetail/".concat(e._id)])}},{key:"gotoVC",value:function(e){this.router.navigate(["vp/".concat(e.vcid)])}},{key:"helperDateDiff",value:function(e,t,n){var i=new Date(e),r=new Date(t),a=i.getTime()-r.getTime();return"w"===n?a=a/1e3/60/60/24/7:"d"===n?a=a/1e3/60/60/24:a/=1e3,a}},{key:"getShortText",value:function(e,t){return $v(e,t)}},{key:"sortVPVTable",value:function(e){this.visboprojectversions&&(void 0!==e?(e!==this.sortColumn&&(this.sortColumn=e,this.sortAscending=void 0),this.sortAscending=void 0===this.sortAscending?5===e:!this.sortAscending):(this.sortColumn=1,this.sortAscending=!1),1===this.sortColumn?this.visboprojectversions.sort((function(e,t){return zv(e.timestamp,t.timestamp)})):2===this.sortColumn?this.visboprojectversions.sort((function(e,t){return zv(e.endDate,t.endDate)})):3===this.sortColumn?this.visboprojectversions.sort((function(e,t){return e.ampelStatus-t.ampelStatus})):4===this.sortColumn?this.visboprojectversions.sort((function(e,t){return e.Erloes-t.Erloes})):5===this.sortColumn&&this.visboprojectversions.sort((function(e,t){return qv(e.variantName.toLowerCase(),t.variantName.toLowerCase())})),this.sortAscending||this.visboprojectversions.reverse())}},{key:"getPreView",value:function(){return Xv()}},{key:"log",value:function(e){this.messageService.add("VisboProjectKeyMetrics: "+e)}}]),e}()).\u0275fac=function(e){return new(e||KU)(Za(Ew),Za(dk),Za(Sk),Za(tf),Za(Zm),Za(sg),Za(Am),Za(Rb),Za(ud))},KU.\u0275cmp=wt({type:KU,selectors:[["app-visboproject-keymetrics"]],features:[Qt],decls:12,vars:4,consts:[[1,"well"],["class","row",4,"ngIf"],["class","d-print-none",4,"ngIf"],["class","container-fluid",4,"ngIf"],["indicator",""],["trafficLight",""],["highlight",""],["class","modal fade","id","VpvDetails","tabindex","-1","role","dialog","aria-labelledby","VpvDetailsTitle","aria-hidden","true",4,"ngIf"],[1,"row"],[1,"col"],[4,"ngIf"],[3,"click",4,"ngIf"],[3,"click"],["class","ml-1",4,"ngIf"],["class","dropdown","class","ml-2",4,"ngIf"],["data-toggle","modal","data-target","#VpvDetails","class","mx-2",3,"title",4,"ngIf"],[1,"ml-1"],[1,"ml-2"],["data-toggle","dropdown",1,"dropdown-toggle"],[1,"dropdown-menu"],[4,"ngFor","ngForOf"],["class","dropdown-item",3,"click",4,"ngIf"],[1,"dropdown-item",3,"click"],["data-toggle","modal","data-target","#VpvDetails",1,"mx-2",3,"title"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"d-print-none"],[1,"col-6","text-dark"],[1,"d-none","d-lg-block",3,"title"],[1,"d-block","d-lg-none"],[1,"col-6"],["style","font-size: 2.2em","class","mx-1 fas fa-caret-square-left",3,"title","click",4,"ngIf"],["class","col-4 form-control d-none d-md-block","name","refDateInterval",3,"ngModel","ngModelChange",4,"ngIf"],["style","font-size: 2.2em","class","mx-1 fas fa-caret-square-right",3,"title","click",4,"ngIf"],[1,"mx-1","fas","fa-caret-square-left",2,"font-size","2.2em",3,"title","click"],["name","refDateInterval",1,"col-4","form-control","d-none","d-md-block",3,"ngModel","ngModelChange"],["value","day"],["value","week"],["value","month"],["value","quarter"],[1,"mx-1","fas","fa-caret-square-right",2,"font-size","2.2em",3,"title","click"],[1,"container-fluid"],["class","row d-print-none",4,"ngIf"],[1,"row","d-print-none"],[1,"col-9","btn-toolbar",2,"padding","unset"],["type","button","class","btn btn-md btn-light mr-1",3,"click",4,"ngIf"],[1,"btn-group"],["data-toggle","dropdown",1,"btn","btn-md","btn-light","dropdown-toggle"],[1,"caret"],["type","button",1,"btn","btn-md","btn-light","mr-1",3,"click"],[3,"visboprojectversions","vpvid","combinedPerm","switchViewChild"],[3,"vpActive","vpvActive","combinedPerm"],[3,"vpvActive","combinedPerm"],["class","card",4,"ngIf"],[1,"card"],["id","headingOne",1,"card-header"],[1,"mb-0"],["type","button","data-toggle","collapse","data-target","#collapseThree","aria-expanded","true","aria-controls","collapseThree",1,"btn","btn-primary"],["id","collapseThree","aria-labelledby","headingThree",1,"collapse","show"],[1,"card-body"],["type","button","data-toggle","collapse","data-target","#collapseOne","aria-expanded","true","aria-controls","collapseOne",1,"btn","btn-primary"],["id","collapseOne","aria-labelledby","headingOne",1,"collapse","show"],["id","headingTwo",1,"card-header"],["type","button","data-toggle","collapse","data-target","#collapseTwo","aria-expanded","true","aria-controls","collapseTwo",1,"btn","btn-primary"],["id","collapseTwo","aria-labelledby","headingTwo",1,"collapse","show"],[1,"fa",3,"ngClass"],[1,"fas","fa-lightbulb",3,"ngClass"],[3,"ngClass"],["id","VpvDetails","tabindex","-1","role","dialog","aria-labelledby","VpvDetailsTitle","aria-hidden","true",1,"modal","fade"],["role","document",1,"modal-dialog","modal-lg","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header"],["id","VpvDetailsTitle",1,"modal-title"],["type","button","data-dismiss","modal","aria-label","Close",1,"close"],["aria-hidden","true"],[1,"modal-body"],["name","VpvDetailsForm"],["class","table table-hover",4,"ngIf"],[1,"modal-footer","align-items-end"],["data-dismiss","modal",1,"btn","btn-primary"],[1,"table","table-hover"],[3,"title"],[1,"d-none","d-md-table-cell",3,"title"],[1,"d-none","d-md-table-cell"],["class","fas fa-exclamation-circle","style","color:red",4,"ngIf"],["class","fas fa-check-circle","style","color:green",4,"ngIf"],["class","text-danger",4,"ngIf"],["class","text-success",4,"ngIf"],[1,"fas","fa-exclamation-circle",2,"color","red"],[1,"fas","fa-check-circle",2,"color","green"],[1,"text-danger"],[1,"text-success"]],template:function(e,t){1&e&&(io(0,"app-usernavbar"),to(1,"div",0),Ya(2,eU,8,6,"div",1),Ya(3,rU,16,18,"div",2),Ya(4,kU,9,7,"div",3),no(),Ya(5,VU,1,5,"ng-template",null,4,$s),Ya(7,AU,1,6,"ng-template",null,5,$s),Ya(9,DU,2,5,"ng-template",null,6,$s),Ya(11,HU,18,11,"div",7)),2&e&&(zi(2),Xa("ngIf",t.vpActive),zi(1),Xa("ngIf",t.vpvActive&&!t.getPreView()),zi(1),Xa("ngIf",t.vpvActive),zi(7),Xa("ngIf",t.vpvActive))},directives:[pk,su,au,vu,rh,Td,Nh,ah,dh,Ax,jA,Lx,b_,H_,iu,Fh,xd,Gh],pipes:[jb,Cu,Vu],encapsulation:2}),KU);function zU(e,t){if(1&e){var n=so();to(0,"a",1),uo("click",(function(){mn(n);var e=fo(2);return e.gotoVCDetail(e.visboproject)})),So(1),no()}if(2&e){var i=fo(2);zi(1),To(i.visboproject.vc.name)}}function QU(e,t){if(1&e&&(to(0,"span"),So(1),no()),2&e){var n=fo(2);zi(1),To(n.visboproject.vc.name)}}function WU(e,t){if(1&e&&(to(0,"div",3),to(1,"label",44),So(2),qs(3,"translate"),no(),to(4,"label",5),So(5),no(),no()),2&e){var n=fo(2);zi(2),xo("",zs(3,2,"vpRestrict.lbl.description"),":"),zi(3),xo("",n.visboproject.description," ")}}function JU(e,t){1&e&&io(0,"i",59)}function YU(e,t){if(1&e){var n=so();to(0,"tr"),to(1,"td",55),So(2),no(),to(3,"td",52),So(4),no(),to(5,"td",52),Ya(6,JU,1,0,"i",56),no(),to(7,"td",57),So(8),no(),to(9,"td",57),So(10),qs(11,"date"),no(),to(12,"td"),to(13,"button",58),uo("click",(function(){mn(n);var e=t.index;return fo(4).helperRemoveRestriction(e)})),qs(14,"translate"),So(15,"\xd7"),no(),no(),no()}if(2&e){var i=t.$implicit,r=t.index,a=fo(4);zi(1),po("title",a.getRestrictPath(r)),zi(1),To(a.getRestrictPath(r,30)),zi(2),To(a.getGroupName(i.groupid)),zi(2),Xa("ngIf",i.inclChildren),zi(2),To(i.user.email),zi(2),To(Qs(11,7,i.createdAt,"dd.MM HH:mm")),zi(3),po("title",zs(14,10,"vpRestrict.lbl.rmRestrict"))}}function $U(e,t){if(1&e){var n=so();to(0,"div"),to(1,"div",46),to(2,"div",47),to(3,"h5",48),So(4),qs(5,"translate"),no(),no(),no(),to(6,"div",49),to(7,"table",50),to(8,"thead"),to(9,"tr"),to(10,"th",1),uo("click",(function(){return mn(n),fo(3).sortRestrictTable(1)})),So(11),qs(12,"translate"),no(),to(13,"th",51),uo("click",(function(){return mn(n),fo(3).sortRestrictTable(2)})),So(14),qs(15,"translate"),no(),to(16,"th",52),So(17),qs(18,"translate"),no(),to(19,"th",53),uo("click",(function(){return mn(n),fo(3).sortRestrictTable(4)})),So(20),qs(21,"translate"),no(),to(22,"th",53),uo("click",(function(){return mn(n),fo(3).sortRestrictTable(5)})),So(23),qs(24,"translate"),no(),to(25,"th"),So(26),qs(27,"translate"),no(),no(),no(),to(28,"tbody"),Ya(29,YU,16,12,"tr",54),no(),no(),no(),no()}if(2&e){var i=fo(3);zi(4),xo(" ",zs(5,8,"vpRestrict.titleProjectRestrict")," "),zi(7),To(zs(12,10,"vpRestrict.lbl.restrictpath")),zi(3),To(zs(15,12,"vpRestrict.lbl.restrictgroup")),zi(3),To(zs(18,14,"vpRestrict.lbl.inclChildren")),zi(3),To(zs(21,16,"vpRestrict.lbl.createdBy")),zi(3),To(zs(24,18,"vpRestrict.lbl.createdAt")),zi(3),To(zs(27,20,"vpRestrict.lbl.delete")),zi(3),Xa("ngForOf",i.visboproject.restrict)}}function ZU(e,t){if(1&e&&(to(0,"div",46),to(1,"label",60),So(2),no(),to(3,"button",61),So(4),qs(5,"translate"),no(),no()),2&e){var n=fo(3);zi(1),po("title",n.getRestrictPath(-1)),zi(1),To(n.getRestrictPath(-1,30)),zi(2),To(zs(5,3,"vpRestrict.btn.add"))}}function XU(e,t){if(1&e&&(to(0,"div"),Ya(1,$U,30,22,"div",0),Ya(2,ZU,6,5,"div",45),no()),2&e){var n=fo(2);zi(1),Xa("ngIf",n.visboproject.restrict.length>0&&n.hasVPPerm(n.permVP.Modify+n.permVP.ManagePerm)),zi(1),Xa("ngIf",n.newItemPath&&n.hasVPPerm(n.permVP.ManagePerm))}}function eO(e,t){if(1&e&&(to(0,"option",62),So(1),no()),2&e){var n=t.$implicit;po("value",n._id),zi(1),To(n.name)}}function tO(e,t){1&e&&(to(0,"div",63),So(1),qs(2,"translate"),no()),2&e&&(zi(1),To(zs(2,1,"vpRestrict.msg.groupRequired")))}function nO(e,t){1&e&&(to(0,"button",64),So(1),qs(2,"translate"),no()),2&e&&(zi(1),To(zs(2,1,"vpRestrict.btn.add")))}function iO(e,t){if(1&e){var n=so();to(0,"button",65),uo("click",(function(){return mn(n),fo(2).addRestriction()})),So(1),qs(2,"translate"),no()}2&e&&(zi(1),To(zs(2,1,"vpRestrict.btn.add")))}function rO(e,t){if(1&e&&(to(0,"div",20),to(1,"div"),to(2,"label",66),So(3),qs(4,"translate"),no(),no(),to(5,"form"),to(6,"div",23),to(7,"label",67),So(8),qs(9,"translate"),no(),to(10,"label",5),So(11),no(),no(),to(12,"div",23),to(13,"label",67),So(14),qs(15,"translate"),no(),to(16,"label",5),So(17),no(),no(),to(18,"div",23),to(19,"label",67),So(20),qs(21,"translate"),no(),to(22,"label",5),So(23),no(),no(),to(24,"div",23),to(25,"label",67),So(26),qs(27,"translate"),no(),to(28,"label",5),So(29),no(),no(),to(30,"div",23),to(31,"label",67),So(32),qs(33,"translate"),no(),to(34,"label",5),So(35),no(),no(),to(36,"div",23),to(37,"label",67),So(38),qs(39,"translate"),no(),to(40,"label",5),So(41),qs(42,"date"),no(),no(),no(),no()),2&e){var n=fo(2);zi(3),To(zs(4,13,"vpRestrict.msg.removeRestrictionConfirm")),zi(5),xo("",zs(9,15,"vpRestrict.lbl.vp"),":"),zi(3),xo("",n.visboproject.name," "),zi(3),xo("",zs(15,17,"vpRestrict.lbl.restrictpath"),":"),zi(3),To(n.getRestrictPath(n.restrictIndex)),zi(3),xo("",zs(21,19,"vpRestrict.lbl.group"),":"),zi(3),To(n.getGroupName(n.visboproject.restrict[n.restrictIndex].groupid)),zi(3),xo("",zs(27,21,"vpRestrict.lbl.inclChildrenDesc"),":"),zi(3),To(n.visboproject.restrict[n.restrictIndex].inclChildren),zi(3),xo("",zs(33,23,"vpRestrict.lbl.createdBy"),":"),zi(3),To(n.visboproject.restrict[n.restrictIndex].user.email),zi(3),xo("",zs(39,25,"vpRestrict.lbl.createdAt"),":"),zi(3),To(Qs(42,27,n.visboproject.restrict[n.restrictIndex].createdAt,"dd.MM HH:mm"))}}var aO=function(e){return{"has-error":e}};function oO(e,t){if(1&e){var n=so();to(0,"div"),to(1,"h3"),So(2),qs(3,"translate"),to(4,"a",1),uo("click",(function(){mn(n);var e=fo();return e.gotoVP(e.visboproject)})),So(5),qs(6,"uppercase"),no(),no(),to(7,"h5"),So(8),qs(9,"translate"),Ya(10,zU,2,1,"a",2),Ya(11,QU,2,1,"span",0),no(),to(12,"form"),to(13,"div",3),to(14,"label",4),So(15),qs(16,"translate"),no(),to(17,"label",5),So(18),no(),no(),Ya(19,WU,6,4,"div",6),to(20,"div",3),to(21,"label",7),So(22),qs(23,"translate"),no(),to(24,"label",8),So(25),no(),no(),to(26,"div",9),to(27,"label",10),So(28),qs(29,"translate"),no(),to(30,"label",11),So(31),qs(32,"date"),no(),to(33,"label",11),So(34),qs(35,"date"),no(),no(),no(),Ya(36,XU,3,2,"div",0),to(37,"div",12),to(38,"button",1),uo("click",(function(){return mn(n),fo().goBack()})),So(39),qs(40,"translate"),no(),no(),to(41,"div",13),to(42,"div",14),to(43,"div",15),to(44,"div",16),to(45,"h5",17),So(46),qs(47,"translate"),no(),to(48,"button",18),to(49,"span",19),So(50,"\xd7"),no(),no(),no(),to(51,"div",20),to(52,"form",21,22),to(54,"div",23),to(55,"label",24),So(56),qs(57,"translate"),no(),to(58,"label"),So(59),no(),no(),to(60,"div",25),to(61,"label",26),So(62),qs(63,"translate"),no(),to(64,"select",27,28),uo("ngModelChange",(function(e){return mn(n),fo().newItemGroup=e})),io(66,"option"),Ya(67,eO,2,2,"option",29),no(),Ya(68,tO,3,3,"div",30),no(),to(69,"div",31),to(70,"input",32,33),uo("ngModelChange",(function(e){return mn(n),fo().newItemInclChildren=e})),no(),to(72,"label",34),So(73),qs(74,"translate"),no(),no(),io(75,"br"),to(76,"div",35),to(77,"button",36),So(78),qs(79,"translate"),no(),Ya(80,nO,3,3,"button",37),Ya(81,iO,3,3,"button",38),no(),no(),no(),no(),no(),no(),to(82,"div",39),to(83,"div",14),to(84,"div",15),to(85,"div",16),to(86,"h5",40),So(87),qs(88,"translate"),no(),to(89,"button",18),to(90,"span",19),So(91,"\xd7"),no(),no(),no(),Ya(92,rO,43,30,"div",41),to(93,"div",35),to(94,"button",42),So(95),qs(96,"translate"),no(),to(97,"button",43),uo("click",(function(){mn(n);var e=fo();return e.removeRestriction(e.restrictIndex)})),So(98),qs(99,"translate"),no(),no(),no(),no(),no(),no()}if(2&e){var i=$a(53),r=$a(65),a=fo();zi(2),xo("",zs(3,32,"vpRestrict.title"),": "),zi(3),To(zs(6,34,a.visboproject.name)),zi(3),xo("",zs(9,36,"vpRestrict.titleVC"),": "),zi(2),Xa("ngIf",a.hasVCPerm(a.permVC.View)),zi(1),Xa("ngIf",!a.hasVCPerm(a.permVC.View)),zi(4),xo("",zs(16,38,"vpRestrict.lbl.name"),":"),zi(3),xo("",a.visboproject.name," "),zi(1),Xa("ngIf",a.visboproject.description),zi(3),xo("",zs(23,40,"vpRestrict.lbl.type"),":"),zi(3),xo("",a.getVPType(a.visboproject.vpType)," "),zi(3),xo("",zs(29,42,"vpRestrict.lbl.createdUpdated"),":"),zi(3),xo("",Qs(32,44,a.visboproject.createdAt,"dd.MM.yyyy HH:mm:ss")," "),zi(3),xo("",Qs(35,47,a.visboproject.updatedAt,"dd.MM.yyyy HH:mm:ss")," "),zi(2),Xa("ngIf",a.getVPPerm()!=a.permVP.View),zi(3),To(zs(40,50,"vpRestrict.btn.back")),zi(7),To(zs(47,52,"vpRestrict.titleAddRestriction")),zi(10),xo("",zs(57,54,"vpRestrict.lbl.restrictpath"),":"),zi(3),To(a.getRestrictPath(-1)),zi(1),Xa("ngClass",Gs(68,aO,i.submitted&&!r.valid)),zi(2),xo("",zs(63,56,"vpRestrict.lbl.group"),":"),zi(2),Xa("ngModel",a.newItemGroup),zi(3),Xa("ngForOf",a.vgGroups),zi(1),Xa("ngIf",i.submitted&&!r.valid),zi(2),Xa("ngModel",a.newItemInclChildren),zi(3),To(zs(74,58,"vpRestrict.lbl.inclChildrenDesc")),zi(5),To(zs(79,60,"vpRestrict.btn.cancel")),zi(2),Xa("ngIf",!r.valid),zi(1),Xa("ngIf",r.valid),zi(6),To(zs(88,62,"vpRestrict.titleRemoveRestriction")),zi(5),Xa("ngIf",a.restrictIndex>=0&&a.restrictIndex<a.visboproject.restrict.length),zi(3),To(zs(96,64,"vpRestrict.btn.back")),zi(3),To(zs(99,66,"vpRestrict.btn.delete"))}}var sO,lO,cO,uO=((lO=function(){function e(t,n,i,r,a,o,s){p(this,e),this.messageService=t,this.route=n,this.visboprojectService=i,this.location=r,this.router=a,this.alertService=o,this.translate=s,this.combinedPerm=void 0,this.combinedUserPerm=void 0,this.permVC=uy,this.permVP=dy,this.deleted=!1,this.sortRestrictColumn=1,this.sortRestrictAscending=!0}return m(e,[{key:"ngOnInit",value:function(){var e=this.route.snapshot.queryParams.id;if(e){var t=JSON.parse(localStorage.getItem("restrict"));t&&t.id===e&&(this.newItemPath=t.path)}this.log("VisboProject Restrict Active Path: "+this.newItemPath),this.getVisboProject(),this.getVisboProjectUsers()}},{key:"getVisboProject",value:function(){var e=this,t=this.route.snapshot.paramMap.get("id");this.log("VisboProject Restrict of: "+t),this.visboprojectService.getVisboProject(t,!1,this.deleted).subscribe((function(n){e.visboproject=n,e.combinedPerm=n.perm,e.log("Get VisboProject for VP ".concat(t," Perm ").concat(JSON.stringify(e.combinedPerm)," "))}),(function(t){if(e.log("get VPs failed: error: ".concat(t.status," message: ").concat(t.error.message)),403===t.status){var n=e.translate.instant("vpRestrict.msg.errorPerm");e.alertService.error(n)}else e.alertService.error(Zv(t))}))}},{key:"hasVCPerm",value:function(e){return void 0!==this.combinedPerm&&(this.combinedPerm.vc&e)>0}},{key:"hasVPPerm",value:function(e){return void 0!==this.combinedPerm&&(this.combinedPerm.vp&e)>0}},{key:"hasUserVPPerm",value:function(e){return void 0!==this.combinedUserPerm&&(this.combinedUserPerm.vp&e)>0}},{key:"getVPPerm",value:function(){return void 0===this.combinedPerm?0:this.combinedPerm.vp}},{key:"getVPType",value:function(e){return this.translate.instant("vp.type.vpType"+e)}},{key:"getRestrictPath",value:function(e,t){var n=e>=0?this.visboproject.restrict[e].elementPath:this.newItemPath||[""],i="";return i=n.length<=1?this.visboproject.name:n.slice(1).join(" / "),t>0&&(i=$v(i,t,"right")),i}},{key:"addRestriction",value:function(){var e=this;this.log("VisboProject Restrict Add Restriction : ".concat(this.newItemPath.join(" / ")," ").concat(this.newItemGroup," ").concat(this.newItemInclChildren));var t=new lk;t.name=this.newItemName||(new Date).toISOString(),t.elementPath=this.newItemPath,t.groupid=this.newItemGroup,this.newItemInclChildren&&(t.inclChildren=this.newItemInclChildren),this.visboprojectService.addRestriction(this.visboproject._id,t).subscribe((function(t){e.log("Add VisboProject Restriction result: "+JSON.stringify(t)),e.visboproject.restrict.push(t);var n=e.translate.instant("vpRestrict.msg.addRestrictionSuccess");localStorage.removeItem("restrict"),e.newItemPath=void 0,e.alertService.success(n)}),(function(t){if(e.log("Add VisboProject Restriction error: "+t.error.message),403===t.status){var n=e.translate.instant("vpRestrict.msg.errorAddRestrictionPerm");e.alertService.error(n)}else e.log("Error during add Restriction from VP  "+t.error.message),e.alertService.error(Zv(t))}))}},{key:"removeRestriction",value:function(e){var t=this,n=this.visboproject.restrict[e];this.log("VisboProject Restrict Remove Restriction : ".concat(e," ").concat(n._id)),this.visboprojectService.deleteRestriction(this.visboproject._id,n._id).subscribe((function(e){t.log("Remove VisboProject Restriction result: "+JSON.stringify(e));for(var i=0;i<t.visboproject.restrict.length;i++)if(t.visboproject.restrict[i]._id===n._id){t.visboproject.restrict.splice(i,1);break}var r=t.translate.instant("vpRestrict.msg.removeRestrictionSuccess");t.alertService.success(r)}),(function(e){if(t.log("Remove VisboProject Restriction error: "+e.error.message),403===e.status){var n=t.translate.instant("vpRestrict.msg.errorRemoveRestrictionPerm");t.alertService.error(n)}else t.log("Error during remove Restriction from VP  "+e.error.message),t.alertService.error(Zv(e))}))}},{key:"helperRemoveRestriction",value:function(e){this.restrictIndex=e}},{key:"getGroupName",value:function(e){var t=this.vgGroups?this.vgGroups.find((function(t){return t._id===e})):void 0;return t?t.name:"Unknown"}},{key:"getVisboProjectUsers",value:function(){var e=this,t=this.route.snapshot.paramMap.get("id");this.log("VisboProject UserList of: ".concat(t," Deleted ").concat(this.deleted)),this.visboprojectService.getVPUsers(t,!1,this.deleted).subscribe((function(t){e.filterGroups(t.groups),e.log("fetched Groups "+e.vgGroups.length)}),(function(t){if(e.log("Get VP Users failed: error: ".concat(t.status," message: ").concat(t.error.message)),403===t.status){var n=e.translate.instant("vpRestrict.msg.errorPerm");e.alertService.error(n)}else e.alertService.error(Zv(t))}))}},{key:"filterGroups",value:function(e){var t=this;this.vgGroups=[],e.forEach((function(e){"VP"===e.groupType&&t.vgGroups.push(e)}))}},{key:"goBack",value:function(){this.location.back()}},{key:"gotoVPAudit",value:function(e){this.log("goto VP Audit: ".concat(e._id," Deleted ").concat(this.deleted)),this.router.navigate(["vpAudit/".concat(e._id)],this.deleted?{queryParams:{deleted:this.deleted}}:{})}},{key:"gotoVCDetail",value:function(e){this.router.navigate(["vcDetail/".concat(e.vcid)])}},{key:"gotoVPList",value:function(e){this.log("goto VP List: ".concat(e._id," Deleted ").concat(this.deleted)),this.router.navigate(["vp/".concat(e.vcid)],this.deleted?{queryParams:{deleted:this.deleted}}:{})}},{key:"gotoVP",value:function(e){this.log("goto VP: ".concat(e._id," Deleted ").concat(this.deleted));var t="vpKeyMetrics/";e.vpType===sk.Portfolio&&(t="vpf/"),this.router.navigate([t.concat(e._id)],this.deleted?{queryParams:{deleted:this.deleted}}:{})}},{key:"gotoVPView",value:function(e){this.log("goto VP List: ".concat(e._id," Deleted ").concat(this.deleted)),this.router.navigate(["vpv/".concat(e._id)],this.deleted?{queryParams:{deleted:this.deleted}}:{})}},{key:"sortRestrictTable",value:function(e){if(this.visboproject||this.visboproject.restrict){if(void 0===e&&void 0!==this.sortRestrictColumn||(e!==this.sortRestrictColumn&&(this.sortRestrictColumn=e,this.sortRestrictAscending=void 0),this.sortRestrictAscending=void 0===this.sortRestrictAscending?5!==e:!this.sortRestrictAscending),1===this.sortRestrictColumn)this.visboproject.restrict.sort((function(e,t){return qv(e.elementPath.join(" / ").toLowerCase(),t.elementPath.join(" / ").toLowerCase())}));else if(2===this.sortRestrictColumn){var t=[];this.vgGroups.forEach((function(e){return t[e._id]=e.name})),this.visboproject.restrict.sort((function(e,n){return qv(t[e.groupid],t[n.groupid])}))}else 4===this.sortRestrictColumn?this.visboproject.restrict.sort((function(e,t){return qv(e.user.email,t.user.email)})):5===this.sortRestrictColumn&&this.visboproject.restrict.sort((function(e,t){return zv(e.createdAt,t.createdAt)}));this.sortRestrictAscending||this.visboproject.restrict.reverse()}}},{key:"log",value:function(e){this.messageService.add("VisboProjectRestrict: "+e)}}]),e}()).\u0275fac=function(e){return new(e||lO)(Za(tf),Za(sg),Za(dk),Za(mc),Za(Am),Za(Zm),Za(Rb))},lO.\u0275cmp=wt({type:lO,selectors:[["app-visboproject-restrict"]],decls:2,vars:1,consts:[[4,"ngIf"],[3,"click"],[3,"click",4,"ngIf"],[1,"form-group","row"],["for","vpName",1,"col-3","col-md-2","col-form-label"],[1,"col-8","form-control-static"],["class","form-group row",4,"ngIf"],["for","vpType",1,"col-3","col-md-2","col-form-label"],["name","vpType",1,"col","form-control-static","col-form-label"],[1,"form-group","row","d-none","d-md-block"],["for","Created",1,"col-3","col-md-2","col-form-label"],[1,"col-4","form-control-static","col-form-label"],[1,"mb-3"],["id","VpRestrictionAdd","tabindex","-1","role","dialog","aria-labelledby","VpRestrictModalCreateTitle","aria-hidden","true",1,"modal","fade"],["role","document",1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button","data-dismiss","modal","aria-label","Close",1,"close"],["aria-hidden","true"],[1,"modal-body"],["novalidate",""],["f1","ngForm"],[1,"form-group"],["for","path",1,"col-form-label"],[1,"form-group",3,"ngClass"],["for","group",1,"col-form-label"],["name","group","required","",1,"form-control",3,"ngModel","ngModelChange"],["group","ngModel"],[3,"value",4,"ngFor","ngForOf"],["class","help-block",4,"ngIf"],[1,"custom-control","custom-checkbox"],["type","checkbox","name","inclChildren","id","inclChildrenID",1,"custom-control-input",3,"ngModel","ngModelChange"],["inclChildren","ngModel"],["for","inclChildrenID",1,"custom-control-label"],[1,"modal-footer","align-items-end"],["type","button","data-dismiss","modal",1,"btn","btn-secondary","mx-1"],["type","submit","class","btn btn-primary mx-1",4,"ngIf"],["type","submit","class","btn btn-primary mx-1","data-dismiss","modal",3,"click",4,"ngIf"],["id","VpRestrictionRemove","tabindex","-1","role","dialog","aria-labelledby","Remove Restriction","aria-hidden","true",1,"modal","fade"],["id","VpUserRemoveTitle",1,"modal-title"],["class","modal-body",4,"ngIf"],["type","button","data-dismiss","modal",1,"btn","btn-secondary"],["type","button","data-dismiss","modal",1,"btn","btn-warning",3,"click"],["for","vpDescription",1,"col-3","col-md-2","col-form-label"],["class","row",4,"ngIf"],[1,"row"],[1,"col"],[1,"panel-heading"],[1,"panel-body"],[1,"table","table-hover"],[1,"d-none","d-md-table-cell",3,"click"],[1,"d-none","d-md-table-cell"],[1,"d-none","d-lg-table-cell",3,"click"],[4,"ngFor","ngForOf"],[3,"title"],["class","fa fa-check","aria-hidden","true",4,"ngIf"],[1,"d-none","d-lg-table-cell"],["data-toggle","modal","data-target","#VpRestrictionRemove",1,"btn","btn-md",3,"title","click"],["aria-hidden","true",1,"fa","fa-check"],[1,"col",3,"title"],["type","button","data-toggle","modal","data-target","#VpRestrictionAdd",1,"col-2","btn","btn-primary"],[3,"value"],[1,"help-block"],["type","submit",1,"btn","btn-primary","mx-1"],["type","submit","data-dismiss","modal",1,"btn","btn-primary","mx-1",3,"click"],[1,"bg-warning"],[1,"col-form-label"]],template:function(e,t){1&e&&(io(0,"app-usernavbar"),Ya(1,oO,100,70,"div",0)),2&e&&(zi(1),Xa("ngIf",t.visboproject))},directives:[pk,su,Fh,xd,Gh,iu,rh,Kh,Td,Nh,ah,dh,au,Cd],pipes:[jb,ku,Cu],styles:[""]}),lO),dO=((sO=function(){function e(t,n,i){p(this,e),this.visbocenterService=t,this.messageService=n,this.alertService=i}return m(e,[{key:"ngOnInit",value:function(){this.activateMessage=this.messageService.getstatus(),this.combinedPerm=this.visbocenterService.getSysAdminRole()}},{key:"toggleMessages",value:function(){this.activateMessage=this.messageService.toggle()}}]),e}()).\u0275fac=function(e){return new(e||sO)(Za(my),Za(tf),Za(Zm))},sO.\u0275cmp=wt({type:sO,selectors:[["app-settings"]],decls:6,vars:1,consts:[["type","button",1,"btn","btn-sm","btn-primary","align-self-start",3,"click"]],template:function(e,t){1&e&&(io(0,"app-usernavbar"),to(1,"div"),to(2,"a"),So(3),no(),to(4,"button",0),uo("click",(function(){return t.toggleMessages()})),So(5," Toggle Messages "),no(),no()),2&e&&(zi(3),xo("Display Debug Messages: ",t.activateMessage," "))},directives:[pk],encapsulation:2}),sO),hO={headers:new ov({"Content-Type":"application/json"})},vO=((cO=function(){function e(t,n,i){p(this,e),this.http=t,this.messageService=n,this.env=i,this.profileUrl=this.env.restUrl.concat("/user/profile"),this.pwchangeUrl=this.env.restUrl.concat("/user/passwordchange")}return m(e,[{key:"getUserProfile",value:function(){var e=this;return this.log("Calling HTTP Get Request: "+this.profileUrl),this.http.get(this.profileUrl,hO).pipe(B((function(e){return e.user})),cf((function(t){return e.log("fetched ".concat(t.email," User Profile "))})),af(this.handleError("getUserProfile")))}},{key:"updateUserProfile",value:function(e){var t=this;return this.log("Calling HTTP Put Request: "+this.profileUrl),this.http.put(this.profileUrl,e,hO).pipe(B((function(e){return e.user})),cf((function(e){return t.log("updated User Profile ".concat(e.email," "))})),af(this.handleError("updateUserProfile")))}},{key:"passwordChange",value:function(e,t){var n=this;return this.log("Calling HTTP Put Request: "+this.pwchangeUrl),this.http.put(this.pwchangeUrl,{oldpassword:e,password:t},hO).pipe(B((function(e){return e.user})),cf((function(e){return n.log("Changed User Password ".concat(e.email," "))})),af(this.handleError("ChangedPassword")))}},{key:"handleError",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"operation",n=arguments.length>1?arguments[1]:void 0;return function(i){return e.log("HTTP Request ".concat(t," failed: ").concat(i.error.message," status:").concat(i.status,", Result ").concat(JSON.stringify(n))),nf(i)}}},{key:"log",value:function(e){this.messageService.add("VisboUserService: "+e)}}]),e}()).\u0275fac=function(e){return new(e||cO)(ot(Sv),ot(tf),ot(Vf))},cO.\u0275prov=Ve({token:cO,factory:cO.\u0275fac}),cO);function fO(e,t){1&e&&(to(0,"div",25),So(1),qs(2,"translate"),no()),2&e&&(zi(1),To(zs(2,1,"profile.msg.firstNameRequired")))}function pO(e,t){1&e&&(to(0,"div",25),So(1),qs(2,"translate"),no()),2&e&&(zi(1),To(zs(2,1,"profile.msg.lastNameRequired")))}function gO(e,t){1&e&&(to(0,"div",25),So(1),qs(2,"translate"),no()),2&e&&(zi(1),To(zs(2,1,"profile.msg.companyRequired")))}function mO(e,t){1&e&&io(0,"img",26)}var bO=function(e){return{"has-error":e}},yO=function(){return["/"]};function kO(e,t){if(1&e){var n=so();to(0,"div",2),to(1,"h3",3),So(2),qs(3,"translate"),no(),to(4,"div"),to(5,"form",4,5),uo("ngSubmit",(function(){mn(n);var e=$a(6),t=fo();return e.form.valid&&t.saveUserProfile()})),to(7,"div",6),to(8,"label",7),So(9),qs(10,"translate"),no(),to(11,"input",8,9),uo("ngModelChange",(function(e){return mn(n),fo().user.profile.firstName=e})),no(),Ya(13,fO,3,3,"div",10),no(),to(14,"div",6),to(15,"label",11),So(16),qs(17,"translate"),no(),to(18,"input",12,13),uo("ngModelChange",(function(e){return mn(n),fo().user.profile.lastName=e})),no(),Ya(20,pO,3,3,"div",10),no(),to(21,"div",6),to(22,"label",14),So(23),qs(24,"translate"),no(),to(25,"input",15,16),uo("ngModelChange",(function(e){return mn(n),fo().user.profile.company=e})),no(),Ya(27,gO,3,3,"div",10),no(),to(28,"div",17),to(29,"label",18),So(30),qs(31,"translate"),no(),to(32,"input",19,20),uo("ngModelChange",(function(e){return mn(n),fo().user.profile.phone=e})),no(),no(),to(34,"div",17),to(35,"button",21),So(36),qs(37,"translate"),no(),Ya(38,mO,1,0,"img",22),to(39,"a",23),So(40),qs(41,"translate"),no(),to(42,"button",24),uo("click",(function(){return mn(n),fo().passwordInit()})),So(43),qs(44,"translate"),no(),no(),no(),to(45,"div"),So(46),qs(47,"translate"),qs(48,"date"),io(49,"br"),So(50),qs(51,"translate"),qs(52,"date"),no(),no(),no()}if(2&e){var i=$a(6),r=$a(12),a=$a(19),o=$a(26),s=fo();zi(2),_o("",zs(3,25,"profile.title")," ",s.user.email,""),zi(5),Xa("ngClass",Gs(51,bO,i.submitted&&!r.valid)),zi(2),To(zs(10,27,"profile.lbl.firstName")),zi(2),Xa("ngModel",s.user.profile.firstName),zi(2),Xa("ngIf",i.submitted&&!r.valid),zi(1),Xa("ngClass",Gs(53,bO,i.submitted&&!a.valid)),zi(2),To(zs(17,29,"profile.lbl.lastName")),zi(2),Xa("ngModel",s.user.profile.lastName),zi(2),Xa("ngIf",i.submitted&&!a.valid),zi(1),Xa("ngClass",Gs(55,bO,i.submitted&&!o.valid)),zi(2),To(zs(24,31,"profile.lbl.company")),zi(2),Xa("ngModel",s.user.profile.company),zi(2),Xa("ngIf",i.submitted&&!o.valid),zi(3),To(zs(31,33,"profile.lbl.phone")),zi(2),Xa("ngModel",s.user.profile.phone),zi(4),To(zs(37,35,"profile.btn.save")),zi(2),Xa("ngIf",s.loading),zi(1),Xa("routerLink",Ls(57,yO)),zi(1),To(zs(41,37,"profile.btn.cancel")),zi(3),xo(" ",zs(44,39,"profile.btn.changePW")," "),zi(3),_o(" ",zs(47,41,"profile.msg.lastLogin")," ",Qs(48,43,s.user.status.lastLoginAt,"dd.MM.yyyy HH:mm:ss")," "),zi(4),_o(" ",zs(51,46,"profile.msg.lastFailedLogin")," ",Qs(52,48,s.user.status.lastLoginFailedAt,"dd.MM.yyyy HH:mm:ss")," ")}}function CO(e,t){1&e&&(to(0,"div",25),So(1),qs(2,"translate"),no()),2&e&&(zi(1),To(zs(2,1,"profile.msg.oldPWRequired")))}function VO(e,t){1&e&&(to(0,"div",48),So(1),qs(2,"translate"),no()),2&e&&(zi(1),To(zs(2,1,"profile.msg.followPolicy")))}function wO(e,t){if(1&e&&(to(0,"div",48),So(1),no()),2&e){var n=fo(2);zi(1),To(n.PWPolicyDescription)}}function AO(e,t){1&e&&(to(0,"button",49),So(1),qs(2,"translate"),no()),2&e&&(zi(1),To(zs(2,1,"profile.btn.change")))}function PO(e,t){if(1&e){var n=so();to(0,"button",50),uo("click",(function(){return mn(n),fo(2).passwordChange()})),So(1),qs(2,"translate"),no()}2&e&&(zi(1),To(zs(2,1,"profile.btn.change")))}function DO(e,t){if(1&e){var n=so();to(0,"div",27),to(1,"div",28),to(2,"div",29),to(3,"div",30),to(4,"h5",31),So(5),qs(6,"translate"),no(),to(7,"button",32),to(8,"span",33),So(9,"\xd7"),no(),no(),no(),to(10,"div",34),to(11,"form",35,36),to(13,"div",6),to(14,"label",37),So(15),qs(16,"translate"),no(),to(17,"input",38,39),uo("ngModelChange",(function(e){return mn(n),fo().oldpw=e})),no(),Ya(19,CO,3,3,"div",10),no(),to(20,"div",6),to(21,"label",40),qs(22,"translate"),So(23),qs(24,"translate"),no(),to(25,"input",41,42),uo("ngModelChange",(function(e){return mn(n),fo().newpw=e})),no(),Ya(27,VO,3,3,"div",43),Ya(28,wO,2,1,"div",43),no(),to(29,"div",44),to(30,"button",45),So(31),qs(32,"translate"),no(),Ya(33,AO,3,3,"button",46),Ya(34,PO,3,3,"button",47),no(),no(),no(),no(),no(),no()}if(2&e){var i=$a(12),r=$a(18),a=$a(26),o=fo();zi(5),To(zs(6,16,"profile.titleChangePW")),zi(8),Xa("ngClass",Gs(26,bO,i.submitted&&!r.valid)),zi(2),xo("",zs(16,18,"profile.lbl.oldPassword"),"(*):"),zi(2),Xa("ngModel",o.oldpw),zi(2),Xa("ngIf",i.submitted&&!r.valid),zi(1),Xa("ngClass",Gs(28,bO,i.submitted&&!a.valid)),zi(1),mo("title","",zs(22,20,"profile.lbl.PWRule"),": ",o.PWPolicyDescription,""),zi(2),xo(" ",zs(24,22,"profile.lbl.newPassword"),"(*): "),zi(2),po("pattern",o.PWPolicy),Xa("ngModel",o.newpw),zi(2),Xa("ngIf",!a.valid),zi(1),Xa("ngIf",!a.valid),zi(3),To(zs(32,24,"profile.btn.cancel")),zi(2),Xa("ngIf",!i.form.valid),zi(1),Xa("ngIf",i.form.valid)}}var MO,IO=((MO=function(){function e(t,n,i,r,a,o,s,l){p(this,e),this.userService=t,this.messageService=n,this.alertService=i,this.route=r,this.authenticationService=a,this.router=o,this.translate=s,this.titleService=l,this.loading=!1}return m(e,[{key:"ngOnInit",value:function(){this.currentLang=this.translate.currentLang,this.titleService.setTitle(this.translate.instant("profile.titleShort")),this.getPWPolicy(),this.log("Start init User Get Profile"),this.getUserProfile()}},{key:"getUserProfile",value:function(){var e=this;this.log("User Get Profile"),this.userService.getUserProfile().subscribe((function(t){e.user=t,e.user.profile||(e.user.profile=new vf),e.log("get User Profile success "+t.email)}),(function(t){e.log("get User profile failed: error: ".concat(t.status," message: ").concat(t.error.message)),e.alertService.error(Zv(t))}))}},{key:"saveUserProfile",value:function(){var e=this;this.loading=!0,this.log("Save profile info now "+this.user.email),this.userService.updateUserProfile(this.user).subscribe((function(t){e.log("Save profile success updatedAt "+t.updatedAt),e.user=t;var n=e.translate.instant("profile.msg.updateSuccess");e.alertService.success(n,!0),e.loading=!1}),(function(t){if(e.log("update User profile failed: error: ".concat(t.status," message: ").concat(t.error.message," ")),403===t.status){var n=e.translate.instant("profile.msg.errorPerm");e.alertService.error(n)}else e.alertService.error(Zv(t));e.loading=!1}))}},{key:"passwordInit",value:function(){this.changePW=!0,this.oldpw="",this.newpw=""}},{key:"passwordChange",value:function(){var e=this;this.log("Password Change ".concat(this.user.email," Len Old ").concat(this.oldpw.length," New ").concat(this.newpw.length)),this.changePW=!1,this.userService.passwordChange(this.oldpw,this.newpw).subscribe((function(t){e.log("Change Password success updatedAt "+t.updatedAt),e.user=t;var n=e.translate.instant("profile.msg.changePWSuccess");e.alertService.success(n,!0)}),(function(t){if(e.log("change password failed: error: ".concat(t.status," message: ").concat(t.error.message," ")),403===t.status){var n=e.translate.instant("profile.msg.errorPerm");e.alertService.error(n)}else e.alertService.error(Zv(t))}))}},{key:"userReset",value:function(){this.getUserProfile()}},{key:"getPWPolicy",value:function(){var e=this;this.authenticationService.initPWPolicy().subscribe((function(t){e.log("Init PW Policy success "+JSON.stringify(t)),e.PWPolicy=t.PWPolicy,e.PWPolicyDescription=t.Description}),(function(t){e.log("Init PW Policy Failed: ".concat(t.status," ").concat(t.error.message," ")),e.alertService.error(Zv(t))}))}},{key:"log",value:function(e){this.messageService.add("UserProfile: "+e)}}]),e}()).\u0275fac=function(e){return new(e||MO)(Za(vO),Za(tf),Za(Zm),Za(sg),Za(Af),Za(Am),Za(Rb),Za(ud))},MO.\u0275cmp=wt({type:MO,selectors:[["app-userprofile"]],decls:3,vars:2,consts:[["class","col-md-8 col-md-offset-2",4,"ngIf"],["class","modal fade","id","UserModalChangePassword","tabindex","-1","role","dialog","aria-labelledby","UserPasswordChangeModalTitle","aria-hidden","true",4,"ngIf"],[1,"col-md-8","col-md-offset-2"],["id","profileTitle"],["name","form","novalidate","",3,"ngSubmit"],["f","ngForm"],[1,"form-group",3,"ngClass"],["for","firstName"],["id","profileFirstName","type","text","name","firstName","required","",1,"form-control",3,"ngModel","ngModelChange"],["firstName","ngModel"],["class","help-block",4,"ngIf"],["for","lastName"],["id","profileLastName","type","text","name","lastName","required","",1,"form-control",3,"ngModel","ngModelChange"],["lastName","ngModel"],["for","company"],["id","profileCompany","type","text","name","company","required","",1,"form-control",3,"ngModel","ngModelChange"],["company","ngModel"],[1,"form-group"],["for","phone"],["id","profilePhone","type","text","name","phone",1,"form-control",3,"ngModel","ngModelChange"],["phone","ngModel"],["id","ButtonSave",1,"btn","btn-primary"],["src","data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA==",4,"ngIf"],["id","ButtonBack",1,"btn","btn-link",3,"routerLink"],["id","ButtonChangePW","type","button","data-toggle","modal","data-target","#UserModalChangePassword",1,"btn","btn-secondary",2,"float","right",3,"click"],[1,"help-block"],["src","data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA=="],["id","UserModalChangePassword","tabindex","-1","role","dialog","aria-labelledby","UserPasswordChangeModalTitle","aria-hidden","true",1,"modal","fade"],["role","document",1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header"],["id","UserPasswordChangeModalTitle",1,"modal-title"],["type","button","data-dismiss","modal","aria-label","Close",1,"close"],["aria-hidden","true"],[1,"modal-body"],["name","passwordChange","novalidate",""],["fpw","ngForm"],["for","oldpassword",1,"col-form-label"],["id","passwordOld","type","password","name","oldpassword","required","","autocomplete","password",1,"form-control",3,"ngModel","ngModelChange"],["oldpassword","ngModel"],["for","newpassword","data-toggle","tooltip","data-placement","top","data-delay","50",1,"col-form-label",3,"title"],["id","passwordNew","type","password","name","newpassword","required","","autocomplete","off",1,"form-control",3,"ngModel","pattern","ngModelChange"],["newpassword","ngModel"],["id","passwordPolicy","class","help-block",4,"ngIf"],[1,"modal-footer","align-items-end"],["id","ButtonBack","type","button","data-dismiss","modal",1,"btn","btn-secondary"],["id","ButtonChange","type","submit","class","btn btn-primary",4,"ngIf"],["id","ButtonChange","type","submit","class","btn btn-primary","data-dismiss","modal",3,"click",4,"ngIf"],["id","passwordPolicy",1,"help-block"],["id","ButtonChange","type","submit",1,"btn","btn-primary"],["id","ButtonChange","type","submit","data-dismiss","modal",1,"btn","btn-primary",3,"click"]],template:function(e,t){1&e&&(io(0,"app-usernavbar"),Ya(1,kO,53,58,"div",0),Ya(2,DO,35,30,"div",1)),2&e&&(zi(1),Xa("ngIf",t.user),zi(1),Xa("ngIf",1==t.changePW))},directives:[pk,su,Fh,xd,Gh,iu,Ad,Kh,Td,Nh,Pm,Yh],pipes:[jb,Cu],encapsulation:2}),MO);function SO(e,t){if(1&e){var n=so();to(0,"button",36),uo("click",(function(){return mn(n),fo(2).toggleUserGroup()})),So(1,"Show Groups"),no()}}function TO(e,t){if(1&e){var n=so();to(0,"button",37),uo("click",(function(){return mn(n),fo(2).toggleUserGroup()})),So(1,"Show Users"),no()}}function xO(e,t){1&e&&(to(0,"div",39),to(1,"button",48),So(2,"Add User"),no(),no())}function _O(e,t){1&e&&(to(0,"th"),So(1,"Delete"),no())}function UO(e,t){if(1&e){var n=so();to(0,"td"),to(1,"button",51),uo("click",(function(){mn(n);var e=fo().index;return fo(3).helperUserIndex(e)})),So(2,"\xd7"),no(),no()}}function OO(e,t){if(1&e){var n=so();to(0,"tr"),to(1,"td"),So(2),no(),to(3,"td",49),uo("click",(function(){mn(n);var e=t.index;return fo(3).calcCombinedPerm(e)})),to(4,"a"),So(5),no(),no(),to(6,"td",50),uo("click",(function(){return mn(n),fo(3).toggleUserGroup()})),to(7,"a"),So(8),no(),no(),Ya(9,UO,3,0,"td",0),no()}if(2&e){var i=t.$implicit,r=t.index,a=fo(3);zi(2),To(r+1),zi(3),To(i.email),zi(3),To(i.groupName),zi(1),Xa("ngIf",a.hasSystemPerm(a.permSystem.ManagePerm))}}function EO(e,t){if(1&e){var n=so();to(0,"div"),to(1,"div"),to(2,"div",38),to(3,"div",39),to(4,"h5",40),So(5," Visbo System Users "),no(),no(),Ya(6,xO,3,0,"div",41),no(),to(7,"div",42),to(8,"table",43),to(9,"thead",44),to(10,"tr"),to(11,"th"),So(12,"Nr."),no(),to(13,"th",45),uo("click",(function(){return mn(n),fo(2).sortUserTable(1)})),So(14,"e-mail"),no(),to(15,"th",46),uo("click",(function(){return mn(n),fo(2).sortUserTable(2)})),So(16,"Group"),no(),Ya(17,_O,2,0,"th",0),no(),no(),to(18,"tbody",47),Ya(19,OO,10,4,"tr",22),no(),no(),no(),no(),no()}if(2&e){var i=fo(2);zi(6),Xa("ngIf",i.hasSystemPerm(i.permSystem.ManagePerm)),zi(11),Xa("ngIf",i.hasSystemPerm(i.permSystem.ManagePerm)),zi(2),Xa("ngForOf",i.vgUsers)}}function LO(e,t){if(1&e){var n=so();to(0,"div",39),to(1,"button",55),uo("click",(function(){return mn(n),fo(3).initGroup(null)})),So(2,"Add Group"),no(),no()}}function GO(e,t){1&e&&(to(0,"th"),So(1,"Delete"),no())}function RO(e,t){1&e&&(to(0,"td",60),So(1,"Global"),no())}function jO(e,t){1&e&&io(0,"td",60)}function NO(e,t){if(1&e){var n=so();to(0,"td"),to(1,"button",61),uo("click",(function(){mn(n);var e=fo().index;return fo(3).helperRemoveGroup(e)})),So(2,"\xd7"),no(),no()}}function FO(e,t){if(1&e){var n=so();to(0,"tr"),to(1,"td"),So(2),no(),to(3,"td",56),uo("click",(function(){mn(n);var e=t.index,i=t.$implicit,r=fo(3);return r.groupIndex=e,r.initGroup(i)})),to(4,"a"),So(5),no(),no(),to(6,"td",57),uo("click",(function(){return mn(n),fo(3).toggleUserGroup()})),to(7,"a"),So(8),no(),no(),Ya(9,RO,2,0,"td",58),Ya(10,jO,1,0,"td",58),Ya(11,NO,3,0,"td",0),to(12,"td"),to(13,"button",59),uo("click",(function(){mn(n);var e=t.$implicit;return fo(3).initGroup(e)})),So(14,"i"),no(),no(),no()}if(2&e){var i=t.$implicit,r=t.index,a=fo(3);zi(2),To(r+1),zi(3),To(i.name),zi(3),To(i.users.length),zi(1),Xa("ngIf",i.global),zi(1),Xa("ngIf",!i.global),zi(1),Xa("ngIf",a.hasSystemPerm(a.permSystem.ManagePerm))}}function BO(e,t){if(1&e){var n=so();to(0,"div"),to(1,"div"),to(2,"div",38),to(3,"div",39),to(4,"h5",40),So(5," Visbo System Groups "),no(),no(),Ya(6,LO,3,0,"div",41),no(),to(7,"div",42),to(8,"table",43),to(9,"thead",52),to(10,"tr"),to(11,"th"),So(12,"Nr."),no(),to(13,"th",53),uo("click",(function(){return mn(n),fo(2).sortGroupTable(1)})),So(14,"Group"),no(),to(15,"th",53),uo("click",(function(){return mn(n),fo(2).sortGroupTable(2)})),So(16,"Members"),no(),to(17,"th"),So(18,"Flag"),no(),Ya(19,GO,2,0,"th",0),to(20,"th"),So(21,"Info"),no(),no(),no(),to(22,"tbody",54),Ya(23,FO,15,6,"tr",22),no(),no(),no(),no(),no()}if(2&e){var i=fo(2);zi(6),Xa("ngIf",i.hasSystemPerm(i.permSystem.ManagePerm)),zi(13),Xa("ngIf",i.hasSystemPerm(i.permSystem.ManagePerm)),zi(4),Xa("ngForOf",i.vgGroups)}}function HO(e,t){1&e&&(to(0,"div",62),So(1,"E-mail address is required"),no())}function KO(e,t){if(1&e&&(to(0,"option"),So(1),no()),2&e){var n=t.$implicit;zi(1),To(n.name)}}function qO(e,t){1&e&&(to(0,"div",62),So(1,"Group must be defined"),no())}function zO(e,t){1&e&&(to(0,"div",62),So(1,"Error in Message"),no())}function QO(e,t){1&e&&(to(0,"button",63),So(1,"Invite"),no())}function WO(e,t){if(1&e){var n=so();to(0,"button",64),uo("click",(function(){return mn(n),fo(2).addNewVCUser()})),So(1,"Invite"),no()}}function JO(e,t){if(1&e){var n=so();to(0,"div",5),to(1,"div",6),to(2,"div",7),to(3,"h5",65),So(4,"Remove User from Visbo System"),no(),to(5,"button",9),to(6,"span",10),So(7,"\xd7"),no(),no(),no(),to(8,"div",11),to(9,"div"),to(10,"label",66),So(11,"Do you really want to remove this User from Visbo System? "),no(),no(),to(12,"form"),to(13,"div",67),to(14,"label",68),So(15,"Visbo Center:"),no(),to(16,"label",69),So(17),no(),no(),to(18,"div",67),to(19,"label",70),So(20,"User:"),no(),to(21,"label",69),So(22),no(),no(),to(23,"div",67),to(24,"label",70),So(25,"Group:"),no(),to(26,"label",69),So(27),no(),no(),no(),no(),to(28,"div",26),to(29,"button",71),So(30,"Close"),no(),to(31,"button",72),uo("click",(function(){mn(n);var e=fo(2);return e.removeVCUser(e.vgUsers[e.userIndex],e.visbocenter._id)})),So(32,"Remove"),no(),no(),no(),no()}if(2&e){var i=fo(2);zi(17),xo("",i.visbocenter.name," "),zi(5),To(i.vgUsers[i.userIndex].email),zi(5),To(i.vgUsers[i.userIndex].groupName)}}function YO(e,t){1&e&&(to(0,"h5",108),So(1,"Modify a Group in the Visbo System"),no())}function $O(e,t){1&e&&(to(0,"h5",108),So(1,"Add a new Group to the Visbo System"),no())}function ZO(e,t){1&e&&(to(0,"div",62),So(1,"Group Name is required (Minimum 3)"),no())}function XO(e,t){if(1&e){var n=so();to(0,"div"),to(1,"div"),So(2,"Define Visbo Center Permission"),no(),to(3,"div",79),to(4,"input",109,110),uo("ngModelChange",(function(e){return mn(n),fo(3).actGroup.checkedView=e})),no(),to(6,"label",111),So(7,"View Visbo Center"),no(),no(),to(8,"div",79),to(9,"input",112,113),uo("ngModelChange",(function(e){return mn(n),fo(3).actGroup.checkedViewAudit=e})),no(),to(11,"label",114),So(12,"View Audit"),no(),no(),to(13,"div",79),to(14,"input",115,116),uo("ngModelChange",(function(e){return mn(n),fo(3).actGroup.checkedModify=e})),no(),to(16,"label",117),So(17,"Modify Visbo Center"),no(),no(),to(18,"div",79),to(19,"input",118,119),uo("ngModelChange",(function(e){return mn(n),fo(3).actGroup.checkedCreateVP=e})),no(),to(21,"label",120),So(22,"Create Visbo Project"),no(),no(),to(23,"div",79),to(24,"input",121,122),uo("ngModelChange",(function(e){return mn(n),fo(3).actGroup.checkedManagePerm=e})),no(),to(26,"label",123),So(27,"Manage Permissions, Users and Groups"),no(),no(),to(28,"div"),So(29,"Define Visbo Project Permission"),no(),to(30,"div",79),to(31,"input",124,125),uo("ngModelChange",(function(e){return mn(n),fo(3).actGroup.checkedVPView=e})),no(),to(33,"label",126),So(34,"View Visbo Project"),no(),no(),to(35,"div",79),to(36,"input",127,128),uo("ngModelChange",(function(e){return mn(n),fo(3).actGroup.checkedVPViewAudit=e})),no(),to(38,"label",129),So(39,"View Project Audit"),no(),no(),to(40,"div",79),to(41,"input",130,131),uo("ngModelChange",(function(e){return mn(n),fo(3).actGroup.checkedVPModify=e})),no(),to(43,"label",132),So(44,"Modify Visbo Project"),no(),no(),to(45,"div",79),to(46,"input",133,134),uo("ngModelChange",(function(e){return mn(n),fo(3).actGroup.checkedCreateVariant=e})),no(),to(48,"label",135),So(49,"Create Visbo Project Variant"),no(),no(),to(50,"div",79),to(51,"input",136,137),uo("ngModelChange",(function(e){return mn(n),fo(3).actGroup.checkedVPManagePerm=e})),no(),to(53,"label",138),So(54,"Manage Permissions, Users and Groups"),no(),no(),to(55,"div",79),to(56,"input",139,140),uo("ngModelChange",(function(e){return mn(n),fo(3).actGroup.checkedVPDelete=e})),no(),to(58,"label",141),So(59,"Delete Visbo Project"),no(),no(),no()}if(2&e){var i=fo(3);zi(4),Xa("ngModel",i.actGroup.checkedView),zi(5),Xa("ngModel",i.actGroup.checkedViewAudit),zi(5),Xa("ngModel",i.actGroup.checkedModify),zi(5),Xa("ngModel",i.actGroup.checkedCreateVP),zi(5),Xa("ngModel",i.actGroup.checkedManagePerm),zi(7),Xa("ngModel",i.actGroup.checkedVPView),zi(5),Xa("ngModel",i.actGroup.checkedVPViewAudit),zi(5),Xa("ngModel",i.actGroup.checkedVPModify),zi(5),Xa("ngModel",i.actGroup.checkedCreateVariant),zi(5),Xa("ngModel",i.actGroup.checkedVPManagePerm),zi(5),Xa("ngModel",i.actGroup.checkedVPDelete)}}function eE(e,t){if(1&e){var n=so();to(0,"div",146),to(1,"a",147),uo("click",(function(){mn(n);var e=fo().$implicit;return fo(4).activateUser(e)})),So(2),no(),no()}if(2&e){var i=fo().$implicit;zi(2),To(i.email)}}function tE(e,t){if(1&e&&(ro(0,38),Ya(1,eE,3,1,"div",145),ao()),2&e){var n=t.$implicit,i=fo(4);zi(1),Xa("ngIf",n.groupName==i.actGroup.name)}}function nE(e,t){if(1&e&&(to(0,"div",142),to(1,"label",143),So(2,"Group Members"),no(),Ya(3,tE,2,1,"ng-container",144),no()),2&e){var n=fo(3);zi(3),Xa("ngForOf",n.vgUsers)}}function iE(e,t){1&e&&(to(0,"div",142),to(1,"label",143),So(2,"No Group Members"),no(),no())}function rE(e,t){if(1&e&&(to(0,"button",148),So(1),no()),2&e){var n=fo(3);zi(1),To(n.confirm)}}function aE(e,t){if(1&e){var n=so();to(0,"button",149),uo("click",(function(){return mn(n),fo(3).addModifyVCGroup()})),So(1),no()}if(2&e){var i=fo(3);zi(1),To(i.confirm)}}var oE=function(e){return{"has-error":e}};function sE(e,t){if(1&e){var n=so();to(0,"div",6),to(1,"div",7),Ya(2,YO,2,0,"h5",73),Ya(3,$O,2,0,"h5",73),to(4,"button",9),to(5,"span",10),So(6,"\xd7"),no(),no(),no(),to(7,"div",11),to(8,"form",74,75),to(10,"div",14),to(11,"label",76),So(12,"Name:"),no(),to(13,"input",77,78),uo("ngModelChange",(function(e){return mn(n),fo(2).actGroup.name=e})),no(),Ya(15,ZO,2,0,"div",18),no(),to(16,"div"),So(17,"Define System Permission"),no(),to(18,"div",79),to(19,"input",80,81),uo("ngModelChange",(function(e){return mn(n),fo(2).actGroup.checkedSystemView=e})),no(),to(21,"label",82),So(22,"View Visbo Center"),no(),no(),to(23,"div",79),to(24,"input",83,84),uo("ngModelChange",(function(e){return mn(n),fo(2).actGroup.checkedSystemViewAudit=e})),no(),to(26,"label",85),So(27,"View Audit"),no(),no(),to(28,"div",79),to(29,"input",86,87),uo("ngModelChange",(function(e){return mn(n),fo(2).actGroup.checkedSystemViewLog=e})),no(),to(31,"label",88),So(32,"View Log Files"),no(),no(),to(33,"div",79),to(34,"input",89,90),uo("ngModelChange",(function(e){return mn(n),fo(2).actGroup.checkedSystemModify=e})),no(),to(36,"label",91),So(37,"Modify System"),no(),no(),to(38,"div",79),to(39,"input",92,93),uo("ngModelChange",(function(e){return mn(n),fo(2).actGroup.checkedSystemCreateVC=e})),no(),to(41,"label",94),So(42,"Create Visbo Center"),no(),no(),to(43,"div",79),to(44,"input",95,96),uo("ngModelChange",(function(e){return mn(n),fo(2).actGroup.checkedSystemDeleteVC=e})),no(),to(46,"label",97),So(47,"Delete Visbo Center"),no(),no(),to(48,"div",79),to(49,"input",98,99),uo("ngModelChange",(function(e){return mn(n),fo(2).actGroup.checkedSystemManagePerm=e})),no(),to(51,"label",100),So(52,"Manage Permissions, Users and Groups"),no(),no(),io(53,"br"),to(54,"div",79),to(55,"input",101,102),uo("ngModelChange",(function(e){return mn(n),fo(2).actGroup.global=e})),no(),to(57,"label",103),So(58,"Group has Access to all Visbo Centers / Projects"),no(),no(),Ya(59,XO,60,11,"div",0),Ya(60,nE,4,1,"div",104),Ya(61,iE,3,0,"div",104),to(62,"div",105),Ya(63,rE,2,1,"button",106),Ya(64,aE,2,1,"button",107),to(65,"button",27),So(66,"Cancel"),no(),no(),no(),no(),no()}if(2&e){var i=$a(9),r=$a(14),a=fo(2);zi(2),Xa("ngIf",a.actGroup._id),zi(1),Xa("ngIf",!a.actGroup._id),zi(7),Xa("ngClass",Gs(18,oE,i.submitted)),zi(3),Xa("ngModel",a.actGroup.name),zi(2),Xa("ngIf",r.errors&&(r.dirty||r.touched)),zi(4),Xa("ngModel",a.actGroup.checkedSystemView),zi(5),Xa("ngModel",a.actGroup.checkedSystemViewAudit),zi(5),Xa("ngModel",a.actGroup.checkedSystemViewLog),zi(5),Xa("ngModel",a.actGroup.checkedSystemModify),zi(5),Xa("ngModel",a.actGroup.checkedSystemCreateVC),zi(5),Xa("ngModel",a.actGroup.checkedSystemDeleteVC),zi(5),Xa("ngModel",a.actGroup.checkedSystemManagePerm),zi(6),Xa("ngModel",a.actGroup.global),zi(4),Xa("ngIf",a.actGroup.global),zi(1),Xa("ngIf",a.helperUsersPerGroup(a.actGroup.name)),zi(1),Xa("ngIf",!a.helperUsersPerGroup(a.actGroup.name)),zi(2),Xa("ngIf",!(i.form.valid&&a.hasSystemPerm(a.permSystem.ManagePerm))),zi(1),Xa("ngIf",i.form.valid&&a.hasSystemPerm(a.permSystem.ManagePerm))}}function lE(e,t){if(1&e){var n=so();to(0,"div",5),to(1,"div",6),to(2,"div",7),to(3,"h5",65),So(4,"Remove Group from Visbo System"),no(),to(5,"button",9),to(6,"span",10),So(7,"\xd7"),no(),no(),no(),to(8,"div",11),to(9,"div"),to(10,"label",66),So(11,"Do you really want to remove this Group from Visbo System? "),no(),no(),to(12,"form"),to(13,"div",67),to(14,"label",68),So(15,"Visbo Center:"),no(),to(16,"label",69),So(17),no(),no(),to(18,"div",67),to(19,"label",70),So(20,"Group:"),no(),to(21,"label",69),So(22),no(),no(),to(23,"div",67),to(24,"label",70),So(25,"Members:"),no(),to(26,"label",69),So(27),no(),no(),no(),no(),to(28,"div",26),to(29,"button",27),So(30,"Close"),no(),to(31,"button",150),uo("click",(function(){mn(n);var e=fo(2);return e.removeVCGroup(e.vgGroups[e.groupIndex])})),So(32,"Remove"),no(),no(),no(),no()}if(2&e){var i=fo(2);zi(17),xo("",i.visbocenter.name," "),zi(5),To(i.vgGroups[i.groupIndex].name),zi(5),To(i.vgGroups[i.groupIndex].users.length)}}function cE(e,t){1&e&&io(0,"input",182)}function uE(e,t){1&e&&io(0,"input",183)}function dE(e,t){1&e&&io(0,"input",182)}function hE(e,t){1&e&&io(0,"input",183)}function vE(e,t){1&e&&io(0,"input",182)}function fE(e,t){1&e&&io(0,"input",183)}function pE(e,t){1&e&&io(0,"input",182)}function gE(e,t){1&e&&io(0,"input",183)}function mE(e,t){1&e&&io(0,"input",182)}function bE(e,t){1&e&&io(0,"input",183)}function yE(e,t){1&e&&io(0,"input",182)}function kE(e,t){1&e&&io(0,"input",183)}function CE(e,t){1&e&&io(0,"input",182)}function VE(e,t){1&e&&io(0,"input",183)}function wE(e,t){1&e&&io(0,"input",184)}function AE(e,t){1&e&&io(0,"input",185)}function PE(e,t){1&e&&io(0,"input",186)}function DE(e,t){1&e&&io(0,"input",187)}function ME(e,t){1&e&&io(0,"input",188)}function IE(e,t){1&e&&io(0,"input",189)}function SE(e,t){1&e&&io(0,"input",190)}function TE(e,t){1&e&&io(0,"input",191)}function xE(e,t){1&e&&io(0,"input",192)}function _E(e,t){1&e&&io(0,"input",193)}function UE(e,t){1&e&&io(0,"input",194)}function OE(e,t){1&e&&io(0,"input",195)}function EE(e,t){1&e&&io(0,"input",196)}function LE(e,t){1&e&&io(0,"input",197)}function GE(e,t){1&e&&io(0,"input",198)}function RE(e,t){1&e&&io(0,"input",199)}function jE(e,t){1&e&&io(0,"input",200)}function NE(e,t){1&e&&io(0,"input",201)}function FE(e,t){1&e&&io(0,"input",202)}function BE(e,t){1&e&&io(0,"input",203)}function HE(e,t){1&e&&io(0,"input",204)}function KE(e,t){1&e&&io(0,"input",205)}function qE(e,t){if(1&e){var n=so();to(0,"div",146),to(1,"a",206),uo("click",(function(){mn(n);var e=fo().$implicit;return fo(3).activateGroup(e)})),So(2),no(),no()}if(2&e){var i=fo().$implicit;zi(2),To(i.groupName)}}function zE(e,t){if(1&e&&(ro(0,38),Ya(1,qE,3,1,"div",145),ao()),2&e){var n=t.$implicit,i=fo(3);zi(1),Xa("ngIf",n.email==i.vgUsers[i.userIndex].email)}}function QE(e,t){if(1&e&&(to(0,"div",151),to(1,"div",152),to(2,"div",6),to(3,"div",7),to(4,"h5",153),So(5),no(),to(6,"button",9),to(7,"span",10),So(8,"\xd7"),no(),no(),no(),to(9,"div",11),to(10,"div"),So(11,"Define System Permission"),no(),to(12,"div",79),Ya(13,cE,1,0,"input",154),Ya(14,uE,1,0,"input",155),to(15,"label",156),So(16,"View Visbo Center"),no(),no(),to(17,"div",79),Ya(18,dE,1,0,"input",154),Ya(19,hE,1,0,"input",155),to(20,"label",156),So(21,"View Audit"),no(),no(),to(22,"div",79),Ya(23,vE,1,0,"input",154),Ya(24,fE,1,0,"input",155),to(25,"label",156),So(26,"View Log Files"),no(),no(),to(27,"div",79),Ya(28,pE,1,0,"input",154),Ya(29,gE,1,0,"input",155),to(30,"label",156),So(31,"Modify System"),no(),no(),to(32,"div",79),Ya(33,mE,1,0,"input",154),Ya(34,bE,1,0,"input",155),to(35,"label",156),So(36,"Create Visbo Center"),no(),no(),to(37,"div",79),Ya(38,yE,1,0,"input",154),Ya(39,kE,1,0,"input",155),to(40,"label",156),So(41,"Delete Visbo Center"),no(),no(),to(42,"div",79),Ya(43,CE,1,0,"input",154),Ya(44,VE,1,0,"input",155),to(45,"label",156),So(46,"Manage Permissions, Users and Groups"),no(),no(),io(47,"br"),to(48,"div",142),So(49,"Visbo Center Permission for User"),no(),to(50,"div",79),Ya(51,wE,1,0,"input",157),Ya(52,AE,1,0,"input",158),to(53,"label",111),So(54,"View Visbo Center"),no(),no(),to(55,"div",79),Ya(56,PE,1,0,"input",159),Ya(57,DE,1,0,"input",160),to(58,"label",114),So(59,"View Audit"),no(),no(),to(60,"div",79),Ya(61,ME,1,0,"input",161),Ya(62,IE,1,0,"input",162),to(63,"label",117),So(64,"Modify Visbo Center"),no(),no(),to(65,"div",79),Ya(66,SE,1,0,"input",163),Ya(67,TE,1,0,"input",164),to(68,"label",120),So(69,"Create Visbo Project"),no(),no(),to(70,"div",79),Ya(71,xE,1,0,"input",165),Ya(72,_E,1,0,"input",166),to(73,"label",123),So(74,"Manage Permissions, Users and Groups"),no(),no(),io(75,"br"),to(76,"div"),So(77,"Visbo Project Permission for User"),no(),to(78,"div",79),Ya(79,UE,1,0,"input",167),Ya(80,OE,1,0,"input",168),to(81,"label",126),So(82,"View Visbo Project"),no(),no(),to(83,"div",79),Ya(84,EE,1,0,"input",169),Ya(85,LE,1,0,"input",170),to(86,"label",129),So(87,"View Project Audit"),no(),no(),to(88,"div",79),Ya(89,GE,1,0,"input",171),Ya(90,RE,1,0,"input",172),to(91,"label",132),So(92,"Modify Visbo Project"),no(),no(),to(93,"div",79),Ya(94,jE,1,0,"input",173),Ya(95,NE,1,0,"input",174),to(96,"label",135),So(97,"Create Visbo Project Variant"),no(),no(),to(98,"div",79),Ya(99,FE,1,0,"input",175),Ya(100,BE,1,0,"input",176),to(101,"label",138),So(102,"Manage Permissions, Users and Groups"),no(),no(),to(103,"div",79),Ya(104,HE,1,0,"input",177),Ya(105,KE,1,0,"input",178),to(106,"label",141),So(107,"Delete Visbo Project"),no(),no(),to(108,"label",179),So(109,"Group Member Ship"),no(),Ya(110,zE,2,1,"ng-container",144),to(111,"div",180),to(112,"button",181),So(113,"Close"),no(),no(),no(),no(),no(),no()),2&e){var n=fo(2);zi(5),xo("Permission for ",n.vgUsers[n.userIndex].email,""),zi(8),Xa("ngIf",n.hasUserSystemPerm(n.permSystem.View)),zi(1),Xa("ngIf",!n.hasUserSystemPerm(n.permSystem.View)),zi(4),Xa("ngIf",n.hasUserSystemPerm(n.permSystem.ViewAudit)),zi(1),Xa("ngIf",!n.hasUserSystemPerm(n.permSystem.ViewAudit)),zi(4),Xa("ngIf",n.hasUserSystemPerm(n.permSystem.ViewLog)),zi(1),Xa("ngIf",!n.hasUserSystemPerm(n.permSystem.ViewLog)),zi(4),Xa("ngIf",n.hasUserSystemPerm(n.permSystem.Modify)),zi(1),Xa("ngIf",!n.hasUserSystemPerm(n.permSystem.Modify)),zi(4),Xa("ngIf",n.hasUserSystemPerm(n.permSystem.CreateVC)),zi(1),Xa("ngIf",!n.hasUserSystemPerm(n.permSystem.CreateVC)),zi(4),Xa("ngIf",n.hasUserSystemPerm(n.permSystem.DeleteVC)),zi(1),Xa("ngIf",!n.hasUserSystemPerm(n.permSystem.DeleteVC)),zi(4),Xa("ngIf",n.hasUserSystemPerm(n.permSystem.ManagePerm)),zi(1),Xa("ngIf",!n.hasUserSystemPerm(n.permSystem.ManagePerm)),zi(7),Xa("ngIf",n.hasUserVCPerm(n.permVC.View)),zi(1),Xa("ngIf",!n.hasUserVCPerm(n.permVC.View)),zi(4),Xa("ngIf",n.hasUserVCPerm(n.permVC.ViewAudit)),zi(1),Xa("ngIf",!n.hasUserVCPerm(n.permVC.ViewAudit)),zi(4),Xa("ngIf",n.hasUserVCPerm(n.permVC.Modify)),zi(1),Xa("ngIf",!n.hasUserVCPerm(n.permVC.Modify)),zi(4),Xa("ngIf",n.hasUserVCPerm(n.permVC.CreateVP)),zi(1),Xa("ngIf",!n.hasUserVCPerm(n.permVC.CreateVP)),zi(4),Xa("ngIf",n.hasUserVCPerm(n.permVC.ManagePerm)),zi(1),Xa("ngIf",!n.hasUserVCPerm(n.permVC.ManagePerm)),zi(7),Xa("ngIf",n.hasUserVPPerm(n.permVP.View)),zi(1),Xa("ngIf",!n.hasUserVPPerm(n.permVP.View)),zi(4),Xa("ngIf",n.hasUserVPPerm(n.permVP.ViewAudit)),zi(1),Xa("ngIf",!n.hasUserVPPerm(n.permVP.ViewAudit)),zi(4),Xa("ngIf",n.hasUserVPPerm(n.permVP.Modify)),zi(1),Xa("ngIf",!n.hasUserVPPerm(n.permVP.Modify)),zi(4),Xa("ngIf",n.hasUserVPPerm(n.permVP.CreateVariant)),zi(1),Xa("ngIf",!n.hasUserVPPerm(n.permVP.CreateVariant)),zi(4),Xa("ngIf",n.hasUserVPPerm(n.permVP.ManagePerm)),zi(1),Xa("ngIf",!n.hasUserVPPerm(n.permVP.ManagePerm)),zi(4),Xa("ngIf",n.hasUserVPPerm(n.permVP.DeleteVP)),zi(1),Xa("ngIf",!n.hasUserVPPerm(n.permVP.DeleteVP)),zi(5),Xa("ngForOf",n.vgUsers)}}function WE(e,t){if(1&e){var n=so();to(0,"div"),to(1,"h3"),So(2),qs(3,"uppercase"),no(),to(4,"div",1),Ya(5,SO,2,0,"button",2),Ya(6,TO,2,0,"button",3),no(),Ya(7,EO,20,3,"div",0),Ya(8,BO,24,3,"div",0),to(9,"div",4),to(10,"div",5),to(11,"div",6),to(12,"div",7),to(13,"h5",8),So(14,"Add a new User to the Visbo System"),no(),to(15,"button",9),to(16,"span",10),So(17,"\xd7"),no(),no(),no(),to(18,"div",11),to(19,"form",12,13),to(21,"div",14),to(22,"label",15),So(23,"Name:"),no(),to(24,"input",16,17),uo("ngModelChange",(function(e){return mn(n),fo().newUserInvite.email=e})),no(),Ya(26,HO,2,0,"div",18),no(),to(27,"div",14),to(28,"label",19),So(29,"Group:"),no(),to(30,"select",20,21),uo("ngModelChange",(function(e){return mn(n),fo().newUserInvite.groupName=e})),io(32,"option"),Ya(33,KO,2,1,"option",22),no(),Ya(34,qO,2,0,"div",18),no(),to(35,"div",14),to(36,"label",23),So(37,"Message:"),no(),to(38,"textarea",24,25),uo("ngModelChange",(function(e){return mn(n),fo().newUserInvite.inviteMessage=e})),So(40," "),no(),no(),Ya(41,zO,2,0,"div",18),to(42,"div",26),to(43,"button",27),So(44,"Cancel"),no(),Ya(45,QO,2,0,"button",28),Ya(46,WO,2,0,"button",29),no(),no(),no(),no(),no(),no(),to(47,"div",30),Ya(48,JO,33,3,"div",31),no(),to(49,"div",32),to(50,"div",5),Ya(51,sE,67,20,"div",33),no(),no(),to(52,"div",34),Ya(53,lE,33,3,"div",31),no(),Ya(54,QE,114,38,"div",35),no()}if(2&e){var i=$a(20),r=$a(25),a=$a(31),o=$a(39),s=fo();zi(2),xo("System: ",zs(3,21,s.visbocenter.name),""),zi(3),Xa("ngIf",!s.showGroups),zi(1),Xa("ngIf",s.showGroups),zi(1),Xa("ngIf",!s.showGroups),zi(1),Xa("ngIf",s.showGroups),zi(13),Xa("ngClass",Gs(23,oE,i.submitted&&!r.valid)),zi(3),Xa("ngModel",s.newUserInvite.email),zi(2),Xa("ngIf",i.submitted&&!r.valid),zi(1),Xa("ngClass",Gs(25,oE,i.submitted&&!a.valid)),zi(3),Xa("ngModel",s.newUserInvite.groupName),zi(3),Xa("ngForOf",s.vgGroups),zi(1),Xa("ngIf",i.submitted&&!a.valid),zi(1),Xa("ngClass",Gs(27,oE,i.submitted&&!o.valid)),zi(3),Xa("ngModel",s.newUserInvite.inviteMessage),zi(3),Xa("ngIf",i.submitted&&!o.valid),zi(4),Xa("ngIf",!(r.valid&&a.valid)),zi(1),Xa("ngIf",r.valid&&a.valid),zi(2),Xa("ngIf",s.userIndex>=0&&s.userIndex<s.vgUsers.length),zi(3),Xa("ngIf",s.actGroup),zi(2),Xa("ngIf",s.groupIndex>=0&&s.groupIndex<s.vgGroups.length),zi(1),Xa("ngIf",s.vgUsers&&s.userIndex>=0)}}var JE,YE=((JE=function(){function e(t,n,i,r,a,o){p(this,e),this.messageService=t,this.visbocenterService=n,this.route=i,this.location=r,this.router=a,this.alertService=o,this.newUserInvite=new pf,this.permSystem=cy,this.permVC=uy,this.permVP=dy,this.sortUserColumn=1,this.sortUserAscending=!0,this.sortGroupColumn=1,this.sortGroupAscending=!0}return m(e,[{key:"ngOnInit",value:function(){this.getSysVisboCenter(),this.combinedPerm=this.visbocenterService.getSysAdminRole()}},{key:"getSysVisboCenter",value:function(){var e=this;this.visbocenterService.getSysVisboCenter().subscribe((function(t){e.visbocenter=t[0],e.getVisboCenterUsers(),e.log("System VisboCenter initialised ".concat(e.visbocenter._id," Perm Sys ").concat(JSON.stringify(e.combinedPerm)," "))}),(function(t){e.log("get VC failed: error: ".concat(t.status," message: ").concat(t.error.message," ")),e.alertService.error(403===t.status?"Permission Denied: Visbo Center "+e.visbocenter.name:Zv(t))}))}},{key:"hasSystemPerm",value:function(e){return(this.combinedPerm.system&e)>0}},{key:"hasVCPerm",value:function(e){return(this.combinedPerm.vc&e)>0}},{key:"hasVPPerm",value:function(e){return(this.combinedPerm.vp&e)>0}},{key:"hasUserSystemPerm",value:function(e){return void 0!==this.combinedUserPerm&&(this.combinedUserPerm.system&e)>0}},{key:"hasUserVCPerm",value:function(e){return void 0!==this.combinedUserPerm&&(this.combinedUserPerm.vc&e)>0}},{key:"hasUserVPPerm",value:function(e){return void 0!==this.combinedUserPerm&&(this.combinedUserPerm.vp&e)>0}},{key:"getVisboCenterUsers",value:function(){var e=this,t=this.visbocenter._id;this.log("VisboCenter UserList of: "+t),this.visbocenterService.getVCUsers(t,!0).subscribe((function(t){e.vgUsers=t.users,e.vgGroups=t.groups,e.log("fetched Users ".concat(e.vgUsers.length,", Groups ").concat(e.vgGroups.length)),e.sortUserTable(),e.sortGroupTable()}),(function(t){e.log("Get VC Users failed: error: ".concat(t.status," message: ").concat(t.error.message)),e.alertService.error(403===t.status?"Permission Denied":Zv(t))}))}},{key:"gotoVPList",value:function(e){this.router.navigate(["sysvp/".concat(e._id)])}},{key:"goBack",value:function(){this.location.back()}},{key:"save",value:function(){var e=this;this.visbocenterService.updateVisboCenter(this.visbocenter).subscribe((function(t){e.alertService.success("Visbo Center ".concat(t.name," updated successfully"),!0)}),(function(t){e.log("save VC failed: error: ".concat(t.status," message: ").concat(t.error.message," ")),e.alertService.error(403===t.status?"Permission Denied: Visbo Center "+e.visbocenter.name:409===t.status?"Visbo Center ".concat(e.visbocenter.name," exists already"):Zv(t))}))}},{key:"toggleUserGroup",value:function(){this.showGroups=!this.showGroups}},{key:"addNewVCUser",value:function(){var e=this,t=this.newUserInvite.email.trim(),n=this.newUserInvite.groupName.trim(),i=this.vgGroups.filter((function(e){return e.name===n}))[0]._id,r=this.visbocenter._id,a="";this.newUserInvite.inviteMessage&&(a=this.newUserInvite.inviteMessage.trim()),this.log("Add VisboCenter User: ".concat(t," Group: ").concat(n,"/").concat(i," VC: ").concat(r)),t&&i&&this.visbocenterService.addVCUser(t,i,a,r,!0).subscribe((function(n){var i=new fy;i.userId=n.users.filter((function(e){return e.email===t}))[0].userId,i.email=t,i.groupId=n._id,i.groupName=n.name,e.log("Add VisboCenter User Push: "+JSON.stringify(i)),e.vgUsers.push(i),e.sortUserTable();for(var r=0;r<e.vgGroups.length;r++)if(e.vgGroups[r]._id===n._id){e.vgGroups[r]=n;break}e.alertService.success("User ".concat(t," added successfully"))}),(function(t){e.log("Add VisboCenter User error: "+t.error.message),403===t.status?e.alertService.error("Permission Denied: Add User to Visbo Center"):(e.log("Error during add VC user "+t.error.message),e.alertService.error(Zv(t)))}))}},{key:"helperUserIndex",value:function(e){this.userIndex=e}},{key:"calcCombinedPerm",value:function(e){this.userIndex=e,this.combinedUserPerm={system:0,vc:0,vp:0},this.vgUsers.forEach(this.addUserPerm,this),this.log("Combined Permission for ".concat(this.vgUsers[e].email,"  ").concat(JSON.stringify(this.combinedUserPerm)))}},{key:"addUserPerm",value:function(e){if(e.email===this.vgUsers[this.userIndex].email){this.log("Add User Permission for "+e.groupName);var t=this.vgGroups.findIndex((function(t){return t.name===e.groupName}));t>=0?this.vgGroups[t].permission?(this.combinedUserPerm.system=this.combinedUserPerm.system|(this.vgGroups[t].permission.system||0),this.combinedUserPerm.vc=this.combinedUserPerm.vc|(this.vgGroups[t].permission.vc||0),this.combinedUserPerm.vp=this.combinedUserPerm.vp|(this.vgGroups[t].permission.vp||0)):this.log("Permission for Group not set "+e.groupName):this.log("Group not found "+e.groupName)}}},{key:"helperRemoveGroup",value:function(e){this.groupIndex=e}},{key:"helperUsersPerGroup",value:function(e){var t=this.vgGroups&&this.vgGroups.find((function(t){return t.name===e}));return t?t.users.length:0}},{key:"removeVCUser",value:function(e,t){var n=this;this.log("Remove VisboCenter User: ".concat(e.email,"/").concat(e.userId," Group: ").concat(e.groupName," VC: ").concat(t)),this.visbocenterService.deleteVCUser(e,t,!0).subscribe((function(){n.vgUsers=n.vgUsers.filter((function(t){return t!==e}));for(var t=0;t<n.vgGroups.length;t++)if(n.vgGroups[t]._id===e.groupId){for(var i=0;i<n.vgGroups[t].users.length;i++)if(n.vgGroups[t].users[i].userId===e.userId){n.vgGroups[t].users.splice(i,1);break}break}n.alertService.success("User ".concat(e.email," removed successfully"))}),(function(e){n.log("Remove VisboCenter User error: "+e.error.message),403===e.status?n.alertService.error("Permission Denied: Remove User from Visbo Center"):(n.log("Error during remove VC user "+e.error.message),n.alertService.error(Zv(e)))}))}},{key:"helperSystemPerm",value:function(e){var t=0;return e.checkedSystemView&&(t+=this.permSystem.View),e.checkedSystemViewAudit&&(t+=this.permSystem.ViewAudit),e.checkedSystemViewLog&&(t+=this.permSystem.ViewLog),e.checkedSystemModify&&(t+=this.permSystem.Modify),e.checkedSystemCreateVC&&(t+=this.permSystem.CreateVC),e.checkedSystemDeleteVC&&(t+=this.permSystem.DeleteVC),e.checkedSystemManagePerm&&(t+=this.permSystem.ManagePerm),t}},{key:"helperVCPerm",value:function(e){var t=0;return e.checkedView&&(t+=this.permVC.View),e.checkedViewAudit&&(t+=this.permVC.ViewAudit),e.checkedModify&&(t+=this.permVC.Modify),e.checkedCreateVP&&(t+=this.permVC.CreateVP),e.checkedManagePerm&&(t+=this.permVC.ManagePerm),t}},{key:"helperVPPerm",value:function(e){var t=0;return e.checkedVPView&&(t+=this.permVP.View),e.checkedVPViewAudit&&(t+=this.permVP.ViewAudit),e.checkedVPModify&&(t+=this.permVP.Modify),e.checkedCreateVariant&&(t+=this.permVP.CreateVariant),e.checkedVPManagePerm&&(t+=this.permVP.ManagePerm),e.checkedVPDelete&&(t+=this.permVP.DeleteVP),t}},{key:"activateGroup",value:function(e){this.log("Activate Group : "+e.groupName);var t=this.vgGroups.find((function(t){return t.name==e.groupName}));this.initGroup(t)}},{key:"activateUser",value:function(e){this.log("Activate User : "+e.email);var t=this.vgUsers.findIndex((function(t){return t.email==e.email}));t>=0&&this.calcCombinedPerm(t)}},{key:"initGroup",value:function(e){this.actGroup=new vy,e?(this.confirm="Modify",this.actGroup._id=e._id,this.log("Init Group Set GroupID : ".concat(this.actGroup._id," ID ").concat(e._id)),this.actGroup.name=e.name,this.actGroup.checkedSystemView=(e.permission.system&this.permSystem.View)>0,this.actGroup.checkedSystemViewAudit=(e.permission.system&this.permSystem.ViewAudit)>0,this.actGroup.checkedSystemViewLog=(e.permission.system&this.permSystem.ViewLog)>0,this.actGroup.checkedSystemModify=(e.permission.system&this.permSystem.Modify)>0,this.actGroup.checkedSystemCreateVC=(e.permission.system&this.permSystem.CreateVC)>0,this.actGroup.checkedSystemDeleteVC=(e.permission.system&this.permSystem.DeleteVC)>0,this.actGroup.checkedSystemManagePerm=(e.permission.system&this.permSystem.ManagePerm)>0,this.actGroup.global=e.global,this.actGroup.checkedView=(e.permission.vc&this.permVC.View)>0,this.actGroup.checkedViewAudit=(e.permission.vc&this.permVC.ViewAudit)>0,this.actGroup.checkedModify=(e.permission.vc&this.permVC.Modify)>0,this.actGroup.checkedCreateVP=(e.permission.vc&this.permVC.CreateVP)>0,this.actGroup.checkedManagePerm=(e.permission.vc&this.permVC.ManagePerm)>0,this.actGroup.checkedVPView=(e.permission.vp&this.permVP.View)>0,this.actGroup.checkedVPViewAudit=(e.permission.vp&this.permVP.ViewAudit)>0,this.actGroup.checkedVPModify=(e.permission.vp&this.permVP.Modify)>0,this.actGroup.checkedCreateVariant=(e.permission.vp&this.permVP.CreateVariant)>0,this.actGroup.checkedVPManagePerm=(e.permission.vp&this.permVP.ManagePerm)>0,this.actGroup.checkedVPDelete=(e.permission.vp&this.permVP.DeleteVP)>0):(this.actGroup._id=void 0,this.confirm="Create",this.actGroup.name="",this.actGroup.global=!1,this.actGroup.checkedView=!0),this.log("Init Group for Creation / Modification: ".concat(this.actGroup.name," ID ").concat(this.actGroup._id))}},{key:"addModifyVCGroup",value:function(){var e=this,t=new hy;t.name=this.actGroup.name.trim(),t.global=this.actGroup.global,t.vcid=this.visbocenter._id,t.permission=new ly,t.permission.system=this.helperSystemPerm(this.actGroup),t.global&&(t.permission.vc=this.helperVCPerm(this.actGroup),t.permission.vp=this.helperVPPerm(this.actGroup)),this.log("Add/Modify VisboCenter Group: Group: ".concat(t.name," New/Modify ").concat(this.actGroup._id," Perm: ").concat(JSON.stringify(t.permission))),this.actGroup._id?(this.log("Modify VisboCenter Group: Group: ".concat(t.name," VC: ").concat(t.vcid," Perm: ").concat(JSON.stringify(t.permission))),t._id=this.actGroup._id,this.visbocenterService.modifyVCGroup(t,!0).subscribe((function(n){e.vgGroups=e.vgGroups.filter((function(e){return e._id!==t._id})),e.vgGroups.push(n);for(var i=0;i<e.vgUsers.length;i++)e.vgUsers[i].groupId===t._id&&(e.vgUsers[i].groupName=n.name);e.sortUserTable(),e.sortGroupTable(),e.alertService.success("Group ".concat(n.name," changed successfully"))}),(function(t){e.log("Modify VisboCenter Group error: "+t.error.message),403===t.status?e.alertService.error("Permission Denied: Modify Group to Visbo Center"):(e.log("Error during add VC Group "+t.error.message),e.alertService.error(Zv(t)))}))):(this.log("Add VisboCenter Group: Group: ".concat(t.name," VC: ").concat(t.vcid," Perm: vc ").concat(JSON.stringify(t.permission))),this.visbocenterService.addVCGroup(t,!0).subscribe((function(t){e.vgGroups.push(t),e.alertService.success("Group ".concat(t.name," added successfully"))}),(function(t){e.log("Add VisboCenter Group error: "+t.error.message),403===t.status?e.alertService.error("Permission Denied: Add Group to Visbo Center"):(e.log("Error during add VC Group "+t.error.message),e.alertService.error(Zv(t)))})))}},{key:"removeVCGroup",value:function(e){var t=this;this.log("Remove VisboCenter Group: ".concat(e.name,"/").concat(e._id," VC: ").concat(e.vcid)),this.visbocenterService.deleteVCGroup(e,!0).subscribe((function(n){t.log("Remove VisboCenter Group result: "+JSON.stringify(n)),t.vgGroups=t.vgGroups.filter((function(t){return t!==e})),t.vgUsers=t.vgUsers.filter((function(t){return t.groupId!==e._id})),t.alertService.success("Group ".concat(e.name," removed successfully"))}),(function(e){t.log("Remove VisboCenter Group error: "+e.error.message),403===e.status?t.alertService.error("Permission Denied: Remove Group from Visbo Center"):(t.log("Error during remove VC user "+e.error.message),t.alertService.error(Zv(e)))}))}},{key:"sortUserTable",value:function(e){this.vgUsers&&(void 0===e&&void 0!==this.sortUserColumn||(e!==this.sortUserColumn&&(this.sortUserColumn=e,this.sortUserAscending=void 0),this.sortUserAscending=void 0===this.sortUserAscending?1===e||2===e:!this.sortUserAscending),1===this.sortUserColumn?this.vgUsers.sort((function(e,t){return qv(e.email,t.email)})):2===this.sortUserColumn&&this.vgUsers.sort((function(e,t){return qv(e.groupName.toLowerCase(),t.groupName.toLowerCase())})),this.sortUserAscending||this.vgUsers.reverse())}},{key:"sortGroupTable",value:function(e){this.vgGroups&&(void 0===e&&void 0!==this.sortGroupColumn||(e!==this.sortGroupColumn&&(this.sortGroupColumn=e,this.sortGroupAscending=void 0),this.sortGroupAscending=void 0===this.sortGroupAscending?1===e:!this.sortGroupAscending),1===this.sortGroupColumn?this.vgGroups.sort((function(e,t){return qv(e.name.toLowerCase(),t.name.toLowerCase())})):2===this.sortGroupColumn&&this.vgGroups.sort((function(e,t){return t.users.length-e.users.length})),this.sortGroupAscending||this.vgGroups.reverse())}},{key:"log",value:function(e){this.messageService.add("Sys VisboCenter: "+e)}}]),e}()).\u0275fac=function(e){return new(e||JE)(Za(tf),Za(my),Za(sg),Za(mc),Za(Am),Za(Zm))},JE.\u0275cmp=wt({type:JE,selectors:[["app-sysvisbosystem"]],decls:2,vars:1,consts:[[4,"ngIf"],[1,"btn-toolbar"],["id","ViewGroup","type","button","class","btn btn-md btn-light mx-1",3,"click",4,"ngIf"],["id","ViewUser","type","button","class","btn btn-md btn-light mx-1",3,"click",4,"ngIf"],["id","VcUserModalCreate","tabindex","-1","role","dialog","aria-labelledby","VcUserModalCreateTitle","aria-hidden","true",1,"modal","fade"],["role","document",1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header"],["id","VcUserModalCenterTitle",1,"modal-title"],["type","button","data-dismiss","modal","aria-label","Close",1,"close"],["aria-hidden","true"],[1,"modal-body"],["name","newUserInvite","novalidate",""],["f1","ngForm"],[1,"form-group",3,"ngClass"],["for","email",1,"col-form-label"],["id","AddUserName","type","email","name","email","required","","pattern","[^@\\s]+@[^@\\s]+\\.[^@\\s]+","autocomplete","email",1,"form-control",3,"ngModel","ngModelChange"],["email","ngModel"],["class","help-block",4,"ngIf"],["for","group",1,"col-form-label"],["id","AddUserGroupName","name","group","required","",1,"form-control",3,"ngModel","ngModelChange"],["group","ngModel"],[4,"ngFor","ngForOf"],["for","inviteMessage",1,"col-form-label"],["id","AddUserMessage","name","inviteMessage",1,"form-control",3,"ngModel","ngModelChange"],["inviteMessage","ngModel"],[1,"modal-footer","align-items-end"],["id","ButtonBack","type","button","data-dismiss","modal",1,"btn","btn-secondary"],["id","AddUserConfirm","type","button","class","btn btn-primary",4,"ngIf"],["id","AddUserConfirm","type","button","class","btn btn-primary","data-dismiss","modal",3,"click",4,"ngIf"],["id","VcUserRemove","tabindex","-1","role","dialog","aria-labelledby","VcUserModalRemoveTitle","aria-hidden","true",1,"modal","fade"],["class","modal-dialog modal-dialog-centered","role","document",4,"ngIf"],["id","SystemGroupModalCreate","tabindex","-1","role","dialog","aria-labelledby","SystemGroupModalCreateTitle","aria-hidden","true",1,"modal","fade"],["class","modal-content",4,"ngIf"],["id","VcGroupRemove","tabindex","-1","role","dialog","aria-labelledby","VcGroupModalRemoveTitle","aria-hidden","true",1,"modal","fade"],["class","modal fade","id","SystemUserDetail","tabindex","-1","role","dialog","aria-labelledby","SystemUserDetailTitle","aria-hidden","true",4,"ngIf"],["id","ViewGroup","type","button",1,"btn","btn-md","btn-light","mx-1",3,"click"],["id","ViewUser","type","button",1,"btn","btn-md","btn-light","mx-1",3,"click"],[1,"row"],[1,"col"],[1,"panel-heading"],["class","col",4,"ngIf"],[1,"panel-body"],[1,"table","table-hover"],["id","UserHead"],["id","SortUser",3,"click"],["id","SortGroup",3,"click"],["id","UserList"],["id","AddUser","type","button","data-toggle","modal","data-target","#VcUserModalCreate",1,"btn","btn-primary","float-right","my-1"],["id","ColUser","data-toggle","modal","data-target","#SystemUserDetail",3,"click"],["id","ColGroup",3,"click"],["id","ColDeleteUser","title","Remove User","data-toggle","modal","data-target","#VcUserRemove",1,"Detail",3,"click"],["id","GroupHead"],[3,"click"],["id","GroupList"],["id","AddGroup","type","button","data-toggle","modal","data-target","#SystemGroupModalCreate",1,"btn","btn-primary","float-right","my-1",3,"click"],["id","ColGroup","data-toggle","modal","data-target","#SystemGroupModalCreate",3,"click"],["id","ColMembers",3,"click"],["id","ColGlobal",4,"ngIf"],["id","ColDetail","title","Detail of Group","data-toggle","modal","data-target","#SystemGroupModalCreate",1,"Detail",3,"click"],["id","ColGlobal"],["id","ColDeleteGroup","title","Remove Group","data-toggle","modal","data-target","#VcGroupRemove",1,"Detail",3,"click"],[1,"help-block"],["id","AddUserConfirm","type","button",1,"btn","btn-primary"],["id","AddUserConfirm","type","button","data-dismiss","modal",1,"btn","btn-primary",3,"click"],["id","VcUserRemoveTitle",1,"modal-title"],[1,"bg-warning"],[1,"form-group"],["for","VcName",1,"col-form-label"],[1,"col-8","form-control-static"],[1,"col-form-label"],["type","button","data-dismiss","modal",1,"btn","btn-secondary"],["id","DeleteUserConfirm","type","button","data-dismiss","modal",1,"btn","btn-warning",3,"click"],["class","modal-title","id","VcGroupModalCenterTitle",4,"ngIf"],["name","actGroup","novalidate",""],["f2","ngForm"],["for","groupName",1,"col-form-label"],["id","AddGroupName","type","text","name","groupName","required","","minlength","3",1,"form-control",3,"ngModel","ngModelChange"],["groupName","ngModel"],[1,"custom-control","custom-checkbox"],["type","checkbox","id","sysperm1","name","checkedSystemView",1,"custom-control-input",3,"ngModel","ngModelChange"],["checkedSystemView","ngModel"],["for","sysperm1",1,"custom-control-label"],["type","checkbox","id","sysperm2","name","checkedSystemViewAudit",1,"custom-control-input",3,"ngModel","ngModelChange"],["checkedSystemViewAudit","ngModel"],["for","sysperm2",1,"custom-control-label"],["type","checkbox","id","sysperm3","name","checkedSystemViewLog",1,"custom-control-input",3,"ngModel","ngModelChange"],["checkedSystemViewLog","ngModel"],["for","sysperm3",1,"custom-control-label"],["type","checkbox","id","sysperm3a","name","checkedSystemModify",1,"custom-control-input",3,"ngModel","ngModelChange"],["checkedSystemModify","ngModel"],["for","sysperm3a",1,"custom-control-label"],["type","checkbox","id","sysperm4","name","checkedSystemCreateVC",1,"custom-control-input",3,"ngModel","ngModelChange"],["checkedSystemCreateVC","ngModel"],["for","sysperm4",1,"custom-control-label"],["type","checkbox","id","sysperm5","name","checkedSystemDeleteVC",1,"custom-control-input",3,"ngModel","ngModelChange"],["checkedSystemDeleteVC","ngModel"],["for","sysperm5",1,"custom-control-label"],["type","checkbox","id","sysperm6","name","checkedSystemManagePerm",1,"custom-control-input",3,"ngModel","ngModelChange"],["checkedSystemManagePerm","ngModel"],["for","sysperm6",1,"custom-control-label"],["type","checkbox","id","global","name","global",1,"custom-control-input",3,"ngModel","ngModelChange"],["global","ngModel"],["for","global",1,"custom-control-label"],["class","mt-2",4,"ngIf"],[1,"modal-footer","align-items-end","mt-3"],["id","AddGroupConfirm","type","button","class","btn btn-primary disabled",4,"ngIf"],["id","AddGroupConfirm","type","button","class","btn btn-primary","data-dismiss","modal",3,"click",4,"ngIf"],["id","VcGroupModalCenterTitle",1,"modal-title"],["type","checkbox","id","perm1","name","checkedView",1,"custom-control-input",3,"ngModel","ngModelChange"],["checkedView","ngModel"],["for","perm1",1,"custom-control-label"],["type","checkbox","id","perm2","name","checkedViewAudit",1,"custom-control-input",3,"ngModel","ngModelChange"],["checkedViewAudit","ngModel"],["for","perm2",1,"custom-control-label"],["type","checkbox","id","perm3","name","checkedModify",1,"custom-control-input",3,"ngModel","ngModelChange"],["checkedModify","ngModel"],["for","perm3",1,"custom-control-label"],["type","checkbox","id","perm4","name","checkedCreateVP",1,"custom-control-input",3,"ngModel","ngModelChange"],["checkedCreateVP","ngModel"],["for","perm4",1,"custom-control-label"],["type","checkbox","id","perm5","name","checkedManagePerm",1,"custom-control-input",3,"ngModel","ngModelChange"],["checkedManagePerm","ngModel"],["for","perm5",1,"custom-control-label"],["type","checkbox","id","permVP1","name","checkedVPView",1,"custom-control-input",3,"ngModel","ngModelChange"],["checkedVPView","ngModel"],["for","permVP1",1,"custom-control-label"],["type","checkbox","id","permVP2","name","checkedVPViewAudit",1,"custom-control-input",3,"ngModel","ngModelChange"],["checkedVPViewAudit","ngModel"],["for","permVP2",1,"custom-control-label"],["type","checkbox","id","permVP3","name","checkedVPModify",1,"custom-control-input",3,"ngModel","ngModelChange"],["checkedVPModify","ngModel"],["for","permVP3",1,"custom-control-label"],["type","checkbox","id","permVP4","name","checkedCreateVariant",1,"custom-control-input",3,"ngModel","ngModelChange"],["checkedCreateVariant","ngModel"],["for","permVP4",1,"custom-control-label"],["type","checkbox","id","permVP5","name","checkedVPManagePerm",1,"custom-control-input",3,"ngModel","ngModelChange"],["checkedVPManagePerm","ngModel"],["for","permVP5",1,"custom-control-label"],["type","checkbox","id","permVP6","name","checkedVPDelete",1,"custom-control-input",3,"ngModel","ngModelChange"],["checkedVPDelete","ngModel"],["for","permVP6",1,"custom-control-label"],[1,"mt-2"],[1,"form-control-static"],["class","row",4,"ngFor","ngForOf"],["class","col-8 ml-3",4,"ngIf"],[1,"col-8","ml-3"],["data-dismiss","modal","data-toggle","modal","data-target","#SystemUserDetail",3,"click"],["id","AddGroupConfirm","type","button",1,"btn","btn-primary","disabled"],["id","AddGroupConfirm","type","button","data-dismiss","modal",1,"btn","btn-primary",3,"click"],["id","DeleteGroupConfirm","type","button","data-dismiss","modal",1,"btn","btn-warning",3,"click"],["id","SystemUserDetail","tabindex","-1","role","dialog","aria-labelledby","SystemUserDetailTitle","aria-hidden","true",1,"modal","fade"],["role","document",1,"modal-dialog","modal-lg","modal-dialog-centered"],["id","SystemUserDetailTitle",1,"modal-title"],["type","checkbox","checked","","disabled","","class","custom-control-input",4,"ngIf"],["type","checkbox","disabled","","class","custom-control-input",4,"ngIf"],[1,"custom-control-label"],["type","checkbox","checked","","disabled","","class","custom-control-input","id","perm1","name","checkedView",4,"ngIf"],["type","checkbox","disabled","","class","custom-control-input","id","perm1","name","checkedView",4,"ngIf"],["type","checkbox","checked","","disabled","","class","custom-control-input","id","perm2","name","checkedView",4,"ngIf"],["type","checkbox","disabled","","class","custom-control-input","id","perm2","name","checkedView",4,"ngIf"],["type","checkbox","checked","","disabled","","class","custom-control-input","id","perm3","name","checkedView",4,"ngIf"],["type","checkbox","disabled","","class","custom-control-input","id","perm3","name","checkedView",4,"ngIf"],["type","checkbox","checked","","disabled","","class","custom-control-input","id","perm4","name","checkedView",4,"ngIf"],["type","checkbox","disabled","","class","custom-control-input","id","perm4","name","checkedView",4,"ngIf"],["type","checkbox","checked","","disabled","","class","custom-control-input","id","perm5","name","checkedView",4,"ngIf"],["type","checkbox","disabled","","class","custom-control-input","id","perm5","name","checkedView",4,"ngIf"],["type","checkbox","checked","","disabled","","class","custom-control-input","id","permVP1","name","checkedView",4,"ngIf"],["type","checkbox","disabled","","class","custom-control-input","id","permVP1","name","checkedView",4,"ngIf"],["type","checkbox","checked","","disabled","","class","custom-control-input","id","permVP2","name","checkedView",4,"ngIf"],["type","checkbox","disabled","","class","custom-control-input","id","permVP2","name","checkedView",4,"ngIf"],["type","checkbox","checked","","disabled","","class","custom-control-input","id","permVP3","name","checkedView",4,"ngIf"],["type","checkbox","disabled","","class","custom-control-input","id","permVP3","name","checkedView",4,"ngIf"],["type","checkbox","checked","","disabled","","class","custom-control-input","id","permVP4","name","checkedView",4,"ngIf"],["type","checkbox","disabled","","class","custom-control-input","id","permVP4","name","checkedView",4,"ngIf"],["type","checkbox","checked","","disabled","","class","custom-control-input","id","permVP5","name","checkedView",4,"ngIf"],["type","checkbox","disabled","","class","custom-control-input","id","permVP5","name","checkedView",4,"ngIf"],["type","checkbox","checked","","disabled","","class","custom-control-input","id","permVP6","name","checkedView",4,"ngIf"],["type","checkbox","disabled","","class","custom-control-input","id","permVP6","name","checkedView",4,"ngIf"],[1,"form-control-static","mt-2"],[1,"form-group","mt-2"],["id","ButtonBack","data-dismiss","modal",1,"btn","btn-primary"],["type","checkbox","checked","","disabled","",1,"custom-control-input"],["type","checkbox","disabled","",1,"custom-control-input"],["type","checkbox","checked","","disabled","","id","perm1","name","checkedView",1,"custom-control-input"],["type","checkbox","disabled","","id","perm1","name","checkedView",1,"custom-control-input"],["type","checkbox","checked","","disabled","","id","perm2","name","checkedView",1,"custom-control-input"],["type","checkbox","disabled","","id","perm2","name","checkedView",1,"custom-control-input"],["type","checkbox","checked","","disabled","","id","perm3","name","checkedView",1,"custom-control-input"],["type","checkbox","disabled","","id","perm3","name","checkedView",1,"custom-control-input"],["type","checkbox","checked","","disabled","","id","perm4","name","checkedView",1,"custom-control-input"],["type","checkbox","disabled","","id","perm4","name","checkedView",1,"custom-control-input"],["type","checkbox","checked","","disabled","","id","perm5","name","checkedView",1,"custom-control-input"],["type","checkbox","disabled","","id","perm5","name","checkedView",1,"custom-control-input"],["type","checkbox","checked","","disabled","","id","permVP1","name","checkedView",1,"custom-control-input"],["type","checkbox","disabled","","id","permVP1","name","checkedView",1,"custom-control-input"],["type","checkbox","checked","","disabled","","id","permVP2","name","checkedView",1,"custom-control-input"],["type","checkbox","disabled","","id","permVP2","name","checkedView",1,"custom-control-input"],["type","checkbox","checked","","disabled","","id","permVP3","name","checkedView",1,"custom-control-input"],["type","checkbox","disabled","","id","permVP3","name","checkedView",1,"custom-control-input"],["type","checkbox","checked","","disabled","","id","permVP4","name","checkedView",1,"custom-control-input"],["type","checkbox","disabled","","id","permVP4","name","checkedView",1,"custom-control-input"],["type","checkbox","checked","","disabled","","id","permVP5","name","checkedView",1,"custom-control-input"],["type","checkbox","disabled","","id","permVP5","name","checkedView",1,"custom-control-input"],["type","checkbox","checked","","disabled","","id","permVP6","name","checkedView",1,"custom-control-input"],["type","checkbox","disabled","","id","permVP6","name","checkedView",1,"custom-control-input"],["data-dismiss","modal","data-toggle","modal","data-target","#SystemGroupModalCreate",3,"click"]],template:function(e,t){1&e&&(io(0,"app-sysnavbar"),Ya(1,WE,55,29,"div",0)),2&e&&(zi(1),Xa("ngIf",t.visbocenter))},directives:[mV,su,Fh,xd,Gh,iu,Ad,Kh,Yh,Td,Nh,rh,ah,dh,au,Wh,Cd],pipes:[ku],styles:[""]}),JE);function $E(e,t){if(1&e){var n=so();to(0,"button",36),uo("click",(function(){return mn(n),fo(2).toggleVisboCenters()})),So(1,"Show Deleted"),no()}}function ZE(e,t){if(1&e){var n=so();to(0,"button",37),uo("click",(function(){return mn(n),fo(2).toggleVisboCenters()})),So(1,"Show Existing"),no()}}function XE(e,t){1&e&&(to(0,"button",38),So(1,"Create New"),no())}function eL(e,t){if(1&e&&(to(0,"div",32),Ya(1,$E,2,0,"button",33),Ya(2,ZE,2,0,"button",34),Ya(3,XE,2,0,"button",35),no()),2&e){var n=fo();zi(1),Xa("ngIf",!n.deleted),zi(1),Xa("ngIf",n.deleted),zi(1),Xa("ngIf",n.hasSystemPerm(n.permSystem.CreateVC))}}function tL(e,t){if(1&e){var n=so();to(0,"tr",39),uo("click",(function(){mn(n);var e=t.$implicit;return fo().gotoClickedRow(e)})),to(1,"td",8),So(2),no(),to(3,"td",40),to(4,"a"),So(5),no(),no(),to(6,"td",41),So(7),qs(8,"date"),no(),to(9,"td",42),So(10),qs(11,"date"),no(),to(12,"td",43),So(13),no(),to(14,"td",44),to(15,"button",45),uo("click",(function(){mn(n);var e=t.$implicit;return fo().gotoDetail(e)})),So(16,"i"),no(),no(),no()}if(2&e){var i=t.$implicit,r=t.index;zi(2),To(r+1),zi(3),To(i.name),zi(2),To(Qs(8,5,i.updatedAt,"dd.MM.yyyy HH:mm")),zi(3),To(Qs(11,8,i.updatedAt,"dd.MM.yy")),zi(3),To(i.vpCount)}}var nL,iL=((nL=function(){function e(t,n,i,r,a){p(this,e),this.visbocenterService=t,this.messageService=n,this.alertService=i,this.route=r,this.router=a,this.combinedPerm=void 0,this.deleted=!1,this.permSystem=cy,this.permVC=uy,this.permVP=dy}return m(e,[{key:"ngOnInit",value:function(){this.log("Init SysVC Deleted: "+this.deleted),this.log("Init GetVisboCenters "+JSON.stringify(this.route.snapshot.queryParams)),this.deleted=!!this.route.snapshot.queryParams.deleted,this.getVisboCenters(this.deleted),this.combinedPerm=this.visbocenterService.getSysAdminRole()}},{key:"toggleVisboCenters",value:function(){this.deleted=!this.deleted,this.log("VC toggleVisboCenters "+this.deleted),this.getVisboCenters(this.deleted),this.router.navigate(["sysvc"],this.deleted?{queryParams:{deleted:this.deleted}}:{})}},{key:"getVisboCenters",value:function(e){var t=this;this.log("VC getVisboCenters ".concat(JSON.stringify(this.combinedPerm)," deleted ").concat(this.deleted)),this.visbocenterService.getVisboCenters(!0,e).subscribe((function(e){t.visbocenters=e,t.sortVCTable(1),t.log("get VCs success")}),(function(e){t.log("get VCs failed: error: ".concat(e.status," message: ").concat(e.error.message)),t.alertService.error(Zv(e))}))}},{key:"getSysVisboCenter",value:function(){var e=this;this.visbocenterService.getSysVisboCenter().subscribe((function(t){t.length>0&&(e.sysvisbocenter=t[0])}))}},{key:"add",value:function(e,t){var n=this;e=e.trim(),t=t.trim(),this.log("VC: Add VC: "+e),e&&this.visbocenterService.addVisboCenter({name:e,description:t}).subscribe((function(e){n.visbocenters.push(e),n.sortVCTable(void 0),n.alertService.success("Visbo Center ".concat(e.name," created successfully"))}),(function(t){n.log("add VC failed: error: ".concat(t.status," message: ").concat(t.error.message)),n.alertService.error(403===t.status?"Permission Denied for Visbo Center "+e:409===t.status?"Visbo Center Name ".concat(e," already exists or not allowed"):Zv(t))}))}},{key:"delete",value:function(e){var t=this;this.messageService.add("VC: Delete VC: ".concat(e.name," ID: ").concat(e._id)),this.visbocenters=this.visbocenters.filter((function(t){return t!==e})),this.visbocenterService.deleteVisboCenter(e).subscribe((function(){t.alertService.success("Deleted Visbo Center: "+e.name,!0)}),(function(e){t.log("delete VC failed: error: "+JSON.stringify(e)),t.alertService.error(403===e.status?"Permission Denied: Visbo Center "+name:Zv(e))}))}},{key:"gotoDetail",value:function(e){var t=!!e.deletedAt;this.log("navigate to VC Detail ".concat(e._id," Deleted ").concat(t)),this.router.navigate(["sysvcDetail/"+e._id],t?{queryParams:{deleted:t}}:{})}},{key:"gotoClickedRow",value:function(e){this.log("clicked row "+e.name),this.hasSystemPerm(this.permVC.View)&&this.router.navigate(["sysvp/"+e._id])}},{key:"hasSystemPerm",value:function(e){return(this.combinedPerm.system&e)>0}},{key:"hasVCPerm",value:function(e){return(this.combinedPerm.vc&e)>0}},{key:"hasVPPerm",value:function(e){return(this.combinedPerm.vp&e)>0}},{key:"sortVCTable",value:function(e){this.visbocenters&&(void 0===e&&void 0!==this.sortColumn||(e!==this.sortColumn&&(this.sortColumn=e,this.sortAscending=void 0),this.sortAscending=void 0===this.sortAscending?1===e:!this.sortAscending),1===this.sortColumn?this.visbocenters.sort((function(e,t){return qv(e.name.toLowerCase(),t.name.toLowerCase())})):2===this.sortColumn?this.visbocenters.sort((function(e,t){return zv(e.updatedAt,t.updatedAt)})):3===this.sortColumn&&this.visbocenters.sort((function(e,t){return e.vpCount-t.vpCount})),this.sortAscending||this.visbocenters.reverse())}},{key:"log",value:function(e){this.messageService.add("Sys VisboCenter: "+e)}}]),e}()).\u0275fac=function(e){return new(e||nL)(Za(my),Za(tf),Za(Zm),Za(sg),Za(Am))},nL.\u0275cmp=wt({type:nL,selectors:[["app-sysvisbocenters"]],decls:49,vars:2,consts:[[1,"well"],[1,"row"],[1,"col"],[1,"panel-heading","ml-0"],["class","btn-group",4,"ngIf"],[1,"panel-body"],[1,"table","table-hover","table-sortable"],["id","VCHead"],[1,"d-none","d-md-table-cell"],["id","SortName",3,"click"],["id","SortDate",1,"d-none","d-sm-table-cell",3,"click"],["id","SortProjects",1,"d-none","d-md-table-cell",3,"click"],["id","VCList"],[3,"click",4,"ngFor","ngForOf"],["id","VcModalCreate","tabindex","-1","role","dialog","aria-labelledby","VcModalCreateTitle","aria-hidden","true",1,"modal","fade"],["role","document",1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header"],["id","VcModalCenterTitle",1,"modal-title"],["type","button","data-dismiss","modal","aria-label","Close",1,"close"],["aria-hidden","true"],[1,"modal-body"],[1,"form-group"],["for","vcName",1,"col-form-label"],["id","CreateVCName","type","text",1,"form-control"],["vcName",""],["for","vcDescription",1,"col-form-label"],["id","CreateVCDesc",1,"form-control"],["vcDescription",""],[1,"modal-footer","align-items-end"],["id","ButtonBack","type","button","data-dismiss","modal",1,"btn","btn-secondary"],["id","CreateVCConfirm","type","button","data-dismiss","modal",1,"btn","btn-primary",3,"click"],[1,"btn-group"],["id","DeletedVC","type","button","class","m-1 btn btn-secondary",3,"click",4,"ngIf"],["id","UnDeletedVC","type","button","class","m-1 btn btn-secondary",3,"click",4,"ngIf"],["id","CreateVC","type","button","class","m-1 btn btn-primary","data-toggle","modal","data-target","#VcModalCreate",4,"ngIf"],["id","DeletedVC","type","button",1,"m-1","btn","btn-secondary",3,"click"],["id","UnDeletedVC","type","button",1,"m-1","btn","btn-secondary",3,"click"],["id","CreateVC","type","button","data-toggle","modal","data-target","#VcModalCreate",1,"m-1","btn","btn-primary"],[3,"click"],["id","ColName"],["id","ColDate",1,"d-none","d-md-table-cell"],["id","ColDate",1,"d-none","d-sm-table-cell","d-md-none"],["id","ColProjects",1,"d-none","d-md-table-cell"],["id","ColDetail"],["title","Detail of Visbo Center",1,"Detail",3,"click"]],template:function(e,t){if(1&e){var n=so();io(0,"app-sysnavbar"),to(1,"div",0),to(2,"div",1),to(3,"div",2),to(4,"h2",3),So(5," Visbo Centers "),no(),no(),Ya(6,eL,4,3,"div",4),no(),to(7,"div",5),to(8,"table",6),to(9,"thead",7),to(10,"tr"),to(11,"th",8),So(12,"Nr."),no(),to(13,"th",9),uo("click",(function(){return t.sortVCTable(1)})),So(14,"Name"),no(),to(15,"th",10),uo("click",(function(){return t.sortVCTable(2)})),So(16,"Modified"),no(),to(17,"th",11),uo("click",(function(){return t.sortVCTable(3)})),So(18,"# Projects"),no(),to(19,"th"),So(20,"Detail"),no(),no(),no(),to(21,"tbody",12),Ya(22,tL,17,11,"tr",13),no(),no(),no(),no(),to(23,"div",14),to(24,"div",15),to(25,"div",16),to(26,"div",17),to(27,"h5",18),So(28,"Create a new Visbo Center"),no(),to(29,"button",19),to(30,"span",20),So(31,"\xd7"),no(),no(),no(),to(32,"div",21),to(33,"form"),to(34,"div",22),to(35,"label",23),So(36,"Name:"),no(),io(37,"input",24,25),no(),to(39,"div",22),to(40,"label",26),So(41,"Description:"),no(),io(42,"textarea",27,28),no(),no(),no(),to(44,"div",29),to(45,"button",30),So(46,"Close"),no(),to(47,"button",31),uo("click",(function(){mn(n);var e=$a(38),i=$a(43);return t.add(e.value,i.value),e.value="",i.value=""})),So(48,"Save"),no(),no(),no(),no(),no()}2&e&&(zi(6),Xa("ngIf",t.hasSystemPerm(t.permSystem.DeleteVC)),zi(16),Xa("ngForOf",t.visbocenters))},directives:[mV,su,au,Fh,xd,Gh],pipes:[Cu],encapsulation:2}),nL);function rL(e,t){if(1&e){var n=so();to(0,"input",63),uo("ngModelChange",(function(e){return mn(n),fo(2).visbocenter.name=e})),no()}2&e&&Xa("ngModel",fo(2).visbocenter.name)}function aL(e,t){if(1&e&&(to(0,"label",64),So(1),no()),2&e){var n=fo(2);zi(1),xo("",n.visbocenter.name," ")}}function oL(e,t){if(1&e){var n=so();to(0,"textarea",65),uo("ngModelChange",(function(e){return mn(n),fo(2).visbocenter.description=e})),no()}2&e&&Xa("ngModel",fo(2).visbocenter.description)}function sL(e,t){if(1&e&&(to(0,"label",66),So(1),no()),2&e){var n=fo(2);zi(1),xo("",n.visbocenter.description," ")}}function lL(e,t){if(1&e){var n=so();to(0,"button",67),uo("click",(function(){mn(n);var e=fo(2);return e.gotoVCAudit(e.visbocenter)})),So(1,"View Audit"),no()}}function cL(e,t){if(1&e){var n=so();to(0,"button",68),uo("click",(function(){return mn(n),fo(2).toggleUserGroup()})),So(1,"Show Groups"),no()}}function uL(e,t){if(1&e){var n=so();to(0,"button",69),uo("click",(function(){return mn(n),fo(2).toggleUserGroup()})),So(1,"Show Users"),no()}}function dL(e,t){1&e&&(to(0,"div",71),to(1,"button",78),So(2,"Add User"),no(),no())}function hL(e,t){1&e&&(to(0,"th"),So(1,"Delete"),no())}function vL(e,t){if(1&e){var n=so();to(0,"td"),to(1,"button",81),uo("click",(function(){mn(n);var e=fo().index;return fo(3).helperUserIndex(e)})),So(2,"\xd7"),no(),no()}}function fL(e,t){if(1&e){var n=so();to(0,"tr"),to(1,"td"),So(2),no(),to(3,"td",79),uo("click",(function(){mn(n);var e=t.index;return fo(3).calcCombinedPerm(e)})),So(4),no(),to(5,"td",80),So(6),no(),Ya(7,vL,3,0,"td",0),no()}if(2&e){var i=t.$implicit,r=t.index,a=fo(3);zi(2),To(r+1),zi(2),To(i.email),zi(2),To(i.groupName),zi(1),Xa("ngIf",!a.deleted&&a.hasVCPerm(a.permVC.ManagePerm))}}function pL(e,t){if(1&e){var n=so();to(0,"div"),to(1,"div"),to(2,"div",70),to(3,"div",71),to(4,"h5",72),So(5," Visbo Center Users "),no(),no(),Ya(6,dL,3,0,"div",73),no(),to(7,"div",74),to(8,"table",75),to(9,"thead",76),to(10,"tr"),to(11,"th"),So(12,"Nr."),no(),to(13,"th",1),uo("click",(function(){return mn(n),fo(2).sortUserTable(1)})),So(14,"e-mail"),no(),to(15,"th",1),uo("click",(function(){return mn(n),fo(2).sortUserTable(2)})),So(16,"Group"),no(),Ya(17,hL,2,0,"th",0),no(),no(),to(18,"tbody",77),Ya(19,fL,8,4,"tr",38),no(),no(),no(),no(),no()}if(2&e){var i=fo(2);zi(6),Xa("ngIf",i.hasVCPerm(i.permVC.ManagePerm)),zi(11),Xa("ngIf",!i.deleted&&i.hasVCPerm(i.permVC.ManagePerm)),zi(2),Xa("ngForOf",i.vgUsers)}}function gL(e,t){1&e&&(to(0,"th"),So(1,"Delete"),no())}function mL(e,t){1&e&&(to(0,"td",88),So(1,"Global"),no())}function bL(e,t){1&e&&io(0,"td",88)}function yL(e,t){if(1&e){var n=so();to(0,"td"),to(1,"button",89),uo("click",(function(){mn(n);var e=fo().index;return fo(3).helperRemoveGroup(e)})),So(2,"\xd7"),no(),no()}}function kL(e,t){if(1&e){var n=so();to(0,"tr"),to(1,"td"),So(2),no(),to(3,"td",84),uo("click",(function(){mn(n);var e=t.index,i=t.$implicit,r=fo(3);return r.groupIndex=e,r.initGroup(i)})),So(4),no(),to(5,"td",85),So(6),no(),Ya(7,mL,2,0,"td",86),Ya(8,bL,1,0,"td",86),Ya(9,yL,3,0,"td",0),to(10,"td"),to(11,"button",87),uo("click",(function(){mn(n);var e=t.$implicit;return fo(3).initGroup(e)})),So(12,"i"),no(),no(),no()}if(2&e){var i=t.$implicit,r=t.index,a=fo(3);zi(2),To(r+1),zi(2),To(i.name),zi(2),To(i.users.length),zi(1),Xa("ngIf",i.global),zi(1),Xa("ngIf",!i.global),zi(1),Xa("ngIf",!a.deleted&&a.hasVCPerm(a.permVC.ManagePerm))}}function CL(e,t){if(1&e){var n=so();to(0,"div"),to(1,"div"),to(2,"div",70),to(3,"div",71),to(4,"h5",72),So(5," Visbo Center Groups "),no(),no(),no(),to(6,"div",74),to(7,"table",75),to(8,"thead",82),to(9,"tr"),to(10,"th"),So(11,"Nr."),no(),to(12,"th",1),uo("click",(function(){return mn(n),fo(2).sortGroupTable(1)})),So(13,"Group"),no(),to(14,"th",1),uo("click",(function(){return mn(n),fo(2).sortGroupTable(2)})),So(15,"Members"),no(),to(16,"th"),So(17,"Flag"),no(),Ya(18,gL,2,0,"th",0),to(19,"th"),So(20,"Info"),no(),no(),no(),to(21,"tbody",83),Ya(22,kL,13,6,"tr",38),no(),no(),no(),no(),no()}if(2&e){var i=fo(2);zi(18),Xa("ngIf",!i.deleted&&i.hasVCPerm(i.permVC.ManagePerm)),zi(4),Xa("ngForOf",i.vgGroups)}}function VL(e,t){if(1&e){var n=so();to(0,"button",90),uo("click",(function(){return mn(n),fo(2).save()})),So(1,"save"),no()}}function wL(e,t){if(1&e){var n=so();to(0,"button",90),uo("click",(function(){return mn(n),fo(2).save()})),So(1,"Restore"),no()}}function AL(e,t){1&e&&(to(0,"button",91),So(1,"Delete!"),no())}function PL(e,t){1&e&&(to(0,"button",92),So(1,"Destroy!"),no())}function DL(e,t){1&e&&(to(0,"div",93),So(1,"E-mail address is required"),no())}function ML(e,t){if(1&e&&(to(0,"option"),So(1),no()),2&e){var n=t.$implicit;zi(1),To(n.name)}}function IL(e,t){1&e&&(to(0,"div",93),So(1,"Group must be defined"),no())}function SL(e,t){1&e&&(to(0,"div",93),So(1,"Error in Message"),no())}function TL(e,t){1&e&&(to(0,"button",94),So(1,"Invite"),no())}function xL(e,t){if(1&e){var n=so();to(0,"button",95),uo("click",(function(){return mn(n),fo(2).addNewVCUser()})),So(1,"Invite"),no()}}function _L(e,t){if(1&e){var n=so();to(0,"div",21),to(1,"div",22),to(2,"div",23),to(3,"h5",96),So(4,"Remove User from Visbo Center"),no(),to(5,"button",25),to(6,"span",26),So(7,"\xd7"),no(),no(),no(),to(8,"div",27),to(9,"div"),to(10,"label",97),So(11,"Do you really want to remove this User from Visbo Center? "),no(),no(),to(12,"form"),to(13,"div",42),to(14,"label",54),So(15,"Visbo Center:"),no(),to(16,"label",55),So(17),no(),no(),to(18,"div",42),to(19,"label",54),So(20,"User:"),no(),to(21,"label",55),So(22),no(),no(),to(23,"div",42),to(24,"label",54),So(25,"Group:"),no(),to(26,"label",55),So(27),no(),no(),no(),no(),to(28,"div",58),to(29,"button",59),So(30,"Close"),no(),to(31,"button",98),uo("click",(function(){mn(n);var e=fo(2);return e.removeVCUser(e.vgUsers[e.userIndex],e.visbocenter._id)})),So(32,"Remove"),no(),no(),no(),no()}if(2&e){var i=fo(2);zi(17),xo("",i.visbocenter.name," "),zi(5),To(i.vgUsers[i.userIndex].email),zi(5),To(i.vgUsers[i.userIndex].groupName)}}function UL(e,t){1&e&&(to(0,"h5",127),So(1,"Modify a Group in the Visbo Center"),no())}function OL(e,t){1&e&&(to(0,"h5",127),So(1,"Add a new Group to the Visbo Center"),no())}function EL(e,t){1&e&&(to(0,"div",93),So(1,"Group Name is required"),no())}function LL(e,t){if(1&e){var n=so();to(0,"div"),to(1,"div"),So(2,"Define Visbo Project Permission"),no(),to(3,"div",104),to(4,"input",128,129),uo("ngModelChange",(function(e){return mn(n),fo(3).actGroup.checkedVPView=e})),no(),to(6,"label",130),So(7,"View Visbo Project"),no(),no(),to(8,"div",104),to(9,"input",131,132),uo("ngModelChange",(function(e){return mn(n),fo(3).actGroup.checkedVPViewAudit=e})),no(),to(11,"label",133),So(12,"View Project Audit"),no(),no(),to(13,"div",104),to(14,"input",134,135),uo("ngModelChange",(function(e){return mn(n),fo(3).actGroup.checkedVPModify=e})),no(),to(16,"label",136),So(17,"Modify Visbo Project"),no(),no(),to(18,"div",104),to(19,"input",137,138),uo("ngModelChange",(function(e){return mn(n),fo(3).actGroup.checkedCreateVariant=e})),no(),to(21,"label",139),So(22,"Create Visbo Project Variant"),no(),no(),to(23,"div",104),to(24,"input",140,141),uo("ngModelChange",(function(e){return mn(n),fo(3).actGroup.checkedVPManagePerm=e})),no(),to(26,"label",142),So(27,"Manage Permissions, Users and Groups"),no(),no(),to(28,"div",104),to(29,"input",143,144),uo("ngModelChange",(function(e){return mn(n),fo(3).actGroup.checkedVPDelete=e})),no(),to(31,"label",145),So(32,"Delete Visbo Project"),no(),no(),no()}if(2&e){var i=fo(3);zi(4),Xa("ngModel",i.actGroup.checkedVPView),zi(5),Xa("ngModel",i.actGroup.checkedVPViewAudit),zi(5),Xa("ngModel",i.actGroup.checkedVPModify),zi(5),Xa("ngModel",i.actGroup.checkedCreateVariant),zi(5),Xa("ngModel",i.actGroup.checkedVPManagePerm),zi(5),Xa("ngModel",i.actGroup.checkedVPDelete)}}function GL(e,t){if(1&e){var n=so();to(0,"div",150),to(1,"a",151),uo("click",(function(){mn(n);var e=fo().$implicit;return fo(4).activateUser(e)})),So(2),no(),no()}if(2&e){var i=fo().$implicit;zi(2),To(i.email)}}function RL(e,t){if(1&e&&(ro(0,70),Ya(1,GL,3,1,"div",149),ao()),2&e){var n=t.$implicit,i=fo(4);zi(1),Xa("ngIf",n.groupName==i.actGroup.name)}}function jL(e,t){if(1&e&&(to(0,"div",146),to(1,"label",147),So(2,"Group Members"),no(),Ya(3,RL,2,1,"ng-container",148),no()),2&e){var n=fo(3);zi(3),Xa("ngForOf",n.vgUsers)}}function NL(e,t){1&e&&(to(0,"div",146),to(1,"label",147),So(2,"No Group Members"),no(),no())}function FL(e,t){if(1&e&&(to(0,"button",152),So(1),no()),2&e){var n=fo(3);zi(1),To(n.confirm)}}function BL(e,t){if(1&e){var n=so();to(0,"button",153),uo("click",(function(){return mn(n),fo(3).addModifyVCGroup()})),So(1),no()}if(2&e){var i=fo(3);zi(1),To(i.confirm)}}var HL=function(e){return{"has-error":e}};function KL(e,t){if(1&e){var n=so();to(0,"div",21),to(1,"div",22),to(2,"div",23),Ya(3,UL,2,0,"h5",99),Ya(4,OL,2,0,"h5",99),to(5,"button",25),to(6,"span",26),So(7,"\xd7"),no(),no(),no(),to(8,"div",27),to(9,"form",100,29),to(11,"div",30),to(12,"label",101),So(13,"Name:"),no(),to(14,"input",102,103),uo("ngModelChange",(function(e){return mn(n),fo(2).actGroup.name=e})),no(),Ya(16,EL,2,0,"div",34),no(),to(17,"div"),So(18,"Define Visbo Center Permission"),no(),to(19,"div",104),to(20,"input",105,106),uo("ngModelChange",(function(e){return mn(n),fo(2).actGroup.checkedView=e})),no(),to(22,"label",107),So(23,"View Visbo Center"),no(),no(),to(24,"div",104),to(25,"input",108,109),uo("ngModelChange",(function(e){return mn(n),fo(2).actGroup.checkedViewAudit=e})),no(),to(27,"label",110),So(28,"View Audit"),no(),no(),to(29,"div",104),to(30,"input",111,112),uo("ngModelChange",(function(e){return mn(n),fo(2).actGroup.checkedModify=e})),no(),to(32,"label",113),So(33,"Modify Visbo Center"),no(),no(),to(34,"div",104),to(35,"input",114,115),uo("ngModelChange",(function(e){return mn(n),fo(2).actGroup.checkedCreateVP=e})),no(),to(37,"label",116),So(38,"Create Visbo Project"),no(),no(),to(39,"div",104),to(40,"input",117,118),uo("ngModelChange",(function(e){return mn(n),fo(2).actGroup.checkedManagePerm=e})),no(),to(42,"label",119),So(43,"Manage Permissions, Users and Groups"),no(),no(),io(44,"br"),to(45,"div",104),to(46,"input",120,121),uo("ngModelChange",(function(e){return mn(n),fo(2).actGroup.global=e})),no(),to(48,"label",122),So(49,"Group has Access to all Visbo Projects"),no(),no(),Ya(50,LL,33,6,"div",0),Ya(51,jL,4,1,"div",123),Ya(52,NL,3,0,"div",123),to(53,"div",124),Ya(54,FL,2,1,"button",125),Ya(55,BL,2,1,"button",126),to(56,"button",45),So(57,"Cancel"),no(),no(),no(),no(),no(),no()}if(2&e){var i=$a(10),r=$a(15);fo();var a=$a(54),o=fo();zi(3),Xa("ngIf",o.actGroup._id),zi(1),Xa("ngIf",!o.actGroup._id),zi(7),Xa("ngClass",Gs(16,HL,i.submitted&&!a.valid)),zi(3),Xa("ngModel",o.actGroup.name),zi(2),Xa("ngIf",i.submitted&&!r.valid),zi(4),Xa("ngModel",o.actGroup.checkedView),zi(5),Xa("ngModel",o.actGroup.checkedViewAudit),zi(5),Xa("ngModel",o.actGroup.checkedModify),zi(5),Xa("ngModel",o.actGroup.checkedCreateVP),zi(5),Xa("ngModel",o.actGroup.checkedManagePerm),zi(6),Xa("ngModel",o.actGroup.global),zi(4),Xa("ngIf",o.actGroup.global),zi(1),Xa("ngIf",o.helperUsersPerGroup(o.actGroup.name)),zi(1),Xa("ngIf",!o.helperUsersPerGroup(o.actGroup.name)),zi(2),Xa("ngIf",!(i.form.valid&&!o.deleted&&o.hasVCPerm(o.permVC.ManagePerm))),zi(1),Xa("ngIf",i.form.valid&&!o.deleted&&o.hasVCPerm(o.permVC.ManagePerm))}}function qL(e,t){if(1&e){var n=so();to(0,"div",21),to(1,"div",22),to(2,"div",23),to(3,"h5",96),So(4,"Remove Group from Visbo Center"),no(),to(5,"button",25),to(6,"span",26),So(7,"\xd7"),no(),no(),no(),to(8,"div",27),to(9,"div"),to(10,"label",97),So(11,"Do you really want to remove this Group from Visbo Center? "),no(),no(),to(12,"form"),to(13,"div",42),to(14,"label",54),So(15,"Visbo Center:"),no(),to(16,"label",55),So(17),no(),no(),to(18,"div",42),to(19,"label",54),So(20,"Group:"),no(),to(21,"label",55),So(22),no(),no(),to(23,"div",42),to(24,"label",54),So(25,"Members:"),no(),to(26,"label",55),So(27),no(),no(),no(),no(),to(28,"div",58),to(29,"button",45),So(30,"Close"),no(),to(31,"button",154),uo("click",(function(){mn(n);var e=fo(2);return e.removeVCGroup(e.vgGroups[e.groupIndex])})),So(32,"Remove"),no(),no(),no(),no()}if(2&e){var i=fo(2);zi(17),xo("",i.visbocenter.name," "),zi(5),To(i.vgGroups[i.groupIndex].name),zi(5),To(i.vgGroups[i.groupIndex].users.length)}}function zL(e,t){1&e&&(to(0,"label",97),So(1,"Do you really want to delete this Visbo Center? "),no())}function QL(e,t){1&e&&(to(0,"label",155),So(1,"Do you really want to destroy this Visbo Center? "),no())}function WL(e,t){if(1&e){var n=so();to(0,"button",156),uo("click",(function(){mn(n);var e=fo(2);return e.delete(e.visbocenter)})),So(1,"Delete"),no()}}function JL(e,t){if(1&e){var n=so();to(0,"button",157),uo("click",(function(){mn(n);var e=fo(2);return e.delete(e.visbocenter)})),So(1,"Destroy"),no()}}function YL(e,t){1&e&&io(0,"input",185)}function $L(e,t){1&e&&io(0,"input",186)}function ZL(e,t){1&e&&io(0,"input",187)}function XL(e,t){1&e&&io(0,"input",188)}function eG(e,t){1&e&&io(0,"input",189)}function tG(e,t){1&e&&io(0,"input",190)}function nG(e,t){1&e&&io(0,"input",191)}function iG(e,t){1&e&&io(0,"input",192)}function rG(e,t){1&e&&io(0,"input",193)}function aG(e,t){1&e&&io(0,"input",194)}function oG(e,t){1&e&&io(0,"input",195)}function sG(e,t){1&e&&io(0,"input",196)}function lG(e,t){1&e&&io(0,"input",197)}function cG(e,t){1&e&&io(0,"input",198)}function uG(e,t){1&e&&io(0,"input",199)}function dG(e,t){1&e&&io(0,"input",200)}function hG(e,t){1&e&&io(0,"input",201)}function vG(e,t){1&e&&io(0,"input",202)}function fG(e,t){1&e&&io(0,"input",203)}function pG(e,t){1&e&&io(0,"input",204)}function gG(e,t){1&e&&io(0,"input",205)}function mG(e,t){1&e&&io(0,"input",206)}function bG(e,t){if(1&e){var n=so();to(0,"div",150),to(1,"a",207),uo("click",(function(){mn(n);var e=fo().$implicit;return fo(3).activateGroup(e)})),So(2),no(),no()}if(2&e){var i=fo().$implicit;zi(2),To(i.groupName)}}function yG(e,t){if(1&e&&(ro(0,70),Ya(1,bG,3,1,"div",149),ao()),2&e){var n=t.$implicit,i=fo(3);zi(1),Xa("ngIf",n.email==i.vgUsers[i.userIndex].email)}}function kG(e,t){if(1&e&&(to(0,"div",158),to(1,"div",159),to(2,"div",22),to(3,"div",23),to(4,"h5",160),So(5),no(),to(6,"button",25),to(7,"span",26),So(8,"\xd7"),no(),no(),no(),to(9,"div",27),to(10,"div",146),So(11,"Visbo Center Permission for User"),no(),to(12,"div",104),Ya(13,YL,1,0,"input",161),Ya(14,$L,1,0,"input",162),to(15,"label",107),So(16,"View Visbo Center"),no(),no(),to(17,"div",104),Ya(18,ZL,1,0,"input",163),Ya(19,XL,1,0,"input",164),to(20,"label",110),So(21,"View Audit"),no(),no(),to(22,"div",104),Ya(23,eG,1,0,"input",165),Ya(24,tG,1,0,"input",166),to(25,"label",113),So(26,"Modify Visbo Center"),no(),no(),to(27,"div",104),Ya(28,nG,1,0,"input",167),Ya(29,iG,1,0,"input",168),to(30,"label",116),So(31,"Create Visbo Project"),no(),no(),to(32,"div",104),Ya(33,rG,1,0,"input",169),Ya(34,aG,1,0,"input",170),to(35,"label",119),So(36,"Manage Permissions, Users and Groups"),no(),no(),io(37,"br"),to(38,"div"),So(39,"Visbo Project Permission for User"),no(),to(40,"div",104),Ya(41,oG,1,0,"input",171),Ya(42,sG,1,0,"input",172),to(43,"label",130),So(44,"View Visbo Project"),no(),no(),to(45,"div",104),Ya(46,lG,1,0,"input",173),Ya(47,cG,1,0,"input",174),to(48,"label",133),So(49,"View Project Audit"),no(),no(),to(50,"div",104),Ya(51,uG,1,0,"input",175),Ya(52,dG,1,0,"input",176),to(53,"label",136),So(54,"Modify Visbo Project"),no(),no(),to(55,"div",104),Ya(56,hG,1,0,"input",177),Ya(57,vG,1,0,"input",178),to(58,"label",139),So(59,"Create Visbo Project Variant"),no(),no(),to(60,"div",104),Ya(61,fG,1,0,"input",179),Ya(62,pG,1,0,"input",180),to(63,"label",142),So(64,"Manage Permissions, Users and Groups"),no(),no(),to(65,"div",104),Ya(66,gG,1,0,"input",181),Ya(67,mG,1,0,"input",182),to(68,"label",145),So(69,"Delete Visbo Project"),no(),no(),to(70,"label",183),So(71,"Group Member Ship"),no(),Ya(72,yG,2,1,"ng-container",148),to(73,"div",124),to(74,"button",184),So(75,"Close"),no(),no(),no(),no(),no(),no()),2&e){var n=fo(2);zi(5),xo("Permission for ",n.vgUsers[n.userIndex].email,""),zi(8),Xa("ngIf",n.hasUserVCPerm(n.permVC.View)),zi(1),Xa("ngIf",!n.hasUserVCPerm(n.permVC.View)),zi(4),Xa("ngIf",n.hasUserVCPerm(n.permVC.ViewAudit)),zi(1),Xa("ngIf",!n.hasUserVCPerm(n.permVC.ViewAudit)),zi(4),Xa("ngIf",n.hasUserVCPerm(n.permVC.Modify)),zi(1),Xa("ngIf",!n.hasUserVCPerm(n.permVC.Modify)),zi(4),Xa("ngIf",n.hasUserVCPerm(n.permVC.CreateVP)),zi(1),Xa("ngIf",!n.hasUserVCPerm(n.permVC.CreateVP)),zi(4),Xa("ngIf",n.hasUserVCPerm(n.permVC.ManagePerm)),zi(1),Xa("ngIf",!n.hasUserVCPerm(n.permVC.ManagePerm)),zi(7),Xa("ngIf",n.hasUserVPPerm(n.permVP.View)),zi(1),Xa("ngIf",!n.hasUserVPPerm(n.permVP.View)),zi(4),Xa("ngIf",n.hasUserVPPerm(n.permVP.ViewAudit)),zi(1),Xa("ngIf",!n.hasUserVPPerm(n.permVP.ViewAudit)),zi(4),Xa("ngIf",n.hasUserVPPerm(n.permVP.Modify)),zi(1),Xa("ngIf",!n.hasUserVPPerm(n.permVP.Modify)),zi(4),Xa("ngIf",n.hasUserVPPerm(n.permVP.CreateVariant)),zi(1),Xa("ngIf",!n.hasUserVPPerm(n.permVP.CreateVariant)),zi(4),Xa("ngIf",n.hasUserVPPerm(n.permVP.ManagePerm)),zi(1),Xa("ngIf",!n.hasUserVPPerm(n.permVP.ManagePerm)),zi(4),Xa("ngIf",n.hasUserVPPerm(n.permVP.DeleteVP)),zi(1),Xa("ngIf",!n.hasUserVPPerm(n.permVP.DeleteVP)),zi(5),Xa("ngForOf",n.vgUsers)}}function CG(e,t){if(1&e){var n=so();to(0,"div"),to(1,"h3"),So(2,"Visbo Center: "),to(3,"a",1),uo("click",(function(){mn(n);var e=fo();return e.gotoVPList(e.visbocenter)})),So(4),qs(5,"uppercase"),no(),no(),to(6,"form"),to(7,"div",2),to(8,"label",3),So(9,"Name:"),no(),Ya(10,rL,1,1,"input",4),Ya(11,aL,2,1,"label",5),no(),to(12,"div",2),to(13,"label",6),So(14,"Description:"),no(),Ya(15,oL,1,1,"textarea",7),Ya(16,sL,2,1,"label",8),no(),to(17,"div",2),to(18,"label",9),So(19,"Created / Updated at:"),no(),to(20,"label",10),So(21),qs(22,"date"),no(),to(23,"label",11),So(24),qs(25,"date"),no(),no(),no(),to(26,"div",12),Ya(27,lL,2,0,"button",13),Ya(28,cL,2,0,"button",14),Ya(29,uL,2,0,"button",15),no(),Ya(30,pL,20,3,"div",0),Ya(31,CL,23,2,"div",0),Ya(32,VL,2,0,"button",16),Ya(33,wL,2,0,"button",16),to(34,"button",17),uo("click",(function(){return mn(n),fo().goBack()})),So(35,"go back"),no(),Ya(36,AL,2,0,"button",18),Ya(37,PL,2,0,"button",19),to(38,"div",20),to(39,"div",21),to(40,"div",22),to(41,"div",23),to(42,"h5",24),So(43,"Add a new User to the Visbo Center"),no(),to(44,"button",25),to(45,"span",26),So(46,"\xd7"),no(),no(),no(),to(47,"div",27),to(48,"form",28,29),to(50,"div",30),to(51,"label",31),So(52,"Name:"),no(),to(53,"input",32,33),uo("ngModelChange",(function(e){return mn(n),fo().newUserInvite.email=e})),no(),Ya(55,DL,2,0,"div",34),no(),to(56,"div",30),to(57,"label",35),So(58,"Group:"),no(),to(59,"select",36,37),uo("ngModelChange",(function(e){return mn(n),fo().newUserInvite.groupName=e})),io(61,"option"),Ya(62,ML,2,1,"option",38),no(),Ya(63,IL,2,0,"div",34),no(),to(64,"div",30),to(65,"label",39),So(66,"Message:"),no(),to(67,"textarea",40,41),uo("ngModelChange",(function(e){return mn(n),fo().newUserInvite.inviteMessage=e})),So(69," "),no(),no(),Ya(70,SL,2,0,"div",34),to(71,"div",42),Ya(72,TL,2,0,"button",43),Ya(73,xL,2,0,"button",44),to(74,"button",45),So(75,"Cancel"),no(),no(),no(),no(),no(),no(),no(),to(76,"div",46),Ya(77,_L,33,3,"div",47),no(),to(78,"div",48),Ya(79,KL,58,18,"div",47),no(),to(80,"div",49),Ya(81,qL,33,3,"div",47),no(),to(82,"div",50),to(83,"div",21),to(84,"div",22),to(85,"div",23),to(86,"h5",51),So(87,"Delete this Visbo Center"),no(),to(88,"button",25),to(89,"span",26),So(90,"\xd7"),no(),no(),no(),to(91,"div",27),to(92,"div"),Ya(93,zL,2,0,"label",52),Ya(94,QL,2,0,"label",53),no(),to(95,"form"),to(96,"div",42),to(97,"label",54),So(98,"Name:"),no(),to(99,"label",55),So(100),no(),no(),to(101,"div",42),to(102,"label",56),So(103,"Description:"),no(),to(104,"label",55),So(105),no(),no(),to(106,"div",42),to(107,"label",57),So(108,"Projects:"),no(),to(109,"label",55),So(110),no(),no(),no(),no(),to(111,"div",58),to(112,"button",59),So(113,"Close"),no(),Ya(114,WL,2,0,"button",60),Ya(115,JL,2,0,"button",61),no(),no(),no(),no(),Ya(116,kG,76,24,"div",62),no()}if(2&e){var i=$a(49),r=$a(54),a=$a(60),o=$a(68),s=fo();zi(4),To(zs(5,39,s.visbocenter.name)),zi(6),Xa("ngIf",s.hasVCPerm(s.permVC.Modify)),zi(1),Xa("ngIf",!s.hasVCPerm(s.permVC.Modify)),zi(4),Xa("ngIf",s.hasVCPerm(s.permVC.Modify)),zi(1),Xa("ngIf",!s.hasVCPerm(s.permVC.Modify)),zi(5),xo("",Qs(22,41,s.visbocenter.createdAt,"dd.MM.yyyy HH:mm:ss")," "),zi(3),xo("",Qs(25,44,s.visbocenter.updatedAt,"dd.MM.yyyy HH:mm:ss")," "),zi(3),Xa("ngIf",s.hasVCPerm(s.permVC.ViewAudit)),zi(1),Xa("ngIf",!s.showGroups),zi(1),Xa("ngIf",s.showGroups),zi(1),Xa("ngIf",!s.showGroups),zi(1),Xa("ngIf",s.showGroups),zi(1),Xa("ngIf",!s.deleted&&s.hasVCPerm(s.permVC.Modify)),zi(1),Xa("ngIf",s.deleted&&s.hasSystemPerm(s.permSystem.DeleteVC)),zi(3),Xa("ngIf",!s.deleted&&s.hasSystemPerm(s.permSystem.DeleteVC)),zi(1),Xa("ngIf",s.deleted&&s.hasSystemPerm(s.permSystem.DeleteVC)),zi(13),Xa("ngClass",Gs(47,HL,i.submitted&&!r.valid)),zi(3),Xa("ngModel",s.newUserInvite.email),zi(2),Xa("ngIf",i.submitted&&!r.valid),zi(1),Xa("ngClass",Gs(49,HL,i.submitted&&!a.valid)),zi(3),Xa("ngModel",s.newUserInvite.groupName),zi(3),Xa("ngForOf",s.vgGroups),zi(1),Xa("ngIf",i.submitted&&!a.valid),zi(1),Xa("ngClass",Gs(51,HL,i.submitted&&!o.valid)),zi(3),Xa("ngModel",s.newUserInvite.inviteMessage),zi(3),Xa("ngIf",i.submitted&&!o.valid),zi(2),Xa("ngIf",!(r.valid&&a.valid)),zi(1),Xa("ngIf",r.valid&&a.valid),zi(4),Xa("ngIf",s.userIndex>=0&&s.userIndex<s.vgUsers.length),zi(2),Xa("ngIf",s.actGroup),zi(2),Xa("ngIf",s.groupIndex>=0&&s.groupIndex<s.vgGroups.length),zi(12),Xa("ngIf",!s.deleted),zi(1),Xa("ngIf",s.deleted),zi(6),xo("",s.visbocenter.name," "),zi(5),xo("",s.visbocenter.description," "),zi(5),xo("",s.visbocenter.vpCount," "),zi(4),Xa("ngIf",!s.deleted),zi(1),Xa("ngIf",s.deleted),zi(1),Xa("ngIf",s.vgUsers&&s.userIndex>=0)}}var VG,wG=((VG=function(){function e(t,n,i,r,a,o){p(this,e),this.messageService=t,this.visbocenterService=n,this.route=i,this.location=r,this.router=a,this.alertService=o,this.newUserInvite=new pf,this.permSystem=cy,this.permVC=uy,this.permVP=dy,this.deleted=!1,this.sortUserColumn=1,this.sortUserAscending=!0,this.sortGroupColumn=1,this.sortGroupAscending=!0}return m(e,[{key:"ngOnInit",value:function(){this.log("SysVisboCenter Init: "+JSON.stringify(this.visbocenter)),this.deleted=!!this.route.snapshot.queryParams.deleted,this.getVisboCenter(),this.getVisboCenterUsers(),this.combinedPerm=this.visbocenterService.getSysAdminRole()}},{key:"getVisboCenter",value:function(){var e=this,t=this.route.snapshot.paramMap.get("id");this.log("VisboCenter Detail of: ".concat(t," Deleted ").concat(this.deleted)),this.visbocenterService.getVisboCenter(t,!0,this.deleted).subscribe((function(t){e.visbocenter=t,e.combinedPerm=t.perm}),(function(t){e.log("Get VC failed: error: ".concat(t.status," message: ").concat(t.error.message)),e.alertService.error(403===t.status?"Permission Denied":Zv(t))}))}},{key:"hasSystemPerm",value:function(e){return(this.combinedPerm.system&e)>0}},{key:"hasVCPerm",value:function(e){return(this.combinedPerm.vc&e)>0}},{key:"hasVPPerm",value:function(e){return(this.combinedPerm.vp&e)>0}},{key:"hasUserVCPerm",value:function(e){return void 0!==this.combinedUserPerm&&(this.combinedUserPerm.vc&e)>0}},{key:"hasUserVPPerm",value:function(e){return void 0!==this.combinedUserPerm&&(this.combinedUserPerm.vp&e)>0}},{key:"getVisboCenterUsers",value:function(){var e=this,t=this.route.snapshot.paramMap.get("id");this.log("VisboCenter UserList of ".concat(t," Deleted ").concat(this.deleted)),this.visbocenterService.getVCUsers(t,!0,this.deleted).subscribe((function(t){e.vgUsers=t.users,e.vgGroups=t.groups,e.log("fetched Users ".concat(e.vgUsers.length,", Groups ").concat(e.vgGroups.length)),e.sortUserTable(),e.sortGroupTable()}),(function(t){e.log("Get VC Users failed: error: ".concat(t.status," message: ").concat(t.error.message)),e.alertService.error(403===t.status?"Permission Denied":Zv(t))}))}},{key:"gotoVCAudit",value:function(e){this.log("GoTo VC Audit ".concat(e.name," ").concat(this.visbocenter.name));var t=this.deleted?{sysadmin:1,deleted:1}:{sysadmin:1};this.log("GoTo VC Audit ".concat(e.name," ").concat(this.visbocenter.name," ").concat(JSON.stringify(t))),this.router.navigate(["vcAudit/".concat(e._id)],{queryParams:t})}},{key:"gotoVPList",value:function(e){this.log("GoTo VP List "+JSON.stringify(this.combinedPerm)),this.hasVPPerm(this.permVP.View)&&this.router.navigate(["sysvp/".concat(e._id)])}},{key:"goBack",value:function(){this.location.back()}},{key:"save",value:function(){var e=this;this.log("PUT VC: ".concat(this.visbocenter.name," ID: ").concat(this.visbocenter._id," Deleted: ").concat(this.deleted)),this.visbocenterService.updateVisboCenter(this.visbocenter,!0,this.deleted).subscribe((function(t){e.alertService.success("Visbo Center ".concat(t.name," updated successfully"),!0),e.goBack()}),(function(t){e.log("save VC failed: error: ".concat(t.status," message: ").concat(t.error.message," ")),e.alertService.error(403===t.status?"Permission Denied: Visbo Center "+e.visbocenter.name:409===t.status?"Visbo Center ".concat(e.visbocenter.name," exists already"):Zv(t))}))}},{key:"delete",value:function(e){var t=this;this.log("Delete VC: ".concat(e.name," ID: ").concat(e._id," Deleted: ").concat(this.deleted)),this.visbocenterService.deleteVisboCenter(e,!0,this.deleted).subscribe((function(){t.alertService.success("Visbo Center ".concat(e.name," deleted successfully"),!0),t.deleted?t.router.navigate(["sysvc"]):t.goBack()}),(function(n){t.log("delete VC failed: error: ".concat(n.status," message: ").concat(n.error.message)),t.alertService.error(403===n.status?"Permission Denied: Visbo Center "+e.name:Zv(n))}))}},{key:"toggleUserGroup",value:function(){this.showGroups=!this.showGroups}},{key:"addNewVCUser",value:function(){var e=this,t=this.newUserInvite.email.trim(),n=this.newUserInvite.groupName.trim(),i=this.vgGroups.filter((function(e){return e.name===n}))[0]._id,r=this.visbocenter._id,a="";this.newUserInvite.inviteMessage&&(a=this.newUserInvite.inviteMessage.trim()),this.log("Add VisboCenter User: ".concat(t," Group: ").concat(n,"/").concat(i," VC: ").concat(r)),t&&i&&this.visbocenterService.addVCUser(t,i,a,r,!0).subscribe((function(n){var i=new fy;i.userId=n.users.filter((function(e){return e.email===t}))[0].userId,i.email=t,i.groupId=n._id,i.groupName=n.name,e.log("Add VisboCenter User Push: "+JSON.stringify(i)),e.vgUsers.push(i),e.sortUserTable();for(var r=0;r<e.vgGroups.length;r++)if(e.vgGroups[r]._id===n._id){e.vgGroups[r]=n;break}e.alertService.success("User ".concat(t," added successfully"))}),(function(t){e.log("Add VisboCenter User error: "+t.error.message),403===t.status?e.alertService.error("Permission Denied: Add User to Visbo Center"):(e.log("Error during add VC user "+t.error.message),e.alertService.error(Zv(t)))}))}},{key:"helperUserIndex",value:function(e){this.userIndex=e}},{key:"calcCombinedPerm",value:function(e){this.userIndex=e,this.combinedUserPerm={system:0,vc:0,vp:0},this.vgUsers.forEach(this.addUserPerm,this),this.log("Combined Permission for ".concat(this.vgUsers[e].email,"  ").concat(JSON.stringify(this.combinedUserPerm)))}},{key:"addUserPerm",value:function(e){if(e.email===this.vgUsers[this.userIndex].email){this.log("Add User Permission for "+e.groupName);var t=this.vgGroups.findIndex((function(t){return t.name===e.groupName}));t>=0?this.vgGroups[t].permission?(this.combinedUserPerm.system=this.combinedUserPerm.system|(this.vgGroups[t].permission.system||0),this.combinedUserPerm.vc=this.combinedUserPerm.vc|(this.vgGroups[t].permission.vc||0),this.combinedUserPerm.vp=this.combinedUserPerm.vp|(this.vgGroups[t].permission.vp||0)):this.log("Permission for Group not set "+e.groupName):this.log("Group not found "+e.groupName)}}},{key:"helperRemoveGroup",value:function(e){this.groupIndex=e}},{key:"helperUsersPerGroup",value:function(e){var t=this.vgGroups&&this.vgGroups.find((function(t){return t.name===e}));return t?t.users.length:0}},{key:"removeVCUser",value:function(e,t){var n=this;this.log("Remove VisboCenter User: ".concat(e.email,"/").concat(e.userId," Group: ").concat(e.groupName," VC: ").concat(t)),this.visbocenterService.deleteVCUser(e,t,!0).subscribe((function(){n.vgUsers=n.vgUsers.filter((function(t){return t!==e}));for(var t=0;t<n.vgGroups.length;t++)if(n.vgGroups[t]._id===e.groupId){for(var i=0;i<n.vgGroups[t].users.length;i++)if(n.vgGroups[t].users[i].userId===e.userId){n.vgGroups[t].users.splice(i,1);break}break}n.alertService.success("User ".concat(e.email," removed successfully"))}),(function(e){n.log("Remove VisboCenter User error: "+e.error.message),403===e.status?n.alertService.error("Permission Denied: Remove User from Visbo Center"):(n.log("Error during remove VC user "+e.error.message),n.alertService.error(Zv(e)))}))}},{key:"helperVCPerm",value:function(e){var t=0;return e.checkedView&&(t+=this.permVC.View),e.checkedViewAudit&&(t+=this.permVC.ViewAudit),e.checkedModify&&(t+=this.permVC.Modify),e.checkedCreateVP&&(t+=this.permVC.CreateVP),e.checkedManagePerm&&(t+=this.permVC.ManagePerm),t}},{key:"helperVPPerm",value:function(e){var t=0;return e.checkedVPView&&(t+=this.permVP.View),e.checkedVPViewAudit&&(t+=this.permVP.ViewAudit),e.checkedVPModify&&(t+=this.permVP.Modify),e.checkedCreateVariant&&(t+=this.permVP.CreateVariant),e.checkedVPManagePerm&&(t+=this.permVP.ManagePerm),e.checkedVPDelete&&(t+=this.permVP.DeleteVP),t}},{key:"activateGroup",value:function(e){this.log("Activate Group : "+e.groupName);var t=this.vgGroups.find((function(t){return t.name==e.groupName}));this.initGroup(t)}},{key:"activateUser",value:function(e){this.log("Activate User : "+e.email);var t=this.vgUsers.findIndex((function(t){return t.email==e.email}));t>=0&&this.calcCombinedPerm(t)}},{key:"initGroup",value:function(e){this.actGroup=new vy,e?(this.confirm="Modify",this.actGroup._id=e._id,this.log("Init Group Set GroupID : ".concat(this.actGroup._id," ID ").concat(e._id)),this.actGroup.name=e.name,this.actGroup.global=e.global,this.actGroup.checkedView=(e.permission.vc&this.permVC.View)>0,this.actGroup.checkedViewAudit=(e.permission.vc&this.permVC.ViewAudit)>0,this.actGroup.checkedModify=(e.permission.vc&this.permVC.Modify)>0,this.actGroup.checkedCreateVP=(e.permission.vc&this.permVC.CreateVP)>0,this.actGroup.checkedManagePerm=(e.permission.vc&this.permVC.ManagePerm)>0,this.actGroup.checkedVPView=(e.permission.vp&this.permVP.View)>0,this.actGroup.checkedVPViewAudit=(e.permission.vp&this.permVP.ViewAudit)>0,this.actGroup.checkedVPModify=(e.permission.vp&this.permVP.Modify)>0,this.actGroup.checkedCreateVariant=(e.permission.vp&this.permVP.CreateVariant)>0,this.actGroup.checkedVPManagePerm=(e.permission.vp&this.permVP.ManagePerm)>0,this.actGroup.checkedVPDelete=(e.permission.vp&this.permVP.DeleteVP)>0):(this.confirm="Add",this.actGroup._id=void 0,this.actGroup.name="",this.actGroup.global=!1,this.actGroup.checkedView=!0),this.log("Init Group for Creation / Modification: ".concat(this.actGroup.name," ID ").concat(this.actGroup._id))}},{key:"addModifyVCGroup",value:function(){var e=this,t=new hy;t.name=this.actGroup.name.trim(),t.global=this.actGroup.global,t.vcid=this.visbocenter._id,t.permission=new ly,t.permission.vc=this.helperVCPerm(this.actGroup),t.permission.vp=this.helperVPPerm(this.actGroup),this.log("Add/Modify VisboCenter Group: Group: ".concat(t.name," New/Modify ").concat(this.actGroup._id)),this.actGroup._id?(this.log("Modify VisboCenter Group: Group: ".concat(t.name," VC: ").concat(t.vcid," Perm: vc ").concat(t.permission.vc," vp ").concat(t.permission.vp)),t._id=this.actGroup._id,this.visbocenterService.modifyVCGroup(t,!0).subscribe((function(n){e.vgGroups=e.vgGroups.filter((function(e){return e._id!==t._id})),e.vgGroups.push(n);for(var i=0;i<e.vgUsers.length;i++)e.vgUsers[i].groupId===t._id&&(e.vgUsers[i].groupName=n.name);e.sortUserTable(),e.sortGroupTable(),e.alertService.success("Group ".concat(n.name," changed successfully"))}),(function(t){e.log("Modify VisboCenter Group error: "+t.error.message),403===t.status?e.alertService.error("Permission Denied: Modify Group to Visbo Center"):(e.log("Error during add VC Group "+t.error.message),e.alertService.error(Zv(t)))}))):(this.log("Add VisboCenter Group: Group: ".concat(t.name," VC: ").concat(t.vcid," Perm: vc ").concat(t.permission.vc," vp ").concat(t.permission.vp)),this.visbocenterService.addVCGroup(t,!0).subscribe((function(t){e.vgGroups.push(t),e.alertService.success("Group ".concat(t.name," added successfully"))}),(function(t){e.log("Add VisboCenter Group error: "+t.error.message),403===t.status?e.alertService.error("Permission Denied: Add Group to Visbo Center"):(e.log("Error during add VC Group "+t.error.message),e.alertService.error(Zv(t)))})))}},{key:"removeVCGroup",value:function(e){var t=this;this.log("Remove VisboCenter Group: ".concat(e.name,"/").concat(e._id," VC: ").concat(e.vcid)),this.visbocenterService.deleteVCGroup(e,!0).subscribe((function(n){t.log("Remove VisboCenter Group result: "+JSON.stringify(n)),t.vgGroups=t.vgGroups.filter((function(t){return t!==e})),t.vgUsers=t.vgUsers.filter((function(t){return t.groupId!==e._id})),t.alertService.success("Group ".concat(e.name," removed successfully"))}),(function(e){t.log("Remove VisboCenter Group error: "+e.error.message),403===e.status?t.alertService.error("Permission Denied: Remove Group from Visbo Center"):(t.log("Error during remove VC user "+e.error.message),t.alertService.error(Zv(e)))}))}},{key:"sortUserTable",value:function(e){this.vgUsers&&(void 0===e&&void 0!==this.sortUserColumn||(e!==this.sortUserColumn&&(this.sortUserColumn=e,this.sortUserAscending=void 0),this.sortUserAscending=void 0===this.sortUserAscending?1===e||2===e:!this.sortUserAscending),1===this.sortUserColumn?this.vgUsers.sort((function(e,t){return qv(e.email,t.email)})):2===this.sortUserColumn&&this.vgUsers.sort((function(e,t){return qv(e.groupName.toLowerCase(),t.groupName.toLowerCase())})),this.sortUserAscending||this.vgUsers.reverse())}},{key:"sortGroupTable",value:function(e){this.vgGroups&&(void 0===e&&void 0!==this.sortGroupColumn||(e!==this.sortGroupColumn&&(this.sortGroupColumn=e,this.sortGroupAscending=void 0),this.sortGroupAscending=void 0===this.sortGroupAscending?1===e:!this.sortGroupAscending),1===this.sortGroupColumn?this.vgGroups.sort((function(e,t){return qv(e.name.toLowerCase(),t.name.toLowerCase())})):2===this.sortGroupColumn&&this.vgGroups.sort((function(e,t){return t.users.length-e.users.length})),this.sortGroupAscending||this.vgGroups.reverse())}},{key:"log",value:function(e){this.messageService.add("Sys VisboCenter Details: "+e)}}]),e}()).\u0275fac=function(e){return new(e||VG)(Za(tf),Za(my),Za(sg),Za(mc),Za(Am),Za(Zm))},VG.\u0275cmp=wt({type:VG,selectors:[["app-sysvisbocenter-detail"]],inputs:{visbocenter:"visbocenter"},decls:2,vars:1,consts:[[4,"ngIf"],[3,"click"],[1,"form-group","row"],["for","vcName",1,"col-4","col-md-3","col-form-label"],["id","VCName","type","text","name","vcName","class","col-sm-8 form-control","placeholder","Name",3,"ngModel","ngModelChange",4,"ngIf"],["id","VCName","class","col-8 form-control-static",4,"ngIf"],["for","vcDescription",1,"col-4","col-md-3","col-form-label"],["id","VCDesc","name","vcDescription","class","col-8 form-control","placeholder","Type in your description",3,"ngModel","ngModelChange",4,"ngIf"],["id","VCDesc","class","col-8 form-control-static",4,"ngIf"],["for","Created",1,"col-4","col-md-3","col-form-label"],["id","VCCreated",1,"col","form-control-static","col-form-label"],["id","VCUpdated",1,"col","form-control-static","col-form-label"],[1,"btn-toolbar"],["id","ViewAudit","type","button","class","btn btn-md btn-light mx-1",3,"click",4,"ngIf"],["id","ViewGroup","type","button","class","btn btn-md btn-light mx-1",3,"click",4,"ngIf"],["id","ViewUser","type","button","class","btn btn-md btn-light mx-1",3,"click",4,"ngIf"],["id","Save","class","btn btn-primary mx-1",3,"click",4,"ngIf"],["id","Save",1,"btn","btn-secondary","mx-1",3,"click"],["id","DeleteVC","class","btn btn-md mx-1 bg-warning","style","float: right","title","Delete Visbo Center","data-toggle","modal","data-target","#VcDelete",4,"ngIf"],["id","DestroyVC","class","btn btn-md mx-1 bg-danger text-white","style","float: right","title","Destroy Visbo Center","data-toggle","modal","data-target","#VcDelete",4,"ngIf"],["id","VcUserModalCreate","tabindex","-1","role","dialog","aria-labelledby","VcUserModalCreateTitle","aria-hidden","true",1,"modal","fade"],["role","document",1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header"],["id","VcUserModalCenterTitle",1,"modal-title"],["type","button","data-dismiss","modal","aria-label","Close",1,"close"],["aria-hidden","true"],[1,"modal-body"],["name","newUserInvite","novalidate",""],["f","ngForm"],[1,"form-group",3,"ngClass"],["for","email",1,"col-form-label"],["id","AddUserName","type","email","name","email","required","","pattern","[^@\\s]+@[^@\\s]+\\.[^@\\s]+","autocomplete","email",1,"form-control",3,"ngModel","ngModelChange"],["email","ngModel"],["class","help-block",4,"ngIf"],["for","group",1,"col-form-label"],["id","AddUserGroupName","name","group","required","",1,"form-control",3,"ngModel","ngModelChange"],["group","ngModel"],[4,"ngFor","ngForOf"],["for","inviteMessage",1,"col-form-label"],["id","AddUserMessage","name","inviteMessage",1,"form-control",3,"ngModel","ngModelChange"],["inviteMessage","ngModel"],[1,"form-group"],["id","AddUserConfirm","type","submit","class","btn btn-primary mx-1",4,"ngIf"],["id","AddUserConfirm","type","submit","class","btn btn-primary mx-1","data-dismiss","modal",3,"click",4,"ngIf"],["id","ButtonBack","type","button","data-dismiss","modal",1,"btn","btn-secondary","mx-1"],["id","VcUserRemove","tabindex","-1","role","dialog","aria-labelledby","VcUserModalRemoveTitle","aria-hidden","true",1,"modal","fade"],["class","modal-dialog modal-dialog-centered","role","document",4,"ngIf"],["id","VcGroupModalCreate","tabindex","-1","role","dialog","aria-labelledby","VcGroupModalCreateTitle","aria-hidden","true",1,"modal","fade"],["id","VcGroupRemove","tabindex","-1","role","dialog","aria-labelledby","VcGroupModalRemoveTitle","aria-hidden","true",1,"modal","fade"],["id","VcDelete","tabindex","-1","role","dialog","aria-labelledby","Delete Visbo Center","aria-hidden","true",1,"modal","fade"],["id","VcDeleteTitle",1,"modal-title"],["class","bg-warning",4,"ngIf"],["class","bg-danger text-white",4,"ngIf"],[1,"col-form-label"],[1,"col-8","form-control-static"],["for","VcDescription",1,"col-form-label"],["for","VcProjects",1,"col-form-label"],[1,"modal-footer","align-items-end"],["type","button","data-dismiss","modal",1,"btn","btn-secondary","mx-1"],["id","DeleteVCConfirm","type","button","class","btn btn-warning text-white mx-1","data-dismiss","modal",3,"click",4,"ngIf"],["id","DeleteVCConfirm","type","button","class","btn btn-danger text-white mx-1","data-dismiss","modal",3,"click",4,"ngIf"],["class","modal fade","id","VCUserDetail","tabindex","-1","role","dialog","aria-labelledby","VCUserDetailTitle","aria-hidden","true",4,"ngIf"],["id","VCName","type","text","name","vcName","placeholder","Name",1,"col-sm-8","form-control",3,"ngModel","ngModelChange"],["id","VCName",1,"col-8","form-control-static"],["id","VCDesc","name","vcDescription","placeholder","Type in your description",1,"col-8","form-control",3,"ngModel","ngModelChange"],["id","VCDesc",1,"col-8","form-control-static"],["id","ViewAudit","type","button",1,"btn","btn-md","btn-light","mx-1",3,"click"],["id","ViewGroup","type","button",1,"btn","btn-md","btn-light","mx-1",3,"click"],["id","ViewUser","type","button",1,"btn","btn-md","btn-light","mx-1",3,"click"],[1,"row"],[1,"col"],[1,"panel-heading"],["class","col",4,"ngIf"],[1,"panel-body"],[1,"table","table-hover"],["id","UserHead"],["id","UserList"],["id","AddUser","type","button","data-toggle","modal","data-target","#VcUserModalCreate",1,"btn","btn-primary","float-right","my-1"],["id","ColUser","data-toggle","modal","data-target","#VCUserDetail",3,"click"],["id","ColGroup"],["id","ColDeleteUser","title","Remove User","data-toggle","modal","data-target","#VcUserRemove",1,"Detail",3,"click"],["id","GroupHead"],["id","GroupList"],["id","ColGroup","data-toggle","modal","data-target","#VcGroupModalCreate",3,"click"],["id","ColMembers"],["id","ColGlobal",4,"ngIf"],["id","ColDetail","title","Detail of Group","data-toggle","modal","data-target","#VcGroupModalCreate",1,"Detail",3,"click"],["id","ColGlobal"],["id","ColDeleteGroup","title","Remove Group","data-toggle","modal","data-target","#VcGroupRemove",1,"Detail",3,"click"],["id","Save",1,"btn","btn-primary","mx-1",3,"click"],["id","DeleteVC","title","Delete Visbo Center","data-toggle","modal","data-target","#VcDelete",1,"btn","btn-md","mx-1","bg-warning",2,"float","right"],["id","DestroyVC","title","Destroy Visbo Center","data-toggle","modal","data-target","#VcDelete",1,"btn","btn-md","mx-1","bg-danger","text-white",2,"float","right"],[1,"help-block"],["id","AddUserConfirm","type","submit",1,"btn","btn-primary","mx-1"],["id","AddUserConfirm","type","submit","data-dismiss","modal",1,"btn","btn-primary","mx-1",3,"click"],["id","VcUserRemoveTitle",1,"modal-title"],[1,"bg-warning"],["id","DeleteUserConfirm","type","button","data-dismiss","modal",1,"btn","btn-warning","mx-1",3,"click"],["class","modal-title","id","VcGroupModalCenterTitle",4,"ngIf"],["name","actGroup","novalidate",""],["for","name",1,"col-form-label"],["id","AddGroupName","type","text","name","name","required","",1,"form-control",3,"ngModel","ngModelChange"],["name","ngModel"],[1,"custom-control","custom-checkbox"],["type","checkbox","id","perm1","name","checkedView",1,"custom-control-input",3,"ngModel","ngModelChange"],["checkedView","ngModel"],["for","perm1",1,"custom-control-label"],["type","checkbox","id","perm2","name","checkedViewAudit",1,"custom-control-input",3,"ngModel","ngModelChange"],["checkedViewAudit","ngModel"],["for","perm2",1,"custom-control-label"],["type","checkbox","id","perm3","name","checkedModify",1,"custom-control-input",3,"ngModel","ngModelChange"],["checkedModify","ngModel"],["for","perm3",1,"custom-control-label"],["type","checkbox","id","perm4","name","checkedCreateVP",1,"custom-control-input",3,"ngModel","ngModelChange"],["checkedCreateVP","ngModel"],["for","perm4",1,"custom-control-label"],["type","checkbox","id","perm5","name","checkedManagePerm",1,"custom-control-input",3,"ngModel","ngModelChange"],["checkedManagePerm","ngModel"],["for","perm5",1,"custom-control-label"],["type","checkbox","id","global","name","global",1,"custom-control-input",3,"ngModel","ngModelChange"],["global","ngModel"],["for","global",1,"custom-control-label"],["class","mt-2",4,"ngIf"],[1,"form-group","mt-2"],["id","AddGroupConfirm","type","submit","class","btn btn-primary disabled mx-1",4,"ngIf"],["id","AddGroupConfirm","type","submit","class","btn btn-primary mx-1","data-dismiss","modal",3,"click",4,"ngIf"],["id","VcGroupModalCenterTitle",1,"modal-title"],["type","checkbox","id","permVP1","name","checkedVPView",1,"custom-control-input",3,"ngModel","ngModelChange"],["checkedVPView","ngModel"],["for","permVP1",1,"custom-control-label"],["type","checkbox","id","permVP2","name","checkedVPViewAudit",1,"custom-control-input",3,"ngModel","ngModelChange"],["checkedVPViewAudit","ngModel"],["for","permVP2",1,"custom-control-label"],["type","checkbox","id","permVP3","name","checkedVPModify",1,"custom-control-input",3,"ngModel","ngModelChange"],["checkedVPModify","ngModel"],["for","permVP3",1,"custom-control-label"],["type","checkbox","id","permVP4","name","checkedCreateVariant",1,"custom-control-input",3,"ngModel","ngModelChange"],["checkedCreateVariant","ngModel"],["for","permVP4",1,"custom-control-label"],["type","checkbox","id","permVP5","name","checkedVPManagePerm",1,"custom-control-input",3,"ngModel","ngModelChange"],["checkedVPManagePerm","ngModel"],["for","permVP5",1,"custom-control-label"],["type","checkbox","id","permVP6","name","checkedVPDelete",1,"custom-control-input",3,"ngModel","ngModelChange"],["checkedVPDelete","ngModel"],["for","permVP6",1,"custom-control-label"],[1,"mt-2"],[1,"form-control-static"],["class","row",4,"ngFor","ngForOf"],["class","col-8 ml-3",4,"ngIf"],[1,"col-8","ml-3"],["data-dismiss","modal","data-toggle","modal","data-target","#VCUserDetail",3,"click"],["id","AddGroupConfirm","type","submit",1,"btn","btn-primary","disabled","mx-1"],["id","AddGroupConfirm","type","submit","data-dismiss","modal",1,"btn","btn-primary","mx-1",3,"click"],["id","DeleteGroupConfirm","type","button","data-dismiss","modal",1,"btn","btn-warning","mx-1",3,"click"],[1,"bg-danger","text-white"],["id","DeleteVCConfirm","type","button","data-dismiss","modal",1,"btn","btn-warning","text-white","mx-1",3,"click"],["id","DeleteVCConfirm","type","button","data-dismiss","modal",1,"btn","btn-danger","text-white","mx-1",3,"click"],["id","VCUserDetail","tabindex","-1","role","dialog","aria-labelledby","VCUserDetailTitle","aria-hidden","true",1,"modal","fade"],["role","document",1,"modal-dialog","modal-lg","modal-dialog-centered"],["id","VCUserDetailTitle",1,"modal-title"],["type","checkbox","checked","","disabled","","class","custom-control-input","id","perm1","name","checkedView",4,"ngIf"],["type","checkbox","disabled","","class","custom-control-input","id","perm1","name","checkedView",4,"ngIf"],["type","checkbox","checked","","disabled","","class","custom-control-input","id","perm2","name","checkedView",4,"ngIf"],["type","checkbox","disabled","","class","custom-control-input","id","perm2","name","checkedView",4,"ngIf"],["type","checkbox","checked","","disabled","","class","custom-control-input","id","perm3","name","checkedView",4,"ngIf"],["type","checkbox","disabled","","class","custom-control-input","id","perm3","name","checkedView",4,"ngIf"],["type","checkbox","checked","","disabled","","class","custom-control-input","id","perm4","name","checkedView",4,"ngIf"],["type","checkbox","disabled","","class","custom-control-input","id","perm4","name","checkedView",4,"ngIf"],["type","checkbox","checked","","disabled","","class","custom-control-input","id","perm5","name","checkedView",4,"ngIf"],["type","checkbox","disabled","","class","custom-control-input","id","perm5","name","checkedView",4,"ngIf"],["type","checkbox","checked","","disabled","","class","custom-control-input","id","permVP1","name","checkedView",4,"ngIf"],["type","checkbox","disabled","","class","custom-control-input","id","permVP1","name","checkedView",4,"ngIf"],["type","checkbox","checked","","disabled","","class","custom-control-input","id","permVP2","name","checkedView",4,"ngIf"],["type","checkbox","disabled","","class","custom-control-input","id","permVP2","name","checkedView",4,"ngIf"],["type","checkbox","checked","","disabled","","class","custom-control-input","id","permVP3","name","checkedView",4,"ngIf"],["type","checkbox","disabled","","class","custom-control-input","id","permVP3","name","checkedView",4,"ngIf"],["type","checkbox","checked","","disabled","","class","custom-control-input","id","permVP4","name","checkedView",4,"ngIf"],["type","checkbox","disabled","","class","custom-control-input","id","permVP4","name","checkedView",4,"ngIf"],["type","checkbox","checked","","disabled","","class","custom-control-input","id","permVP5","name","checkedView",4,"ngIf"],["type","checkbox","disabled","","class","custom-control-input","id","permVP5","name","checkedView",4,"ngIf"],["type","checkbox","checked","","disabled","","class","custom-control-input","id","permVP6","name","checkedView",4,"ngIf"],["type","checkbox","disabled","","class","custom-control-input","id","permVP6","name","checkedView",4,"ngIf"],[1,"form-control-static","mt-2"],["id","ButtonBack","data-dismiss","modal",1,"btn","btn-primary"],["type","checkbox","checked","","disabled","","id","perm1","name","checkedView",1,"custom-control-input"],["type","checkbox","disabled","","id","perm1","name","checkedView",1,"custom-control-input"],["type","checkbox","checked","","disabled","","id","perm2","name","checkedView",1,"custom-control-input"],["type","checkbox","disabled","","id","perm2","name","checkedView",1,"custom-control-input"],["type","checkbox","checked","","disabled","","id","perm3","name","checkedView",1,"custom-control-input"],["type","checkbox","disabled","","id","perm3","name","checkedView",1,"custom-control-input"],["type","checkbox","checked","","disabled","","id","perm4","name","checkedView",1,"custom-control-input"],["type","checkbox","disabled","","id","perm4","name","checkedView",1,"custom-control-input"],["type","checkbox","checked","","disabled","","id","perm5","name","checkedView",1,"custom-control-input"],["type","checkbox","disabled","","id","perm5","name","checkedView",1,"custom-control-input"],["type","checkbox","checked","","disabled","","id","permVP1","name","checkedView",1,"custom-control-input"],["type","checkbox","disabled","","id","permVP1","name","checkedView",1,"custom-control-input"],["type","checkbox","checked","","disabled","","id","permVP2","name","checkedView",1,"custom-control-input"],["type","checkbox","disabled","","id","permVP2","name","checkedView",1,"custom-control-input"],["type","checkbox","checked","","disabled","","id","permVP3","name","checkedView",1,"custom-control-input"],["type","checkbox","disabled","","id","permVP3","name","checkedView",1,"custom-control-input"],["type","checkbox","checked","","disabled","","id","permVP4","name","checkedView",1,"custom-control-input"],["type","checkbox","disabled","","id","permVP4","name","checkedView",1,"custom-control-input"],["type","checkbox","checked","","disabled","","id","permVP5","name","checkedView",1,"custom-control-input"],["type","checkbox","disabled","","id","permVP5","name","checkedView",1,"custom-control-input"],["type","checkbox","checked","","disabled","","id","permVP6","name","checkedView",1,"custom-control-input"],["type","checkbox","disabled","","id","permVP6","name","checkedView",1,"custom-control-input"],["data-dismiss","modal","data-toggle","modal","data-target","#VcGroupModalCreate",3,"click"]],template:function(e,t){1&e&&(io(0,"app-sysnavbar"),Ya(1,CG,117,53,"div",0)),2&e&&(zi(1),Xa("ngIf",t.visbocenter))},directives:[mV,su,Fh,xd,Gh,iu,Ad,Kh,Yh,Td,Nh,rh,ah,dh,au,Cd],pipes:[ku,Cu],styles:[""]}),VG);function AG(e,t){1&e&&(to(0,"h2"),So(1," Projects "),no())}function PG(e,t){if(1&e){var n=so();to(0,"h2"),So(1," Projects in: "),to(2,"a",15),uo("click",(function(){mn(n);var e=fo();return e.gotoVCDetail(e.vcActive)})),So(3),no(),no()}if(2&e){var i=fo();zi(3),To(i.vcActive.name)}}function DG(e,t){if(1&e&&(to(0,"td",24),So(1),no()),2&e){var n=fo().$implicit;zi(1),To(n.vc.name)}}function MG(e,t){1&e&&io(0,"td",24)}function IG(e,t){if(1&e){var n=so();to(0,"tr",15),uo("click",(function(){mn(n);var e=t.$implicit;return fo().gotoClickedRow(e)})),to(1,"td",7),So(2),no(),to(3,"td",16),uo("click",(function(){mn(n);var e=t.$implicit;return fo().gotoDetail(e)})),to(4,"a"),So(5),no(),no(),to(6,"td",17),So(7),no(),to(8,"td",18),So(9),qs(10,"date"),no(),to(11,"td",19),So(12),qs(13,"date"),no(),to(14,"td",20),So(15),no(),Ya(16,DG,2,1,"td",21),Ya(17,MG,1,0,"td",21),to(18,"td",22),to(19,"button",23),uo("click",(function(){mn(n);var e=t.$implicit;return fo().gotoDetail(e)})),So(20,"i"),no(),no(),no()}if(2&e){var i=t.$implicit,r=t.index,a=fo();zi(2),To(r+1),zi(3),To(i.name),zi(2),To(a.getVPType(i.vpType)),zi(2),To(Qs(10,8,i.updatedAt,"dd.MM.yyyy HH:mm")),zi(3),To(Qs(13,11,i.updatedAt,"dd.MM.yy")),zi(3),To(i.vpvCount),zi(1),Xa("ngIf",i.vc),zi(1),Xa("ngIf",!i.vc)}}var SG,TG=((SG=function(){function e(t,n,i,r,a,o,s){p(this,e),this.messageService=t,this.alertService=n,this.visboprojectService=i,this.visbocenterService=r,this.route=a,this.router=o,this.translate=s,this.combinedPerm=void 0,this.permVC=uy,this.permVP=dy}return m(e,[{key:"ngOnInit",value:function(){this.getVisboProjects(),this.combinedPerm=this.visbocenterService.getSysAdminRole()}},{key:"getVisboProjects",value:function(){var e=this;this.log("VP getSysVisboProjects SysAdminRole "+JSON.stringify(this.combinedPerm));var t=this.route.snapshot.paramMap.get("id");this.vcSelected=t,t?this.visbocenterService.getVisboCenter(t,!0).subscribe((function(n){e.vcActive=n,e.combinedPerm=n.perm,e.log("Get VisboProject for VC ".concat(t," Perm ").concat(JSON.stringify(e.combinedPerm))),e.combinedPerm.vp&e.permVP.View?e.visboprojectService.getVisboProjects(t,!0).subscribe((function(t){e.visboprojects=t,e.sortVPTable(1)}),(function(t){e.log("get VPs failed: error:  ".concat(t.status," message: ").concat(t.error.message)),e.alertService.error(Zv(t))})):e.visboprojects=[]}),(function(t){e.log("get VC failed: error:  ".concat(t.status," message: ").concat(t.error.message)),e.alertService.error(Zv(t))})):(this.vcSelected=null,this.vcActive=null,this.visboprojectService.getVisboProjects(null,!0).subscribe((function(t){e.visboprojects=t,e.sortVPTable(1)}),(function(t){e.log("get VPs all failed: error:  ".concat(t.status," message: ").concat(t.error.message)),e.alertService.error(Zv(t))})))}},{key:"getVPType",value:function(e){return this.translate.instant("vp.type.vpType"+e)}},{key:"gotoClickedRow",value:function(e){this.log("clicked row "+e.name)}},{key:"gotoDetail",value:function(e){this.router.navigate(["sysvpDetail/".concat(e._id)])}},{key:"gotoVCDetail",value:function(e){this.router.navigate(["sysvcDetail/".concat(e._id)])}},{key:"sortVPTable",value:function(e){this.visboprojects&&(void 0!==e&&(e!==this.sortColumn&&(this.sortColumn=e,this.sortAscending=void 0),this.sortAscending=void 0===this.sortAscending?1===e||3===e:!this.sortAscending),1===this.sortColumn?this.visboprojects.sort((function(e,t){return qv(e.name.toLowerCase(),t.name.toLowerCase())})):2===this.sortColumn?this.visboprojects.sort((function(e,t){return zv(e.updatedAt,t.updatedAt)})):3===this.sortColumn?this.visboprojects.sort((function(e,t){return qv(e.vc.name.toLowerCase(),t.vc.name.toLowerCase())})):4===this.sortColumn&&this.visboprojects.sort((function(e,t){return e.vpvCount-t.vpvCount})),this.sortAscending||this.visboprojects.reverse())}},{key:"log",value:function(e){this.messageService.add("VisboProject: "+e)}}]),e}()).\u0275fac=function(e){return new(e||SG)(Za(tf),Za(Zm),Za(dk),Za(my),Za(sg),Za(Am),Za(Rb))},SG.\u0275cmp=wt({type:SG,selectors:[["app-sysvisboprojects"]],decls:26,vars:3,consts:[[1,"well"],[1,"row"],[1,"col"],[4,"ngIf"],[1,"panel-body"],[1,"table","table-hover","table-sortable"],["id","VPHead"],[1,"d-none","d-md-table-cell"],["id","SortName",3,"click"],["id","SortType"],["id","SortDate",1,"d-none","d-sm-table-cell",3,"click"],["id","SortVersions",1,"d-none","d-md-table-cell",3,"click"],["id","SortVC",1,"d-none","d-lg-table-cell",3,"click"],["id","VPList"],[3,"click",4,"ngFor","ngForOf"],[3,"click"],["id","ColName",3,"click"],["id","ColType",1,"d-none","d-md-table-cell"],["id","ColDate",1,"d-none","d-lg-table-cell"],["id","ColDate",1,"d-none","d-md-table-cell","d-lg-none"],["id","ColVersions",1,"d-none","d-md-table-cell"],["id","ColVC","class","d-none d-lg-table-cell",4,"ngIf"],["id","ColDetail"],["title","Detail of Visbo Project",1,"Detail",3,"click"],["id","ColVC",1,"d-none","d-lg-table-cell"]],template:function(e,t){1&e&&(io(0,"app-sysnavbar"),to(1,"div",0),to(2,"div",1),to(3,"div",2),Ya(4,AG,2,0,"h2",3),Ya(5,PG,4,1,"h2",3),no(),no(),to(6,"div",4),to(7,"table",5),to(8,"thead",6),to(9,"tr"),to(10,"th",7),So(11,"Nr."),no(),to(12,"th",8),uo("click",(function(){return t.sortVPTable(1)})),So(13,"Name"),no(),to(14,"th",9),So(15,"Type"),no(),to(16,"th",10),uo("click",(function(){return t.sortVPTable(2)})),So(17,"Modified"),no(),to(18,"th",11),uo("click",(function(){return t.sortVPTable(4)})),So(19,"# Versions"),no(),to(20,"th",12),uo("click",(function(){return t.sortVPTable(3)})),So(21,"Visbo Center"),no(),to(22,"th"),So(23,"Info"),no(),no(),no(),to(24,"tbody",13),Ya(25,IG,21,14,"tr",14),no(),no(),no(),no()),2&e&&(zi(4),Xa("ngIf",!t.vcActive),zi(1),Xa("ngIf",t.vcActive),zi(20),Xa("ngForOf",t.visboprojects))},directives:[mV,su,au],pipes:[Cu],encapsulation:2}),SG);function xG(e,t){if(1&e){var n=so();to(0,"button",17),uo("click",(function(){mn(n);var e=fo(2);return e.gotoVPAudit(e.visboproject)})),So(1,"View Audit"),no()}}function _G(e,t){if(1&e){var n=so();to(0,"button",18),uo("click",(function(){return mn(n),fo(2).toggleUserGroup()})),So(1,"Show Groups"),no()}}function UG(e,t){if(1&e){var n=so();to(0,"button",19),uo("click",(function(){return mn(n),fo(2).toggleUserGroup()})),So(1,"Show Users"),no()}}function OG(e,t){if(1&e){var n=so();to(0,"tr"),to(1,"td"),So(2),no(),to(3,"td",28),uo("click",(function(){mn(n);var e=t.index;return fo(3).calcCombinedPerm(e)})),So(4),no(),to(5,"td",29),So(6),no(),no()}if(2&e){var i=t.$implicit,r=t.index;zi(2),To(r+1),zi(2),To(i.email),zi(2),To(i.groupName)}}function EG(e,t){if(1&e){var n=so();to(0,"div"),to(1,"div"),to(2,"div",20),to(3,"div",21),to(4,"h5",22),So(5," Visbo Project Users "),no(),no(),no(),to(6,"div",23),to(7,"table",24),to(8,"thead",25),to(9,"tr"),to(10,"th"),So(11,"Nr."),no(),to(12,"th",2),uo("click",(function(){return mn(n),fo(2).sortUserTable(1)})),So(13,"e-mail"),no(),to(14,"th",2),uo("click",(function(){return mn(n),fo(2).sortUserTable(2)})),So(15,"Group"),no(),no(),no(),to(16,"tbody",26),Ya(17,OG,7,3,"tr",27),no(),no(),no(),no(),no()}if(2&e){var i=fo(2);zi(17),Xa("ngForOf",i.vgUsers)}}function LG(e,t){1&e&&(to(0,"td",35),So(1,"Global"),no())}function GG(e,t){1&e&&io(0,"td",35)}function RG(e,t){if(1&e){var n=so();to(0,"tr"),to(1,"td"),So(2),no(),to(3,"td",29),So(4),no(),to(5,"td",32),So(6),no(),Ya(7,LG,2,0,"td",33),Ya(8,GG,1,0,"td",33),to(9,"td"),to(10,"button",34),uo("click",(function(){mn(n);var e=t.$implicit;return fo(3).initGroup(e)})),So(11,"i"),no(),no(),no()}if(2&e){var i=t.$implicit,r=t.index;zi(2),To(r+1),zi(2),To(i.name),zi(2),To(i.users.length),zi(1),Xa("ngIf",i.global),zi(1),Xa("ngIf",!i.global)}}function jG(e,t){if(1&e){var n=so();to(0,"div"),to(1,"div"),to(2,"div",20),to(3,"div",21),to(4,"h5",22),So(5," Visbo Project Groups "),no(),no(),no(),to(6,"div",23),to(7,"table",24),to(8,"thead",30),to(9,"tr"),to(10,"th"),So(11,"Nr."),no(),to(12,"th",2),uo("click",(function(){return mn(n),fo(2).sortGroupTable(1)})),So(13,"Group"),no(),to(14,"th",2),uo("click",(function(){return mn(n),fo(2).sortGroupTable(2)})),So(15,"Members"),no(),to(16,"th"),So(17,"Flag"),no(),to(18,"th"),So(19,"Info"),no(),no(),no(),to(20,"tbody",31),Ya(21,RG,12,5,"tr",27),no(),no(),no(),no(),no()}if(2&e){var i=fo(2);zi(21),Xa("ngForOf",i.vgGroups)}}function NG(e,t){1&e&&(to(0,"h5",73),So(1,"Modify a Group in the Visbo Center"),no())}function FG(e,t){1&e&&(to(0,"h5",73),So(1,"Add a new Group to the Visbo Center"),no())}function BG(e,t){1&e&&(to(0,"div",74),So(1,"Group Name is required"),no())}function HG(e,t){if(1&e){var n=so();to(0,"div",79),to(1,"a",80),uo("click",(function(){mn(n);var e=fo().$implicit;return fo(4).activateUser(e)})),So(2),no(),no()}if(2&e){var i=fo().$implicit;zi(2),To(i.email)}}function KG(e,t){if(1&e&&(ro(0,20),Ya(1,HG,3,1,"div",78),ao()),2&e){var n=t.$implicit,i=fo(4);zi(1),Xa("ngIf",n.groupName==i.actGroup.name)}}function qG(e,t){if(1&e&&(to(0,"div",75),to(1,"label",76),So(2,"Group Members"),no(),Ya(3,KG,2,1,"ng-container",77),no()),2&e){var n=fo(3);zi(3),Xa("ngForOf",n.vgUsers)}}function zG(e,t){1&e&&(to(0,"div",75),to(1,"label",76),So(2,"No Group Members"),no(),no())}var QG=function(e){return{"has-error":e}};function WG(e,t){if(1&e){var n=so();to(0,"div",36),to(1,"div",37),to(2,"div",38),to(3,"div",39),Ya(4,NG,2,0,"h5",40),Ya(5,FG,2,0,"h5",40),to(6,"button",41),to(7,"span",42),So(8,"\xd7"),no(),no(),no(),to(9,"div",43),to(10,"form",44,45),to(12,"div",46),to(13,"label",47),So(14,"Name:"),no(),to(15,"input",48,49),uo("ngModelChange",(function(e){return mn(n),fo(2).actGroup.name=e})),no(),Ya(17,BG,2,0,"div",50),no(),to(18,"div"),to(19,"div"),So(20,"Define Visbo Project Permission"),no(),to(21,"div",51),to(22,"input",52,53),uo("ngModelChange",(function(e){return mn(n),fo(2).actGroup.checkedVPView=e})),no(),to(24,"label",54),So(25,"View Visbo Project"),no(),no(),to(26,"div",51),to(27,"input",55,56),uo("ngModelChange",(function(e){return mn(n),fo(2).actGroup.checkedVPViewAudit=e})),no(),to(29,"label",57),So(30,"View Project Audit"),no(),no(),to(31,"div",51),to(32,"input",58,59),uo("ngModelChange",(function(e){return mn(n),fo(2).actGroup.checkedVPModify=e})),no(),to(34,"label",60),So(35,"Modify Visbo Project"),no(),no(),to(36,"div",51),to(37,"input",61,62),uo("ngModelChange",(function(e){return mn(n),fo(2).actGroup.checkedCreateVariant=e})),no(),to(39,"label",63),So(40,"Create Visbo Project Variant"),no(),no(),to(41,"div",51),to(42,"input",64,65),uo("ngModelChange",(function(e){return mn(n),fo(2).actGroup.checkedVPManagePerm=e})),no(),to(44,"label",66),So(45,"Manage Permissions, Users and Groups"),no(),no(),to(46,"div",51),to(47,"input",67,68),uo("ngModelChange",(function(e){return mn(n),fo(2).actGroup.checkedVPDelete=e})),no(),to(49,"label",69),So(50,"Delete Visbo Project"),no(),no(),no(),Ya(51,qG,4,1,"div",70),Ya(52,zG,3,0,"div",70),to(53,"div",71),to(54,"button",72),So(55,"Cancel"),no(),no(),no(),no(),no(),no(),no()}if(2&e){var i=$a(11),r=$a(16),a=fo(2);zi(4),Xa("ngIf",a.actGroup._id),zi(1),Xa("ngIf",!a.actGroup._id),zi(7),Xa("ngClass",Gs(13,QG,i.submitted&&!r.valid)),zi(3),Xa("ngModel",a.actGroup.name),zi(2),Xa("ngIf",i.submitted&&!r.valid),zi(5),Xa("ngModel",a.actGroup.checkedVPView),zi(5),Xa("ngModel",a.actGroup.checkedVPViewAudit),zi(5),Xa("ngModel",a.actGroup.checkedVPModify),zi(5),Xa("ngModel",a.actGroup.checkedCreateVariant),zi(5),Xa("ngModel",a.actGroup.checkedVPManagePerm),zi(5),Xa("ngModel",a.actGroup.checkedVPDelete),zi(4),Xa("ngIf",a.helperUsersPerGroup(a.actGroup.name)),zi(1),Xa("ngIf",!a.helperUsersPerGroup(a.actGroup.name))}}function JG(e,t){1&e&&io(0,"input",99)}function YG(e,t){1&e&&io(0,"input",100)}function $G(e,t){1&e&&io(0,"input",101)}function ZG(e,t){1&e&&io(0,"input",102)}function XG(e,t){1&e&&io(0,"input",103)}function eR(e,t){1&e&&io(0,"input",104)}function tR(e,t){1&e&&io(0,"input",105)}function nR(e,t){1&e&&io(0,"input",106)}function iR(e,t){1&e&&io(0,"input",107)}function rR(e,t){1&e&&io(0,"input",108)}function aR(e,t){1&e&&io(0,"input",109)}function oR(e,t){1&e&&io(0,"input",110)}function sR(e,t){if(1&e){var n=so();to(0,"div",79),to(1,"a",111),uo("click",(function(){mn(n);var e=fo().$implicit;return fo(3).activateGroup(e)})),So(2),no(),no()}if(2&e){var i=fo().$implicit;zi(2),To(i.groupName)}}function lR(e,t){if(1&e&&(ro(0,20),Ya(1,sR,3,1,"div",78),ao()),2&e){var n=t.$implicit,i=fo(3);zi(1),Xa("ngIf",n.email==i.vgUsers[i.userIndex].email)}}function cR(e,t){if(1&e&&(to(0,"div",81),to(1,"div",82),to(2,"div",38),to(3,"div",39),to(4,"h5",83),So(5),no(),to(6,"button",41),to(7,"span",42),So(8,"\xd7"),no(),no(),no(),to(9,"div",43),to(10,"div"),So(11,"Visbo Project Permission for User"),no(),to(12,"div",51),Ya(13,JG,1,0,"input",84),Ya(14,YG,1,0,"input",85),to(15,"label",54),So(16,"View Visbo Project"),no(),no(),to(17,"div",51),Ya(18,$G,1,0,"input",86),Ya(19,ZG,1,0,"input",87),to(20,"label",57),So(21,"View Project Audit"),no(),no(),to(22,"div",51),Ya(23,XG,1,0,"input",88),Ya(24,eR,1,0,"input",89),to(25,"label",60),So(26,"Modify Visbo Project"),no(),no(),to(27,"div",51),Ya(28,tR,1,0,"input",90),Ya(29,nR,1,0,"input",91),to(30,"label",63),So(31,"Create Visbo Project Variant"),no(),no(),to(32,"div",51),Ya(33,iR,1,0,"input",92),Ya(34,rR,1,0,"input",93),to(35,"label",66),So(36,"Manage Permissions, Users and Groups"),no(),no(),to(37,"div",51),Ya(38,aR,1,0,"input",94),Ya(39,oR,1,0,"input",95),to(40,"label",69),So(41,"Delete Visbo Project"),no(),no(),to(42,"label",96),So(43,"Group Member Ship"),no(),Ya(44,lR,2,1,"ng-container",77),to(45,"div",97),to(46,"button",98),So(47,"Close"),no(),no(),no(),no(),no(),no()),2&e){var n=fo(2);zi(5),xo("Permission for ",n.vgUsers[n.userIndex].email,""),zi(8),Xa("ngIf",n.hasUserVPPerm(n.permVP.View)),zi(1),Xa("ngIf",!n.hasUserVPPerm(n.permVP.View)),zi(4),Xa("ngIf",n.hasUserVPPerm(n.permVP.ViewAudit)),zi(1),Xa("ngIf",!n.hasUserVPPerm(n.permVP.ViewAudit)),zi(4),Xa("ngIf",n.hasUserVPPerm(n.permVP.Modify)),zi(1),Xa("ngIf",!n.hasUserVPPerm(n.permVP.Modify)),zi(4),Xa("ngIf",n.hasUserVPPerm(n.permVP.CreateVariant)),zi(1),Xa("ngIf",!n.hasUserVPPerm(n.permVP.CreateVariant)),zi(4),Xa("ngIf",n.hasUserVPPerm(n.permVP.ManagePerm)),zi(1),Xa("ngIf",!n.hasUserVPPerm(n.permVP.ManagePerm)),zi(4),Xa("ngIf",n.hasUserVPPerm(n.permVP.DeleteVP)),zi(1),Xa("ngIf",!n.hasUserVPPerm(n.permVP.DeleteVP)),zi(5),Xa("ngForOf",n.vgUsers)}}function uR(e,t){if(1&e){var n=so();to(0,"div"),to(1,"div",1),to(2,"h3"),So(3,"Project: "),to(4,"a",2),uo("click",(function(){mn(n);var e=fo();return e.gotoVPList(e.visboproject)})),So(5),qs(6,"uppercase"),no(),no(),to(7,"h5"),So(8,"Visbo Center: "),to(9,"a",2),uo("click",(function(){mn(n);var e=fo();return e.gotoVCDetail(e.visboproject)})),So(10),no(),no(),to(11,"form"),to(12,"div",3),to(13,"label",4),So(14,"Name:"),no(),to(15,"label",5),So(16),no(),no(),to(17,"div",3),to(18,"label",6),So(19,"Description:"),no(),to(20,"label",7),So(21),no(),no(),to(22,"div",3),to(23,"label",8),So(24,"Created / Updated at:"),no(),to(25,"label",9),So(26),qs(27,"date"),no(),to(28,"label",10),So(29),qs(30,"date"),no(),no(),no(),to(31,"div",11),Ya(32,xG,2,0,"button",12),Ya(33,_G,2,0,"button",13),Ya(34,UG,2,0,"button",14),no(),Ya(35,EG,18,1,"div",0),Ya(36,jG,22,1,"div",0),no(),Ya(37,WG,56,15,"div",15),Ya(38,cR,48,14,"div",16),no()}if(2&e){var i=fo();zi(5),To(zs(6,13,i.visboproject.name)),zi(5),To(i.visboproject.vc.name),zi(6),xo("",i.visboproject.name," "),zi(5),xo("",i.visboproject.description," "),zi(5),xo("",Qs(27,15,i.visboproject.createdAt,"dd.MM.yyyy HH:mm:ss")," "),zi(3),xo("",Qs(30,18,i.visboproject.updatedAt,"dd.MM.yyyy HH:mm:ss")," "),zi(3),Xa("ngIf",i.hasVPPerm(i.permVP.ViewAudit)),zi(1),Xa("ngIf",!i.showGroups),zi(1),Xa("ngIf",i.showGroups),zi(1),Xa("ngIf",!i.showGroups),zi(1),Xa("ngIf",i.showGroups),zi(1),Xa("ngIf",i.actGroup),zi(1),Xa("ngIf",i.vgUsers&&i.userIndex>=0)}}var dR,hR,vR=((hR=function(){function e(t,n,i,r,a,o,s){p(this,e),this.messageService=t,this.visbocenterService=n,this.route=i,this.visboprojectService=r,this.location=a,this.alertService=o,this.router=s,this.newUserInvite=new pf,this.permSystem=cy,this.permVC=uy,this.permVP=dy,this.deleted=!1,this.sortUserColumn=1,this.sortUserAscending=!0,this.sortGroupColumn=1,this.sortGroupAscending=!0}return m(e,[{key:"ngOnInit",value:function(){this.combinedPerm=this.visbocenterService.getSysAdminRole(),this.getVisboProject(),this.getVisboProjectUsers(),this.log("SysAdmin Role: "+JSON.stringify(this.combinedPerm))}},{key:"getVisboProject",value:function(){var e=this,t=this.route.snapshot.paramMap.get("id");this.log("VisboProject Detail of: "+t),this.visboprojectService.getVisboProject(t,!0).subscribe((function(n){e.visboproject=n,e.combinedPerm=n.perm,e.log("Get VisboProject ".concat(t," Perm ").concat(JSON.stringify(e.combinedPerm)))}),(function(t){e.log("get VPs failed: error: ".concat(t.status," message: ").concat(t.error.message)),e.alertService.error(Zv(t))}))}},{key:"gotoVPAudit",value:function(e){this.log("GoTo VP Audit ".concat(e.name," ").concat(this.visboproject.name)),this.router.navigate(["vpAudit/".concat(e._id)],{queryParams:{sysadmin:1}})}},{key:"hasSystemPerm",value:function(e){return(this.combinedPerm.system&e)>0}},{key:"hasVCPerm",value:function(e){return(this.combinedPerm.vc&e)>0}},{key:"hasVPPerm",value:function(e){return(this.combinedPerm.vp&e)>0}},{key:"hasUserVPPerm",value:function(e){return void 0!==this.combinedUserPerm&&(this.log("Has User VP Permission ".concat(e,"? ").concat((this.combinedUserPerm.vp&e)>0," ")),(this.combinedUserPerm.vp&e)>0)}},{key:"toggleUserGroup",value:function(){this.showGroups=!this.showGroups}},{key:"getVisboProjectUsers",value:function(){var e=this,t=this.route.snapshot.paramMap.get("id");this.log("VisboProject UserList of: "+t),this.visboprojectService.getVPUsers(t,!0).subscribe((function(t){e.vgUsers=t.users,e.vgGroups=t.groups,e.log("fetched Users ".concat(e.vgUsers.length,", Groups ").concat(e.vgGroups.length)),e.sortUserTable(),e.sortGroupTable()}),(function(t){e.log("Get VP Users failed: error: ".concat(t.status," message: ").concat(t.error.message)),e.alertService.error(403===t.status?"Permission Denied":Zv(t))}))}},{key:"goBack",value:function(){this.location.back()}},{key:"delete",value:function(e){var t=this;this.visboprojectService.deleteVisboProject(e).subscribe((function(){t.goBack()}),(function(n){t.log("delete VP failed: error: ".concat(n.status," message: ").concat(n.error.message)),t.alertService.error(403===n.status?"Permission Denied: Visbo Project "+e.name:Zv(n))}))}},{key:"gotoVCDetail",value:function(e){this.router.navigate(["sysvcDetail/".concat(e.vcid)])}},{key:"gotoVPList",value:function(e){this.router.navigate(["sysvp/".concat(e.vcid)])}},{key:"save",value:function(){var e=this;this.visboprojectService.updateVisboProject(this.visboproject).subscribe((function(t){e.alertService.success("Visbo Project ".concat(t.name," updated successfully"),!0),e.goBack()}),(function(t){e.log("save VP failed: error: ".concat(t.status," message: ").concat(t.error.message)),e.alertService.error(403===t.status?"Permission Denied: Visbo Project "+e.visboproject.name:409===t.status?"Visbo Project ".concat(e.visboproject.name," exists already"):Zv(t))}))}},{key:"addNewVPUser",value:function(){var e=this,t=this.newUserInvite.email.trim(),n=this.newUserInvite.groupName.trim(),i=this.vgGroups.filter((function(e){return e.name===n}))[0],r=i._id,a=this.visboproject._id,o="";this.newUserInvite.inviteMessage&&(o=this.newUserInvite.inviteMessage.trim()),this.log("Add VisboProject User: ".concat(t," Group: ").concat(n,"/").concat(r," VP: ").concat(a)),t&&r&&this.visboprojectService.addVPUser(t,r,o,a,!0).subscribe((function(n){var r=new fy;r.userId=n.users.filter((function(e){return e.email===t}))[0].userId,r.email=t,r.groupId=n._id,r.groupName=n.name,r.groupType=i.groupType,r.internal=i.internal,e.log("Add VisboCenter User Push: "+JSON.stringify(r)),e.vgUsers.push(r),e.sortUserTable();for(var a=0;a<e.vgGroups.length;a++)if(e.vgGroups[a]._id===n._id){e.vgGroups[a]=n;break}e.alertService.success("User ".concat(t," added successfully"))}),(function(t){e.log("Add VisboProject User error: "+t.error.message),403===t.status?e.alertService.error("Permission Denied: Add User to Visbo Project"):(e.log("Error during add VP user "+t.error.message),e.alertService.error(Zv(t)))}))}},{key:"calcCombinedPerm",value:function(e){this.userIndex=e,this.combinedUserPerm={system:0,vc:0,vp:0},this.vgUsers.forEach(this.addUserPerm,this),this.log("Combined Permission for ".concat(this.vgUsers[e].email,"  ").concat(JSON.stringify(this.combinedUserPerm)))}},{key:"addUserPerm",value:function(e){if(e.email===this.vgUsers[this.userIndex].email){this.log("Add User Permission for "+e.groupName);var t=this.vgGroups.findIndex((function(t){return t.name===e.groupName}));t>=0?this.vgGroups[t].permission?this.combinedUserPerm.vp=this.combinedUserPerm.vp|(this.vgGroups[t].permission.vp||0):this.log("Permission for Group not set "+e.groupName):this.log("Group not found "+e.groupName)}}},{key:"helperRemoveUser",value:function(e){this.userIndex=e}},{key:"helperRemoveGroup",value:function(e){this.groupIndex=e}},{key:"helperUsersPerGroup",value:function(e){var t=this.vgGroups&&this.vgGroups.find((function(t){return t.name===e}));return t?t.users.length:0}},{key:"removeVPUser",value:function(e,t){var n=this;this.log("Remove VisboProject User: ".concat(e.email,"/").concat(e.userId," Group: ").concat(e.groupName," VP: ").concat(t)),this.visboprojectService.deleteVPUser(e,t,!0).subscribe((function(){n.vgUsers=n.vgUsers.filter((function(t){return t!==e}));for(var t=0;t<n.vgGroups.length;t++)if(n.vgGroups[t]._id===e.groupId){for(var i=0;i<n.vgGroups[t].users.length;i++)if(n.vgGroups[t].users[i].userId===e.userId){n.vgGroups[t].users.splice(i,1);break}break}n.alertService.success("User ".concat(e.email," removed successfully"))}),(function(e){n.log("Remove VisboProject User error: "+e.error.message),403===e.status?n.alertService.error("Permission Denied: Remove User from Visbo Project"):(n.log("Error during remove User from VP user "+e.error.message),n.alertService.error(Zv(e)))}))}},{key:"helperVPPerm",value:function(e){var t=0;return e.checkedVPView&&(t+=this.permVP.View),e.checkedVPViewAudit&&(t+=this.permVP.ViewAudit),e.checkedVPModify&&(t+=this.permVP.Modify),e.checkedCreateVariant&&(t+=this.permVP.CreateVariant),e.checkedVPManagePerm&&(t+=this.permVP.ManagePerm),e.checkedVPDelete&&(t+=this.permVP.DeleteVP),t}},{key:"activateGroup",value:function(e){this.log("Activate Group : "+e.groupName);var t=this.vgGroups.find((function(t){return t.name==e.groupName}));this.initGroup(t)}},{key:"activateUser",value:function(e){this.log("Activate User : "+e.email);var t=this.vgUsers.findIndex((function(t){return t.email==e.email}));t>=0&&this.calcCombinedPerm(t)}},{key:"initGroup",value:function(e){this.actGroup=new vy,e?(this.confirm="VP"===e.groupType?"Modify":"View",this.actGroup._id=e._id,this.log("Init Group Set GroupID : ".concat(this.actGroup._id," ID ").concat(e._id)),this.actGroup.name=e.name,this.actGroup.groupType=e.groupType,this.actGroup.internal=e.internal,this.actGroup.global=e.global,this.actGroup.checkedView=(e.permission.vc&this.permVC.View)>0,this.actGroup.checkedViewAudit=(e.permission.vc&this.permVC.ViewAudit)>0,this.actGroup.checkedModify=(e.permission.vc&this.permVC.Modify)>0,this.actGroup.checkedCreateVP=(e.permission.vc&this.permVC.CreateVP)>0,this.actGroup.checkedManagePerm=(e.permission.vc&this.permVC.ManagePerm)>0,this.actGroup.checkedVPView=(e.permission.vp&this.permVP.View)>0,this.actGroup.checkedVPViewAudit=(e.permission.vp&this.permVP.ViewAudit)>0,this.actGroup.checkedVPModify=(e.permission.vp&this.permVP.Modify)>0,this.actGroup.checkedCreateVariant=(e.permission.vp&this.permVP.CreateVariant)>0,this.actGroup.checkedVPManagePerm=(e.permission.vp&this.permVP.ManagePerm)>0,this.actGroup.checkedVPDelete=(e.permission.vp&this.permVP.DeleteVP)>0):(this.confirm="Add",this.actGroup._id=void 0,this.actGroup.name="",this.actGroup.groupType="VP",this.actGroup.internal=!1,this.actGroup.global=!1,this.actGroup.checkedView=!0),this.log("Init Group for Creation / Modification: ".concat(this.actGroup.name," ID ").concat(this.actGroup._id," Action ").concat(this.confirm," "))}},{key:"addModifyVPGroup",value:function(){var e=this,t=new hy;this.log("Modify VisboProject Group: Group: ".concat(this.actGroup.name," VC: ").concat(this.visboproject.vcid," VP: ").concat(this.visboproject._id," }")),t.name=this.actGroup.name.trim(),t.global=!1,t.vcid=this.visboproject.vcid,t.vpids=[],t.vpids.push(this.visboproject._id),t.permission=new ly,t.permission.vp=this.helperVPPerm(this.actGroup),this.actGroup._id?(this.log("Modify VisboProject Group: Group: ".concat(t.name," VC: ").concat(t.vcid," Perm: ").concat(JSON.stringify(t.permission))),t._id=this.actGroup._id,this.visboprojectService.modifyVPGroup(t).subscribe((function(n){e.log("Modify VisboProject Group Push: "+JSON.stringify(n)),e.vgGroups=e.vgGroups.filter((function(e){return e._id!==t._id})),e.vgGroups.push(n);for(var i=0;i<e.vgUsers.length;i++)e.vgUsers[i].groupId===t._id&&(e.vgUsers[i].groupName=n.name);e.sortUserTable(),e.sortGroupTable(),e.alertService.success("Group ".concat(n.name," changed successfully"))}),(function(t){e.log("Modify VisboProject Group error: "+t.error.message),403===t.status?e.alertService.error("Permission Denied: Modify Group to Visbo Project"):(e.log("Error during modify VP Group "+t.error.message),e.alertService.error(Zv(t)))}))):(this.log("Add VisboCenter Group: Group: ".concat(t.name," VP: ").concat(t.vpids[0]," Perm: ").concat(JSON.stringify(t.permission))),this.visboprojectService.addVPGroup(t).subscribe((function(t){e.vgGroups.push(t),e.alertService.success("Group ".concat(t.name," added successfully"))}),(function(t){e.log("Add VisboCenter Group error: "+t.error.message),403===t.status?e.alertService.error("Permission Denied: Add Group to Visbo Center"):(e.log("Error during add VC Group "+t.error.message),e.alertService.error(Zv(t)))})))}},{key:"sortUserTable",value:function(e){this.vgUsers&&(void 0===e&&void 0!==this.sortUserColumn||(e!==this.sortUserColumn&&(this.sortUserColumn=e,this.sortUserAscending=void 0),this.sortUserAscending=void 0===this.sortUserAscending?1===e||2===e:!this.sortUserAscending),1===this.sortUserColumn?this.vgUsers.sort((function(e,t){return qv(e.email,t.email)})):2===this.sortUserColumn&&this.vgUsers.sort((function(e,t){return qv(e.groupName.toLowerCase(),t.groupName.toLowerCase())})),this.sortUserAscending||this.vgUsers.reverse())}},{key:"sortGroupTable",value:function(e){this.vgGroups&&(void 0===e&&void 0!==this.sortGroupColumn||(e!==this.sortGroupColumn&&(this.sortGroupColumn=e,this.sortGroupAscending=void 0),this.sortGroupAscending=void 0===this.sortGroupAscending?1===e:!this.sortGroupAscending),1===this.sortGroupColumn?this.vgGroups.sort((function(e,t){return qv(e.name.toLowerCase(),t.name.toLowerCase())})):2===this.sortGroupColumn&&this.vgGroups.sort((function(e,t){return t.users.length-e.users.length})),this.sortGroupAscending||this.vgGroups.reverse())}},{key:"log",value:function(e){this.messageService.add("VisboProjectDetail: "+e)}}]),e}()).\u0275fac=function(e){return new(e||hR)(Za(tf),Za(my),Za(sg),Za(dk),Za(mc),Za(Zm),Za(Am))},hR.\u0275cmp=wt({type:hR,selectors:[["app-sysvisboproject-detail"]],inputs:{visboproject:"visboproject"},decls:2,vars:1,consts:[[4,"ngIf"],[1,"container"],[3,"click"],[1,"form-group","row"],["for","vpName",1,"col-4","col-md-3","col-form-label"],["id","VPName",1,"col-8","form-control-static"],["for","vpDescription",1,"col-4","col-md-3","col-form-label"],["id","VPDesc",1,"col-8","form-control-static"],["for","Created",1,"col-4","col-md-3","col-form-label"],["id","VPCreated",1,"col","form-control-static","col-form-label"],["id","VPUpdated",1,"col","form-control-static","col-form-label"],[1,"btn-toolbar"],["id","ViewAudit","type","button","class","btn btn-md btn-light mr-1",3,"click",4,"ngIf"],["id","ViewGroup","type","button","class","btn btn-md btn-light mx-1",3,"click",4,"ngIf"],["id","ViewUser","type","button","class","btn btn-md btn-light mx-1",3,"click",4,"ngIf"],["class","modal fade","id","VpGroupModalCreate","tabindex","-1","role","dialog","aria-labelledby","VpGroupModalCreateTitle","aria-hidden","true",4,"ngIf"],["class","modal fade","id","VPUserDetail","tabindex","-1","role","dialog","aria-labelledby","VPUserDetailTitle","aria-hidden","true",4,"ngIf"],["id","ViewAudit","type","button",1,"btn","btn-md","btn-light","mr-1",3,"click"],["id","ViewGroup","type","button",1,"btn","btn-md","btn-light","mx-1",3,"click"],["id","ViewUser","type","button",1,"btn","btn-md","btn-light","mx-1",3,"click"],[1,"row"],[1,"col"],[1,"panel-heading"],[1,"panel-body"],[1,"table","table-hover"],["id","UserHead"],["id","UserList"],[4,"ngFor","ngForOf"],["id","ColUser","data-toggle","modal","data-target","#VPUserDetail",3,"click"],["id","ColGroup"],["id","GroupHead"],["id","GroupList"],["id","ColMembers"],["id","ColGlobal",4,"ngIf"],["id","ColDetail","title","Detail of Group","data-toggle","modal","data-target","#VpGroupModalCreate",1,"Detail",3,"click"],["id","ColGlobal"],["id","VpGroupModalCreate","tabindex","-1","role","dialog","aria-labelledby","VpGroupModalCreateTitle","aria-hidden","true",1,"modal","fade"],["role","document",1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header"],["class","modal-title","id","VpGroupModalCenterTitle",4,"ngIf"],["type","button","data-dismiss","modal","aria-label","Close",1,"close"],["aria-hidden","true"],[1,"modal-body"],["name","actGroup","novalidate",""],["f","ngForm"],[1,"form-group",3,"ngClass"],["for","name",1,"col-form-label"],["type","text","name","name","required","",1,"form-control",3,"ngModel","ngModelChange"],["name","ngModel"],["class","help-block",4,"ngIf"],[1,"custom-control","custom-checkbox"],["type","checkbox","id","permVP1","name","checkedVPView",1,"custom-control-input",3,"ngModel","ngModelChange"],["checkedVPView","ngModel"],["for","permVP1",1,"custom-control-label"],["type","checkbox","id","permVP2","name","checkedVPViewAudit",1,"custom-control-input",3,"ngModel","ngModelChange"],["checkedVPViewAudit","ngModel"],["for","permVP2",1,"custom-control-label"],["type","checkbox","id","permVP3","name","checkedVPModify",1,"custom-control-input",3,"ngModel","ngModelChange"],["checkedVPModify","ngModel"],["for","permVP3",1,"custom-control-label"],["type","checkbox","id","permVP4","name","checkedCreateVariant",1,"custom-control-input",3,"ngModel","ngModelChange"],["checkedCreateVariant","ngModel"],["for","permVP4",1,"custom-control-label"],["type","checkbox","id","permVP5","name","checkedVPManagePerm",1,"custom-control-input",3,"ngModel","ngModelChange"],["checkedVPManagePerm","ngModel"],["for","permVP5",1,"custom-control-label"],["type","checkbox","id","permVP6","name","checkedVPDelete",1,"custom-control-input",3,"ngModel","ngModelChange"],["checkedVPDelete","ngModel"],["for","permVP6",1,"custom-control-label"],["class","mt-2",4,"ngIf"],[1,"form-group"],["type","button","data-dismiss","modal",1,"btn","btn-secondary"],["id","VpGroupModalCenterTitle",1,"modal-title"],[1,"help-block"],[1,"mt-2"],[1,"form-control-static"],["class","row",4,"ngFor","ngForOf"],["class","col-8 ml-3",4,"ngIf"],[1,"col-8","ml-3"],["data-dismiss","modal","data-toggle","modal","data-target","#VPUserDetail",3,"click"],["id","VPUserDetail","tabindex","-1","role","dialog","aria-labelledby","VPUserDetailTitle","aria-hidden","true",1,"modal","fade"],["role","document",1,"modal-dialog","modal-lg","modal-dialog-centered"],["id","VPUserDetailTitle",1,"modal-title"],["type","checkbox","checked","","disabled","","class","custom-control-input","id","permVP1","name","checkedView",4,"ngIf"],["type","checkbox","disabled","","class","custom-control-input","id","permVP1","name","checkedView",4,"ngIf"],["type","checkbox","checked","","disabled","","class","custom-control-input","id","permVP2","name","checkedView",4,"ngIf"],["type","checkbox","disabled","","class","custom-control-input","id","permVP2","name","checkedView",4,"ngIf"],["type","checkbox","checked","","disabled","","class","custom-control-input","id","permVP3","name","checkedView",4,"ngIf"],["type","checkbox","disabled","","class","custom-control-input","id","permVP3","name","checkedView",4,"ngIf"],["type","checkbox","checked","","disabled","","class","custom-control-input","id","permVP4","name","checkedView",4,"ngIf"],["type","checkbox","disabled","","class","custom-control-input","id","permVP4","name","checkedView",4,"ngIf"],["type","checkbox","checked","","disabled","","class","custom-control-input","id","permVP5","name","checkedView",4,"ngIf"],["type","checkbox","disabled","","class","custom-control-input","id","permVP5","name","checkedView",4,"ngIf"],["type","checkbox","checked","","disabled","","class","custom-control-input","id","permVP6","name","checkedView",4,"ngIf"],["type","checkbox","disabled","","class","custom-control-input","id","permVP6","name","checkedView",4,"ngIf"],[1,"form-control-static","mt-2"],[1,"form-group","mt-2"],["data-dismiss","modal",1,"btn","btn-primary"],["type","checkbox","checked","","disabled","","id","permVP1","name","checkedView",1,"custom-control-input"],["type","checkbox","disabled","","id","permVP1","name","checkedView",1,"custom-control-input"],["type","checkbox","checked","","disabled","","id","permVP2","name","checkedView",1,"custom-control-input"],["type","checkbox","disabled","","id","permVP2","name","checkedView",1,"custom-control-input"],["type","checkbox","checked","","disabled","","id","permVP3","name","checkedView",1,"custom-control-input"],["type","checkbox","disabled","","id","permVP3","name","checkedView",1,"custom-control-input"],["type","checkbox","checked","","disabled","","id","permVP4","name","checkedView",1,"custom-control-input"],["type","checkbox","disabled","","id","permVP4","name","checkedView",1,"custom-control-input"],["type","checkbox","checked","","disabled","","id","permVP5","name","checkedView",1,"custom-control-input"],["type","checkbox","disabled","","id","permVP5","name","checkedView",1,"custom-control-input"],["type","checkbox","checked","","disabled","","id","permVP6","name","checkedView",1,"custom-control-input"],["type","checkbox","disabled","","id","permVP6","name","checkedView",1,"custom-control-input"],["data-dismiss","modal","data-toggle","modal","data-target","#VpGroupModalCreate",3,"click"]],template:function(e,t){1&e&&(io(0,"app-sysnavbar"),Ya(1,uR,39,21,"div",0)),2&e&&(zi(1),Xa("ngIf",t.visboproject))},directives:[mV,su,Fh,xd,Gh,au,iu,Ad,Kh,Td,Nh,Cd],pipes:[ku,Cu],styles:[""]}),hR),fR=((dR=function(){function e(t){p(this,e),this.gChartService=t}return m(e,[{key:"ngOnInit",value:function(){this.language||(this.language="de"),this.gLib=this.gChartService.getGoogle(),this.gLib.charts.load("current",{packages:["corechart","table"],language:this.language}),this.gLib.charts.setOnLoadCallback(this.drawChart.bind(this)),this.elementID&&""!==this.elementID||(this.elementID="divColumnChart")}},{key:"ngOnChanges",value:function(){this.initialised&&this.drawChart()}},{key:"drawChart",value:function(){var e=new this.gLib.visualization.ColumnChart(document.getElementById(this.elementID)),t=new this.gLib.visualization.arrayToDataTable(this.graphData);e.draw(t,this.graphOptions||{title:"Column Chart"}),this.initialised=!0}}]),e}()).\u0275fac=function(e){return new(e||dR)(Za(Hw))},dR.\u0275cmp=wt({type:dR,selectors:[["app-column-chart"]],inputs:{elementID:"elementID",graphData:"graphData",language:"language",graphOptions:"graphOptions",parentThis:"parentThis"},features:[Qt],decls:1,vars:1,consts:[[3,"id"]],template:function(e,t){1&e&&io(0,"div",0),2&e&&po("id",t.elementID)},styles:["#divColumnChart[_ngcontent-%COMP%]{width:100%;height:700px}"]}),dR);function pR(e,t){if(1&e&&(to(0,"option"),So(1),no()),2&e){var n=t.$implicit;zi(1),To(n.name)}}function gR(e,t){if(1&e&&(to(0,"option"),So(1),no()),2&e){var n=t.$implicit;zi(1),To(n.name)}}function mR(e,t){if(1&e&&(to(0,"div",3),io(1,"app-column-chart",27),no()),2&e){var n=fo(2);zi(1),Xa("elementID",n.divColumnChart2)("graphData",n.graphDataBrowserChart)("graphOptions",n.graphOptionsBrowserChart)}}function bR(e,t){if(1&e&&(to(0,"div",1),to(1,"h3",4),So(2," Visbo Chart "),to(3,"div",3),io(4,"app-pie-chart",25),no(),to(5,"div",3),io(6,"app-line-chart",26),no(),to(7,"div",3),io(8,"app-column-chart",27),no(),Ya(9,mR,2,3,"div",28),no(),no()),2&e){var n=fo();zi(4),Xa("graphData",n.graphData)("graphLegend",n.graphLegend)("graphOptions",n.graphOptions)("parentThis",n.parentThis),zi(2),Xa("graphData",n.graphDataLineChart)("graphOptions",n.graphOptionsLineChart),zi(2),Xa("elementID",n.divColumnChart1)("graphData",n.graphDataUserChart)("graphOptions",n.graphOptionsUserChart),zi(1),Xa("ngIf",n.graphDataBrowserChart&&n.graphDataBrowserChart.length>0)}}function yR(e,t){if(1&e&&(to(0,"td",50),So(1),qs(2,"date"),no()),2&e){var n=fo().$implicit;zi(1),To(Qs(2,1,n.createdAt,"HH:mm:ss"))}}function kR(e,t){if(1&e&&(to(0,"td",50),So(1),qs(2,"date"),no()),2&e){var n=fo().$implicit;zi(1),To(Qs(2,1,n.createdAt,"dd.MM HH:mm"))}}function CR(e,t){if(1&e&&(to(0,"td",51),So(1),no()),2&e){var n=fo().$implicit;zi(1),To(n.user.email)}}function VR(e,t){1&e&&(to(0,"td",51),So(1," Unknown "),no())}function wR(e,t){if(1&e){var n=so();to(0,"tr",42),uo("click",(function(){mn(n);var e=t.index;return fo(2).helperAuditIndex(e)})),Ya(1,yR,3,4,"td",43),Ya(2,kR,3,4,"td",43),Ya(3,CR,2,1,"td",44),Ya(4,VR,2,0,"td",44),to(5,"td",45),So(6),no(),to(7,"td",46),So(8),no(),to(9,"td",47),So(10),no(),to(11,"td",48),So(12),no(),to(13,"td",47),So(14),no(),to(15,"td"),to(16,"button",49),uo("click",(function(){mn(n);var e=t.index;return fo(2).helperAuditIndex(e)})),So(17,"i"),no(),no(),no()}if(2&e){var i=t.$implicit,r=t.index,a=fo(2);zi(1),Xa("ngIf",a.isToday(i.createdAt)),zi(1),Xa("ngIf",!a.isToday(i.createdAt)),zi(1),Xa("ngIf",i.user),zi(1),Xa("ngIf",!i.user),zi(2),To(i.actionDescription),zi(2),To(a.helperShortenText(i.actionInfo,30)),zi(2),To(a.helperResponseText(i)),zi(2),xo("",i.result.time," ms"),zi(2),To(a.helperFormatBytes(a.audit[r].result.size||0,2))}}function AR(e,t){1&e&&(to(0,"div"),to(1,"h3",52),So(2," No Audit Entry for the time frame or the filter condition "),no(),no())}function PR(e,t){if(1&e){var n=so();to(0,"div",1),to(1,"div",29),to(2,"table",30),to(3,"thead",31),to(4,"tr"),to(5,"th",32),uo("click",(function(){return mn(n),fo().sortTable(1)})),So(6,"Created"),no(),to(7,"th",33),uo("click",(function(){return mn(n),fo().sortTable(2)})),So(8,"User"),no(),to(9,"th",34),uo("click",(function(){return mn(n),fo().sortTable(3)})),So(10," Action"),no(),to(11,"th",35),uo("click",(function(){return mn(n),fo().sortTable(4)})),So(12," Info"),no(),to(13,"th",36),uo("click",(function(){return mn(n),fo().sortTable(5)})),So(14," Result"),no(),to(15,"th",37),uo("click",(function(){return mn(n),fo().sortTable(6)})),So(16," Duration"),no(),to(17,"th",38),uo("click",(function(){return mn(n),fo().sortTable(7)})),So(18," Size"),no(),to(19,"th"),So(20,"Detail"),no(),no(),no(),to(21,"tbody",39),Ya(22,wR,18,9,"tr",40),no(),no(),Ya(23,AR,3,0,"div",41),no(),no()}if(2&e){var i=fo();zi(22),Xa("ngForOf",i.audit),zi(1),Xa("ngIf",i.audit&&0==i.audit.length)}}function DR(e,t){if(1&e&&(to(0,"div"),to(1,"label",68),So(2,"Info:"),no(),to(3,"label",72),So(4),no(),no()),2&e){var n=fo(2);zi(4),xo("",n.audit[n.auditIndex].actionInfo," ")}}function MR(e,t){if(1&e&&(to(0,"div"),to(1,"label",68),So(2,"Visbo Center:"),no(),to(3,"label",77),So(4),no(),no()),2&e){var n=fo(2);zi(4),xo("",n.audit[n.auditIndex].vc.name," ")}}function IR(e,t){if(1&e&&(to(0,"div"),to(1,"label",68),So(2,"Visbo Project:"),no(),to(3,"label",78),So(4),no(),no()),2&e){var n=fo(2);zi(4),_o("",n.audit[n.auditIndex].vp.name," (",n.audit[n.auditIndex].vp.vpid,") ")}}function SR(e,t){if(1&e&&(to(0,"div"),to(1,"label",68),So(2,"Project Version:"),no(),to(3,"label",79),So(4),no(),no()),2&e){var n=fo(2);zi(4),_o("",n.audit[n.auditIndex].vpv.name," (",n.audit[n.auditIndex].vpv.vpvid,")")}}function TR(e,t){if(1&e&&(to(0,"div"),to(1,"label",68),So(2,"tech. Action:"),no(),to(3,"label",72),So(4),no(),no()),2&e){var n=fo(2);zi(4),xo("",n.audit[n.auditIndex].action," ")}}function xR(e,t){if(1&e&&(to(0,"div"),to(1,"label",68),So(2,"URL:"),no(),to(3,"label",80),So(4),no(),no()),2&e){var n=fo(2);zi(4),xo("",n.audit[n.auditIndex].url," ")}}function _R(e,t){if(1&e&&(to(0,"div"),to(1,"label",68),So(2,"Response Time:"),no(),to(3,"label",72),So(4),no(),no()),2&e){var n=fo(2);zi(4),xo("",n.audit[n.auditIndex].result.time," ms ")}}function UR(e,t){if(1&e&&(to(0,"div"),to(1,"label",68),So(2,"Response Size:"),no(),to(3,"label",72),So(4),no(),no()),2&e){var n=fo(2);zi(4),xo("",n.helperFormatBytes(n.audit[n.auditIndex].result.size||0,2)," ")}}function OR(e,t){if(1&e&&(to(0,"div"),to(1,"label",68),So(2,"User Agent:"),no(),to(3,"label",72),So(4),no(),no()),2&e){var n=fo(2);zi(4),To(n.audit[n.auditIndex].userAgent)}}function ER(e,t){if(1&e&&(to(0,"div"),to(1,"label",68),So(2,"IP:"),no(),to(3,"label",72),So(4),no(),no()),2&e){var n=fo(2);zi(4),To(n.audit[n.auditIndex].ip)}}function LR(e,t){if(1&e&&(to(0,"div"),to(1,"label",68),So(2,"TTL:"),no(),to(3,"label",72),So(4),qs(5,"date"),no(),no()),2&e){var n=fo(2);zi(4),To(Qs(5,1,n.audit[n.auditIndex].ttl,"dd.MM HH:mm"))}}function GR(e,t){if(1&e&&(to(0,"div"),to(1,"label",68),So(2,"Host:"),no(),to(3,"label",72),So(4),no(),no()),2&e){var n=fo(2);zi(4),To(n.audit[n.auditIndex].host)}}function RR(e,t){if(1&e){var n=so();to(0,"button",81),uo("click",(function(){return mn(n),fo(2).toggleDetail()})),So(1,"More"),no()}}function jR(e,t){if(1&e){var n=so();to(0,"button",82),uo("click",(function(){return mn(n),fo(2).toggleDetail()})),So(1,"Less"),no()}}function NR(e,t){if(1&e){var n=so();to(0,"div",53),to(1,"div",54),to(2,"div",55),to(3,"h5",56),So(4,"Detail of Audit Entry"),no(),to(5,"button",57),to(6,"span",58),So(7,"\xd7"),no(),no(),no(),to(8,"div",59),to(9,"div",2),to(10,"div",60),to(11,"h3",61),uo("click",(function(){return mn(n),fo().pageAuditIndex(-1)})),io(12,"a",62),no(),no(),to(13,"div",63),to(14,"h3",64),uo("click",(function(){return mn(n),fo().pageAuditIndex(1)})),io(15,"a",65),no(),no(),no(),to(16,"form",66),to(17,"div",67),to(18,"label",68),So(19,"Created:"),no(),to(20,"label",69),So(21),qs(22,"date"),no(),to(23,"label",68),So(24,"User:"),no(),to(25,"label",70),So(26),no(),to(27,"label",68),So(28,"Action:"),no(),to(29,"label",71),So(30),no(),no(),Ya(31,DR,5,1,"div",41),Ya(32,MR,5,1,"div",41),Ya(33,IR,5,2,"div",41),Ya(34,SR,5,2,"div",41),to(35,"div"),to(36,"label",68),So(37,"Result:"),no(),to(38,"label",72),So(39),no(),no(),Ya(40,TR,5,1,"div",41),Ya(41,xR,5,1,"div",41),Ya(42,_R,5,1,"div",41),Ya(43,UR,5,1,"div",41),Ya(44,OR,5,1,"div",41),Ya(45,ER,5,1,"div",41),Ya(46,LR,6,4,"div",41),Ya(47,GR,5,1,"div",41),no(),no(),to(48,"div",73),Ya(49,RR,2,0,"button",74),Ya(50,jR,2,0,"button",75),to(51,"button",76),So(52,"Close"),no(),no(),no(),no()}if(2&e){var i=fo();zi(21),xo("",Qs(22,18,i.audit[i.auditIndex].createdAt,"dd.MM.yyyy HH:mm:ss.SSS")," "),zi(5),xo("",i.audit[i.auditIndex].user.email," "),zi(4),xo("",i.helperFormatActionDescription(i.audit[i.auditIndex])," "),zi(1),Xa("ngIf",i.audit[i.auditIndex].actionInfo),zi(1),Xa("ngIf",i.audit[i.auditIndex].vc),zi(1),Xa("ngIf",i.audit[i.auditIndex].vp),zi(1),Xa("ngIf",i.audit[i.auditIndex].vpv),zi(5),xo("",i.helperResponseText(i.audit[i.auditIndex])," "),zi(1),Xa("ngIf",i.showMore),zi(1),Xa("ngIf",i.showMore),zi(1),Xa("ngIf",i.showMore),zi(1),Xa("ngIf",i.showMore),zi(1),Xa("ngIf",i.showMore),zi(1),Xa("ngIf",i.showMore&&i.audit[i.auditIndex].ip),zi(1),Xa("ngIf",i.showMore&&i.audit[i.auditIndex].ttl),zi(1),Xa("ngIf",i.showMore&&i.audit[i.auditIndex].host),zi(2),Xa("ngIf",!i.showMore),zi(1),Xa("ngIf",i.showMore)}}function FR(e){var t;return e?("="!==(t=e.replace(/\t/g," "))[0]&&"+"!==t[0]&&"-"!==t[0]||(t="'".concat(t)),t):e}var BR,HR,KR=((BR=function(){function e(t,n,i,r,a,o){p(this,e),this.visboauditService=t,this.visbocenterService=n,this.messageService=i,this.alertService=r,this.route=a,this.router=o,this.auditTypeList=[{name:"All",action:""},{name:"Read",action:"GET"},{name:"Create",action:"POST"},{name:"Update",action:"PUT"},{name:"Delete",action:"DELETE"}],this.auditAreaList=[{name:"Overview",action:"other"},{name:"System",action:"sys"},{name:"Visbo Center",action:"vc"},{name:"Visbo Project",action:"vp"},{name:"All",action:""}],this.sysVCId="",this.chart=!1,this.parentThis=this,this.divColumnChart1="SysAudit_User_div",this.divColumnChart2="SysAudit_Browser_div",this.chartButton="Chart",this.graphData=[],this.graphLegend=[["string","Action Type"],["number","Count"]],this.graphOptions={title:"Audit Activity by Action",sliceVisibilityThreshold:.025},this.graphDataLineChart=[],this.graphOptionsLineChart={title:"Audit Activity by Time",explorer:{actions:["dragToZoom","rightClickToReset"],maxZoomIn:.01},vAxis:{title:"Number of Activities",minorGridlines:{count:0}},hAxis:{format:"dd.MM.yy",gridlines:{count:-1},minorGridlines:{count:0}},pointSize:6,curveType:"function",colors:["blue","red","green","yellow"]},this.graphDataUserChart=[],this.graphOptionsUserChart={title:"Audit Activity by User",isStacked:!0,hAxis:{direction:-1,slantedText:!0,slantedTextAngle:45}},this.graphDataBrowserChart=[],this.graphOptionsBrowserChart={title:"Audit Activity by User Agent",isStacked:!0,hAxis:{direction:-1,slantedText:!0,slantedTextAngle:45}},this.listOS=["Windows","Macintosh","iPhone","iPad","Android","Linux","Unknown"]}return m(e,[{key:"ngOnInit",value:function(){this.auditCount=50,this.auditType=this.auditTypeList[0].name,this.auditArea=this.auditAreaList[0].name,this.today=new Date,this.today.setHours(0,0,0,0),this.sysVCId=this.visbocenterService.getSysVCId(),this.getVisboAudits()}},{key:"getVisboAudits",value:function(){var e=this,t=new uV;t.to=this.auditTo?new Date(this.auditTo):new Date,this.auditFrom&&(t.from=new Date(this.auditFrom)),this.auditText&&(t.text=this.auditText.trim());for(var n=0;n<this.auditTypeList.length;n++)if(this.auditType===this.auditTypeList[n].name){t.actionType=this.auditTypeList[n].action;break}for(var i=0;i<this.auditAreaList.length;i++)if(this.auditArea===this.auditAreaList[i].name){t.area=this.auditAreaList[i].action;break}t.maxcount=this.auditCount,this.visboauditService.getVisboAudits(!0,t).subscribe((function(t){e.audit=t,e.alertService.success("Successfully accessed Audit",!0),e.sortTable(void 0),e.groupGraphData(),e.groupgraphDataActivityChart(),e.groupgraphDataUserChart(),e.groupgraphDataBrowserChart()}),(function(t){e.log("get Audit failed: error: ".concat(t.status," message: ").concat(t.error.message)),e.alertService.error(Zv(t))}))}},{key:"gotoDetail",value:function(e){this.router.navigate(["sysaudit/"+e._id])}},{key:"downloadVisboAudit",value:function(){var e;this.log("sysAudit Download ".concat(this.audit.length," Items")),e="sep=\t\n",e+="date\ttime UTC\temail\tactionDescription\taction\turl\tactionInfo\tresponseTime\tresponseStatus\tvcid\tvcname\tvpid\tvpname\tvpvid\tsize\tip\tuserId\tuserAgent\tttl\tVC Details\tVP Details\n";for(var t=0;t<this.audit.length;t++){var n=new Date(this.audit[t].createdAt).toISOString(),i=(this.audit[t].userAgent||"").replace(/,/g,";"),r=n.substr(0,10)+"\t"+n.substr(11,12)+"\t"+FR(this.audit[t].user.email)+"\t"+FR(this.audit[t].actionDescription)+"\t"+this.audit[t].action+"\t"+this.audit[t].url+"\t"+this.audit[t].actionInfo+"\t"+(this.audit[t].result?this.audit[t].result.time:"")+"\t"+(this.audit[t].result?this.audit[t].result.status:"")+"\t"+(this.audit[t].vc?this.audit[t].vc.vcid:"")+"\t"+(this.audit[t].vc?FR(this.audit[t].vc.name):"")+"\t"+(this.audit[t].vp?this.audit[t].vp.vpid:"")+"\t"+(this.audit[t].vp?FR(this.audit[t].vp.name):"")+"\t"+(this.audit[t].vpv?this.audit[t].vpv.vpvid:"")+"\t"+(this.audit[t].result?this.audit[t].result.size:"0")+"\t"+this.audit[t].ip+"\t"+this.audit[t].user.userId+"\t"+FR(i)+"\t"+(this.audit[t].ttl||"")+"\t"+(this.audit[t].vc&&FR(this.audit[t].vc.vcjson)||"")+"\t"+(this.audit[t].vp&&FR(this.audit[t].vp.vpjson)||"")+"\n";e=e.concat(r)}this.log("sysAudit CSV Len ".concat(e.length," "));var a=new Blob([e],{type:"text/plain"}),o=window.URL.createObjectURL(a),s=document.createElement("a");document.body.appendChild(s),s.href=o,s.download="auditlog.csv",this.log("Open URL ".concat(o," doc ").concat(JSON.stringify(s))),s.click(),window.URL.revokeObjectURL(o)}},{key:"switchChart",value:function(){this.chart=!this.chart,this.chartButton=this.chart?"List":"Chart"}},{key:"groupGraphData",value:function(){var e=[],t=[];for(var n in this.audit)this.audit[n].actionDescription&&(e[this.audit[n].actionDescription]=(e[this.audit[n].actionDescription]||0)+1);for(var i in e)t.push([i,e[i]]);t.sort((function(e,t){var n=0;return e[1]>t[1]?n=-1:e[1]<t[1]&&(n=1),n})),this.graphData=t}},{key:"groupgraphDataActivityChart",value:function(){var e=[],t=[];for(var n in this.audit)if(this.audit[n].createdAt){var i=new Date(this.audit[n].createdAt);i.setHours(0,0,0,0);var r=Math.trunc(i.getTime()/1e3/60/60/24);void 0===e[r]&&(e[r]=[new Date(i),0,0,0,0]),e[r][1]=e[r][1]+1,this.audit[n].vpv?e[r][4]=e[r][4]+1:this.audit[n].vp?e[r][3]=e[r][3]+1:this.audit[n].vc&&this.audit[n].vc.vcid.toString()!==this.sysVCId&&(e[r][2]=e[r][2]+1)}for(var a in e)t.push(e[a]);if(1===t.length){var o=new Date(t[0][0].toISOString());o.setMinutes(o.getMinutes()-1),t.push([o,0,0,0,0])}t.sort((function(e,t){return t[0]-e[0]})),t.push(["Date","All","VC","VP","VPV"]),t.reverse(),this.graphOptionsLineChart.hAxis.gridlines.count=t.length-1,this.log("Group Graph Time Chart Gridlines ".concat(t.length-1," ")),this.graphDataLineChart=t}},{key:"groupgraphDataUserChart",value:function(){var e=[],t=[];for(var n in this.audit)if(this.audit[n].user&&this.audit[n].user.email){var i=this.audit[n].user.email;void 0===e[i]&&(e[i]=[i,0,0,0,0,0,0,""]),this.audit[n].vpv||this.auditGroup(this.audit[n],"/vpv")?e[i][3]=e[i][3]+1:this.audit[n].vp||this.auditGroup(this.audit[n],"/vp")?e[i][2]=e[i][2]+1:this.audit[n].vc&&this.audit[n].vc.vcid.toString()!==this.sysVCId||this.auditGroup(this.audit[n],"/vc")?e[i][1]=e[i][1]+1:this.audit[n].vc&&this.audit[n].vc.vcid.toString()===this.sysVCId||this.auditGroup(this.audit[n],"/audit")?e[i][4]=e[i][4]+1:this.auditGroup(this.audit[n],"/token")||this.auditGroup(this.audit[n],"/user")?e[i][5]=e[i][5]+1:e[i][6]=e[i][6]+1}for(var r in e)t.push(e[r]);t.sort((function(e,t){return e[1]+e[2]+e[3]+e[4]+e[5]+e[6]-(t[1]+t[2]+t[3]+t[4]+t[5]+t[6])})),t.push(["User","VC","VP","VPV","System","User","Other",{role:"annotation"}]),t.reverse(),this.log("Group Graph Column Chart Element "+JSON.stringify(t[0])),this.log("Group Graph Column Chart Element "+JSON.stringify(t[1])),this.graphDataUserChart=t}},{key:"getUserAgent",value:function(e){var t=["VISBO Projectboard","VISBO Smartinfo","Chrome","Firefox","Safari","Postman"],n="Unknown";e=e||"";for(var i=0;i<t.length;i++)if(e.indexOf(t[i])>=0){n=t[i];break}return n}},{key:"getOSAgent",value:function(e){var t=this.listOS.length-1;e=e||"";for(var n=0;n<this.listOS.length;n++)if(e.indexOf(this.listOS[n])>=0){t=n;break}return t}},{key:"groupgraphDataBrowserChart",value:function(){var e=[],t=[];for(var n in this.audit){var i=this.audit[n].userAgent,r=this.getUserAgent(i),a=this.getOSAgent(i);void 0===e[r]&&(e[r]=[r,0,0,0,0,0,0,0,""]),e[r][a+1]+=1}for(var o in e)t.push(e[o]);t.sort((function(e,t){return e[1]+e[2]+e[3]+e[4]+e[5]+e[6]+e[7]-(t[1]+t[2]+t[3]+t[4]+t[5]+t[6]+t[7])})),t.push(["UserAgent",this.listOS[0],this.listOS[1],this.listOS[2],this.listOS[3],this.listOS[4],this.listOS[5],this.listOS[6],{role:"annotation"}]),t.reverse(),this.graphDataBrowserChart=t}},{key:"auditGroup",value:function(e,t){var n=!1;return 0===e.url.indexOf(t)&&(n=!0),n}},{key:"helperAuditIndex",value:function(e){this.auditIndex=e}},{key:"helperFormatActionDescription",value:function(e){if(this.log("AuditDescription  ".concat(e.actionDescription," ")),"GET"===e.actionDescription||"POST"===e.actionDescription||"PUT"===e.actionDescription||"DELETE"===e.actionDescription){var t=e.actionDescription.concat(" ",e.url);return t.length>20&&(t=t.substring(0,17)+"..."),t}return e.actionDescription}},{key:"helperFormatBytes",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;if(0===e)return"0 B";var n=t||2,i=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,i)).toFixed(n))+" "+["B","KB","MB","GB","TB","PB","EB","ZB","YB"][i]}},{key:"pageAuditIndex",value:function(e){var t=this.auditIndex+e;t<0&&(t=0),t>=this.audit.length&&(t=this.audit.length-1),this.auditIndex=t}},{key:"helperResponseText",value:function(e){if(e.result.statusText)return e.result.statusText;var t=e.result.status;return"200"===t||"304"===t?"Success":"400"===t?"Bad Request":"401"===t?"Not Authenticated":"403"===t?"Permission Denied":"404"===t?"URL not found":"409"===t?"Conflict":"423"===t?"Locked":"500"===t?"Server Error":t.toString()}},{key:"helperShortenText",value:function(e,t){return $v(e,t)}},{key:"toggleDetail",value:function(){this.log("Toggle ShowMore"),this.showMore=!this.showMore}},{key:"isToday",value:function(e){return new Date(e)>this.today}},{key:"sortTable",value:function(e){this.audit&&(void 0!==e?e!==this.sortColumn?(this.sortColumn=e,this.sortAscending=void 0):void 0!==this.sortAscending&&(this.sortAscending=!this.sortAscending):(this.sortColumn=1,this.sortAscending=void 0),void 0===this.sortAscending&&(this.sortAscending=2===e||3===e||4===e),1===this.sortColumn?this.audit.sort((function(e,t){return zv(e.createdAt,t.createdAt)})):2===this.sortColumn?this.audit.sort((function(e,t){return qv(e.user.email.toLowerCase(),t.user.email.toLowerCase())})):3===this.sortColumn?this.audit.sort((function(e,t){return qv(e.actionDescription,t.actionDescription)})):4===this.sortColumn?this.audit.sort((function(e,t){return qv(e.url,t.url)})):5===this.sortColumn?this.audit.sort((function(e,t){return qv(e.result.status,t.result.status)})):6===this.sortColumn?this.audit.sort((function(e,t){return e.result.time-t.result.time})):7===this.sortColumn&&this.audit.sort((function(e,t){return(e.result.size||0)-(t.result.size||0)})),this.sortAscending||this.audit.reverse())}},{key:"log",value:function(e){this.messageService.add("Sys Audit: "+e)}}]),e}()).\u0275fac=function(e){return new(e||BR)(Za(hV),Za(my),Za(tf),Za(Zm),Za(sg),Za(Am))},BR.\u0275cmp=wt({type:BR,selectors:[["app-sysaudit"]],decls:46,vars:12,consts:[[1,"well"],[1,"container-fluid"],[1,"row"],[1,"col"],[1,"panel-heading"],["name","form","novalidate","",3,"ngSubmit"],["f","ngForm"],[1,"form-group","row"],["for","auditFrom",1,"col-1","col-form-label"],["id","auditFrom","type","date","name","auditFrom",1,"col-4","col-md-2","form-control",3,"ngModel","ngModelChange"],["for","auditTo",1,"col-1","col-form-label"],["id","auditTo","type","date","name","auditTo",1,"col-4","col-md-2","form-control",3,"ngModel","ngModelChange"],["for","auditText",1,"col-1","col-form-label"],["id","auditText","type","text","name","auditText",1,"col-3","col-md-2","form-control",3,"ngModel","ngModelChange"],["for","auditCount",1,"col-1","col-form-label"],["id","auditCount","name","auditCount",1,"col-1","form-control","mx-1",3,"ngModel","ngModelChange"],["id","auditArea","id","auditType","name","auditArea",1,"col-1","form-control","mx-1",3,"ngModel","ngModelChange"],[4,"ngFor","ngForOf"],["id","auditType","id","auditType","name","actiontype",1,"col-1","form-control","mx-1",3,"ngModel","ngModelChange"],[1,"btn-group"],["type","button",1,"btn","btn-sm","btn-primary","ml-auto","mx-1",3,"click"],["type","button",1,"btn","btn-sm","btn-secondary","ml-auto","mx-1",3,"click"],["class","container-fluid",4,"ngIf"],["id","AuditDetail","tabindex","-1","role","dialog","aria-labelledby","Audit Detail","aria-hidden","true",1,"modal","fade"],["class","modal-dialog modal-lg modal-dialog-centered","role","document",4,"ngIf"],[3,"graphData","graphLegend","graphOptions","parentThis"],[3,"graphData","graphOptions"],[3,"elementID","graphData","graphOptions"],["class","col",4,"ngIf"],[1,"panel-body"],[1,"table","table-hover","table-sortable"],["id","AuditHead"],["id","SortDate",1,"d-none","d-md-table-cell",3,"click"],["id","SortUser",3,"click"],["id","SortAction",3,"click"],["id","SortInfo",1,"d-none","d-md-table-cell",3,"click"],["id","SortResult",1,"d-none","d-lg-table-cell",3,"click"],["id","SortDuration",1,"d-none","d-lg-table-cell",3,"click"],["id","SortSize",1,"d-none","d-lg-table-cell",3,"click"],["id","AuditList"],["data-toggle","modal","data-target","#AuditDetail",3,"click",4,"ngFor","ngForOf"],[4,"ngIf"],["data-toggle","modal","data-target","#AuditDetail",3,"click"],["id","ColCreated","class","d-none d-md-table-cell",4,"ngIf"],["id","ColUser",4,"ngIf"],["id","ColAction"],["id","ColInfo",1,"d-none","d-md-table-cell"],["id","ColResult",1,"d-none","d-lg-table-cell"],["id","ColDuration",1,"d-none","d-lg-table-cell"],["id","ColDetail","title","Detail of Visbo Audit","data-toggle","modal","data-target","#AuditDetail",1,"Detail",3,"click"],["id","ColCreated",1,"d-none","d-md-table-cell"],["id","ColUser"],[1,"d-flex","justify-content-center"],["role","document",1,"modal-dialog","modal-lg","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header"],["id","AuditDetailTitle",1,"modal-title"],["type","button","data-dismiss","modal","aria-label","Close",1,"close"],["aria-hidden","true"],[1,"modal-body"],[1,"col-11"],["id","ButtonPrev","title","Previous Entry",3,"click"],[1,"px-3","col-1","fas","fa-caret-square-left"],[1,"col-1"],["id","ButtonNext","title","Next Entry",3,"click"],[1,"px-3","col-1","fas","fa-caret-square-right"],["id","auditEntry"],[1,"v_compact_t"],[1,"v_compact_t","col-4","form-control-static"],["id","auditCreated",1,"v_compact_t","col-7","form-control-static"],["id","auditUser",1,"v_compact_t","col-7","form-control-static"],["id","auditAction",1,"v_compact_t","col-7","form-control-static"],[1,"v_compact_t","col-7","form-control-static"],[1,"modal-footer","align-items-end"],["id","ButtonMore","type","button","class","btn btn-secondary",3,"click",4,"ngIf"],["id","ButtonLess","type","button","class","btn btn-secondary",3,"click",4,"ngIf"],["id","ButtonBack","type","button","data-dismiss","modal",1,"btn","btn-primary"],["id","auditVC",1,"v_compact_t","col-7","form-control-static"],["id","auditVP",1,"v_compact_t","col-7","form-control-static"],["id","auditVPV",1,"v_compact_t","col-7","form-control-static"],[1,"v_compact_t","col-7","form-control-static",2,"overflow-wrap","break-word"],["id","ButtonMore","type","button",1,"btn","btn-secondary",3,"click"],["id","ButtonLess","type","button",1,"btn","btn-secondary",3,"click"]],template:function(e,t){1&e&&(io(0,"app-sysnavbar"),to(1,"div",0),to(2,"div",1),to(3,"div",2),to(4,"div",3),to(5,"h2",4),So(6," Visbo System Audit "),no(),no(),no(),no(),to(7,"form",5,6),uo("ngSubmit",(function(){return t.getVisboAudits()})),to(9,"div",7),to(10,"label",8),So(11,"From:"),no(),to(12,"input",9),uo("ngModelChange",(function(e){return t.auditFrom=e})),no(),to(13,"label",10),So(14,"To:"),no(),to(15,"input",11),uo("ngModelChange",(function(e){return t.auditTo=e})),no(),no(),to(16,"div",7),to(17,"label",12),So(18,"Filter:"),no(),to(19,"input",13),uo("ngModelChange",(function(e){return t.auditText=e})),no(),to(20,"label",14),So(21,"Max:"),no(),to(22,"select",15),uo("ngModelChange",(function(e){return t.auditCount=e})),to(23,"option"),So(24,"50"),no(),to(25,"option"),So(26,"100"),no(),to(27,"option"),So(28,"500"),no(),to(29,"option"),So(30,"2000"),no(),no(),to(31,"select",16),uo("ngModelChange",(function(e){return t.auditArea=e})),Ya(32,pR,2,1,"option",17),no(),to(33,"select",18),uo("ngModelChange",(function(e){return t.auditType=e})),Ya(34,gR,2,1,"option",17),no(),to(35,"div",19),to(36,"button",20),uo("click",(function(){return t.getVisboAudits()})),So(37,"Filter"),no(),to(38,"button",21),uo("click",(function(){return t.downloadVisboAudit()})),So(39,"Download"),no(),to(40,"button",21),uo("click",(function(){return t.switchChart()})),So(41),no(),no(),no(),no(),Ya(42,bR,10,10,"div",22),Ya(43,PR,24,2,"div",22),no(),to(44,"div",23),Ya(45,NR,53,21,"div",24),no()),2&e&&(zi(12),Xa("ngModel",t.auditFrom),zi(3),Xa("ngModel",t.auditTo),zi(4),Xa("ngModel",t.auditText),zi(3),Xa("ngModel",t.auditCount),zi(9),Xa("ngModel",t.auditArea),zi(1),Xa("ngForOf",t.auditAreaList),zi(1),Xa("ngModel",t.auditType),zi(1),Xa("ngForOf",t.auditTypeList),zi(7),To(t.chartButton),zi(1),Xa("ngIf",t.chart),zi(1),Xa("ngIf",!t.chart),zi(2),Xa("ngIf",t.auditIndex>=0&&t.auditIndex<t.audit.length))},directives:[mV,Fh,xd,Gh,Ad,Td,Nh,rh,ah,dh,au,su,Gx,YS,fR],pipes:[Cu],styles:[".v_compact_t[_ngcontent-%COMP%]{margin:0;padding-top:0}"]}),BR),qR=new ov({"Content-Type":"application/json"}),zR=((HR=function(){function e(t,n,i){p(this,e),this.http=t,this.messageService=n,this.env=i,this.serviceUrl=this.env.restUrl.concat("/sysuser")}return m(e,[{key:"getSysUsers",value:function(e){var t=this,n=this.serviceUrl,i=new cv;return e&&(i=i.append("email",e)),i=i.append("maxcount","100"),this.log("Calling HTTP Request: ".concat(n," ")),this.http.get(n,{headers:qR,params:i}).pipe(B((function(e){return e.user})),cf((function(e){return t.log("fetched ".concat(e.length," Users "))})),af(this.handleError("getSysUsers",[])))}},{key:"handleError",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"operation",n=arguments.length>1?arguments[1]:void 0;return function(i){return e.log("HTTP Request ".concat(t," failed: ").concat(i.error.message," status:").concat(i.status,", Result ").concat(JSON.stringify(n))),nf(i)}}},{key:"log",value:function(e){this.messageService.add("SysUserService: "+e)}}]),e}()).\u0275fac=function(e){return new(e||HR)(ot(Sv),ot(tf),ot(Vf))},HR.\u0275prov=Ve({token:HR,factory:HR.\u0275fac}),HR);function QR(e,t){if(1&e&&(to(0,"td",12),So(1),qs(2,"date"),no()),2&e){var n=fo().$implicit;zi(1),To(Qs(2,1,n.status.lastLoginAt,"dd.MM.yy"))}}function WR(e,t){1&e&&(to(0,"td",12),So(1,"Never"),no())}function JR(e,t){if(1&e&&(to(0,"td",12),So(1),qs(2,"date"),no()),2&e){var n=fo().$implicit;zi(1),To(Qs(2,1,n.status.lastLoginFailedAt,"dd.MM.yy"))}}function YR(e,t){1&e&&(to(0,"td",12),So(1,"Never"),no())}function $R(e,t){if(1&e){var n=so();to(0,"tr",18),uo("click",(function(){mn(n);var e=t.index;return fo().helperUserIndex(e)})),to(1,"td",12),So(2),no(),to(3,"td"),to(4,"a"),So(5),no(),no(),to(6,"td",12),So(7),qs(8,"date"),no(),Ya(9,QR,3,4,"td",19),Ya(10,WR,2,0,"td",19),Ya(11,JR,3,4,"td",19),Ya(12,YR,2,0,"td",19),to(13,"td"),to(14,"button",20),uo("click",(function(){mn(n);var e=t.index;return fo().helperUserIndex(e)})),So(15,"i"),no(),no(),no()}if(2&e){var i=t.$implicit,r=t.index;zi(2),To(r+1),zi(3),To(i.email),zi(2),To(Qs(8,7,i.updatedAt,"dd.MM.yy")),zi(2),Xa("ngIf",i.status&&i.status.lastLoginAt),zi(1),Xa("ngIf",!(i.status&&i.status.lastLoginAt)),zi(1),Xa("ngIf",i.status&&i.status.lastLoginFailedAt),zi(1),Xa("ngIf",!(i.status&&i.status.lastLoginFailedAt))}}function ZR(e,t){if(1&e&&(to(0,"div",32),to(1,"label",33),So(2,"Name:"),no(),to(3,"label",34),So(4),no(),no()),2&e){var n=fo(2);zi(4),_o("",n.user[n.userIndex].profile.firstName," ",n.user[n.userIndex].profile.lastName,"")}}function XR(e,t){if(1&e&&(to(0,"div",32),to(1,"label",33),So(2,"Company:"),no(),to(3,"label",34),So(4),no(),no()),2&e){var n=fo(2);zi(4),To(n.user[n.userIndex].profile.company)}}function ej(e,t){if(1&e&&(to(0,"div",32),to(1,"label",33),So(2,"Phone:"),no(),to(3,"label",34),So(4),no(),no()),2&e){var n=fo(2);zi(4),To(n.user[n.userIndex].profile.phone)}}function tj(e,t){if(1&e&&(to(0,"div",32),to(1,"label",33),So(2,"Created:"),no(),to(3,"label",34),So(4),qs(5,"date"),no(),no()),2&e){var n=fo(2);zi(4),xo("",Qs(5,1,n.user[n.userIndex].createdAt,"dd.MM.yyyy HH:mm:ss")," ")}}function nj(e,t){if(1&e&&(to(0,"div",32),to(1,"label",33),So(2,"Updated:"),no(),to(3,"label",34),So(4),qs(5,"date"),no(),no()),2&e){var n=fo(2);zi(4),xo("",Qs(5,1,n.user[n.userIndex].updatedAt,"dd.MM.yyyy HH:mm:ss")," ")}}function ij(e,t){if(1&e&&(to(0,"label",34),So(1),qs(2,"date"),no()),2&e){var n=fo(2);zi(1),xo("",Qs(2,1,n.user[n.userIndex].status.registeredAt,"dd.MM.yyyy HH:mm:ss")," ")}}function rj(e,t){1&e&&(to(0,"label",34),So(1,"Not registered yet "),no())}function aj(e,t){if(1&e&&(to(0,"div",32),to(1,"label",33),So(2,"Locked:"),no(),to(3,"label",34),So(4),qs(5,"date"),no(),no()),2&e){var n=fo(2);zi(4),xo("",Qs(5,1,n.user[n.userIndex].status.lockedUntil,"dd.MM.yyyy HH:mm:ss")," ")}}function oj(e,t){if(1&e&&(to(0,"div",32),to(1,"label",33),So(2,"Retries:"),no(),to(3,"label",34),So(4),no(),no()),2&e){var n=fo(2);zi(4),xo("",n.user[n.userIndex].status.loginRetries," ")}}function sj(e,t){if(1&e&&(to(0,"div",32),to(1,"label",33),So(2,"Last Login:"),no(),to(3,"label",34),So(4),qs(5,"date"),no(),no()),2&e){var n=fo(2);zi(4),xo("",Qs(5,1,n.user[n.userIndex].status.lastLoginAt,"dd.MM.yyyy HH:mm:ss")," ")}}function lj(e,t){if(1&e){var n=so();to(0,"button",40),uo("click",(function(){return mn(n),fo(2).toggleDetail()})),So(1,"More"),no()}}function cj(e,t){if(1&e){var n=so();to(0,"button",40),uo("click",(function(){return mn(n),fo(2).toggleDetail()})),So(1,"Less"),no()}}function uj(e,t){if(1&e){var n=so();to(0,"div",21),to(1,"div",22),to(2,"div",23),to(3,"h5",24),So(4,"Detail of User"),no(),to(5,"button",25),to(6,"span",26),So(7,"\xd7"),no(),no(),no(),to(8,"div",27),to(9,"div",1),to(10,"div",28),to(11,"button",29),uo("click",(function(){return mn(n),fo().pageUserIndex(-1)})),So(12,"Prev"),no(),no(),to(13,"div",30),to(14,"button",31),uo("click",(function(){return mn(n),fo().pageUserIndex(1)})),So(15,"Next"),no(),no(),no(),to(16,"form"),to(17,"div",32),to(18,"label",33),So(19,"User:"),no(),to(20,"label",34),So(21),no(),no(),Ya(22,ZR,5,2,"div",35),Ya(23,XR,5,1,"div",35),Ya(24,ej,5,1,"div",35),Ya(25,tj,6,4,"div",35),Ya(26,nj,6,4,"div",35),to(27,"div",32),to(28,"label",33),So(29,"Registered:"),no(),Ya(30,ij,3,4,"label",36),Ya(31,rj,2,0,"label",36),no(),Ya(32,aj,6,4,"div",35),Ya(33,oj,5,1,"div",35),Ya(34,sj,6,4,"div",35),no(),no(),to(35,"div",37),Ya(36,lj,2,0,"button",38),Ya(37,cj,2,0,"button",38),to(38,"button",39),So(39,"Close"),no(),no(),no(),no()}if(2&e){var i=fo();zi(21),xo("",i.user[i.userIndex].email," "),zi(1),Xa("ngIf",i.user[i.userIndex].profile),zi(1),Xa("ngIf",i.user[i.userIndex].profile),zi(1),Xa("ngIf",i.user[i.userIndex].profile),zi(1),Xa("ngIf",i.showMore),zi(1),Xa("ngIf",i.showMore),zi(4),Xa("ngIf",i.user[i.userIndex].status&&i.user[i.userIndex].status.registeredAt),zi(1),Xa("ngIf",!(i.user[i.userIndex].status&&i.user[i.userIndex].status.registeredAt)),zi(1),Xa("ngIf",i.user[i.userIndex].status&&i.user[i.userIndex].status.lockedUntil),zi(1),Xa("ngIf",i.user[i.userIndex].status&&i.user[i.userIndex].status.loginRetries),zi(1),Xa("ngIf",i.user[i.userIndex].status),zi(2),Xa("ngIf",!i.showMore),zi(1),Xa("ngIf",i.showMore)}}var dj,hj,vj=((hj=function(){function e(t,n,i,r,a){p(this,e),this.sysuserService=t,this.messageService=n,this.alertService=i,this.route=r,this.router=a}return m(e,[{key:"ngOnInit",value:function(){this.getSysUsers(),this.sortTable(void 0)}},{key:"getSysUsers",value:function(){var e=this;this.userMatch&&(this.userMatch=this.userMatch.trim()),this.log("Get with filter "+this.userMatch),this.sysuserService.getSysUsers(this.userMatch).subscribe((function(t){e.user=t,e.sortTable(void 0),e.log("get success")}),(function(t){e.log("get failed: error: ".concat(t.status," message: ").concat(t.error.message)),e.alertService.error(Zv(t))}))}},{key:"helperUserIndex",value:function(e){this.userIndex=e}},{key:"pageUserIndex",value:function(e){var t=this.userIndex+e;t<0&&(t=0),t>=this.user.length&&(t=this.user.length-1),this.userIndex=t}},{key:"helperShortenText",value:function(e,t){return $v(e,t)}},{key:"toggleDetail",value:function(){this.log("Toggle ShowMore"),this.showMore=!this.showMore}},{key:"sortTable",value:function(e){this.user&&(this.log("Sort Table Column "+e),void 0!==e?e!==this.sortColumn?(this.sortColumn=e,this.sortAscending=void 0):void 0!==this.sortAscending&&(this.sortAscending=!this.sortAscending):(this.sortColumn=2,this.sortAscending=void 0),void 0===this.sortAscending&&(this.sortAscending=1===e),1===this.sortColumn?this.user.sort((function(e,t){return qv(e.email,t.email)})):2===this.sortColumn?this.user.sort((function(e,t){return zv(e.updatedAt,t.updatedAt)})):3===this.sortColumn?this.user.sort((function(e,t){return zv(e.status&&e.status.lastLoginAt?new Date(e.status.lastLoginAt):new Date("2001-01-01"),t.status&&t.status.lastLoginAt?new Date(t.status.lastLoginAt):new Date("2001-01-01"))})):4===this.sortColumn&&this.user.sort((function(e,t){return zv(e.status&&e.status.lastLoginFailedAt?new Date(e.status.lastLoginFailedAt):new Date("2001-01-01"),t.status&&t.status.lastLoginFailedAt?new Date(t.status.lastLoginFailedAt):new Date("2001-01-01"))})),this.sortAscending||this.user.reverse())}},{key:"log",value:function(e){this.messageService.add("Sys User: "+e)}}]),e}()).\u0275fac=function(e){return new(e||hj)(Za(zR),Za(tf),Za(Zm),Za(sg),Za(Am))},hj.\u0275cmp=wt({type:hj,selectors:[["app-sysuser"]],decls:34,vars:3,consts:[[1,"well"],[1,"row"],[1,"panel-heading"],["name","form","novalidate","",3,"ngSubmit"],["f","ngForm"],[1,"form-group","row"],["for","userMatch",1,"col-2","col-form-label"],["id","userMatch","type","text","name","userMatch",1,"col-2","col-sm-4","form-control","mx-1",3,"ngModel","ngModelChange"],["type","button",1,"btn","btn-primary","mx-1",3,"click"],[1,"container-fluid"],[1,"panel-body"],[1,"table","table-hover","table-sortable"],[1,"d-none","d-md-table-cell"],[3,"click"],[1,"d-none","d-md-table-cell",3,"click"],["data-toggle","modal","data-target","#UserDetail",3,"click",4,"ngFor","ngForOf"],["id","UserDetail","tabindex","-1","role","dialog","aria-labelledby","User Detail","aria-hidden","true",1,"modal","fade"],["class","modal-dialog modal-lg modal-dialog-centered","role","document",4,"ngIf"],["data-toggle","modal","data-target","#UserDetail",3,"click"],["class","d-none d-md-table-cell",4,"ngIf"],["title","Detail of Visbo User","data-toggle","modal","data-target","#UserDetail",1,"Detail",3,"click"],["role","document",1,"modal-dialog","modal-lg","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header"],["id","UserDetailTitle",1,"modal-title"],["type","button","data-dismiss","modal","aria-label","Close",1,"close"],["aria-hidden","true"],[1,"modal-body"],[1,"col-10"],["type","button","title","Prev User",1,"btn","btn-secondary",3,"click"],[1,"col-2"],["type","button","title","Next User",1,"btn","btn-secondary","align-self-end",3,"click"],[1,"form-group"],[1,"col-4","col-form-label"],[1,"col-7","form-control-static"],["class","form-group",4,"ngIf"],["class","col-7 form-control-static",4,"ngIf"],[1,"modal-footer","align-items-end"],["type","button","class","btn btn-secondary",3,"click",4,"ngIf"],["type","button","data-dismiss","modal",1,"btn","btn-primary"],["type","button",1,"btn","btn-secondary",3,"click"]],template:function(e,t){1&e&&(io(0,"app-sysnavbar"),to(1,"div",0),to(2,"div",1),to(3,"h2",2),So(4," Visbo Users "),no(),no(),to(5,"form",3,4),uo("ngSubmit",(function(){return t.getSysUsers()})),to(7,"div",5),to(8,"label",6),So(9,"Filter:"),no(),to(10,"input",7),uo("ngModelChange",(function(e){return t.userMatch=e})),no(),to(11,"button",8),uo("click",(function(){return t.getSysUsers()})),So(12,"Filter"),no(),no(),no(),to(13,"div",9),to(14,"div",10),to(15,"table",11),to(16,"thead"),to(17,"tr"),to(18,"th",12),So(19,"Nr."),no(),to(20,"th",13),uo("click",(function(){return t.sortTable(1)})),So(21,"User"),no(),to(22,"th",14),uo("click",(function(){return t.sortTable(2)})),So(23,"Updated"),no(),to(24,"th",14),uo("click",(function(){return t.sortTable(3)})),So(25,"Last Login"),no(),to(26,"th",14),uo("click",(function(){return t.sortTable(4)})),So(27,"Failed Login"),no(),to(28,"th"),So(29,"Detail"),no(),no(),no(),to(30,"tbody"),Ya(31,$R,16,10,"tr",15),no(),no(),no(),no(),no(),to(32,"div",16),Ya(33,uj,40,13,"div",17),no()),2&e&&(zi(10),Xa("ngModel",t.userMatch),zi(21),Xa("ngForOf",t.user),zi(2),Xa("ngIf",t.userIndex>=0&&t.userIndex<t.user.length))},directives:[mV,Fh,xd,Gh,Ad,Td,Nh,au,su],pipes:[Cu],styles:[""]}),hj),fj=((dj=function(){function e(t,n,i){p(this,e),this.http=t,this.messageService=n,this.env=i,this.serviceUrl=this.env.restUrl.concat("/syslog")}return m(e,[{key:"getSysLogs",value:function(e){var t=this,n=this.serviceUrl,i=new ov({"Content-Type":"application/json"}),r=new cv;return r=r.append("ageDays",e.toString()),this.log("Calling HTTP Request: "+n),this.http.get(n,{headers:i,params:r}).pipe(B((function(e){return e.files})),cf((function(e){return t.log("fetched ".concat(e.length," Log Files "))})),af(this.handleError("getSysLog")))}},{key:"getSysLog",value:function(e,t){var n=this,i="".concat(this.serviceUrl,"/file/").concat(e,"/").concat(t);this.log("Calling HTTP Request for a specific log file: "+i);var r=void 0;return(r={}).observe="body",r.responseType="text",this.http.get(i,r).pipe(cf((function(){return n.log("fetched Log File Response ")})),af(this.handleError("getSysLog name:".concat(t," "))))}},{key:"handleError",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"operation",n=arguments.length>1?arguments[1]:void 0;return function(i){return e.log("HTTP Request ".concat(t," failed: ").concat(i.error.message," status:").concat(i.status,", Result ").concat(JSON.stringify(n))),nf(i)}}},{key:"log",value:function(e){this.messageService.add("VisboLogsService: "+e)}}]),e}()).\u0275fac=function(e){return new(e||dj)(ot(Sv),ot(tf),ot(Vf))},dj.\u0275prov=Ve({token:dj,factory:dj.\u0275fac}),dj);function pj(e,t){if(1&e){var n=so();to(0,"tr",16),uo("click",(function(){mn(n);var e=t.index;return fo().helperFileIndex(e)}))("click",(function(){mn(n);var e=t.$implicit;return fo().getVisboLogFile(e)})),to(1,"td",15),to(2,"a"),So(3),no(),no(),to(4,"td",15),So(5),no(),to(6,"td"),So(7),qs(8,"date"),no(),to(9,"td"),So(10),no(),to(11,"td"),to(12,"button",29),uo("click",(function(){mn(n);var e=t.$implicit;return fo().getVisboLogFile(e)})),So(13,"i"),no(),no(),no()}if(2&e){var i=t.$implicit,r=fo();zi(3),To(i.name),zi(2),To(i.folder),zi(2),To(Qs(8,4,i.updatedAt,"dd.MM HH:mm")),zi(3),To(r.formatBytes(i.size,void 0))}}function gj(e,t){if(1&e){var n=so();to(0,"div",30),to(1,"form"),to(2,"div",7),to(3,"label",31),So(4,"VC:"),no(),to(5,"select",32),uo("ngModelChange",(function(e){return mn(n),fo().logLevelSetting.value.VC=e})),to(6,"option",33),So(7,"Fatal"),no(),to(8,"option",34),So(9,"Warning"),no(),to(10,"option",35),So(11,"Information"),no(),to(12,"option",36),So(13,"Debug"),no(),to(14,"option",37),So(15,"Trace"),no(),no(),no(),to(16,"div",7),to(17,"label",31),So(18,"VP:"),no(),to(19,"select",38),uo("ngModelChange",(function(e){return mn(n),fo().logLevelSetting.value.VP=e})),to(20,"option",33),So(21,"Fatal"),no(),to(22,"option",34),So(23,"Warning"),no(),to(24,"option",35),So(25,"Information"),no(),to(26,"option",36),So(27,"Debug"),no(),to(28,"option",37),So(29,"Trace"),no(),no(),no(),to(30,"div",7),to(31,"label",31),So(32,"VPV:"),no(),to(33,"select",39),uo("ngModelChange",(function(e){return mn(n),fo().logLevelSetting.value.VPV=e})),to(34,"option",33),So(35,"Fatal"),no(),to(36,"option",34),So(37,"Warning"),no(),to(38,"option",35),So(39,"Information"),no(),to(40,"option",36),So(41,"Debug"),no(),to(42,"option",37),So(43,"Trace"),no(),no(),no(),to(44,"div",7),to(45,"label",31),So(46,"USER:"),no(),to(47,"select",40),uo("ngModelChange",(function(e){return mn(n),fo().logLevelSetting.value.USER=e})),to(48,"option",33),So(49,"Fatal"),no(),to(50,"option",34),So(51,"Warning"),no(),to(52,"option",35),So(53,"Information"),no(),to(54,"option",36),So(55,"Debug"),no(),to(56,"option",37),So(57,"Trace"),no(),no(),no(),to(58,"div",7),to(59,"label",31),So(60,"MAIL:"),no(),to(61,"select",41),uo("ngModelChange",(function(e){return mn(n),fo().logLevelSetting.value.MAIL=e})),to(62,"option",33),So(63,"Fatal"),no(),to(64,"option",34),So(65,"Warning"),no(),to(66,"option",35),So(67,"Information"),no(),to(68,"option",36),So(69,"Debug"),no(),to(70,"option",37),So(71,"Trace"),no(),no(),no(),to(72,"div",7),to(73,"label",31),So(74,"OTHER:"),no(),to(75,"select",42),uo("ngModelChange",(function(e){return mn(n),fo().logLevelSetting.value.OTHER=e})),to(76,"option",33),So(77,"Fatal"),no(),to(78,"option",34),So(79,"Warning"),no(),to(80,"option",35),So(81,"Information"),no(),to(82,"option",36),So(83,"Debug"),no(),to(84,"option",37),So(85,"Trace"),no(),no(),no(),to(86,"div",7),to(87,"label",31),So(88,"All:"),no(),to(89,"select",43),uo("ngModelChange",(function(e){return mn(n),fo().logLevelSetting.value.All=e})),to(90,"option",33),So(91,"Fatal"),no(),to(92,"option",34),So(93,"Warning"),no(),to(94,"option",35),So(95,"Information"),no(),to(96,"option",36),So(97,"Debug"),no(),to(98,"option",37),So(99,"Trace"),no(),no(),no(),no(),no()}if(2&e){var i=fo();zi(5),Xa("ngModel",i.logLevelSetting.value.VC),zi(14),Xa("ngModel",i.logLevelSetting.value.VP),zi(14),Xa("ngModel",i.logLevelSetting.value.VPV),zi(14),Xa("ngModel",i.logLevelSetting.value.USER),zi(14),Xa("ngModel",i.logLevelSetting.value.MAIL),zi(14),Xa("ngModel",i.logLevelSetting.value.OTHER),zi(14),Xa("ngModel",i.logLevelSetting.value.All)}}function mj(e,t){if(1&e){var n=so();to(0,"tr",13),uo("click",(function(){mn(n);var e=t.index;return fo().helperTaskIndex(e)})),to(1,"td"),to(2,"a"),So(3),no(),no(),to(4,"td",14),So(5),qs(6,"date"),no(),to(7,"td",14),So(8),qs(9,"date"),no(),to(10,"td"),So(11),no(),to(12,"td"),to(13,"button",15),So(14,"i"),no(),no(),no()}if(2&e){var i=t.$implicit;zi(3),To(i.name),zi(2),To(Qs(6,4,i.value.lastRun,"dd.MM HH:mm:ss")),zi(3),To(Qs(9,7,i.value.nextRun,"dd.MM HH:mm:ss")),zi(3),To(i.value.taskSpecific&&i.value.taskSpecific.result)}}function bj(e,t){if(1&e&&(to(0,"div"),to(1,"div",27),to(2,"label",28),So(3,"Result:"),no(),to(4,"label",29),So(5),no(),no(),to(6,"div",27),to(7,"label",28),So(8,"Message:"),no(),to(9,"label",29),So(10),no(),no(),no()),2&e){var n=fo(3);zi(5),To(n.vcsetting[n.taskIndex].value.taskSpecific.result),zi(5),To(n.vcsetting[n.taskIndex].value.taskSpecific.resultDescription)}}function yj(e,t){if(1&e&&(to(0,"div"),to(1,"div",27),to(2,"label",28),So(3,"Last Run:"),no(),to(4,"label",29),So(5),qs(6,"date"),no(),no(),to(7,"div",27),to(8,"label",28),So(9,"Next Run:"),no(),to(10,"label",29),So(11),qs(12,"date"),no(),no(),to(13,"div",27),to(14,"label",28),So(15,"Last Duration:"),no(),to(16,"label",29),So(17),qs(18,"date"),no(),no(),Ya(19,bj,11,2,"div",30),no()),2&e){var n=fo(2);zi(5),To(Qs(6,4,n.vcsetting[n.taskIndex].value.lastRun,"dd.MM HH:mm:ss")),zi(6),To(Qs(12,7,n.vcsetting[n.taskIndex].value.nextRun,"dd.MM HH:mm:ss")),zi(6),To(Qs(18,10,n.vcsetting[n.taskIndex].value.lastDuration,"mm:ss:SSS")),zi(2),Xa("ngIf",n.vcsetting[n.taskIndex].value.taskSpecific)}}function kj(e,t){if(1&e){var n=so();to(0,"div",16),to(1,"div",17),to(2,"div",18),to(3,"h5",19),So(4,"Detail of Task"),no(),to(5,"button",20),to(6,"span",21),So(7,"\xd7"),no(),no(),no(),to(8,"div",22),to(9,"div",1),to(10,"div",23),to(11,"button",24),uo("click",(function(){return mn(n),fo().pageTaskIndex(-1)})),So(12,"Prev"),no(),no(),to(13,"div",25),to(14,"button",26),uo("click",(function(){return mn(n),fo().pageTaskIndex(1)})),So(15,"Next"),no(),no(),no(),to(16,"form"),to(17,"div",27),to(18,"label",28),So(19,"Task:"),no(),to(20,"label",29),So(21),no(),no(),Ya(22,yj,20,13,"div",30),no(),no(),to(23,"div",31),to(24,"button",32),So(25,"Close"),no(),to(26,"button",33),uo("click",(function(){return mn(n),fo().executeTask()})),So(27,"Execute"),no(),no(),no(),no()}if(2&e){var i=fo();zi(21),xo("",i.vcsetting[i.taskIndex].name," "),zi(1),Xa("ngIf",i.vcsetting[i.taskIndex].value)}}function Cj(e,t){if(1&e){var n=so();to(0,"tr",11),uo("click",(function(){mn(n);var e=t.$implicit;return fo().editConfigName(e.name)})),to(1,"td"),to(2,"a"),So(3),no(),no(),to(4,"td"),So(5),no(),to(6,"td"),So(7),qs(8,"date"),no(),no()}if(2&e){var i=t.$implicit,r=fo();zi(3),To(i.name),zi(2),To(r.getMainInfo(i)),zi(2),To(Qs(8,3,i.updatedAt,"dd.MM HH:mm:ss"))}}function Vj(e,t){1&e&&(to(0,"h5",23),So(1,"Config UI URL"),no())}function wj(e,t){1&e&&(to(0,"h5",23),So(1,"Config Debug Setting"),no())}function Aj(e,t){1&e&&(to(0,"h5",23),So(1,"Config Password Policy"),no())}function Pj(e,t){1&e&&(to(0,"h5",23),So(1,"Config SMTP Setting"),no())}function Dj(e,t){1&e&&(to(0,"h5",23),So(1,"Config Redis Address"),no())}function Mj(e,t){1&e&&(to(0,"h5",23),So(1,"Config Maximum Log File Age"),no())}function Ij(e,t){if(1&e){var n=so();to(0,"form"),to(1,"div"),to(2,"div",24),to(3,"label",25),So(4,"UI Url:"),no(),to(5,"input",26),uo("ngModelChange",(function(e){mn(n);var t=fo(2);return t.vcsetting[t.editIndex].value.UIUrl=e})),no(),no(),no(),no()}if(2&e){var i=fo(2);zi(5),Xa("ngModel",i.vcsetting[i.editIndex].value.UIUrl)}}function Sj(e,t){if(1&e){var n=so();to(0,"form"),to(1,"div"),to(2,"div",24),to(3,"label",27),So(4,"PW Policy Regex:"),no(),to(5,"input",28),uo("ngModelChange",(function(e){mn(n);var t=fo(2);return t.vcsetting[t.editIndex].value.PWPolicy=e})),no(),no(),to(6,"div",24),to(7,"label",29),So(8,"PW Policy Description:"),no(),to(9,"textarea",30),uo("ngModelChange",(function(e){mn(n);var t=fo(2);return t.vcsetting[t.editIndex].value.Description=e})),no(),no(),no(),no()}if(2&e){var i=fo(2);zi(5),Xa("ngModel",i.vcsetting[i.editIndex].value.PWPolicy),zi(4),Xa("ngModel",i.vcsetting[i.editIndex].value.Description)}}function Tj(e,t){if(1&e){var n=so();to(0,"div"),to(1,"div",24),to(2,"label",31),So(3,"SMTP Host:"),no(),to(4,"input",32),uo("ngModelChange",(function(e){mn(n);var t=fo(3);return t.vcsetting[t.editIndex].value.host=e})),no(),no(),to(5,"div",24),to(6,"label",33),So(7,"User:"),no(),to(8,"input",34),uo("ngModelChange",(function(e){mn(n);var t=fo(3);return t.vcsetting[t.editIndex].value.auth.user=e})),no(),no(),to(9,"div",24),to(10,"label",35),So(11,"Password:"),no(),to(12,"input",36),uo("ngModelChange",(function(e){mn(n);var t=fo(3);return t.vcsetting[t.editIndex].value.auth.pass=e})),no(),no(),to(13,"div",24),to(14,"label",37),So(15,"Port:"),no(),to(16,"input",38),uo("ngModelChange",(function(e){mn(n);var t=fo(3);return t.vcsetting[t.editIndex].value.port=e})),no(),no(),to(17,"div",24),to(18,"label",39),So(19,"Connection Timeout:"),no(),to(20,"input",40),uo("ngModelChange",(function(e){mn(n);var t=fo(3);return t.vcsetting[t.editIndex].value.connectionTimeout=e})),no(),no(),to(21,"div",24),to(22,"label",41),So(23,"Greeting Timeout:"),no(),to(24,"input",42),uo("ngModelChange",(function(e){mn(n);var t=fo(3);return t.vcsetting[t.editIndex].value.greetingTimeout=e})),no(),no(),to(25,"div",43),to(26,"input",44,45),uo("ngModelChange",(function(e){mn(n);var t=fo(3);return t.vcsetting[t.editIndex].value.pool=e})),no(),to(28,"label",46),So(29,"Pool Connections"),no(),no(),to(30,"div",43),to(31,"input",47,48),uo("ngModelChange",(function(e){mn(n);var t=fo(3);return t.vcsetting[t.editIndex].value.secure=e})),no(),to(33,"label",49),So(34,"Secure Connection"),no(),no(),to(35,"div",43),to(36,"input",50,51),uo("ngModelChange",(function(e){mn(n);var t=fo(3);return t.vcsetting[t.editIndex].value.requireTLS=e})),no(),to(38,"label",52),So(39,"Require TLS"),no(),no(),no()}if(2&e){var i=fo(3);zi(4),Xa("ngModel",i.vcsetting[i.editIndex].value.host),zi(4),Xa("ngModel",i.vcsetting[i.editIndex].value.auth.user),zi(4),Xa("ngModel",i.vcsetting[i.editIndex].value.auth.pass),zi(4),Xa("ngModel",i.vcsetting[i.editIndex].value.port),zi(4),Xa("ngModel",i.vcsetting[i.editIndex].value.connectionTimeout),zi(4),Xa("ngModel",i.vcsetting[i.editIndex].value.greetingTimeout),zi(2),Xa("ngModel",i.vcsetting[i.editIndex].value.pool),zi(5),Xa("ngModel",i.vcsetting[i.editIndex].value.secure),zi(5),Xa("ngModel",i.vcsetting[i.editIndex].value.requireTLS)}}function xj(e,t){if(1&e&&(to(0,"form"),Ya(1,Tj,40,9,"div",19),no()),2&e){var n=fo(2);zi(1),Xa("ngIf",n.editIndex>=0&&"SMTP"==n.vcsetting[n.editIndex].name)}}function _j(e,t){if(1&e){var n=so();to(0,"form"),to(1,"div"),to(2,"div",24),to(3,"label",53),So(4,"Host:"),no(),to(5,"input",54),uo("ngModelChange",(function(e){mn(n);var t=fo(2);return t.vcsetting[t.editIndex].value.host=e})),no(),no(),to(6,"div",24),to(7,"label",55),So(8,"Port:"),no(),to(9,"input",56),uo("ngModelChange",(function(e){mn(n);var t=fo(2);return t.vcsetting[t.editIndex].value.port=e})),no(),no(),no(),no()}if(2&e){var i=fo(2);zi(5),Xa("ngModel",i.vcsetting[i.editIndex].value.host),zi(4),Xa("ngModel",i.vcsetting[i.editIndex].value.port)}}function Uj(e,t){if(1&e){var n=so();to(0,"form"),to(1,"div",57),to(2,"label",58),So(3,"VC:"),no(),to(4,"select",59),uo("ngModelChange",(function(e){mn(n);var t=fo(2);return t.vcsetting[t.editIndex].value.VC=e})),to(5,"option",60),So(6,"Fatal"),no(),to(7,"option",61),So(8,"Warning"),no(),to(9,"option",62),So(10,"Information"),no(),to(11,"option",63),So(12,"Debug"),no(),to(13,"option",64),So(14,"Trace"),no(),no(),no(),to(15,"div",57),to(16,"label",58),So(17,"VP:"),no(),to(18,"select",65),uo("ngModelChange",(function(e){mn(n);var t=fo(2);return t.vcsetting[t.editIndex].value.VP=e})),to(19,"option",60),So(20,"Fatal"),no(),to(21,"option",61),So(22,"Warning"),no(),to(23,"option",62),So(24,"Information"),no(),to(25,"option",63),So(26,"Debug"),no(),to(27,"option",64),So(28,"Trace"),no(),no(),no(),to(29,"div",57),to(30,"label",58),So(31,"VPV:"),no(),to(32,"select",66),uo("ngModelChange",(function(e){mn(n);var t=fo(2);return t.vcsetting[t.editIndex].value.VPV=e})),to(33,"option",60),So(34,"Fatal"),no(),to(35,"option",61),So(36,"Warning"),no(),to(37,"option",62),So(38,"Information"),no(),to(39,"option",63),So(40,"Debug"),no(),to(41,"option",64),So(42,"Trace"),no(),no(),no(),to(43,"div",57),to(44,"label",58),So(45,"USER:"),no(),to(46,"select",67),uo("ngModelChange",(function(e){mn(n);var t=fo(2);return t.vcsetting[t.editIndex].value.USER=e})),to(47,"option",60),So(48,"Fatal"),no(),to(49,"option",61),So(50,"Warning"),no(),to(51,"option",62),So(52,"Information"),no(),to(53,"option",63),So(54,"Debug"),no(),to(55,"option",64),So(56,"Trace"),no(),no(),no(),to(57,"div",57),to(58,"label",58),So(59,"MAIL:"),no(),to(60,"select",68),uo("ngModelChange",(function(e){mn(n);var t=fo(2);return t.vcsetting[t.editIndex].value.MAIL=e})),to(61,"option",60),So(62,"Fatal"),no(),to(63,"option",61),So(64,"Warning"),no(),to(65,"option",62),So(66,"Information"),no(),to(67,"option",63),So(68,"Debug"),no(),to(69,"option",64),So(70,"Trace"),no(),no(),no(),to(71,"div",57),to(72,"label",58),So(73,"OTHER:"),no(),to(74,"select",69),uo("ngModelChange",(function(e){mn(n);var t=fo(2);return t.vcsetting[t.editIndex].value.OTHER=e})),to(75,"option",60),So(76,"Fatal"),no(),to(77,"option",61),So(78,"Warning"),no(),to(79,"option",62),So(80,"Information"),no(),to(81,"option",63),So(82,"Debug"),no(),to(83,"option",64),So(84,"Trace"),no(),no(),no(),to(85,"div",57),to(86,"label",58),So(87,"All:"),no(),to(88,"select",70),uo("ngModelChange",(function(e){mn(n);var t=fo(2);return t.vcsetting[t.editIndex].value.All=e})),to(89,"option",60),So(90,"Fatal"),no(),to(91,"option",61),So(92,"Warning"),no(),to(93,"option",62),So(94,"Information"),no(),to(95,"option",63),So(96,"Debug"),no(),to(97,"option",64),So(98,"Trace"),no(),no(),no(),no()}if(2&e){var i=fo(2);zi(4),Xa("ngModel",i.vcsetting[i.editIndex].value.VC),zi(14),Xa("ngModel",i.vcsetting[i.editIndex].value.VP),zi(14),Xa("ngModel",i.vcsetting[i.editIndex].value.VPV),zi(14),Xa("ngModel",i.vcsetting[i.editIndex].value.USER),zi(14),Xa("ngModel",i.vcsetting[i.editIndex].value.MAIL),zi(14),Xa("ngModel",i.vcsetting[i.editIndex].value.OTHER),zi(14),Xa("ngModel",i.vcsetting[i.editIndex].value.All)}}function Oj(e,t){if(1&e){var n=so();to(0,"form"),to(1,"div"),to(2,"div",24),to(3,"label",71),So(4,"Max Age:"),no(),to(5,"input",72),uo("ngModelChange",(function(e){mn(n);var t=fo(2);return t.vcsetting[t.editIndex].value.duration=e})),no(),no(),no(),no()}if(2&e){var i=fo(2);zi(5),Xa("ngModel",i.vcsetting[i.editIndex].value.duration)}}function Ej(e,t){if(1&e){var n=so();to(0,"button",73),uo("click",(function(){mn(n);var e=fo(2);return e.updateConfig(e.vcsetting[e.editIndex])})),So(1,"Update"),no()}}function Lj(e,t){if(1&e&&(to(0,"div",12),to(1,"div",13),to(2,"div",14),Ya(3,Vj,2,0,"h5",15),Ya(4,wj,2,0,"h5",15),Ya(5,Aj,2,0,"h5",15),Ya(6,Pj,2,0,"h5",15),Ya(7,Dj,2,0,"h5",15),Ya(8,Mj,2,0,"h5",15),to(9,"button",16),to(10,"span",17),So(11,"\xd7"),no(),no(),no(),to(12,"div",18),Ya(13,Ij,6,1,"form",19),Ya(14,Sj,10,2,"form",19),Ya(15,xj,2,1,"form",19),Ya(16,_j,10,2,"form",19),Ya(17,Uj,99,7,"form",19),Ya(18,Oj,6,1,"form",19),no(),to(19,"div",20),to(20,"button",21),So(21,"Close"),no(),Ya(22,Ej,2,0,"button",22),no(),no(),no()),2&e){var n=fo();zi(3),Xa("ngIf","UI URL"==n.vcsetting[n.editIndex].name),zi(1),Xa("ngIf","DEBUG"==n.vcsetting[n.editIndex].name),zi(1),Xa("ngIf","PW Policy"==n.vcsetting[n.editIndex].name),zi(1),Xa("ngIf","SMTP"==n.vcsetting[n.editIndex].name),zi(1),Xa("ngIf","REDIS"==n.vcsetting[n.editIndex].name),zi(1),Xa("ngIf","Log Age"==n.vcsetting[n.editIndex].name),zi(5),Xa("ngIf","UI URL"==n.vcsetting[n.editIndex].name),zi(1),Xa("ngIf","PW Policy"==n.vcsetting[n.editIndex].name),zi(1),Xa("ngIf","SMTP"==n.vcsetting[n.editIndex].name),zi(1),Xa("ngIf","REDIS"==n.vcsetting[n.editIndex].name),zi(1),Xa("ngIf","DEBUG"==n.vcsetting[n.editIndex].name),zi(1),Xa("ngIf","Log Age"==n.vcsetting[n.editIndex].name),zi(4),Xa("ngIf",n.hasSystemPerm(n.permSystem.Modify))}}var Gj,Rj,jj,Nj,Fj,Bj,Hj,Kj=[{path:"login",component:Ay},{path:"register",component:Fy},{path:"registerconfirm",component:Hy},{path:"oauthconfirm",component:qy},{path:"register/:id",component:Fy},{path:"pwforgotten",component:Zy},{path:"pwreset",component:ok},{path:"dashboard",component:Vk,canActivate:[zy]},{path:"vc",component:Ik,canActivate:[zy]},{path:"vcDetail/:id",component:cV,canActivate:[zy]},{path:"vcAudit/:id",component:QV,canActivate:[zy]},{path:"vp",component:_D,canActivate:[zy]},{path:"vp/:id",component:_D,canActivate:[zy]},{path:"vpDetail/:id",component:VI,canActivate:[zy]},{path:"vpAudit/:id",component:Iw,canActivate:[zy]},{path:"vpViewCost/:id",component:qU,canActivate:[zy]},{path:"vpViewDeadlines/:id",component:qU,canActivate:[zy]},{path:"vpViewDeliveries/:id",component:qU,canActivate:[zy]},{path:"vpView/:id",component:qU,canActivate:[zy]},{path:"vpKeyMetrics/:id",component:qU,canActivate:[zy]},{path:"vpRestrict/:id",component:uO,canActivate:[zy]},{path:"vpv",component:XI,canActivate:[zy]},{path:"vpv/:id",component:XI,canActivate:[zy]},{path:"vpf/:id",component:JS,canActivate:[zy]},{path:"settings",component:dO,canActivate:[zy]},{path:"profile",component:IO,canActivate:[zy]},{path:"sysadmins",component:YE,canActivate:[zy]},{path:"sysvc",component:iL,canActivate:[zy]},{path:"sysvcDetail/:id",component:wG,canActivate:[zy]},{path:"sysvp/:id",component:TG,canActivate:[zy]},{path:"sysvpDetail/:id",component:vR,canActivate:[zy]},{path:"sysaudit",component:KR,canActivate:[zy]},{path:"sysuser",component:vj,canActivate:[zy]},{path:"syslog",component:(jj=function(){function e(t,n,i,r,a){p(this,e),this.visbocenterService=t,this.visbosettingService=n,this.syslogService=i,this.messageService=r,this.alertService=a}return m(e,[{key:"ngOnInit",value:function(){this.systemVC=this.visbocenterService.getSysVCId(),this.ageDays=3,this.sortColumn=2,this.getVisboLogs(),this.sortTable(1),this.log("syslog init VC ID "+this.systemVC)}},{key:"getVisboLogs",value:function(){var e=this;this.log("syslog getVisboLogs"),this.sortAscending=!this.sortAscending,this.syslogService.getSysLogs(this.ageDays).subscribe((function(t){e.files=t,e.sortTable(e.sortColumn),e.log("get Logs success")}),(function(t){e.log("get Logs failed: error: ".concat(t.status," message: ").concat(t.error.message)),e.alertService.error(Zv(t))}))}},{key:"helperFileIndex",value:function(e){this.fileIndex=e}},{key:"switchView",value:function(){this.logDataShow=!this.logDataShow}},{key:"getVisboLogFile",value:function(e){var t=this;this.log("syslog getVisboLogFile"),this.syslogService.getSysLog(e.folder,e.name).subscribe((function(n){t.log("get Log Content success Start: "+n.substring(0,30)),t.downloadFile(n,e.name)}),(function(e){t.log("get Log Content failed: error: ".concat(e.status," message: ").concat(e.error.message)),t.alertService.error(Zv(e))}))}},{key:"getLogLevel",value:function(){var e=this;this.log("syslog getLogLevel"),this.visbosettingService.getVCSettingByName(this.systemVC,"DEBUG",!0).subscribe((function(t){e.logLevelSetting=t[0],e.log("get Log Level success "+JSON.stringify(e.logLevelSetting))}),(function(t){e.log("get Log Level failed: error: ".concat(t.status," message: ").concat(t.error.message)),e.alertService.error(Zv(t))}))}},{key:"setLogLevel",value:function(){var e=this;this.log("syslog setLogLevel"),this.visbosettingService.updateVCSetting(this.systemVC,this.logLevelSetting,!0).subscribe((function(t){e.log("set Log Level success "+JSON.stringify(t)),e.alertService.success("Successfully changed Log Level",!0),e.logLevelSetting=t}),(function(t){e.log("set Log Level failed: error: ".concat(t.status," message: ").concat(t.error.message)),e.alertService.error(Zv(t))}))}},{key:"downloadFile",value:function(e,t){this.log("download File succeeded Len: "+e.length);var n=new Blob([e],{type:"text/plain"}),i=window.URL.createObjectURL(n);this.log("Open URL "+i);var r=document.createElement("a");document.body.appendChild(r),r.href=i,r.download=t+".log",r.click(),window.URL.revokeObjectURL(i)}},{key:"formatBytes",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;if(0===e)return"0 Bytes";var n=t||2,i=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,i)).toFixed(n))+" "+["Bytes","KB","MB","GB"][i]}},{key:"sortTable",value:function(e){this.files&&(void 0===e&&void 0!==this.sortColumn||(e!==this.sortColumn&&(this.sortColumn=e,this.sortAscending=void 0),this.sortAscending=void 0===this.sortAscending?1===e:!this.sortAscending),1===this.sortColumn?this.files.sort((function(e,t){return qv(e.name,t.name)})):2===this.sortColumn?this.files.sort((function(e,t){return zv(e.updatedAt,t.updatedAt)})):3===this.sortColumn&&this.files.sort((function(e,t){return e.size-t.size})),this.sortAscending||this.files.reverse())}},{key:"log",value:function(e){this.messageService.add("Sys Logs: "+e)}}]),e}(),jj.\u0275fac=function(e){return new(e||jj)(Za(my),Za(Sk),Za(fj),Za(tf),Za(Zm))},jj.\u0275cmp=wt({type:jj,selectors:[["app-syslog"]],decls:62,vars:3,consts:[[1,"well"],[1,"container-fluid"],[1,"row"],[1,"col"],[1,"panel-heading"],["name","form","novalidate","",3,"ngSubmit"],["f","ngForm"],[1,"form-group","row"],["for","auditCount",1,"col-form-label"],["name","ageDays",1,"col-1","form-control","mx-1",3,"ngModel","ngModelChange"],["type","button",1,"btn","btn-primary","mx-1",3,"click"],["type","button","data-toggle","modal","data-target","#ChangeLogLevel",1,"btn","btn-sm","btn-primary","float-right",3,"click"],[1,"panel-body"],[1,"table","table-hover","table-sortable"],[1,"d-none","d-md-table-cell",3,"click"],[1,"d-none","d-md-table-cell"],[3,"click"],[3,"click",4,"ngFor","ngForOf"],["id","ChangeLogLevel","tabindex","-1","role","dialog","aria-labelledby","ChangeLogLevelTitle","aria-hidden","true",1,"modal","fade"],["role","document",1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header"],["id","ChangeLogLevelTitle",1,"modal-title"],["type","button","data-dismiss","modal","aria-label","Close",1,"close"],["aria-hidden","true"],["class","modal-body",4,"ngIf"],[1,"modal-footer","align-items-end"],["type","button","data-dismiss","modal",1,"btn","btn-secondary"],["type","button","data-dismiss","modal",1,"btn","btn-primary",3,"click"],["title","Save As",1,"Detail",3,"click"],[1,"modal-body"],[1,"col-3","col-form-label"],["name","VC",1,"col-8","form-control",3,"ngModel","ngModelChange"],["value","fatal"],["value","warn"],["value","info"],["value","debug"],["value","trace"],["name","VP",1,"col-8","form-control",3,"ngModel","ngModelChange"],["name","VPV",1,"col-8","form-control",3,"ngModel","ngModelChange"],["name","USER",1,"col-8","form-control",3,"ngModel","ngModelChange"],["name","MAIL",1,"col-8","form-control",3,"ngModel","ngModelChange"],["name","OTHER",1,"col-8","form-control",3,"ngModel","ngModelChange"],["name","All",1,"col-8","form-control",3,"ngModel","ngModelChange"]],template:function(e,t){1&e&&(io(0,"app-sysnavbar"),to(1,"div",0),to(2,"div",1),to(3,"div",2),to(4,"div",3),to(5,"h2",4),So(6," Visbo Log Files "),no(),no(),no(),to(7,"div",3),to(8,"form",5,6),uo("ngSubmit",(function(){return t.getVisboLogs()})),to(10,"div",7),to(11,"label",8),So(12,"Max age in days:"),no(),to(13,"select",9),uo("ngModelChange",(function(e){return t.ageDays=e})),to(14,"option"),So(15,"0"),no(),to(16,"option"),So(17,"3"),no(),to(18,"option"),So(19,"7"),no(),to(20,"option"),So(21,"30"),no(),to(22,"option"),So(23,"365"),no(),no(),to(24,"button",10),uo("click",(function(){return t.getVisboLogs()})),So(25,"Refresh"),no(),to(26,"div",3),to(27,"button",11),uo("click",(function(){return t.getLogLevel()})),So(28,"Change Log Level"),no(),no(),no(),no(),no(),no(),to(29,"div"),to(30,"div",1),to(31,"div",12),to(32,"table",13),to(33,"thead"),to(34,"tr"),to(35,"th",14),uo("click",(function(){return t.sortTable(1)})),So(36,"Name"),no(),to(37,"th",15),So(38,"Host"),no(),to(39,"th",16),uo("click",(function(){return t.sortTable(2)})),So(40,"Modified"),no(),to(41,"th",16),uo("click",(function(){return t.sortTable(3)})),So(42," Size"),no(),to(43,"th"),So(44,"Detail"),no(),no(),no(),to(45,"tbody"),Ya(46,pj,14,7,"tr",17),no(),no(),no(),no(),no(),no(),to(47,"div",18),to(48,"div",19),to(49,"div",20),to(50,"div",21),to(51,"h5",22),So(52,"Change Log Level"),no(),to(53,"button",23),to(54,"span",24),So(55,"\xd7"),no(),no(),no(),Ya(56,gj,100,7,"div",25),to(57,"div",26),to(58,"button",27),So(59,"Close"),no(),to(60,"button",28),uo("click",(function(){return t.setLogLevel()})),So(61,"Save"),no(),no(),no(),no(),no()),2&e&&(zi(13),Xa("ngModel",t.ageDays),zi(33),Xa("ngForOf",t.files),zi(10),Xa("ngIf",t.logLevelSetting))},directives:[mV,Fh,xd,Gh,rh,Td,Nh,ah,dh,au,su],pipes:[Cu],encapsulation:2}),jj),canActivate:[zy]},{path:"systasks",component:(Rj=function(){function e(t,n,i,r){p(this,e),this.visbocenterService=t,this.visbosettingService=n,this.messageService=i,this.alertService=r}return m(e,[{key:"ngOnInit",value:function(){this.systemVC=this.visbocenterService.getSysVCId(),this.getVisboTasks()}},{key:"getVisboTasks",value:function(){var e=this;this.log("getVisboTasks"),this.visbosettingService.getVCSettingByType(this.systemVC,"Task",!0).subscribe((function(t){e.vcsetting=t,e.sortTable(void 0),e.log("get Settings success "+t.length),e.alertService.clear()}),(function(t){e.log("get Settings failed: error: ".concat(t.status," message: ").concat(t.error.message)),e.alertService.error(Zv(t))}))}},{key:"helperTaskIndex",value:function(e){this.taskIndex=e}},{key:"pageTaskIndex",value:function(e){var t;(t=this.taskIndex+e)<0&&(t=0),t>=this.vcsetting.length&&(t=this.vcsetting.length-1),this.taskIndex=t}},{key:"executeTask",value:function(){var e=this;this.log("execute Task Immediately: ".concat(this.vcsetting[this.taskIndex].name," ")),this.vcsetting[this.taskIndex].value.nextRun=new Date,this.visbosettingService.updateVCSetting(this.systemVC,this.vcsetting[this.taskIndex],!0).subscribe((function(t){e.log("execute Task success "+JSON.stringify(t)),e.alertService.success("Successfully set Task to execute",!1),e.vcsetting[e.taskIndex]=t}),(function(t){e.log("execute Task failed: error: ".concat(t.status," message: ").concat(t.error.message)),e.alertService.error(Zv(t))}))}},{key:"sortTable",value:function(e){this.vcsetting&&(void 0===e&&void 0!==this.sortColumn||(void 0===this.sortColumn&&(this.sortColumn=1),e!==this.sortColumn&&(this.sortColumn=e,this.sortAscending=void 0),this.sortAscending=void 0===this.sortAscending?0===e:!this.sortAscending),1===this.sortColumn?this.vcsetting.sort((function(e,t){return qv(e.name,t.name)})):2===this.sortColumn?this.vcsetting.sort((function(e,t){var n=0;return e.value.lastRun>t.value.lastRun?n=1:e.value.lastRun<t.value.lastRun&&(n=-1),n})):3===this.sortColumn?this.vcsetting.sort((function(e,t){var n=0;return e.value.nextRun>t.value.nextRun?n=1:e.value.nextRun<t.value.nextRun&&(n=-1),n})):4===this.sortColumn&&this.vcsetting.sort((function(e,t){var n=0,i=0;return e.value.taskSpecific&&e.value.taskSpecific.result&&(n=e.value.taskSpecific.result),t.value.taskSpecific&&t.value.taskSpecific.result&&(i=t.value.taskSpecific.result),n-i})),this.sortAscending||this.vcsetting.reverse())}},{key:"log",value:function(e){this.messageService.add("Sys Tasks: "+e)}}]),e}(),Rj.\u0275fac=function(e){return new(e||Rj)(Za(my),Za(Sk),Za(tf),Za(Zm))},Rj.\u0275cmp=wt({type:Rj,selectors:[["app-systasks"]],decls:29,vars:2,consts:[[1,"well"],[1,"row"],[1,"col"],[1,"panel-heading"],["type","button",1,"btn","btn-primary","float-right",3,"click"],[1,"container-fluid"],[1,"panel-body"],[1,"table","table-hover","table-sortable"],[3,"click"],[1,"d-none","d-md-table-cell",3,"click"],["data-toggle","modal","data-target","#TaskDetail",3,"click",4,"ngFor","ngForOf"],["id","TaskDetail","tabindex","-1","role","dialog","aria-labelledby","Task Detail","aria-hidden","true",1,"modal","fade"],["class","modal-dialog modal-lg modal-dialog-centered","role","document",4,"ngIf"],["data-toggle","modal","data-target","#TaskDetail",3,"click"],[1,"d-none","d-md-table-cell"],["title","detail",1,"Detail"],["role","document",1,"modal-dialog","modal-lg","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header"],["id","TaskDetailTitle",1,"modal-title"],["type","button","data-dismiss","modal","aria-label","Close",1,"close"],["aria-hidden","true"],[1,"modal-body"],[1,"col-10"],["type","button","title","Prev Task",1,"btn","btn-secondary",3,"click"],[1,"col-2"],["type","button","title","Next Task",1,"btn","btn-secondary","align-self-end",3,"click"],[1,"form-group"],[1,"col-4","col-form-label"],[1,"col-7","form-control-static"],[4,"ngIf"],[1,"modal-footer","align-items-end"],["type","button","data-dismiss","modal",1,"btn","btn-secondary"],["type","button","data-dismiss","modal",1,"btn","btn-primary",3,"click"]],template:function(e,t){1&e&&(io(0,"app-sysnavbar"),to(1,"div",0),to(2,"div",1),to(3,"div",2),to(4,"h2",3),So(5," Visbo Task System View "),no(),no(),to(6,"div",2),to(7,"button",4),uo("click",(function(){return t.getVisboTasks()})),So(8,"Refresh"),no(),no(),no(),to(9,"div"),to(10,"div",5),to(11,"div",6),to(12,"table",7),to(13,"thead"),to(14,"tr"),to(15,"th",8),uo("click",(function(){return t.sortTable(1)})),So(16,"Name"),no(),to(17,"th",9),uo("click",(function(){return t.sortTable(2)})),So(18,"Last Run"),no(),to(19,"th",9),uo("click",(function(){return t.sortTable(3)})),So(20,"Next Run"),no(),to(21,"th",8),uo("click",(function(){return t.sortTable(4)})),So(22,"Last Result"),no(),to(23,"th"),So(24,"Detail"),no(),no(),no(),to(25,"tbody"),Ya(26,mj,15,10,"tr",10),no(),no(),no(),no(),no(),no(),to(27,"div",11),Ya(28,kj,28,2,"div",12),no()),2&e&&(zi(26),Xa("ngForOf",t.vcsetting),zi(2),Xa("ngIf",t.taskIndex>=0&&t.taskIndex<t.vcsetting.length))},directives:[mV,au,su,Fh,xd,Gh],pipes:[Cu],styles:[""]}),Rj),canActivate:[zy]},{path:"sysconfig",component:(Gj=function(){function e(t,n,i,r){p(this,e),this.visbocenterService=t,this.visbosettingService=n,this.messageService=i,this.alertService=r,this.combinedPerm=void 0,this.permSystem=cy}return m(e,[{key:"ngOnInit",value:function(){this.systemVC=this.visbocenterService.getSysVCId(),this.getVisboConfig(),this.combinedPerm=this.visbocenterService.getSysAdminRole()}},{key:"getVisboConfig",value:function(){var e=this;this.log("get VisboConfig Values"),this.visbosettingService.getVCSettingByType(this.systemVC,"SysConfig",!0).subscribe((function(t){e.vcsetting=t,e.sortTable(1),e.log("get Settings success "+t.length)}),(function(t){e.log("get Settings failed: error: ".concat(t.status," message: ").concat(t.error.message)),e.alertService.error(Zv(t))}))}},{key:"getMainInfo",value:function(e){var t="";if(e.value)switch(e.name){case"UI URL":t=e.value.UIUrl;break;case"SMTP":t=e.value.auth&&e.value.auth.user;break;case"PW Policy":t=(e.value.Description||"").substring(0,60).concat("...");break;case"DEBUG":t=JSON.stringify(e.value).substring(0,60).concat("...");break;case"Log Age":t=e.value.duration;break;case"REDIS":t=e.value.host}return t||""}},{key:"helperConfigName",value:function(e){for(var t=0;t<this.vcsetting.length;t++)if(this.vcsetting[t].name===e)return t}},{key:"editConfigName",value:function(e){this.log("Edit Config  "+e);for(var t=0;t<this.vcsetting.length;t++)if(this.vcsetting[t].name===e)return this.editIndex=t,t}},{key:"updateConfig",value:function(e){var t=this;this.log("Update Config  "+JSON.stringify(e)),this.visbosettingService.updateVCSetting(this.systemVC,e,!0).subscribe((function(n){t.log("set System Config success "+JSON.stringify(n)),t.alertService.success("Successfully changed System Configuration",!0),t.vcsetting[t.helperConfigName(e.name)]=n}),(function(e){t.log("set System Config failed: error: ".concat(e.status," message: ").concat(e.error.message)),t.alertService.error(Zv(e))}))}},{key:"hasSystemPerm",value:function(e){return(this.combinedPerm.system&e)>0}},{key:"sortTable",value:function(e){this.vcsetting&&(void 0===e&&void 0!==this.sortColumn||(e!==this.sortColumn&&(this.sortColumn=e,this.sortAscending=void 0),this.sortAscending=void 0===this.sortAscending?1===e:!this.sortAscending),1===this.sortColumn?this.vcsetting.sort((function(e,t){return qv(e.name,t.name)})):3===this.sortColumn&&this.vcsetting.sort((function(e,t){return zv(e.updatedAt,t.updatedAt)})),this.sortAscending||this.vcsetting.reverse())}},{key:"log",value:function(e){this.messageService.add("Sys Config: "+e)}}]),e}(),Gj.\u0275fac=function(e){return new(e||Gj)(Za(my),Za(Sk),Za(tf),Za(Zm))},Gj.\u0275cmp=wt({type:Gj,selectors:[["app-sysconfig"]],decls:21,vars:2,consts:[[1,"well"],[1,"row"],[1,"panel-heading"],[1,"container-fluid"],[1,"panel-body"],[1,"table","table-hover","table-sortable"],[3,"click"],[1,"d-none","d-md-table-cell",3,"click"],["data-toggle","modal","data-target","#ConfigValue",3,"click",4,"ngFor","ngForOf"],["id","ConfigValue","tabindex","-1","role","dialog","aria-labelledby","Config Value","aria-hidden","true",1,"modal","fade"],["class","modal-dialog modal-lg modal-dialog-centered","role","document",4,"ngIf"],["data-toggle","modal","data-target","#ConfigValue",3,"click"],["role","document",1,"modal-dialog","modal-lg","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header"],["class","modal-title","id","ConfigDetailTitle",4,"ngIf"],["type","button","data-dismiss","modal","aria-label","Close",1,"close"],["aria-hidden","true"],[1,"modal-body"],[4,"ngIf"],[1,"modal-footer","align-items-end"],["type","button","data-dismiss","modal",1,"btn","btn-secondary"],["type","button","class","btn btn-primary","data-dismiss","modal",3,"click",4,"ngIf"],["id","ConfigDetailTitle",1,"modal-title"],[1,"form-group"],["for","configUIUrl",1,"col-3","col-form-label"],["type","text","name","configUIUrl","placeholder","URL for Web UI",1,"col-7","form-control",3,"ngModel","ngModelChange"],["for","configPWPolicy",1,"col-4","col-form-label"],["type","text","name","configPWPolicy",1,"form-control",3,"ngModel","ngModelChange"],["for","configPWPolicyDesc",1,"col-4","col-form-label"],["name","configPWPolicyDesc",1,"form-control",3,"ngModel","ngModelChange"],["for","configSMTPHost",1,"col-4","col-form-label"],["type","text","name","configSMTPHost",1,"form-control",3,"ngModel","ngModelChange"],["for","configSMTPUser",1,"col-4","col-form-label"],["type","text","name","configSMTPUser",1,"form-control",3,"ngModel","ngModelChange"],["for","configSMTPUserPW",1,"col-4","col-form-label"],["type","password","name","configSMTPUserPW",1,"form-control",3,"ngModel","ngModelChange"],["for","configSMTPPort",1,"col-4","col-form-label"],["type","number","name","configSMTPPort",1,"form-control",3,"ngModel","ngModelChange"],["for","configSMTPConTimeout",1,"col-4","col-form-label"],["type","number","name","configSMTPConTimeout",1,"form-control",3,"ngModel","ngModelChange"],["for","configSMTPGreetTimeout",1,"col-4","col-form-label"],["type","number","name","configSMTPGreetTimeout",1,"form-control",3,"ngModel","ngModelChange"],[1,"custom-control","custom-checkbox"],["type","checkbox","id","check1","name","configSMTPPool",1,"custom-control-input",3,"ngModel","ngModelChange"],["configSMTPPool","ngModel"],["for","check1",1,"custom-control-label"],["type","checkbox","id","check2","name","configSMTPSecure",1,"custom-control-input",3,"ngModel","ngModelChange"],["configSMTPSecure","ngModel"],["for","check2",1,"custom-control-label"],["type","checkbox","id","check3","name","configSMTPTls",1,"custom-control-input",3,"ngModel","ngModelChange"],["configSMTPTls","ngModel"],["for","check3",1,"custom-control-label"],["for","configREDISHost",1,"col-4","col-form-label"],["type","text","name","configREDISHost",1,"form-control",3,"ngModel","ngModelChange"],["for","configREDISPort",1,"col-4","col-form-label"],["type","number","name","configREDISPort",1,"form-control",3,"ngModel","ngModelChange"],[1,"form-group","row"],[1,"col-3","col-form-label"],["name","VC",1,"col-8","form-control",3,"ngModel","ngModelChange"],["value","fatal"],["value","warn"],["value","info"],["value","debug"],["value","trace"],["name","VP",1,"col-8","form-control",3,"ngModel","ngModelChange"],["name","VPV",1,"col-8","form-control",3,"ngModel","ngModelChange"],["name","USER",1,"col-8","form-control",3,"ngModel","ngModelChange"],["name","MAIL",1,"col-8","form-control",3,"ngModel","ngModelChange"],["name","OTHER",1,"col-8","form-control",3,"ngModel","ngModelChange"],["name","All",1,"col-8","form-control",3,"ngModel","ngModelChange"],["for","configLogAge",1,"col-4","col-form-label"],["type","number","name","configLogAge",1,"form-control",3,"ngModel","ngModelChange"],["type","button","data-dismiss","modal",1,"btn","btn-primary",3,"click"]],template:function(e,t){1&e&&(io(0,"app-sysnavbar"),to(1,"div",0),to(2,"div",1),to(3,"h2",2),So(4," Visbo Config System View "),no(),no(),to(5,"div"),to(6,"div",3),to(7,"div",4),to(8,"table",5),to(9,"thead"),to(10,"tr"),to(11,"th",6),uo("click",(function(){return t.sortTable(1)})),So(12,"Name"),no(),to(13,"th",7),uo("click",(function(){return t.sortTable(2)})),So(14,"Info"),no(),to(15,"th",6),uo("click",(function(){return t.sortTable(3)})),So(16,"Updated"),no(),no(),no(),to(17,"tbody"),Ya(18,Cj,9,6,"tr",8),no(),no(),no(),no(),no(),no(),to(19,"div",9),Ya(20,Lj,23,13,"div",10),no()),2&e&&(zi(18),Xa("ngForOf",t.vcsetting),zi(2),Xa("ngIf",t.vcsetting&&t.editIndex>=0))},directives:[mV,au,su,Fh,xd,Gh,Ad,Td,Nh,Wd,Cd,rh,ah,dh],pipes:[Cu],styles:[""]}),Gj),canActivate:[zy]},{path:"",redirectTo:"/dashboard",pathMatch:"full"},{path:"**",redirectTo:"/dashboard"}],qj=((Nj=function e(){p(this,e)}).\u0275mod=Mt({type:Nj}),Nj.\u0275inj=we({factory:function(e){return new(e||Nj)},imports:[[Fm.forRoot(Kj,{onSameUrlNavigation:"reload"})],Fm]}),Nj),zj=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/assets/i18n/",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:".json";p(this,e),this.http=t,this.prefix=n,this.suffix=i}return m(e,[{key:"getTranslation",value:function(e){return this.http.get("".concat(this.prefix).concat(e).concat(this.suffix))}}]),e}(),Qj=((Fj=function(){function e(t,n){p(this,e),this.authenticationService=t,this.alertService=n}return m(e,[{key:"intercept",value:function(e,t){var n=this,i=JSON.parse(localStorage.getItem("currentToken"));return i&&(e=e.clone({setHeaders:{"access-key":""+i}})),t.handle(e).pipe(af((function(e){return e&&401===e.status&&(console.log("Interceptor: Session Expired, redirect to login"),n.authenticationService.logout(),n.alertService.error("Session expired",!0),location.reload()),nf(e)})))}}]),e}()).\u0275fac=function(e){return new(e||Fj)(ot(Af),ot(Zm))},Fj.\u0275prov=Ve({token:Fj,factory:Fj.\u0275fac}),Fj),Wj={provide:Vf,useFactory:function(){var e=new Vf,t=(window||{}).__env||{};for(var n in t)t.hasOwnProperty(n)&&(e[n]=window.__env[n]);return e},deps:[]},Jj=((Hj=function e(){p(this,e)}).\u0275mod=Mt({type:Hj}),Hj.\u0275inj=we({factory:function(e){return new(e||Hj)},providers:[],imports:[[wu,Bw]]}),Hj),Yj=((Bj=function e(){p(this,e)}).\u0275mod=Mt({type:Bj,bootstrap:[sy]}),Bj.\u0275inj=we({factory:function(e){return new(e||Bj)},providers:[ud,Cu,zy,Zm,Af,vO,my,Sk,dk,Ew,hV,zR,fj,{provide:xv,useClass:Qj,multi:!0},tf,Wj],imports:[[sd,Zh,qj,Fw,Kv,Nb.forRoot({loader:{provide:fb,useFactory:$j,deps:[Sv]}}),Jj]]}),Bj);function $j(e){return new zj(e)}ad().bootstrapModule(Yj)}},[[0,0]]])}();